{"backend":{"files":{"apps":{"arcadeBreakout.js":"71e13c2565a0340800e0cc7eae394d946fb159c31d582f57fb16d8c5bee4e4366352a085edd2a56e5ca759910d73f6ef108482369b5251cb8e7c39ec277a1419","links":{"arcadeBreakout.lnk":"5917fe51875e0976fa2581a6619ac1e2e9132967f03c0f8ef860ad7330c969f6475c9815d61376f0a8655faf1c63d32671bab6f46810fb5fbc6dafb064117ee6"}}},"permissions":{"apps/arcadeBreakout.js":{"world":"rx"},"apps/links/arcadeBreakout.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"71e13c2565a0340800e0cc7eae394d946fb159c31d582f57fb16d8c5bee4e4366352a085edd2a56e5ca759910d73f6ef108482369b5251cb8e7c39ec277a1419":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GRAB_ATTENTION\n// signature: fd4364525df99a46f0a1077849814e237a756f383935eae7f0c6d482f78a6c9591f7b224da0c7c56a2ebbb64d25b51379141c7599cf1da861639767455b85337\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\t// Gamedev-Canvas-workshop by Andrzej Mazur and Mozilla Contributors (https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses) is licensed under CC-BY-SA 2.5 (http://creativecommons.org/licenses/by-sa/2.5/).\n\t// Any copyright to code samples and snippets is dedicated to the Public Domain (http://creativecommons.org/publicdomain/zero/1.0/).\n\t// Adapted to PCOS v3 by PC\n\tawait availableAPIs.windowTitleSet(\"Breakout\");\n\tawait availableAPIs.windowResize([480, 357]);\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tdocument.body.style.background = \"white\";\n\tlet startButton = document.createElement(\"button\");\n\tstartButton.innerText = \"Start\";\n\tlet canvas = document.createElement(\"canvas\");\n\tcanvas.width = 480;\n\tcanvas.height = 320;\n\tcanvas.style = \"width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;\";\n\tdocument.body.appendChild(canvas);\n\tdocument.body.appendChild(startButton);\n\tlet ctx = canvas.getContext(\"2d\");\n\tlet ballRadius = 10;\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height - 30;\n\tlet dx = 2;\n\tlet dy = -2;\n\tlet paddleHeight = 10;\n\tlet paddleWidth = 75;\n\tlet paddleX = (canvas.width - paddleWidth) / 2;\n\tlet rightPressed = false;\n\tlet leftPressed = false;\n\tlet brickRowCount = 5;\n\tlet brickColumnCount = 3;\n\tlet brickWidth = 75;\n\tlet brickHeight = 20;\n\tlet brickPadding = 10;\n\tlet brickOffsetTop = 30;\n\tlet brickOffsetLeft = 30;\n\tlet score = 0;\n\tlet lives = 3;\n\n\tlet bricks = [];\n\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\tbricks[c] = [];\n\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\tbricks[c][r] = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstatus: 1\n\t\t\t};\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"keydown\", keyDownHandler, false);\n\tdocument.addEventListener(\"keyup\", keyUpHandler, false);\n\tdocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\n\n\tfunction keyDownHandler(e) {\n\t\tif (e.code == \"ArrowRight\") {\n\t\t\trightPressed = true;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = true;\n\t\t}\n\t}\n\n\tfunction keyUpHandler(e) {\n\t\tif (e.code == 'ArrowRight') {\n\t\t\trightPressed = false;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = false;\n\t\t}\n\t}\n\n\tfunction mouseMoveHandler(e) {\n\t\tlet relativeX = e.clientX - canvas.offsetLeft;\n\t\tif (relativeX > 0 && relativeX < canvas.width) {\n\t\t\tpaddleX = relativeX - paddleWidth / 2;\n\t\t}\n\t}\n\n\tfunction collisionDetection() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tlet b = bricks[c][r];\n\t\t\t\tif (b.status == 1) {\n\t\t\t\t\tif (x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {\n\t\t\t\t\t\tdy = -dy;\n\t\t\t\t\t\tb.status = 0;\n\t\t\t\t\t\tscore++;\n\t\t\t\t\t\tif (score == brickRowCount * brickColumnCount) {\n\t\t\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawBall() {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, ballRadius, 0, Math.PI * 2);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawPaddle() {\n\t\tctx.beginPath();\n\t\tctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawBricks() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tif (bricks[c][r].status == 1) {\n\t\t\t\t\tlet brickX = (r * (brickWidth + brickPadding)) + brickOffsetLeft;\n\t\t\t\t\tlet brickY = (c * (brickHeight + brickPadding)) + brickOffsetTop;\n\t\t\t\t\tbricks[c][r].x = brickX;\n\t\t\t\t\tbricks[c][r].y = brickY;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.rect(brickX, brickY, brickWidth, brickHeight);\n\t\t\t\t\tctx.fillStyle = \"#0095DD\";\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawScore() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Score: \" + score, 8, 20);\n\t}\n\n\tfunction drawLives() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Lives: \" + lives, canvas.width - 65, 20);\n\t}\n\n\tfunction draw() {\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tdrawBricks();\n\t\tdrawBall();\n\t\tdrawPaddle();\n\t\tdrawScore();\n\t\tdrawLives();\n\t\tcollisionDetection();\n\n\t\tif (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {\n\t\t\tdx = -dx;\n\t\t}\n\t\tif (y + dy < ballRadius) {\n\t\t\tdy = -dy;\n\t\t} else if (y + dy > canvas.height - ballRadius) {\n\t\t\tif (x > paddleX && x < paddleX + paddleWidth) {\n\t\t\t\tdy = -dy;\n\t\t\t} else {\n\t\t\t\tlives--;\n\t\t\t\tif (!lives) {\n\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t} else {\n\t\t\t\t\tx = canvas.width / 2;\n\t\t\t\t\ty = canvas.height - 30;\n\t\t\t\t\tdx = 2;\n\t\t\t\t\tdy = -2;\n\t\t\t\t\tpaddleX = (canvas.width - paddleWidth) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (rightPressed && paddleX < canvas.width - paddleWidth) {\n\t\t\tpaddleX += 7;\n\t\t} else if (leftPressed && paddleX > 0) {\n\t\t\tpaddleX -= 7;\n\t\t}\n\n\t\tx += dx;\n\t\ty += dy;\n\t\trequestAnimationFrame(draw);\n\t}\n\tstartButton.onclick = function() {\n\t\tstartButton.remove();\n\t\tdraw();\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});\nnull;","5917fe51875e0976fa2581a6619ac1e2e9132967f03c0f8ef860ad7330c969f6475c9815d61376f0a8655faf1c63d32671bab6f46810fb5fbc6dafb064117ee6":"{\"path\":\"system/apps/arcadeBreakout.js\",\"name\":\"Breakout\"}"},"buildInfo":{"for":"1317","when":1750516195004,"signer":"moduleSigner","critical":false,"signature":"a8f1af2e027b7aa8f229535e43a853252448582b89271ba7caa1a7ca9d43dfb63c8d9f95e4780ec0ba141239209b3804f9ab4ee8b61ba922ff08a57b1aef16cd"}}