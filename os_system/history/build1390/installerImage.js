// This is a generated file. Please modify the corresponding files, not this file directly.
// (c) Copyright 2025 PCsoft. MIT license: https://spdx.org/licenses/MIT.html
let installerModuleBundle = {"00-keys.fs":{"backend":{"files":{"etc":{"keys":{"automaticSigner":"c096c8aaa19574c94e088bf1fd8bd7774a0c8c42e7e59b5d77e88f13bfb74ffb407fe8cba6fa4c4e3533d4b33b4b2dab4226cea2bb1e400f10709bdd48810d02","khrl":{"list.khrl":"bbf176a4a2e6dcecd0995ce1d890ecfac6e47cdd0fff33ec9ae561bd2101c00d4ad7b9a21d4a180aa8a24af39368cc746a8fc1044948e8f5bd457f78a02e5afb"},"moduleSigner":"327c6c9f97b3353a818066a608584c1f4525200eec47c1898c935c63e20fb8c66a0bb64df3c19a66429fc0190b8140849200d808bb275955a3952c9c409ede5b","pcosIntermediate":"0f537c7a7782cd2893f469d268c7a6a265b0d4593dc9c8094b272202ad4a870b72b01bb1ce0d8abe09d605de75853bbe233b7e6f74457dbddab4eada05959bd0"}}},"permissions":{"etc/keys/automaticSigner":{"world":"rx"},"etc/keys/khrl/list.khrl":{"world":"rx"},"etc/keys/khrl/":{"world":"rx"},"etc/keys/moduleSigner":{"world":"rx"},"etc/keys/pcosIntermediate":{"world":"rx"},"etc/keys/":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"c096c8aaa19574c94e088bf1fd8bd7774a0c8c42e7e59b5d77e88f13bfb74ffb407fe8cba6fa4c4e3533d4b33b4b2dab4226cea2bb1e400f10709bdd48810d02":"{\"signature\":\"5c5c6fd48cdd24b27202f2a0a790583db2100a98f5cca5116ce83ab17ba4bddd995789e5d070d48f163d3ae48a9b9db1e4111d63df4ded2fc03122e64dd1af0c\",\"keyInfo\":{\"key\":{\"crv\":\"Ed25519\",\"x\":\"_HNsnL890zN3JRAnsCsuY7ylCMDc5_TRv3ka8R1v0Xc\",\"kty\":\"OKP\"},\"usages\":[\"appTrust\"],\"signedBy\":\"pcosIntermediate\"}}","bbf176a4a2e6dcecd0995ce1d890ecfac6e47cdd0fff33ec9ae561bd2101c00d4ad7b9a21d4a180aa8a24af39368cc746a8fc1044948e8f5bd457f78a02e5afb":"{\"list\":[],\"signature\":\"db1cf22f8dd93d745fb81b49f84349ac6ff7cec7b3d2b223ece67c5c125a69084435eddacbb0c8aa3c1b3ce7d5215d55264b08b5a1f6fe5d36581da855508a09\"}","327c6c9f97b3353a818066a608584c1f4525200eec47c1898c935c63e20fb8c66a0bb64df3c19a66429fc0190b8140849200d808bb275955a3952c9c409ede5b":"{\"signature\":\"f77ae544e4a2b06df0ff29daf91529f9dc171381533f83f00718ecfd58fec64357f41f05b381106af14aca42555e8b5d04409d6d39b8b2a06c6451691fe8e709\",\"keyInfo\":{\"key\":{\"crv\":\"Ed25519\",\"x\":\"B37OlkJK3rhgF90Vb8k1ZHH9mPFJvBiiw1d65kOMGtw\",\"kty\":\"OKP\"},\"usages\":[\"moduleTrust\"],\"signedBy\":\"pcosIntermediate\"}}","0f537c7a7782cd2893f469d268c7a6a265b0d4593dc9c8094b272202ad4a870b72b01bb1ce0d8abe09d605de75853bbe233b7e6f74457dbddab4eada05959bd0":"{\"signature\":\"495297498a49528b3c7d1cc43173825eac2b3bd4ede5744864e1ba542b8cedd742141b50dd8acbdcaea8b65b564fc70dc801a44891cfa4ee5e5e92a120f4ee01\",\"keyInfo\":{\"key\":{\"crv\":\"Ed25519\",\"x\":\"qKoTLfZH16PqwOKEnll19B7lDp3tEjeyCXBzGIhGwNY\",\"kty\":\"OKP\"},\"usages\":[\"keyTrust\"]}}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941363,"critical":true,"bootOrder":"00","signature":"cb06b437f6629ca6fe80e0d622976729e71524ac4b0f40e93eec1825af6a0ef76e3646760c4473e6c93dc419fff03f7c8d6ed5e2fe91645779eff3591045aa0f"}},"50-bootable.fs":{"backend":{"files":{"boot":{"00-pcos.js":"ac0d37327a9036dfb3aaf0d12925520b44c2f55a9c8a55f64f76c306b1406b15d672df32b16a95ef1e4b7276f3528a6e1844514826faaef66b0550accb4e3976","00-pcosksk.js":"5a7b240ea5028d479313283443b9ee15e9f02970e716bce002c690bd897950cefa4ac850cdd3c2aa7af8dfe7a05fb0074fa4fa79071a9c6246c40c32ee996532","01-fs.js":"c2e115c5694676dfb5fc43d2a3f0cc0ef5dde627152e90e07208f47359f886b41e132bcad27541b2aa130c8ee62c878e2fd756f31af68aeffd8085e03b19991e","01-fsck.js":"4fa3bce8f06d88da25948da31a76eeae5869f968ae4be03fc7e299fbc02831170381041e1582bbb16f81fe9c201a4aab1ab174623eaa9860e443766709f0e884","01-fsmodules.js":"eb3f022f67e93e5ee89a9f750d009160db60b2a1c34ec4860cbbf23d7665fe1da1a974b1989081e2052c3d0d26f160e9bfaf57f111a3a8452973f1415b2ccca1","02-ui.js":"37802a9cc3294cdff132dfea3d2139da6ff6f06f4fb01f807b407edafee08c48c25590582bace7d7527887338ee967a5af48ff720b2e3a2172a9d43f7ab60ffb","04-ipc.js":"1a9087f39e9f3483603b2ee22c40543a3d8c01f1b0080a69456a4489f50fe81209f23ca493ef37096f8b8a8573483d29340a28fb756514c6570c4c794d2f224c","04-websockets.js":"bfea0ffd842191d06f1cfc57087d871e5de46eb8c9b31ee9b09198071a5defb31b4f90907351c5bce674da1fd23266e1256dd5d4f58faa335384fdb9c175f651","05-lull.js":"c97f51464c409b921a902ff8cef2f59739301d28cf18984428fedc373d185b2df788566d8f80404fb5ca7543982b3419bd6a66bf3dae1f642dfc520e7b0411c3","05-network.js":"366057fa3302ff309c90bd6d59eedb5c4f07141c2e150e22dac519e73b8a36547b55bf7aea87837e473eb8c8a4554a589df53ec55b3edf7ef369d74affc1794b","05-reeapis.js":"9cbc090e61fe82b14bae95dc2031282775c8cfebc4dfaa473631307a3b468c112b36b4b0a03f407c1200b2f684079ac7ca40678c89e48ded31f38198bc08e605","06-csp.js":"f30f924abc69a9ce7e35b9e353e1045ba911e57d37a99933c0cc826f5e03f5f3725bffdd09e6daa0cdfc3cff38c1b47a65416a8a389c627e696f9813435aa51e","06-locales.js":"e3aaaa97f0c9d71a23a5c6c7460bc84cf42e4e7218e83788ca42a22c1859a49a0c02b9a57bdac6043fab4885c582ca6fc910cec1f409f58dc9ad0049e4461f49","07-tasks.js":"9f1541f40579ccc5abd8e534df52fbfaeb66ab2d8bd53440b64434f6c98e8eb23df0e11bba5479a566f183ef3f7d8865b06e62754ed9e679e54eee53d86845df","09-logout.js":"4308c34c1effc1e3ede6d994b41157c53c8ea8fe79ee646f4b465cfb90a24a15463926d1bc065d156516cb60a2b4f294236c9270ac8cc9ee56ce22181b41d3d6","09-restart.js":"b1c863692cf08fd057475697a8b3fb569138ea3a0788927435b93a39c83ea5e88f560a0b4e8f13c15a7d42581c117a9b79ae3507138e88526c267df1fbc69f92","11-userfriendliness.js":"af307126dca2c780b36326c42138f30118b320c1d8c1780faf15b94c7f3d752c9aa81e7c1780d523d5c4be8d20c58efe572cbca5149e52fa432e4223d18c6298","12-tokens.js":"feceda0f61befeabef8687f1e02de3dabc8753f0175519021274deb32110fa955b65325777bc89393de6c0d545463881a7f8dd691673788b9044b676f0d992d8","12-users.js":"16e67f0e5f8d5c64290b14fe92afbaca966468b29f1541eec96216c37dd848a006ee5f6053f609f1934ceebf1505c0b54709b8f0909744c312312fa5b74616c0","13-authui.js":"a9595ad70ef97186ddd3dada981212f170db75b2059cf6f103bf4486f5b7b7377f302093b049c3a119ab441d7be22bec9c9438ede7235e5dcf07408b58c9b65d","13-consentui.js":"48113822780009ae6737c850f8dda4ebc93928907105deb7f4ea620cdc38892a8369cbb25b0c17d14028d167ce75aeb2eeebced43ab5168643686da78b4e83a4","14-logon-requirement.js":"ae53b7b641724ee2e85bf300016e6d600676171f8ff9c0c9ddbc65d1f76c2cc65d70d870100a47e5fc36202621db49d017af0f1a520d0195c1bf5fcc008ffc15","18-logon-requirement-enforce.js":"8e3c5a5d5bc5e543079c065532a48516ce8b4c48b8999547204e07bcf9b0fa810ceb9ef1980a8b3d478062abce468a057c2a3fd14c3773a42336524be7ffdaac","99-finished.js":"9c29176a7d43717910bf3b996e828aaae440cb15cd436a4dff4c86dc925b192ad7ab6c980ef56924abedb2208ae84aca2d111d97fe40742a5d9bb74eb9c740c6"}},"permissions":{"boot/00-pcos.js":{"world":"rx"},"boot/00-pcosksk.js":{"world":"rx"},"boot/01-fs.js":{"world":"rx"},"boot/01-fsck.js":{"world":"rx"},"boot/01-fsmodules.js":{"world":"rx"},"boot/02-ui.js":{"world":"rx"},"boot/04-ipc.js":{"world":"rx"},"boot/04-websockets.js":{"world":"rx"},"boot/05-lull.js":{"world":"rx"},"boot/05-network.js":{"world":"rx"},"boot/05-reeapis.js":{"world":"rx"},"boot/06-csp.js":{"world":"rx"},"boot/06-locales.js":{"world":"rx"},"boot/07-tasks.js":{"world":"rx"},"boot/09-logout.js":{"world":"rx"},"boot/09-restart.js":{"world":"rx"},"boot/11-userfriendliness.js":{"world":"rx"},"boot/12-tokens.js":{"world":"rx"},"boot/12-users.js":{"world":"rx"},"boot/13-authui.js":{"world":"rx"},"boot/13-consentui.js":{"world":"rx"},"boot/14-logon-requirement.js":{"world":"rx"},"boot/18-logon-requirement-enforce.js":{"world":"rx"},"boot/99-finished.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"ac0d37327a9036dfb3aaf0d12925520b44c2f55a9c8a55f64f76c306b1406b15d672df32b16a95ef1e4b7276f3528a6e1844514826faaef66b0550accb4e3976":"// @pcos-app-mode native\nconst pcos_version = \"1390\";\nconst build_time = 1755547941329;\n \nlet modules = {\n\tcore: coreExports,\n\tpcos_version,\n\tbuild_time\n};\nglobalThis.modules = modules;\n\nasync function panic(code, component) {\n\tmodules.shuttingDown = true;\n\tif (modules.session) modules.session.muteAllSessions();\n\tlet baseLocales = {\n\t\t\"PANIC_LINE1\": \"A critical problem has been detected while using the operating system. Its stability is at risk now.\",\n\t\t\"PANIC_LINE2\": \"Problem code: %s\",\n\t\t\"PANIC_UNSPECIFIED_ERROR\": \"UNSPECIFIED_ERROR\",\n\t\t\"PROBLEMATIC_COMPONENT\": \"Problematic component: %s\",\n\t\t\"PROBLEMATIC_PARAMS\": \"Problematic parameters: %s\",\n\t\t\"PROBLEMATIC_JS\": \"Problematic JavaScript: %s: %s\",\n\t\t\"PANIC_LINE3\": \"If you have seen this error message the first time, attempt rebooting.\",\n\t\t\"PANIC_LINE4\": \"If you see this error message once more, there is something wrong with the system.\",\n\t\t\"PANIC_LINE5\": \"You can try repairing the filesystem by placing a .fsck file on the system root mountpoint, with the value \\\"recover\\\" in it.\",\n\t\t\"PANIC_LINE6\": \"Proper shutdown procedure follows now:\",\n\t\t\"PANIC_TASK_KILLED\": \"task:%s: killed\",\n\t\t\"PANIC_MOUNT_UNMOUNTED\": \"mount:%s: unmounted\",\n\t\t\"PANIC_MOUNT_FAILED\": \"mount:%s: %s: %s\"\n\t}\n\tlet currentLocales = modules.locales;\n\tif (currentLocales) currentLocales = currentLocales[navigator.language.slice(0, 2).toLowerCase()];\n\tif (!currentLocales) currentLocales = baseLocales;\n\tif (!Object.keys(baseLocales).every(key => currentLocales.hasOwnProperty(key))) currentLocales = baseLocales;\n\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE1);\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE2.replace(\"%s\", (code || currentLocales.PANIC_UNSPECIFIED_ERROR)));\n\tif (component) {\n\t\tif (component.name) modules.core.tty_bios_api.println(currentLocales.PROBLEMATIC_COMPONENT.replace(\"%s\", component.name));\n\t\tif (component.params) modules.core.tty_bios_api.println(currentLocales.PROBLEMATIC_PARAMS.replace(\"%s\", JSON.stringify(component.params, null, \"\\t\")));\n\t\tif (component.underlyingJS) {\n\t\t\tmodules.core.tty_bios_api.println(currentLocales.PROBLEMATIC_JS.replace(\"%s\", component.underlyingJS.name).replace(\"%s\", component.underlyingJS.message));\n\t\t\tif (component.underlyingJS.stack) modules.core.tty_bios_api.println(component.underlyingJS.stack);\n\t\t}\n\t}\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE3);\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE4);\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE5);\n\tmodules.core.tty_bios_api.println(currentLocales.PANIC_LINE6);\n\ttry {\n\t\tmodules.websocket._handles[modules.network.ws].ws.onclose = null;\n\t\tmodules.websocket._handles[modules.network.ws].ws.close();\n\t\tdelete modules.websocket._handles[modules.network.ws];\n\t} catch {}\n\tif (modules.tasks) for (let task in modules.tasks.tracker) {\n\t\tmodules.core.tty_bios_api.println(currentLocales.PANIC_TASK_KILLED.replace(\"%s\", modules.tasks.tracker[task].file));\n\t\tmodules.tasks.tracker[task].ree.closeDown();\n\t}\n\tif (modules.fs) for (let mount in modules.fs.mounts) {\n\t\ttry {\n\t\t\tawait modules.fs.unmount(mount);\n\t\t\tmodules.core.tty_bios_api.println(currentLocales.PANIC_MOUNT_UNMOUNTED.replace(\"%s\", mount));\n\t\t} catch (e) {\n\t\t\tmodules.core.tty_bios_api.println(currentLocales.PANIC_MOUNT_FAILED.replace(\"%s\", mount).replace(\"%s\", e.name).replace(\"%s\", e.message));\n\t\t}\n\t}\n\tif (modules.session) modules.session.destroy();\n\tthrow (component ? component.underlyingJS : null) || code || \"UNSPECIFIED_ERROR\";\n}\n\nfunction startupMemo() {\n\tmodules.core.tty_bios_api.println(\"PCsoft PCOS 3, build \" + pcos_version);\n\tmodules.core.tty_bios_api.println(\"Logical processors: \" + navigator.hardwareConcurrency);\n\tmodules.core.tty_bios_api.println(\"Memory available: \" + ((navigator.deviceMemory * 1024) || \"<unavailable>\") + \" MB\");\n}\nstartupMemo();","5a7b240ea5028d479313283443b9ee15e9f02970e716bce002c690bd897950cefa4ac850cdd3c2aa7af8dfe7a05fb0074fa4fa79071a9c6246c40c32ee996532":"async function ksk() {\n\t// @pcos-app-mode native\n\t// Key signing key\n\tlet ksk = {\"crv\":\"Ed25519\",\"x\":\"mjUAHanuB4DVdOViC_DRkE2QHqv9rAo2INDQHU3YgfY\",\"kty\":\"OKP\"};\n\tif (ksk.stub == \"present\") {\n\t\tlet e = new Error(\"The key signing key was not built into this build.\");\n\t\tpanic(\"KEY_SIGNING_KEY_NOT_BUILT\", {\n\t\t\tname: \"ksk\",\n\t\t\tparams: [ \"stub\" ],\n\t\t\tunderlyingJS: e\n\t\t});\n\t\tthrow e;\n\t}\n\tif (ksk.stub != \"present\") modules.ksk = ksk;\n\tif (modules.ksk) {\n\t\ttry {\n\t\t\tmodules.ksk_imported = await crypto.subtle.importKey(\"jwk\", modules.ksk, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t} catch (e) {\n\t\t\tpanic(\"KEY_SIGNING_KEY_IMPORT_FAILED\", {\n\t\t\t\tname: \"ksk\",\n\t\t\t\tunderlyingJS: e\n\t\t\t});\n\t\t\tthrow e;\n\t\t}\n\t}\n}\nawait ksk();","c2e115c5694676dfb5fc43d2a3f0cc0ef5dde627152e90e07208f47359f886b41e132bcad27541b2aa130c8ee62c878e2fd756f31af68aeffd8085e03b19991e":"function loadFs() {\n\t// @pcos-app-mode native\n\tlet fs = {\n\t\tread: async function(file, sessionToken) {\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\treturn await this.mounts[mount].read(file.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\twrite: async function(file, data, sessionToken) {\n\t\t\tlet filePath = file.split(\"/\").slice(1);\n\t\t\tif (filePath.includes(\"\")) throw new Error(\"PATH_INCLUDES_EMPTY\");\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\treturn await this.mounts[mount].write(file.split(\"/\").slice(1).join(\"/\"), data, sessionToken);\n\t\t},\n\t\trm: async function(file, sessionToken) {\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\treturn await this.mounts[mount].rm(file.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\tmkdir: async function(folder, sessionToken) {\n\t\t\tlet filePath = folder.split(\"/\").slice(1);\n\t\t\tif (filePath.includes(\"\")) throw new Error(\"PATH_INCLUDES_EMPTY\");\n\t\t\tlet mount = folder.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\tif (!this.mounts[mount].directory_supported) throw new Error(\"NO_DIRECTORY_SUPPORT\");\n\t\t\treturn await this.mounts[mount].mkdir(folder.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\tpermissions: async function(folder, sessionToken) {\n\t\t\tlet mount = folder.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tif (!this.mounts[mount].permissions_supported) {\n\t\t\t\ttry {\n\t\t\t\t\tlet userInfo = await modules.tokens.info(sessionToken);\n\t\t\t\t\treturn { owner: userInfo.user, group: userInfo.groups[0] || userInfo.user, world: \"rwx\" };\n\t\t\t\t} catch {}\n\t\t\t\treturn { owner: randomNames, group: randomNames, world: \"rwx\" };\n\t\t\t}\n\t\t\treturn await this.mounts[mount].permissions(folder.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\tlsmounts: function() {\n\t\t\treturn Object.keys(this.mounts);\n\t\t},\n\t\tunmount: async function(mount, sessionToken, force) {\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (!this.mounts[mount].read_only && modules.core.bootMode != \"readonly\" && !force) await this.sync(mount, sessionToken);\n\t\t\tif (!force) await this.mounts[mount].unmount(sessionToken);\n\t\t\tdelete this.mounts[mount];\n\t\t},\n\t\tchown: async function(file, owner, sessionToken) {\n\t\t\tlet filePath = file.split(\"/\").slice(1);\n\t\t\tif (filePath.includes(\"\")) throw new Error(\"PATH_INCLUDES_EMPTY\");\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\tif (!this.mounts[mount].permissions_supported) return;\n\t\t\treturn await this.mounts[mount].chown(file.split(\"/\").slice(1).join(\"/\"), owner, sessionToken);\n\t\t},\n\t\tchgrp: async function(file, group, sessionToken) {\n\t\t\tlet filePath = file.split(\"/\").slice(1);\n\t\t\tif (filePath.includes(\"\")) throw new Error(\"PATH_INCLUDES_EMPTY\");\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\tif (!this.mounts[mount].permissions_supported) return;\n\t\t\treturn await this.mounts[mount].chgrp(file.split(\"/\").slice(1).join(\"/\"), group, sessionToken);\n\t\t},\n\t\tchmod: async function(file, permissions, sessionToken) {\n\t\t\tlet filePath = file.split(\"/\").slice(1);\n\t\t\tif (filePath.includes(\"\")) throw new Error(\"PATH_INCLUDES_EMPTY\");\n\t\t\tlet mount = file.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (modules.core.bootMode == \"readonly\") throw new Error(\"READ_ONLY_BMGR\");\n\t\t\tif (this.mounts[mount].read_only) throw new Error(\"READ_ONLY_DEV\");\n\t\t\tif (!this.mounts[mount].permissions_supported) return;\n\t\t\treturn await this.mounts[mount].chmod(file.split(\"/\").slice(1).join(\"/\"), permissions, sessionToken);\n\t\t},\n\t\tls: async function(folder, sessionToken) {\n\t\t\tlet mount = folder.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\treturn await this.mounts[mount].ls(folder.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\tisDirectory: async function(path, sessionToken) {\n\t\t\tlet mount = path.split(\"/\")[0];\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (!path.split(\"/\").slice(1).join(\"/\")) return true;\n\t\t\tif (!this.mounts[mount].directory_supported) return false;\n\t\t\treturn await this.mounts[mount].isDirectory(path.split(\"/\").slice(1).join(\"/\"), sessionToken);\n\t\t},\n\t\tmountInfo: async function(mount) {\n\t\t\treturn {\n\t\t\t\tread_only: this.mounts[mount].read_only || false,\n\t\t\t\tpermissions_supported: this.mounts[mount].permissions_supported || false,\n\t\t\t\tdirectory_supported: this.mounts[mount].directory_supported || false,\n\t\t\t\tfilesystem: this.mounts[mount].filesystem || \"unknown\"\n\t\t\t}\n\t\t},\n\t\tsync: async function(mount, sessionToken) {\n\t\t\tif (!this.mounts.hasOwnProperty(mount)) throw new Error(\"NO_SUCH_DEVICE\");\n\t\t\tif (!this.mounts[mount].read_only && modules.core.bootMode != \"readonly\") return await this.mounts[mount].sync(sessionToken);\n\t\t},\n\t\tmounts: {}\n\t}\n\t\n\tasync function PCFSiDBMount(options) {\n\t\tlet partition;\n\t\ttry {\n\t\t\tpartition = modules.core.disk.partition(options.partition);\n\t\t\tpartition = partition.getData();\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"PARTITION_FAILED: \" + e.toString() + \"\\n---begin stack---\\n\" + e.stack + \"\\n---end stack---\");\n\t\t}\n\t\tif (!Object.keys(partition).includes(\"files\") || !Object.keys(partition).includes(\"permissions\") || !Object.keys(partition).includes(\"id\")) throw new Error(\"PARTITION_NOT_PCFS\");\n\t\tlet partitionId = partition.id;\n\t\tpartition = null;\n\t\treturn {\n\t\t\tread: async function(key) {\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\treturn String(await modules.core.idb.readPart(partitionId + \"-\" + files));\n\t\t\t},\n\t\t\twrite: async function(key, value) {\n\t\t\t\tkey = String(key);\n\t\t\t\tvalue = String(value);\n\t\t\t\tlet existenceChecks = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files[basename] === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet id = files[basename] || crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tawait modules.core.idb.writePart(partitionId + \"-\" + id, value);\n\t\t\t\tif (!files[basename]) this.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"write\", value: id });\n\t\t\t},\n\t\t\trm: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\" && Object.keys(files).length > 0) throw new Error(\"NON_EMPTY_DIR\");\n\t\t\t\tif (typeof files === \"string\") await modules.core.idb.removePart(partitionId + \"-\" + files);\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"delete\" });\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tdelete backend.permissions[key];\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet pathParts = directory.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files !== \"object\") throw new Error(\"IS_A_FILE\");\n\t\t\t\treturn Object.keys(files);\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet existenceChecks = directory.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (files[directory.split(\"/\").slice(-1)[0]]) throw new Error(\"DIR_EXISTS\");\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + directory, { type: \"write\", value: {} });\n\t\t\t},\n\t\t\tpermissions: async function(file) {\n\t\t\t\tfile = String(file);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet permissions = this.backend.permissions[properFile] || {};\n\t\t\t\treturn {\n\t\t\t\t\towner: permissions.owner || randomNames,\n\t\t\t\t\tgroup: permissions.group || randomNames,\n\t\t\t\t\tworld: permissions.world || \"\",\n\t\t\t\t\trandom: !(permissions.owner || permissions.group || permissions.world) ? true : undefined\n\t\t\t\t};\n\t\t\t},\n\t\t\tchown: async function(file, owner) {\n\t\t\t\tfile = String(file);\n\t\t\t\towner = String(owner);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.owner = owner;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchgrp: async function(file, group) {\n\t\t\t\tfile = String(file);\n\t\t\t\tgroup = String(group);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.group = group;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchmod: async function(file, permissions) {\n\t\t\t\tfile = String(file);\n\t\t\t\tpermissions = String(permissions);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.world = permissions;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tsync: async function() {\n\t\t\t\tawait modules.core.disk.sync();\n\t\t\t},\n\t\t\tisDirectory: function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (!files.hasOwnProperty(basename)) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\tif (typeof files[basename] === \"object\") return true;\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tunmount: () => true,\n\t\t\t_recursive_op: function(obj, path, action, stage = 0) {\n\t\t\t\tif (path.split(\"/\").length == (stage + 1)) {\n\t\t\t\t\tif (action.type == \"delete\") delete obj[path.split(\"/\").slice(-1)[0]];\n\t\t\t\t\tif (action.type == \"write\") obj[path.split(\"/\").slice(-1)[0]] = action.value;\n\t\t\t\t} else obj[path.split(\"/\")[stage]] = this._recursive_op(obj[path.split(\"/\")[stage]], path, action, stage + 1);\n\t\t\t\treturn obj;\n\t\t\t},\n\t\t\tdirectory_supported: true,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"PCFS\",\n\t\t\tpermissions_supported: true,\n\t\t\tpartition: null,\n\t\t\tget backend() {\n\t\t\t\tif (!this.partition) this.partition = modules.core.disk.partition(options.partition);\n\t\t\t\treturn this.partition.getData();\n\t\t\t},\n\t\t\tset backend(data) {\n\t\t\t\tif (!this.partition) this.partition = modules.core.disk.partition(options.partition);\n\t\t\t\tthis.partition.setData(data);\n\t\t\t}\n\t\t};\n\t};\n\n\tasync function PCFSiDBAESCryptMount(options) {\n\t\tlet partition;\n\t\ttry {\n\t\t\tpartition = modules.core.disk.partition(options.partition);\n\t\t\tpartition = partition.getData();\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"PARTITION_FAILED: \" + e.toString() + \"\\n---begin stack---\\n\" + e.stack + \"\\n---end stack---\");\n\t\t}\n\t\tif (!Object.keys(partition).includes(\"files\") || !Object.keys(partition).includes(\"permissions\") || !Object.keys(partition).includes(\"cryptodata\") || !Object.keys(partition).includes(\"id\")) throw new Error(\"PARTITION_NOT_PCFS_ENCRYPTED\");\n\t\tif (options.interactivePassword) {\n\t\t\tlet passwordInput = \"\";\n\t\t\tlet tbi = modules.core.tty_bios_api;\n\t\t\tfunction outputPasswordAsking() {\n\t\t\t\ttbi.clear();\n\t\t\t\ttbi.println(\"|--------------------------------------------|\")\n\t\t\t\ttbi.println(\"| Mounting encrypted partition               |\");\n\t\t\t\ttbi.println(\"|--------------------------------------------|\");\n\t\t\t\ttbi.println(\"| Enter your password. Typed \" + passwordInput.length + \" characters. \" + \" \".repeat(Math.max((3 - (passwordInput.length).toString().length), 0)) + \"|\");\n\t\t\t\ttbi.println(\"| Press Enter to mount.                      |\");\n\t\t\t\ttbi.println(\"|--------------------------------------------|\");\n\t\t\t}\n\t\t\twhile (true) {\n\t\t\t\toutputPasswordAsking();\n\t\t\t\tlet key = await tbi.inputKey();\n\t\t\t\tif (key.key == \"Enter\") break;\n\t\t\t\tif (key.key.length == 1) passwordInput += key.key;\n\t\t\t\tif (key.key == \"Backspace\") passwordInput = passwordInput.slice(0, -1);\n\t\t\t}\n\t\t\toptions.password = passwordInput;\n\t\t}\n\t\tif (options.password) options.key = await modules.core.pbkdf2(options.password, partition.cryptodata.salt);\n\t\tif (!options.key) throw new Error(\"GETTING_KEY_FAILED\");\n\t\tlet importedKey = await crypto.subtle.importKey(\"raw\", Uint8Array.from(options.key.match(/.{1,2}/g).map(a => parseInt(a, 16))), { name: \"AES-GCM\" }, false, [ \"encrypt\", \"decrypt\" ]);\n\t\toptions.key = options.key.length + \"L\";\n\t\toptions.password = options.password.length + \"L\";\n\t\tif (partition.cryptodata.passwordLockingInitial) {\n\t\t\tlet baseData = crypto.getRandomValues(new Uint8Array(32));\n\t\t\tlet iv = crypto.getRandomValues(new Uint8Array(16));\n\t\t\tlet ct = new Uint8Array(await crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, importedKey, baseData));\n\t\t\tlet passwordLocking = new Uint8Array(iv.length + ct.length);\n\t\t\tpasswordLocking.set(iv);\n\t\t\tpasswordLocking.set(ct, iv.length);\n\t\t\tpartition.cryptodata.passwordLocking = passwordLocking.reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tif (partition.encryptedFileTable) {\n\t\t\t\tlet fileIV = crypto.getRandomValues(new Uint8Array(16));\n\t\t\t\tlet fileCT = new Uint8Array(await crypto.subtle.encrypt({ name: \"AES-GCM\", iv: fileIV }, importedKey, new TextEncoder().encode(JSON.stringify({\n\t\t\t\t\tfiles: partition.files,\n\t\t\t\t\tpermissions: partition.permissions\n\t\t\t\t}))));\n\t\t\t\tpartition.files = {};\n\t\t\t\tpartition.permissions = {};\n\t\t\t\tlet ept = new Uint8Array(fileIV.length + fileCT.length);\n\t\t\t\tept.set(fileIV);\n\t\t\t\tept.set(fileCT, fileIV.length);\n\t\t\t\tpartition.encryptedFileTable = ept.reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t}\n\t\t\tdelete partition.cryptodata.passwordLockingInitial;\n\t\t\tmodules.core.disk.partition(options.partition).setData(partition);\n\t\t}\n\t\tif (partition.cryptodata.passwordLocking) {\n\t\t\tlet iv = new Uint8Array(partition.cryptodata.passwordLocking.slice(0, 32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\tlet ct = new Uint8Array(partition.cryptodata.passwordLocking.slice(32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\tawait crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, importedKey, ct);\n\t\t}\n\t\tlet partitionId = partition.id;\n\t\tpartition = null;\n\t\treturn {\n\t\t\tread: async function(key) {\n\t\t\t\tkey = String(key);          \n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet part = await modules.core.idb.readPart(partitionId + \"-\" + files);\n\t\t\t\tlet iv = new Uint8Array(part.slice(0, 32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\tlet ct = new Uint8Array(part.slice(32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\treturn new TextDecoder().decode(new Uint8Array(await crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, this.key, ct)));\n\t\t\t},\n\t\t\twrite: async function(key, value) {\n\t\t\t\tkey = String(key);\n\t\t\t\tvalue = String(value);\n\t\t\t\tlet existenceChecks = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files[basename] === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet id = files[basename] || crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet newIV = crypto.getRandomValues(new Uint8Array(16));\n\t\t\t\tlet newCT = new Uint8Array(await crypto.subtle.encrypt({ name: \"AES-GCM\", iv: newIV }, this.key, new TextEncoder().encode(value)));\n\t\t\t\tlet newPart = new Uint8Array(newIV.length + newCT.length);\n\t\t\t\tnewPart.set(newIV);\n\t\t\t\tnewPart.set(newCT, newIV.length);\n\t\t\t\tnewPart = newPart.reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tawait modules.core.idb.writePart(partitionId + \"-\" + id, newPart);\n\t\t\t\tif (!files[basename]) await this.setBackend(this._recursive_op(await this.getBackend(), \"files/\" + key, { type: \"write\", value: id }));\n\t\t\t},\n\t\t\trm: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\" && Object.keys(files).length > 0) throw new Error(\"NON_EMPTY_DIR\");\n\t\t\t\tif (typeof files === \"string\") await modules.core.idb.removePart(partitionId + \"-\" + files);\n\t\t\t\tawait this.setBackend(this._recursive_op(await this.getBackend(), \"files/\" + key, { type: \"delete\" }));\n\t\t\t\tlet backend = await this.getBackend();\n\t\t\t\tdelete backend.permissions[key];\n\t\t\t\tawait this.setBackend(backend);\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet pathParts = directory.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files !== \"object\") throw new Error(\"IS_A_FILE\");\n\t\t\t\treturn Object.keys(files);\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet existenceChecks = directory.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (files[directory.split(\"/\").slice(-1)[0]]) throw new Error(\"DIR_EXISTS\");\n\t\t\t\tawait this.setBackend(this._recursive_op(await this.getBackend(), \"files/\" + directory, { type: \"write\", value: {} }));\n\t\t\t},\n\t\t\tpermissions: async function(file) {\n\t\t\t\tfile = String(file);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet permissions = (await this.getBackend()).permissions[properFile] || {};\n\t\t\t\treturn {\n\t\t\t\t\towner: permissions.owner || randomNames,\n\t\t\t\t\tgroup: permissions.group || randomNames,\n\t\t\t\t\tworld: permissions.world || \"\",\n\t\t\t\t\trandom: !(permissions.owner || permissions.group || permissions.world) ? true : undefined\n\t\t\t\t};\n\t\t\t},\n\t\t\tchown: async function(file, owner) {\n\t\t\t\tfile = String(file);\n\t\t\t\towner = String(owner);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = await this.getBackend();\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.owner = owner;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tawait this.setBackend(backend);\n\t\t\t},\n\t\t\tchgrp: async function(file, group) {\n\t\t\t\tfile = String(file);\n\t\t\t\tgroup = String(group);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = await this.getBackend();\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.group = group;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tawait this.setBackend(backend);\n\t\t\t},\n\t\t\tchmod: async function(file, permissions) {\n\t\t\t\tfile = String(file);\n\t\t\t\tpermissions = String(permissions);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = await this.getBackend();\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.world = permissions;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tawait this.setBackend(backend);\n\t\t\t},\n\t\t\tisDirectory: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = (await this.getBackend()).files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (!files.hasOwnProperty(basename)) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\tif (typeof files[basename] === \"object\") return true;\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tsync: async function() {\n\t\t\t\tawait modules.core.disk.sync();\n\t\t\t},\n\t\t\tunmount: () => true,\n\t\t\t_recursive_op: function(obj, path, action, stage = 0) {\n\t\t\t\tif (path.split(\"/\").length == (stage + 1)) {\n\t\t\t\t\tif (action.type == \"delete\") delete obj[path.split(\"/\").slice(-1)[0]];\n\t\t\t\t\tif (action.type == \"write\") obj[path.split(\"/\").slice(-1)[0]] = action.value;\n\t\t\t\t} else obj[path.split(\"/\")[stage]] = this._recursive_op(obj[path.split(\"/\")[stage]], path, action, stage + 1);\n\t\t\t\treturn obj;\n\t\t\t},\n\t\t\tdirectory_supported: true,\n\t\t\tfilesystem: \"PCFS-AES\",\n\t\t\tread_only: !!options.read_only,\n\t\t\tpermissions_supported: true,\n\t\t\tpartition: null,\n\t\t\tgetBackend: async function() {\n\t\t\t\tif (!this.partition) this.partition = modules.core.disk.partition(options.partition);\n\t\t\t\tlet returnedData = this.partition.getData();\n\t\t\t\tif (returnedData.encryptedFileTable) {\n\t\t\t\t\tlet iv = new Uint8Array(returnedData.encryptedFileTable.slice(0, 32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\tlet ct = new Uint8Array(returnedData.encryptedFileTable.slice(32).match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\treturn JSON.parse(new TextDecoder().decode(new Uint8Array(await crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, this.key, ct))));   \n\t\t\t\t}\n\t\t\t\treturn returnedData;\n\t\t\t},\n\t\t\tsetBackend: async function(data) {\n\t\t\t\tif (!this.partition) this.partition = modules.core.disk.partition(options.partition);\n\t\t\t\tlet returnedData = this.partition.getData();\n\t\t\t\tif (returnedData.encryptedFileTable) {\n\t\t\t\t\tlet newIV = crypto.getRandomValues(new Uint8Array(16));\n\t\t\t\t\tlet newCT = new Uint8Array(await crypto.subtle.encrypt({ name: \"AES-GCM\", iv: newIV }, this.key, new TextEncoder().encode(JSON.stringify(data))));\n\t\t\t\t\tlet newPart = new Uint8Array(newIV.length + newCT.length);\n\t\t\t\t\tnewPart.set(newIV);\n\t\t\t\t\tnewPart.set(newCT, newIV.length);\n\t\t\t\t\tnewPart = newPart.reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\t\treturn this.partition.setData({ ...returnedData, encryptedFileTable: newPart });\n\t\t\t\t}\n\t\t\t\tthis.partition.setData(data);\n\t\t\t},\n\t\t\tkey: importedKey\n\t\t};\n\t};\n\t\n\tfunction ramMount(options) {\n\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\treturn {\n\t\t\tread: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\treturn String(this.ramFiles.get(files));\n\t\t\t},\n\t\t\twrite: async function(key, value) {\n\t\t\t\tkey = String(key);\n\t\t\t\tvalue = String(value);\n\t\t\t\tlet existenceChecks = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files[basename] === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet id = files[basename] || crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tthis.ramFiles.set(id, value);\n\t\t\t\tif (!files[basename]) this.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"write\", value: id });\n\t\t\t},\n\t\t\trm: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\" && Object.keys(files).length > 0) throw new Error(\"NON_EMPTY_DIR\");\n\t\t\t\tif (typeof files === \"string\") this.ramFiles.delete(files);\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"delete\" });\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tdelete backend.permissions[key];\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet pathParts = directory.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files !== \"object\") throw new Error(\"IS_A_FILE\");\n\t\t\t\treturn Object.keys(files);\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet existenceChecks = directory.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (files[directory.split(\"/\").slice(-1)[0]]) throw new Error(\"DIR_EXISTS\");\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + directory, { type: \"write\", value: {} });\n\t\t\t},\n\t\t\tpermissions: async function(file) {\n\t\t\t\tfile = String(file);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet permissions = this.backend.permissions[properFile] || {};\n\t\t\t\treturn {\n\t\t\t\t\towner: permissions.owner || randomNames,\n\t\t\t\t\tgroup: permissions.group || randomNames,\n\t\t\t\t\tworld: permissions.world || \"\",\n\t\t\t\t\trandom: !(permissions.owner || permissions.group || permissions.world) ? true : undefined\n\t\t\t\t};\n\t\t\t},\n\t\t\tchown: async function(file, owner) {\n\t\t\t\tfile = String(file);\n\t\t\t\towner = String(owner);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.owner = owner;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchgrp: async function(file, group) {\n\t\t\t\tfile = String(file);\n\t\t\t\tgroup = String(group);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.group = group;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchmod: async function(file, permissions) {\n\t\t\t\tfile = String(file);\n\t\t\t\tpermissions = String(permissions);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.world = permissions;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tisDirectory: function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (!files.hasOwnProperty(basename)) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\tif (typeof files[basename] === \"object\") return true;\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t_recursive_op: function(obj, path, action, stage = 0) {\n\t\t\t\tif (path.split(\"/\").length == (stage + 1)) {\n\t\t\t\t\tif (action.type == \"delete\") delete obj[path.split(\"/\").slice(-1)[0]];\n\t\t\t\t\tif (action.type == \"write\") obj[path.split(\"/\").slice(-1)[0]] = action.value;\n\t\t\t\t} else obj[path.split(\"/\")[stage]] = this._recursive_op(obj[path.split(\"/\")[stage]], path, action, stage + 1);\n\t\t\t\treturn obj;\n\t\t\t},\n\t\t\tsync: () => true,\n\t\t\tunmount: () => true,\n\t\t\tdirectory_supported: true,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"extramfs\",\n\t\t\tpermissions_supported: true,\n\t\t\tbackend: options.type == \"run\" ? { files: { run: {} }, permissions: {\n\t\t\t\t\"\": {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"rx\"\n\t\t\t\t},\n\t\t\t\trun: {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"rwx\"\n\t\t\t\t}\n\t\t\t}} : { files: {}, permissions: {\n\t\t\t\t\"\": {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"rx\"\n\t\t\t\t}\n\t\t\t} },\n\t\t\tramFiles: new Map()\n\t\t};\n\t}\n\t\n\tfunction preferenceMount(options) {\n\t\treturn {\n\t\t\tread: a => JSON.stringify(modules.core.prefs.read(a), null, \"\\t\"),\n\t\t\twrite: (a, b) => modules.core.prefs.write(a, JSON.parse(b)),\n\t\t\trm: a => modules.core.prefs.rm(a),\n\t\t\tls: a => modules.core.prefs.ls(a),\n\t\t\tpermissions: function() {\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\treturn {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t},\n\t\t\tchown: _ => !1,\n\t\t\tchgrp: _ => !1,\n\t\t\tchmod: _ => !1,\n\t\t\tsync: () => true,\n\t\t\tunmount: () => true,\n\t\t\tdirectory_supported: false,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"preffs\",\n\t\t\tpermissions_supported: true\n\t\t};\n\t}\n\n\tasync function SFSPMount(options) {\n\t\tlet session, serverData;\n\t\ttry {\n\t\t\tsession = await fetch(options.url + \"/session\");\n\t\t\tsession = await session.json();\n\t\t\tserverData = await fetch(options.url + \"/properties\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t...options,\n\t\t\t\t\tsessionToken: session\n\t\t\t\t})\n\t\t\t});\n\t\t\tserverData = await serverData.json();\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"Could not connect to server\");\n\t\t}\n\t\treturn {\n\t\t\tread: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"read\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\twrite: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"write\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\trm: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"rm\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tls: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"ls\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tmkdir: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"mkdir\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tpermissions: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"permissions\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tchown: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"chown\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tchgrp: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"chgrp\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tchmod: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"chmod\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tsync: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"sync\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tisDirectory: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"isDirectory\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\tunmount: async function(...a) {\n\t\t\t\tlet req = await fetch(options.url + \"/file_operation\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tsessionToken: session,\n\t\t\t\t\t\toperation: \"unmount\",\n\t\t\t\t\t\tparameters: a\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tif (!req.ok) throw (await req.json());\n\t\t\t\treturn await req.json();\n\t\t\t},\n\t\t\t...serverData\n\t\t};\n\t};\n\n\tasync function IPCMount(options) { // ChatGPT code below\n\t\tif (!options.inputPipeId || !options.outputPipeId) throw new Error(\"PIPE_IDS_REQUIRED\");\n\t\n\t\tconst inputPipeId = options.inputPipeId;\n\t\tconst outputPipeId = options.outputPipeId;\n\t\tlet lock = false;\n\t\n\t\tasync function acquireLock() {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst tryLock = () => {\n\t\t\t\t\tif (!lock) {\n\t\t\t\t\t\tlock = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(tryLock, 10); // retry after 10ms\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsetTimeout(tryLock, 10);\n\t\t\t});\n\t\t}\n\t\n\t\tasync function releaseLock() {\n\t\t\tlock = false;\n\t\t}\n\t\n\t\t// Function to send request and receive response\n\t\tasync function ipcRequest(action, payload = {}) {\n\t\t\tawait acquireLock();\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tmodules.ipc.listenFor(outputPipeId).then((response) => {\n\t\t\t\t\treleaseLock();\n\t\t\t\t\tif (response.error) return reject(new Error(response.error));\n\t\t\t\t\treturn resolve(response.data);\n\t\t\t\t});\n\t\t\t\tmodules.ipc.send(inputPipeId, { action, ...payload });\n\t\t\t});\n\t\t}\n\t\n\t\t// Initial request to get filesystem properties\n\t\tconst filesystemData = await ipcRequest(\"properties\", { data: options });\n\t\n\t\treturn {\n\t\t\tread: async function(key) {\n\t\t\t\treturn ipcRequest(\"read\", { key: String(key) });\n\t\t\t},\n\t\t\twrite: async function(key, value) {\n\t\t\t\treturn ipcRequest(\"write\", { key: String(key), value: String(value) });\n\t\t\t},\n\t\t\trm: async function(key) {\n\t\t\t\treturn ipcRequest(\"rm\", { key: String(key) });\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\treturn ipcRequest(\"ls\", { directory: String(directory) });\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\treturn ipcRequest(\"mkdir\", { directory: String(directory) });\n\t\t\t},\n\t\t\tpermissions: async function(file) {\n\t\t\t\treturn ipcRequest(\"permissions\", { file: String(file) });\n\t\t\t},\n\t\t\tchown: async function(file, owner) {\n\t\t\t\treturn ipcRequest(\"chown\", { file: String(file), owner: String(owner) });\n\t\t\t},\n\t\t\tchgrp: async function(file, group) {\n\t\t\t\treturn ipcRequest(\"chgrp\", { file: String(file), group: String(group) });\n\t\t\t},\n\t\t\tchmod: async function(file, permissions) {\n\t\t\t\treturn ipcRequest(\"chmod\", { file: String(file), permissions: String(permissions) });\n\t\t\t},\n\t\t\tisDirectory: async function(key) {\n\t\t\t\treturn ipcRequest(\"isDirectory\", { key: String(key) });\n\t\t\t},\n\t\t\tsync: async function() {\n\t\t\t\treturn ipcRequest(\"sync\");\n\t\t\t},\n\t\t\tunmount: async function() {\n\t\t\t\treturn ipcRequest(\"unmount\");\n\t\t\t},\n\t\t\t...filesystemData\n\t\t};\n\t} // ChatGPT code ends here\n\n\tasync function fileMount(options) {\n\t\tlet file = JSON.parse(await modules.fs.read(options.srcFile));\n\t\tlet backend = file.backend;\n\t\tdelete file.backend;\n\t\tlet files = file.files;\n\t\tdelete file.files;\n\t\treturn {\n\t\t\tread: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE\");\n\t\t\t\t}\t\n\t\t\t\tif (typeof files === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\treturn String(this.files[files]);\n\t\t\t},\n\t\t\twrite: async function(key, value) {\n\t\t\t\tkey = String(key);\n\t\t\t\tvalue = String(value);\n\t\t\t\tlet existenceChecks = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files[basename] === \"object\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet id = files[basename] || crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tthis.files[id] = value;\n\t\t\t\tif (!files[basename]) this.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"write\", value: id });\n\t\t\t},\n\t\t\trm: async function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files === \"object\" && Object.keys(files).length > 0) throw new Error(\"NON_EMPTY_DIR\");\n\t\t\t\tif (typeof files === \"string\") delete this.files[files];\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + key, { type: \"delete\" });\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tdelete backend.permissions[key];\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet pathParts = directory.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (typeof files !== \"object\") throw new Error(\"IS_A_FILE\");\n\t\t\t\treturn Object.keys(files);\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\tdirectory = String(directory);\n\t\t\t\tlet existenceChecks = directory.split(\"/\").slice(0, -1);\n\t\t\t\tif (existenceChecks[0] == \"\") existenceChecks = existenceChecks.slice(1);\n\t\t\t\tif (existenceChecks[existenceChecks.length - 1] == \"\") existenceChecks = existenceChecks.slice(0, -1);\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of existenceChecks) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (files[directory.split(\"/\").slice(-1)[0]]) throw new Error(\"DIR_EXISTS\");\n\t\t\t\tthis.backend = this._recursive_op(this.backend, \"files/\" + directory, { type: \"write\", value: {} });\n\t\t\t},\n\t\t\tpermissions: async function(file) {\n\t\t\t\tfile = String(file);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet permissions = this.backend.permissions[properFile] || {};\n\t\t\t\treturn {\n\t\t\t\t\towner: permissions.owner || randomNames,\n\t\t\t\t\tgroup: permissions.group || randomNames,\n\t\t\t\t\tworld: permissions.world || \"\",\n\t\t\t\t\trandom: !(permissions.owner || permissions.group || permissions.world) ? true : undefined\n\t\t\t\t};\n\t\t\t},\n\t\t\tchown: async function(file, owner) {\n\t\t\t\tfile = String(file);\n\t\t\t\towner = String(owner);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.owner = owner;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchgrp: async function(file, group) {\n\t\t\t\tfile = String(file);\n\t\t\t\tgroup = String(group);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.group = group;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tchmod: async function(file, permissions) {\n\t\t\t\tfile = String(file);\n\t\t\t\tpermissions = String(permissions);\n\t\t\t\tlet properFile = file.split(\"/\")\n\t\t\t\tif (properFile[0] == \"\") properFile = properFile.slice(1);\n\t\t\t\tif (properFile[properFile.length - 1] == \"\") properFile = properFile.slice(0, -1);\n\t\t\t\tproperFile = properFile.join(\"/\");\n\t\t\t\tif (Object.prototype.hasOwnProperty(properFile)) throw new Error(\"TECHNICAL_LIMITATIONS\");\n\t\t\t\tlet backend = this.backend;\n\t\t\t\tlet randomNames = crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\tlet filePermissions = backend.permissions[properFile] || {\n\t\t\t\t\towner: randomNames,\n\t\t\t\t\tgroup: randomNames,\n\t\t\t\t\tworld: \"\",\n\t\t\t\t};\n\t\t\t\tfilePermissions.world = permissions;\n\t\t\t\tbackend.permissions[properFile] = filePermissions;\n\t\t\t\tthis.backend = backend;\n\t\t\t},\n\t\t\tisDirectory: function(key) {\n\t\t\t\tkey = String(key);\n\t\t\t\tlet pathParts = key.split(\"/\").slice(0, -1);\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tlet basename = key.split(\"/\").slice(-1)[0];\n\t\t\t\tlet files = this.backend.files;\n\t\t\t\tfor (let part of pathParts) {\n\t\t\t\t\tfiles = files[part];\n\t\t\t\t\tif (!files) throw new Error(\"NO_SUCH_DIR\");\n\t\t\t\t}\n\t\t\t\tif (!files.hasOwnProperty(basename)) throw new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\tif (typeof files[basename] === \"object\") return true;\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t_recursive_op: function(obj, path, action, stage = 0) {\n\t\t\t\tif (path.split(\"/\").length == (stage + 1)) {\n\t\t\t\t\tif (action.type == \"delete\") delete obj[path.split(\"/\").slice(-1)[0]];\n\t\t\t\t\tif (action.type == \"write\") obj[path.split(\"/\").slice(-1)[0]] = action.value;\n\t\t\t\t} else obj[path.split(\"/\")[stage]] = this._recursive_op(obj[path.split(\"/\")[stage]], path, action, stage + 1);\n\t\t\t\treturn obj;\n\t\t\t},\n\t\t\tsync: async function() {\n\t\t\t\treturn await modules.fs.write(options.srcFile, JSON.stringify({ ...file, backend: this.backend, files: this.files }));\n\t\t\t},\n\t\t\tunmount: () => true,\n\t\t\tdirectory_supported: true,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"filefs\",\n\t\t\tpermissions_supported: true,\n\t\t\tbackend: backend,\n\t\t\tfiles: files\n\t\t};\n\t}\n\n\tasync function overlayMount(options) {\n\t\treturn {\n\t\t\tread: function(key, token) {\n\t\t\t\treturn this._basic_first_op(\"read\", key, token);\n\t\t\t},\n\t\t\twrite: function(key, value, token) {\n\t\t\t\treturn this._basic_first_op(\"write\", key, value, token);\n\t\t\t},\n\t\t\trm: function(key, token) {\n\t\t\t\treturn this._basic_first_op(\"rm\", key, token);\n\t\t\t},\n\t\t\tls: async function(directory, token) {\n\t\t\t\tlet listing = [], commonErrorMessages = {}, errors = 0;\n\t\t\t\tfor (let mount of options.mounts) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlisting.push(...(await modules.fs.ls(mount + \"/\" + directory, token)));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t\tcommonErrorMessages[e.message] = (commonErrorMessages[e.message] || 0) + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (errors == options.mounts.length) throw new Error(Object.entries(commonErrorMessages).sort((a, b) => b[1] - a[1])[0][0]);\n\t\t\t\treturn Array.from(new Set(listing));\n\t\t\t},\n\t\t\tmkdir: function(directory, token) {\n\t\t\t\treturn this._basic_first_op(\"mkdir\", directory, token);\n\t\t\t},\n\t\t\tpermissions: async function(file, token) {\n\t\t\t\tlet commonErrorMessages = {}, checkedHowMany = 0;\n\t\t\t\tfor (let mount of options.mounts) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcheckedHowMany++;\n\t\t\t\t\t\tlet permissions = await modules.fs.permissions(mount + \"/\" + file, token);\n\t\t\t\t\t\tif (permissions.random && checkedHowMany != options.mounts.length)\n\t\t\t\t\t\t\tthrow new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t\treturn permissions;\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcommonErrorMessages[e.message] = (commonErrorMessages[e.message] || 0) + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error(Object.entries(commonErrorMessages).sort((a, b) => b[1] - a[1])[0][0]);\n\t\t\t},\n\t\t\tchown: function(file, owner, token) {\n\t\t\t\treturn this._basic_first_op(\"chown\", file, owner, token);\n\t\t\t},\n\t\t\tchgrp: function(file, group, token) {\n\t\t\t\treturn this._basic_first_op(\"chgrp\", file, group, token);\n\t\t\t},\n\t\t\tchmod: function(file, permissions, token) {\n\t\t\t\treturn this._basic_first_op(\"chmod\", file, permissions, token);\n\t\t\t},\n\t\t\tisDirectory: function(key, token) {\n\t\t\t\treturn this._basic_first_op(\"isDirectory\", key, token);\n\t\t\t},\n\t\t\tsync: function(token) {\n\t\t\t\treturn this._every_op(\"sync\", token);\n\t\t\t},\n\t\t\tunmount: function(token) {\n\t\t\t\tif (options.autoManage) return this._every_op(\"unmount\", token);\n\t\t\t},\n\t\t\t_basic_first_op: async function(op, key, ...args) {\n\t\t\t\tlet pathParts = key.split(\"/\");\n\t\t\t\tif (pathParts[0] == \"\") pathParts = pathParts.slice(1);\n\t\t\t\tif (pathParts[pathParts.length - 1] == \"\") pathParts = pathParts.slice(0, -1);\n\t\t\t\tkey = pathParts.join(\"/\");\n\t\t\t\tlet previousKey = key.split(\"/\").slice(0, -1).join(\"/\");\n\t\t\t\tlet basename = key.split(\"/\").slice(-1).join(\"/\");\n\t\t\t\tlet lookedForMount;\n\t\t\t\tfor (let mount of options.mounts) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet listing = await modules.fs.ls(mount + \"/\" + previousKey, args[args.length - 1]);\n\t\t\t\t\t\tif (listing.includes(basename)) {\n\t\t\t\t\t\t\tlookedForMount = mount;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch {}\n\t\t\t\t}\n\t\t\t\tif (lookedForMount) return modules.fs[op](lookedForMount + \"/\" + key, ...args);\n\t\t\t\tlet commonErrorMessages = {};\n\t\t\t\tfor (let mount of options.mounts) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs[op](mount + \"/\" + key, ...args);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcommonErrorMessages[e.message] = (commonErrorMessages[e.message] || 0) + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error(Object.entries(commonErrorMessages).sort((a, b) => b[1] - a[1])[0][0]);\n\t\t\t},\n\t\t\t_every_op: async function(op) {\n\t\t\t\tlet commonErrorMessages = {}, gotError;\n\t\t\t\tfor (let mount of options.mounts) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait modules.fs[op](mount);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tgotError = true;\n\t\t\t\t\t\tcommonErrorMessages[e.message] = (commonErrorMessages[e.message] || 0) + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (gotError) throw new Error(Object.entries(commonErrorMessages).sort((a, b) => b[1] - a[1])[0][0]);\n\t\t\t},\n\t\t\tdirectory_supported: true,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"overlayfs\",\n\t\t\tpermissions_supported: true\n\t\t};\n\t}\n\n\tasync function hostOSMount(options) {\n\t\tlet dirHandle;\n\t\ttry {\n\t\t\tdirHandle = await window.showDirectoryPicker();\n\t\t} catch {\n\t\t\tthrow new Error(\"PERMISSION_DENIED\");\n\t\t}\n\t\tasync function resolvePath(path) {\n\t\t\tlet parts = path.split(\"/\").filter(p => p.length > 0);\n\t\t\tlet currentHandle = dirHandle;\n\t\t\tfor (let part of parts) {\n\t\t\t\ttry {\n\t\t\t\t\tcurrentHandle = await currentHandle.getDirectoryHandle(part);\n\t\t\t\t} catch {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await currentHandle.getFileHandle(part);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tthrow new Error(\"NO_SUCH_FILE_DIR\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn currentHandle;\n\t\t}\n\n\t\treturn {\n\t\t\tread: async function(filePath) {\n\t\t\t\tlet handle = await resolvePath(filePath);\n\t\t\t\tif (handle.kind == \"directory\") throw new Error(\"IS_A_DIR\");\n\t\t\t\tlet file = await handle.getFile();\n\t\t\t\treturn await file.text();\n\t\t\t},\n\t\t\twrite: async function(filePath, data) {\n\t\t\t\tlet parts = filePath.split(\"/\").filter(p => p.length > 0);\n\t\t\t\tlet fileName = parts.pop();\n\t\t\t\tlet currentHandle = dirHandle;\n\t\t\t\tfor (let part of parts) currentHandle = await currentHandle.getDirectoryHandle(part);\n\t\t\t\tlet fileHandle = await currentHandle.getFileHandle(fileName, { create: true });\n\t\t\t\tlet writable = await fileHandle.createWritable();\n\t\t\t\tawait writable.write(data);\n\t\t\t\tawait writable.close();\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\trm: async function(path) {\n\t\t\t\tlet parts = path.split(\"/\").filter(p => p.length > 0);\n\t\t\t\tlet targetName = parts.pop();\n\t\t\t\tlet currentHandle = dirHandle;\n\t\t\t\tfor (let part of parts) currentHandle = await currentHandle.getDirectoryHandle(part);\n\t\t\t\tawait currentHandle.removeEntry(targetName);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tls: async function(directory) {\n\t\t\t\tlet handle = await resolvePath(directory);\n\t\t\t\tif (handle.kind != \"directory\") throw new Error(\"IS_A_FILE\");\n\t\t\t\tlet entries = [];\n\t\t\t\tfor await (let entry of handle.values()) entries.push(entry.name);\n\t\t\t\treturn entries;\n\t\t\t},\n\t\t\tmkdir: async function(directory) {\n\t\t\t\tlet parts = directory.split(\"/\").filter(p => p.length > 0);\n\t\t\t\tlet currentHandle = dirHandle;\n\t\t\t\tfor (let part of parts) try {\n\t\t\t\t\tcurrentHandle = await currentHandle.getDirectoryHandle(part);\n\t\t\t\t} catch {\n\t\t\t\t\tcurrentHandle = await currentHandle.getDirectoryHandle(part, { create: true });\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tisDirectory: async function(path) {\n\t\t\t\tlet handle = await resolvePath(path);\n\t\t\t\treturn handle.kind == \"directory\";\n\t\t\t},\n\t\t\tsync: () => true,\n\t\t\tunmount: () => true,\n\t\t\tdirectory_supported: true,\n\t\t\tread_only: !!options.read_only,\n\t\t\tfilesystem: \"HostOS\",\n\t\t\tpermissions_supported: false,\n\t\t\t_dirHandle: dirHandle\n\t\t};\n\t}\n\t\n\tfs.mounts[\"ram\"] = ramMount({\n\t\ttype: \"run\"\n\t});\n\tmodules.mounts = {\n\t\tPCFSiDBMount,\n\t\tPCFSiDBAESCryptMount,\n\t\tramMount,\n\t\tpreferenceMount,\n\t\tSFSPMount,\n\t\tIPCMount,\n\t\tfileMount,\n\t\toverlayMount,\n\t\thostOSMount\n\t};\n\tmodules.fs = fs;\n\tmodules.defaultSystem = \"ram\";\n}\n\nloadFs();","4fa3bce8f06d88da25948da31a76eeae5869f968ae4be03fc7e299fbc02831170381041e1582bbb16f81fe9c201a4aab1ab174623eaa9860e443766709f0e884":"async function fsck() {\n\t// @pcos-app-mode native\n\tfunction println(str) {\n\t\tmodules.core.tty_bios_api.println(str);\n\t\treturn new Promise(function(resolve) {\n\t\t\trequestAnimationFrame(resolve);\n\t\t})\n\t}\n\tlet fsckMode;\n\ttry {\n\t\tfsckMode = await modules.fs.read(modules.defaultSystem + \"/.fsck\");\n\t\tawait modules.fs.rm(modules.defaultSystem + \"/.fsck\");\n\t} catch {\n\t\tawait println(\"Skipping file system checking.\");\n\t\treturn;\n\t}\n\tasync function scanLLDA() {\n\t\tlet fs = modules.fs;\n\t\tif (fs.mounts[modules.defaultSystem].read_only) {\n\t\t\tawait println(\"File system is read-only.\");\n\t\t\treturn { lldaPoints: \"abort\", lldaId: \"abort\" };\n\t\t}\n\t\tif (fs.mounts[modules.defaultSystem].partition.getData) {\n\t\t\tlet llda = fs.mounts[modules.defaultSystem].partition.getData().files;\n\t\t\tlet lldaId = fs.mounts[modules.defaultSystem].partition.getData().id;\n\t\t\tllda = Object.values(llda);\n\t\t\twhile (llda.some(a => typeof a === \"object\")) llda = llda.map(a => typeof a === \"object\" ? Object.values(a) : a).flat(); \n\t\t\treturn { lldaPoints: llda, lldaId: lldaId };\n\t\t} else {\n\t\t\tawait println(\"Low-level disk access is impossible.\");\n\t\t\treturn { lldaPoints: \"abort\", lldaId: \"abort\" };\n\t\t}\n\t}\n\tawait println(\"A file system check has been requested.\");\n\tawait println(\"Scanning for file points.\");\n\tlet { lldaPoints, lldaId } = await scanLLDA();\n\tif (lldaPoints === \"abort\") {\n\t\tawait println(\"Skipping file system checking.\");\n\t\treturn;\n\t}\n\tawait println(\"File points found: \" + lldaPoints.length);\n\tawait println(\"Reading indexedDB keys.\");\n\tlet idb_keys = modules.core.idb._db.transaction(\"disk\").objectStore(\"disk\").getAllKeys();\n\tidb_keys = await new Promise(function(resolve) {\n\t\tidb_keys.onsuccess = () => resolve(idb_keys.result);\n\t});\n\tidb_keys.splice(idb_keys.indexOf(\"disk\"), 1);\n\tawait println(\"IndexedDB keys found: \" + idb_keys.length);\n\tawait println(\"Filtering IndexedDB keys...\");\n\tif (fsckMode != \"discard-all\") idb_keys = idb_keys.filter(a => a.startsWith(lldaId + \"-\")).map(a => a.slice(lldaId.length + 1));\n\tawait println(\"Filtered keys: \" + idb_keys.length);\n\tlet missingFiles = idb_keys.filter(a => !lldaPoints.includes(a.slice(fsckMode == \"discard-all\" ? (lldaId + \"-\").length : 0)));\n\tawait println(\"Missing files: \" + missingFiles.length);\n\tlet llda = modules.fs.mounts[modules.defaultSystem].partition.getData();\n\tif (fsckMode == \"recover\") {\n\t\ttry {\n\t\t\tawait modules.fs.mkdir(modules.defaultSystem + \"/lost+found\");\n\t\t\tawait println(\"Created lost+found directory.\");\n\t\t} catch {\n\t\t\tawait println(\"Lost+found directory already exists.\");\n\t\t}\n\t\tfor (let file of missingFiles) {\n\t\t\tawait println(\"Moving \" + file + \" to lost+found.\");\n\t\t\tllda.files[\"lost+found\"][file] = file;\n\t\t}\n\t} else if (fsckMode == \"discard\" || fsckMode == \"discard-all\") {\n\t\tfor (let file of missingFiles) {\n\t\t\tawait println(\"Deleting \" + file + \".\");\n\t\t\tawait modules.core.idb.removePart((fsckMode == \"discard\" ? (lldaId + \"-\") : \"\") + file);\n\t\t}\n\t} else {\n\t\tawait println(\"Unsure what to do, not doing anything.\");\n\t}\n\tawait println(\"Saving modified file table.\");\n\tmodules.fs.mounts[modules.defaultSystem].partition.setData(llda);\n\tawait modules.core.idb.sync();\n\tawait println(\"File system check complete.\");\n}\nawait fsck();","eb3f022f67e93e5ee89a9f750d009160db60b2a1c34ec4860cbbf23d7665fe1da1a974b1989081e2052c3d0d26f160e9bfaf57f111a3a8452973f1415b2ccca1":"async function loadModules() {\n\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\tlet khrlSignatures = [];\n\tlet mountpointList = [];\n\tlet module2point = {};\n\tasync function loadKHRL() {\n\t\tlet khrlFiles = await modules.fs.ls(module2point[\"00-keys.fs\"] + \"/etc/keys/khrl\");\n\t\tfor (let khrlFile of khrlFiles) {\n\t\t\tlet khrl = JSON.parse(await modules.fs.read(module2point[\"00-keys.fs\"] + \"/etc/keys/khrl/\" + khrlFile));\n\t\t\tlet khrlSignature = khrl.signature;\n\t\t\tdelete khrl.signature;\n\t\t\tif (await crypto.subtle.verify({ name: \"Ed25519\" }, modules.ksk_imported, hexToU8A(khrlSignature), new TextEncoder().encode(JSON.stringify(khrl.list)))) {\n\t\t\t\tkhrlSignatures.push(...khrl.list);\n\t\t\t}\n\t\t}\n\t}\n\tasync function recursiveKeyVerify(key, khrl) {\n\t\tif (!key) throw new Error(\"NO_KEY\");\n\t\tif (key.keyInfo.dates?.since > Date.now()) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\tif (Date.now() > key.keyInfo.dates?.until) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\tlet hash = u8aToHex(new Uint8Array(await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode((key.keyInfo.key).x))));\n\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\tif (khrl.includes(hash)) throw new Error(\"KEY_REVOKED\");\n\t\tlet signedByKey = modules.ksk_imported;\n\t\tif (key.keyInfo.signedBy) {\n\t\t\tsignedByKey = JSON.parse(await modules.fs.read(module2point[\"00-keys.fs\"] + \"/etc/keys/\" + key.keyInfo.signedBy));\n\t\t\tif (!signedByKey.keyInfo.usages.includes(\"keyTrust\")) throw new Error(\"NOT_KEY_AUTHORITY\");\n\t\t\tawait recursiveKeyVerify(signedByKey, khrl);\n\t\t\tsignedByKey = await crypto.subtle.importKey(\"jwk\", signedByKey.keyInfo.key, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t}\n\t\tif (!await crypto.subtle.verify({ name: \"Ed25519\" }, signedByKey, hexToU8A(key.signature), new TextEncoder().encode(JSON.stringify(key.keyInfo)))) throw new Error(\"KEY_SIGNATURE_VERIFICATION_FAILED\");\n\t\treturn true;\n\t}\n\ttry {\n\t\tlet moduleList = (await modules.fs.ls(modules.defaultSystem + \"/modules\")).sort((a, b) => a.localeCompare(b));\n\t\tfor (let moduleName of moduleList) {\n\t\t\tlet fullModuleFile = {};\n\t\t\ttry {\n\t\t\t\tfullModuleFile = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/modules/\" + moduleName));\n\t\t\t} catch {}\n\t\t\tif (!fullModuleFile.buildInfo) continue;\n\t\t\tlet fullModuleSignature = fullModuleFile.buildInfo.signature;\n\t\t\tdelete fullModuleFile.buildInfo.signature;\n\t\t\tif (moduleName == \"00-keys.fs\") {\n\t\t\t\ttry {\n\t\t\t\t\tfullModuleFile = JSON.stringify(fullModuleFile);\n\t\t\t\t\tif (!(await crypto.subtle.verify({\n\t\t\t\t\t\tname: \"Ed25519\"\n\t\t\t\t\t}, modules.ksk_imported, hexToU8A(fullModuleSignature), new TextEncoder().encode(fullModuleFile)))) throw new Error(\"MODULE_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (modules.core.bootMode != \"disable-harden\") await panic(\"KEYS_MODULE_VERIFICATION_FAILED\", {\n\t\t\t\t\t\tname: \"/modules/00-keys.fs\",\n\t\t\t\t\t\tparams: [modules.defaultSystem],\n\t\t\t\t\t\tunderlyingJS: e\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet critical = fullModuleFile.buildInfo.critical;\n\t\t\t\ttry {\n\t\t\t\t\tlet signingKey = JSON.parse(await modules.fs.read(module2point[\"00-keys.fs\"] + \"/etc/keys/\" + fullModuleFile.buildInfo.signer));\n\t\t\t\t\tawait recursiveKeyVerify(signingKey, khrlSignatures);\n\t\t\t\t\tif (!signingKey.keyInfo.usages.includes(\"moduleTrust\")) throw new Error(\"NOT_MODULE_SIGNING_KEY\");\n\t\t\t\t\tlet importSigningKey = await crypto.subtle.importKey(\"jwk\", signingKey.keyInfo.key, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t\t\t\tfullModuleFile = JSON.stringify(fullModuleFile);\n\t\t\t\t\tif (!await crypto.subtle.verify({\n\t\t\t\t\t\tname: \"Ed25519\"\n\t\t\t\t\t}, importSigningKey, hexToU8A(fullModuleSignature), new TextEncoder().encode(fullModuleFile))) throw new Error(\"MODULE_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to verify module:\", e);\n\t\t\t\t\tif (critical && modules.core.bootMode != \"disable-harden\") await panic(\"CRITICAL_MODULE_VERIFICATION_FAILED\", {\n\t\t\t\t\t\tname: \"/modules/\" + moduleName,\n\t\t\t\t\t\tparams: [modules.defaultSystem],\n\t\t\t\t\t\tunderlyingJS: e\n\t\t\t\t\t});\n\t\t\t\t\tif (modules.core.bootMode != \"disable-harden\") continue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet mountpoint = \".\" + crypto.getRandomValues(new Uint8Array(8)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tmountpointList.push(mountpoint);\n\t\t\tmodule2point[moduleName] = mountpoint;\n\t\t\tmodules.fs.mounts[mountpoint] = await modules.mounts.fileMount({\n\t\t\t\tsrcFile: modules.defaultSystem + \"/modules/\" + moduleName,\n\t\t\t\tread_only: true\n\t\t\t});\n\t\t\tif (moduleName == \"00-keys.fs\") await loadKHRL();\n\t\t\tif (modules.core.bootMode == \"logboot\") modules.core.tty_bios_api.println(\"\\t../modules/\" + moduleName);\n\t\t}\n\t\tmodules.fs.mounts.system = await modules.mounts.overlayMount({\n\t\t\tmounts: [ modules.defaultSystem, ...mountpointList ]\n\t\t});\n\t\tawait modules.fs.write(\"ram/run/moduleSystem.json\", JSON.stringify({\n\t\t\tsystem: [ modules.defaultSystem, ...mountpointList ]\n\t\t}));\n\t\tmodules.defaultSystem = \"system\";\n\t} catch (e) {\n\t\tconsole.error(\"Module system failed:\", e);\n\t}\n}\nawait loadModules();","37802a9cc3294cdff132dfea3d2139da6ff6f06f4fb01f807b407edafee08c48c25590582bace7d7527887338ee967a5af48ff720b2e3a2172a9d43f7ab60ffb":"function loadUi() {\n\t// @pcos-app-mode native\n\tlet uiStyle = document.createElement(\"style\");\n\tuiStyle.innerHTML = `body {\n\t\toverflow: hidden;\n\t\tbackground: black;\n\t\tcursor: none;\n\t\tfont-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n\t}\n\n\t.taskbar {\n\t\twidth: 100%;\n\t\tbackground: ${modules.core.bootMode == \"safe\" ? \"rgb(128, 128, 128)\" : \"rgba(128, 128, 128, 0.85)\"};\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\tposition: absolute;\n\t\tpadding: 4px;\n\t\tbox-sizing: border-box;\n\t\tborder-radius: 4px;\n\t\tdisplay: flex;\n\t}\n\n\t.taskbar .clock {\n\t\tmargin-right: 4px;\n\t}\n\n\t.taskbar .icon {\n\t\twidth: 27px;\n\t\theight: 27px;\n\t\tbackground-size: contain;\n\t\tmargin: 0 4px;\n\t}\n\n\t.filler {\n\t\tflex: 1;\n\t}\n\n\t.window {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\tbackground-color: ${modules.core.bootMode == \"safe\" ? \"rgb(240, 240, 240)\" : \"rgba(240, 240, 240, 0.5)\"};\n\t\tborder: 1px solid #ccc;\n\t\tbox-shadow: ${modules.core.bootMode == \"safe\" ? \"none\" : \"0 0 5px rgba(0, 0, 0, 0.3)\"};\n\t\tz-index: 1;\n\t\tresize: both;\n\t\twidth: 320px;\n\t\theight: 180px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: auto;\n\t\tbackdrop-filter: ${modules.core.bootMode == \"safe\" ? \"none\" : \"blur(8px)\"};\n\t\tanimation: ${modules.core.bootMode == \"safe\" ? \"none\" : \"fade-in 0.1s ease-in forwards\"};\n\t\tborder-radius: 4px;\n\t}\n\n\n\t.window.icon {\n\t\ttop: 72px;\n\t\tleft: 72px;\n\t\tresize: none;\n\t\twidth: 128px;\n\t\theight: 128px;\n\t}\n\n\t.window.dark {\n\t\tbackground-color: ${modules.core.bootMode == \"safe\" ? \"rgb(55, 55, 55)\" : \"rgba(55, 55, 55, 0.5)\"};\n\t\tcolor: white;\n\t\tborder: 1px solid #1b1b1b;\n\t}\n\n\t.window .title-bar {\n\t\tpadding: 6px;\n\t\tbackground-color: ${modules.core.bootMode == \"safe\" ? \"rgb(204, 204, 204)\" : \"rgba(204, 204, 204, 0.5)\"};\n\t\tcursor: move;\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\tuser-select: none;\n\t}\n\n\t.window.dark .title-bar {\n\t\tbackground-color: ${modules.core.bootMode == \"safe\" ? \"rgb(27, 27, 27)\" : \"rgba(27, 27, 27, 0.5)\"};\n\t}\n\n\t.window .button {\n\t\tcursor: pointer;\n\t\tpadding: 4px;\n\t\tborder: none;\n\t\tflex: 1;\n\t\tmargin: 0 0 0 2px;\n\t\tborder-radius: 4px;\n\t}\n\n\t.window .button:hover {\n\t\topacity: 75%;\n\t}\n\n\t.window .close-button {\n\t\tbackground: red;\n\t\tcolor: white;\n\t}\n\n\t.window .title-displayer {\n\t\tflex: 100;\n\t}\n\n\t.window .close-button:disabled {\n\t\topacity: 25%;\n\t}\n\n\t.window.fullscreen .resize-handle {\n\t\tdisplay: none;\n\t}\n\n\t.window.fullscreen {\n\t\twidth: 100% !important;\n\t\theight: 100% !important;\n\t\tposition: fixed;\n\t\ttop: 0 !important;\n\t\tleft: 0 !important;\n\t\ttransform: none;\n\t\tresize: none;\n\t\tborder: none;\n\t\tbox-shadow: none;\n\t}\n\n\t.window.fullscreen .title-bar {\n\t\tcursor: default;\n\t}\n\n\t.window .content {\n\t\tflex: 100;\n\t\toverflow: auto;\n\t\tposition: relative;\n\t\tbackground-color: #f0f0f0;\n\t}\n\n\t.window.dark .content {\n\t\tbackground-color: #373737;\n\t}\n\n\t.session {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: black;\n\t\tcursor: default;\n\t\tanimation: ${modules.core.bootMode == \"safe\" ? \"none\" : \"fade-in 0.1s ease-in forwards\"};\n\t}\n\n\t.session.secure {\n\t\tbackground: none${modules.core.bootMode == \"safe\" ? \" !important\" : \"\"};\n\t\tbackdrop-filter: ${modules.core.bootMode == \"safe\" ? \"none\" : \"blur(8px) brightness(50%)\"};\n\t\tanimation: ${modules.core.bootMode == \"safe\" ? \"none\" : \"fade 0.1s ease-out forwards\"};\n\t}\n\n\t.hidden {\n\t\tdisplay: none;\n\t}\n\t\n\t@keyframes fade-in {\n\t\t0% {\n\t\t\topacity: 0;\n\t\t}\n\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t@keyframes fade {\n\t\t0% {\n\t\t\tbackdrop-filter: blur(0px) brightness(100%);\n\t\t}\n\n\t\t100% {\n\t\t\tbackdrop-filter: blur(8px) brightness(50%);\n\t\t}\n\t}`;\n\tdocument.head.appendChild(uiStyle);\n\n\tfunction createWindow(sessionId, makeFullscreenOnAllScreens, asIconWindow, reportMovement) {\n\t\tlet fullscreen = makeFullscreenOnAllScreens || matchMedia(\"(max-width: 600px)\").matches;\n\t\tif (asIconWindow) fullscreen = false;\n\t\tlet id = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\tlet windowDiv = document.createElement('div');\n\t\twindowDiv.className = 'window ' + (fullscreen ? \"fullscreen \" : \"\") + \" \" + (asIconWindow ? \"icon\" : \"\");\n\t\tif (session.attrib(sessionId, \"dark\")) windowDiv.classList.add(\"dark\");\n\t\twindowDiv.id = 'window-' + id;\n\t\tlet titleBar = document.createElement('div');\n\t\ttitleBar.className = 'title-bar';\n\t\tlet title = document.createElement('span');\n\t\ttitle.className = 'title-displayer';\n\t\tlet closeButton = document.createElement('button');\n\t\tcloseButton.className = 'button close-button';\n\t\tcloseButton.innerHTML = '&#10005;';\n\t\ttitleBar.appendChild(title);\n\t\tif (!fullscreen && !asIconWindow) {\n\t\t\tlet fullscreenButton = document.createElement('button');\n\t\t\tfullscreenButton.className = 'button';\n\t\t\tfullscreenButton.innerHTML = '&#x25a1;';\n\t\t\tfullscreenButton.onclick = function() {\n\t\t\t\twindowDiv.classList.toggle(\"fullscreen\");\n\t\t\t}\n\t\t\ttitleBar.appendChild(fullscreenButton);\n\t\t}\n\t\tif (!asIconWindow) titleBar.appendChild(closeButton);\n\t\twindowDiv.appendChild(titleBar);\n\t\tlet content = document.createElement('div');\n\t\tcontent.className = 'content';\n\t\twindowDiv.appendChild(content);\n\t\tsession.tracker[sessionId].html.appendChild(windowDiv);\n\t\tif (!fullscreen) makeDraggable(windowDiv, titleBar, reportMovement);\n\t\treturn {\n\t\t\twindowDiv,\n\t\t\ttitle,\n\t\t\tcloseButton,\n\t\t\tcontent,\n\t\t\tsessionId\n\t\t};\n\t}\n\n\tfunction makeDraggable(windowDiv, titleBar, reportMovement) {\n\t\tlet pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n\n\t\ttitleBar.onmousedown = dragMouseDown;\n\t\ttitleBar.ontouchstart = dragMouseDown;\n\n\t\tfunction dragMouseDown(e) {\n\t\t\tif (e.type != \"touchstart\") e.preventDefault();\n\t\t\tif (e.type == \"touchstart\") e = e.touches[0];\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\n\t\t\tdocument.onmouseup = closeDragElement;\n\t\t\tdocument.ontouchend = closeDragElement;\n\t\t\tdocument.ontouchcancel = closeDragElement;\n\t\t\tdocument.onmousemove = elementDrag;\n\t\t\tdocument.ontouchmove = elementDrag;\n\t\t}\n\n\t\tfunction elementDrag(e) {\n\t\t\te.preventDefault();\n\t\t\tif (e.type == \"touchmove\") e = e.touches[0];\n\t\t\tpos1 = pos3 - e.clientX;\n\t\t\tpos2 = pos4 - e.clientY;\n\t\t\tpos3 = e.clientX;\n\t\t\tpos4 = e.clientY;\n\n\t\t\tif (!windowDiv.classList.contains(\"fullscreen\")) {\n\t\t\t\tif (reportMovement) reportMovement(windowDiv.offsetLeft - pos1, windowDiv.offsetTop - pos2);\n\t\t\t\twindowDiv.style.top = windowDiv.offsetTop - pos2 + 'px';\n\t\t\t\twindowDiv.style.left = windowDiv.offsetLeft - pos1 + 'px';\n\t\t\t}\n\t\t}\n\n\t\tfunction closeDragElement() {\n\t\t\tdocument.onmouseup = null;\n\t\t\tdocument.ontouchend = null;\n\t\t\tdocument.ontouchcancel = null;\n\t\t\tdocument.onmousemove = null;\n\t\t\tdocument.ontouchmove = null;\n\t\t}\n\t}\n\n\tlet session = {\n\t\tmksession: function() {\n\t\t\tif (modules.shuttingDown) throw new Error(\"SYSTEM_SHUTDOWN_REQUESTED\");\n\t\t\tlet identifier = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tlet session = document.createElement('div');\n\t\t\tsession.className = \"session hidden\";\n\t\t\tdocument.body.appendChild(session);\n\t\t\tthis.tracker[identifier] = {\n\t\t\t\thtml: session,\n\t\t\t\tattrib: {}\n\t\t\t};\n\t\t\treturn identifier;\n\t\t},\n\t\trmsession: function(session) {\n\t\t\tthis.tracker[session].html.remove();\n\t\t\tdelete this.tracker[session];\n\t\t},\n\t\tmuteAllSessions: function() {\n\t\t\tfor (let session in this.tracker) this.tracker[session].html.classList.add(\"hidden\");\n\t\t\tthis.active = null;\n\t\t},\n\t\tactivateSession: function(session) {\n\t\t\tthis.tracker[this.active]?.html?.classList?.add(\"hidden\");\n\t\t\tthis.tracker[session].html.classList.remove(\"hidden\");\n\t\t\tthis.active = session;\n\t\t},\n\t\tattrib: function(session, key, val) {\n\t\t\tif (val !== undefined) this.tracker[session].attrib[key] = val;\n\t\t\tif (key !== undefined) return this.tracker[session].attrib[key];\n\t\t\treturn this.tracker[session].attrib;\n\t\t},\n\t\tdestroy: function() {\n\t\t\tfor (let session in this.tracker) this.rmsession(session);\n\t\t\tthis.tracker = {};\n\t\t\tdelete this.systemSession;\n\t\t\tdelete modules.liu;\n\t\t\tdelete modules.serviceSession;\n\t\t\tuiStyle.remove();\n\t\t\tdelete modules.uiStyle;\n\t\t},\n\t\ttracker: {},\n\t\tactive: null\n\t}\n\n\tmodules.window = createWindow;\n\tmodules.session = session;\n\tmodules.uiStyle = uiStyle;\n\n\tmodules.session.systemSession = session.mksession();\n\tsession.muteAllSessions();\n\tsession.activateSession(modules.session.systemSession);\n\tmodules.startupWindow = modules.window(modules.session.systemSession);\n\tmodules.startupWindowProgress = document.createElement(\"progress\");\n\tmodules.startupWindow.title.innerText = \"PCOS 3\";\n\tmodules.startupWindow.content.style.padding = \"8px\";\n\tmodules.startupWindow.closeButton.classList.toggle(\"hidden\", true);\n\tmodules.startupWindow.content.innerText = \"PCOS is starting...\";\n\tmodules.startupWindow.content.appendChild(document.createElement(\"br\"));\n\tmodules.startupWindow.content.appendChild(modules.startupWindowProgress);\n}\n\nloadUi();","1a9087f39e9f3483603b2ee22c40543a3d8c01f1b0080a69456a4489f50fe81209f23ca493ef37096f8b8a8573483d29340a28fb756514c6570c4c794d2f224c":"function loadIpc() {\n\t// @pcos-app-mode native\n\tmodules.ipc = {\n\t\tcreate: function() {\n\t\t\tlet id = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tthis._ipc[id] = { owner: \"root\", group: \"root\", world: false, _listeners: [] };\n\t\t\treturn id;\n\t\t},\n\t\tdeclareAccess: function(id, access) {\n\t\t\tthis._ipc[id] = { ...this._ipc[id], ...access };\n\t\t},\n\t\tlistenFor: function(id) {\n\t\t\tlet thatIPC = this._ipc;\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tlet hasResolved = false;\n\t\t\t\treturn thatIPC[id]._listeners.push(function e(d) {\n\t\t\t\t\tif (hasResolved) return;\n\t\t\t\t\thasResolved = true;\n\t\t\t\t\treturn resolve(d);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsend: function(id, data) {\n\t\t\ttry {\n\t\t\t\tthis._ipc[id]._listeners.forEach(listener => listener(data));\n\t\t\t} catch {}\n\t\t},\n\t\tgetIPC: function(id) {\n\t\t\tlet ipc = { ...this._ipc[id] };\n\t\t\tipc._listeners = ipc._listeners.length;\n\t\t\treturn ipc;\n\t\t},\n\t\t_ipc: {}\n\t}\n}\nloadIpc();","bfea0ffd842191d06f1cfc57087d871e5de46eb8c9b31ee9b09198071a5defb31b4f90907351c5bce674da1fd23266e1256dd5d4f58faa335384fdb9c175f651":"function loadWebsocketSupport() {\n\tlet websocketAPI = {\n\t\tgetHandle: function(url) {\n\t\t\tlet handle = Array.from(crypto.getRandomValues(new Uint8Array(64))).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tlet websocket = new WebSocket(url);\n\t\t\twebsocket.binaryType = \"arraybuffer\";\n\t\t\twebsocketAPI._handles[handle] = {\n\t\t\t\tws: websocket,\n\t\t\t\tacl: {\n\t\t\t\t\towner: handle.slice(0, 16),\n\t\t\t\t\tgroup: handle.slice(0, 16),\n\t\t\t\t\tworld: true\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn handle;\n\t\t},\n\t\tsend: (arg) => websocketAPI._handles[arg.handle].ws.send(arg.data),\n\t\tclose: function(handle) {\n\t\t\tif (websocketAPI._handles.hasOwnProperty(handle)) websocketAPI._handles[handle].ws.close();\n\t\t\tdelete websocketAPI._handles[handle];\n\t\t},\n\t\tgetInfo: function(handle) {\n\t\t\treturn {\n\t\t\t\tbufferedAmount: websocketAPI._handles[handle].ws.bufferedAmount,\n\t\t\t\textensions: websocketAPI._handles[handle].ws.extensions,\n\t\t\t\tprotocol: websocketAPI._handles[handle].ws.protocol,\n\t\t\t\treadyState: websocketAPI._handles[handle].ws.readyState,\n\t\t\t\turl: websocketAPI._handles[handle].ws.url\n\t\t\t}\n\t\t},\n\t\twaitForEvent: function(arg) {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\twebsocketAPI._handles[arg.handle].ws.addEventListener(arg.eventName, function meName(arg2) {\n\t\t\t\t\tif (arg.eventName == \"message\") resolve(arg2.data);\n\t\t\t\t\telse if (arg.eventName == \"error\") resolve({\n\t\t\t\t\t\tcode: arg2.code,\n\t\t\t\t\t\treason: arg2.reason,\n\t\t\t\t\t\twasClean: arg2.wasClean\n\t\t\t\t\t});\n\t\t\t\t\telse resolve(arg.eventName);\n\t\t\t\t\ttry {\n\t\t\t\t\t\twebsocketAPI._handles[arg.handle].ws.removeEventListener(arg.eventName, meName);\n\t\t\t\t\t} catch {}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tassertAccess: function(arg) {\n\t\t\tif (arg.newACL) websocketAPI._handles[arg.handle].acl = arg.newACL;\n\t\t\treturn websocketAPI._handles[arg.handle].acl;\n\t\t},\n\t\twebsocketState: (handle) => websocketAPI._handles[handle].ws.readyState,\n\t\t_handles: {}\n\t}\n\tmodules.websocket = websocketAPI;\n}\n\nloadWebsocketSupport();","c97f51464c409b921a902ff8cef2f59739301d28cf18984428fedc373d185b2df788566d8f80404fb5ca7543982b3419bd6a66bf3dae1f642dfc520e7b0411c3":"function loadLull() {\n\tlet lullSession;\n\tmodules.lull = function() {\n\t\tif (lullSession) return;\n\t\tlet style = document.createElement(\"style\");\n\t\tstyle.innerHTML = `* { cursor: none !important; };`;\n\t\tdocument.head.appendChild(style);\n\t\tlullSession = modules.session.mksession();\n\t\tmodules.session.muteAllSessions();\n\t\tmodules.session.activateSession(lullSession);\n\t\tfunction wake() {\n\t\t\tremoveEventListener(\"mousemove\", wake);\n\t\t\tremoveEventListener(\"click\", wake);\n\t\t\tremoveEventListener(\"keydown\", wake);\n\t\t\tstyle.remove();\n\t\t\tmodules.session.muteAllSessions();\n\t\t\tmodules.session.activateSession(modules.session.systemSession);\n\t\t\tmodules.session.rmsession(lullSession);\n\t\t\tlullSession = null;\n\t\t}\n\t\taddEventListener(\"mousemove\", wake);\n\t\taddEventListener(\"click\", wake);\n\t\taddEventListener(\"keydown\", wake);\n\t}\n}\nloadLull();","366057fa3302ff309c90bd6d59eedb5c4f07141c2e150e22dac519e73b8a36547b55bf7aea87837e473eb8c8a4554a589df53ec55b3edf7ef369d74affc1794b":"async function networkd() {\n\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\tmodules.network = { connected: false, address: null, ws: null, runOnClose: Promise.resolve(), _runOnClose: _ => 1 };\n\ttry {\n\t\tlet config = await modules.fs.read(modules.defaultSystem + \"/etc/network.json\");\n\t\tconfig = JSON.parse(config);\n\t\tfunction isPacketFiltered(packet) {\n\t\t\tif (!config.filters) return false;\n\t\t\tfor (let filter of config.filters) {\n\t\t\t\tif (filter.type == 0) return filter.result;\n\t\t\t\tif (filter.type == 1 && isPacketFrom(packet, filter)) return filter.result;\n\t\t\t\tif (filter.type == 2 && filter.protocol == packet.data.type) return filter.result;\n\t\t\t\tif (filter.type == 3 && isPacketFrom(packet, filter) && filter.protocol == packet.data.type) return filter.result;\n\t\t\t\tif (filter.type == 4 && isPacketFrom(packet, filter) &&\n\t\t\t\t\t(packet.data.type == \"connectionful\" || packet.data.type == \"connectionless\")) {\n\t\t\t\t\t\tif (packet.data.gate == filter.gate) return filter.result;\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tfunction isPacketFrom(packet, filter) {\n\t\t\tif (filter.from == packet.from) return true;\n\t\t\tif (filter.ipHash == packet.from.slice(0, 8)) return true;\n\t\t\tif (filter.systemID == packet.from.slice(8, 24)) return true;\n\t\t\treturn false;\n\t\t}\n\t\tmodules.network.reloadConfig = async function() {\n\t\t\tconfig = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/network.json\"));\n\t\t\tmodules.network.updates = config.updates;\n\t\t\ttry {\n\t\t\t\tws.send(JSON.stringify({\n\t\t\t\t\tfinalProxyPacket: true\n\t\t\t\t}));\n\t\t\t\tws.close();\n\t\t\t} catch {\n\t\t\t\tonclose();\n\t\t\t}\n\t\t}\n\t\tmodules.network.updates = config.updates;\n\t\tlet stage = 0;\n\t\tlet pukey = (modules.core.prefs.read(\"system_id\") || {}).public;\n\t\tlet importedKey = await crypto.subtle.importKey(\"jwk\", (modules.core.prefs.read(\"system_id\") || {}).private, { name: \"Ed25519\" }, true, [\"sign\"]);\n\t\tlet ws = new WebSocket(config.url);\n\t\tlet handle = Array.from(crypto.getRandomValues(new Uint8Array(64))).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\tmodules.network.runOnClose = new Promise(a => modules.network._runOnClose = a);\n\t\tws.binaryType = \"arraybuffer\";\n\t\tasync function onclose() {\n\t\t\tmodules.network.connected = false;\n\t\t\tmodules.network.address = null;\n\t\t\tmodules.network.hostname = null;\n\t\t\tmodules.network._runOnClose();\n\t\t\tws = new WebSocket(config.url);\n\t\t\tstage = 0;\n\t\t\tws.onmessage = onmessage;\n\t\t\tws.onclose = onclose;\n\t\t\tmodules.network.runOnClose = new Promise(a => modules.network._runOnClose = a);\n\t\t}\n\t\tasync function onmessage(e) {\n\t\t\tlet messageData;\n\t\t\ttry {\n\t\t\t\tmessageData = JSON.parse(e.data);\n\t\t\t} catch {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (stage == 0) {\n\t\t\t\tws.send(JSON.stringify({ ...pukey, forceConnect: true, userCustomizable: config.ucBits, hostname: config.hostname }));\n\t\t\t\tstage++;\n\t\t\t} else if (stage == 1) {\n\t\t\t\tif (messageData.event != \"SignatureRequest\") {\n\t\t\t\t\tws.onclose = null;\n\t\t\t\t\tdelete modules.websocket._handles[handle];\n\t\t\t\t\treturn ws.close();\n\t\t\t\t}\n\t\t\t\tws.send(u8aToHex(new Uint8Array(await crypto.subtle.sign({ name: \"Ed25519\" }, importedKey, hexToU8A(messageData.signBytes)))));\n\t\t\t\tstage++;\n\t\t\t} else if (stage == 2) {\n\t\t\t\tif (messageData.event != \"ConnectionEstablished\") {\n\t\t\t\t\tws.onclose = null;\n\t\t\t\t\tdelete modules.websocket._handles[handle];\n\t\t\t\t\treturn ws.close();\n\t\t\t\t}\n\t\t\t\tmodules.websocket._handles[handle] = {\n\t\t\t\t\tws: ws,\n\t\t\t\t\tacl: {\n\t\t\t\t\t\towner: handle.slice(0, 16),\n\t\t\t\t\t\tgroup: handle.slice(0, 16),\n\t\t\t\t\t\tworld: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmodules.network.connected = true;\n\t\t\t\tmodules.network.address = messageData.address;\n\t\t\t\tmodules.network.hostname = messageData.hostname;\n\t\t\t\tmodules.network.ws = handle;\n\t\t\t\tstage++;\n\t\t\t} else if (stage == 3) {\n\t\t\t\tif (messageData.event == \"DisconnectionComplete\") {\n\t\t\t\t\tmodules.network.connected = false;\n\t\t\t\t\tmodules.network.address = null;\n\t\t\t\t\tmodules.network.hostname = null;\n\t\t\t\t\tmodules.network.ws = null;\n\t\t\t\t\tmodules.network._runOnClose();\n\t\t\t\t\tws.onclose = null;\n\t\t\t\t\tdelete modules.websocket._handles[handle];\n\t\t\t\t\treturn ws.close();\n\t\t\t\t}\n\t\t\t\tif (messageData.from) {\n\t\t\t\t\tif (isPacketFiltered(messageData)) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (messageData.data.type == \"ping\") {\n\t\t\t\t\t\tif (typeof messageData.data.resend !== \"string\") return;\n\t\t\t\t\t\tif (messageData.data.resend.length > 64) return;\n\t\t\t\t\t\tws.send(JSON.stringify({ receiver: messageData.from, data: { type: \"pong\", resend: messageData.data.resend } }));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tws.onmessage = onmessage;\n\t\tws.onclose = onclose;\n\t} catch {\n\t\tmodules.network.serviceStopped = true;\n\t\tmodules.core.tty_bios_api.println(\"network: not starting network\");\n\t}\n}\nnetworkd();","9cbc090e61fe82b14bae95dc2031282775c8cfebc4dfaa473631307a3b468c112b36b4b0a03f407c1200b2f684079ac7ca40678c89e48ded31f38198bc08e605":"function reeAPIs() {\n\t// @pcos-app-mode native\n\n\tasync function denyUnmanifested(list, token) {\n\t\tlet privileges = (await modules.tokens.info(token)).privileges;\n\t\tlet isAllowlist = list.some(a => a.lineType == \"allow\");\n\t\tif (isAllowlist) list = list.filter(a => a.lineType == \"allow\");\n\t\tlet disallowedRegistry = [];\n\t\tfor (let privilege of privileges) {\n\t\t\tif ((!list.some(x => x.data == privilege && x.lineType == \"allow\") && isAllowlist) || list.some(x => x.data == privilege && x.lineType == \"deny\")) {\n\t\t\t\tprivileges = privileges.filter(x => x != privilege);\n\t\t\t\tdisallowedRegistry.push(privilege);\n\t\t\t}\n\t\t}\n\t\tmodules.tokens.removePrivileges(token, disallowedRegistry);\n\t\treturn privileges;\n\t}\n\n\tmodules.reeAPIInstance = async function(opts) {\n\t\tlet {ree, ses, token, taskId, limitations, privateData} = opts;\n\t\tlet processToken = token;\n\t\tlet tokenInfo = await modules.tokens.info(token);\n\t\tlet user = tokenInfo.user;\n\t\tlet groups = tokenInfo.groups || [];\n\t\tlet privileges = tokenInfo.privileges;\n\t\tlet processPipes = [];\n\t\tlet websockets = [];\n\t\tlet automatedLogonSessions = {};\n\t\tlet networkListens = {};\n\t\tlet connections = {};\n\t\tlet language = modules.session.attrib(ses, \"language\") || undefined;\n\t\tprivileges = await denyUnmanifested(limitations, token);\n\n\t\tasync function fs_action(action, privilegeCheck, path, ...xtra) {\n\t\t\tlet fsPermissions;\n\t\t\ttry {\n\t\t\t\tfsPermissions = await modules.fs.permissions(path);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t}\n\t\t\tif (!privilegeCheck(fsPermissions)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\ttry {\n\t\t\t\tlet response = await modules.fs[action](path, ...xtra);\n\t\t\t\treturn response;\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t}\n\t\t}\n\t\tasync function recursiveKeyVerify(key, khrl) {\n\t\t\tif (!key) throw new Error(\"NO_KEY\");\n\t\t\tif (key.keyInfo.dates?.since > Date.now()) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\t\tif (Date.now() > key.keyInfo.dates?.until) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tlet hash = u8aToHex(new Uint8Array(await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode((key.keyInfo.key).x))));\n\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\tif (khrl.includes(hash)) throw new Error(\"KEY_REVOKED\");\n\t\t\tlet signedByKey = modules.ksk_imported;\n\t\t\tif (key.keyInfo.signedBy) {\n\t\t\t\tsignedByKey = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/keys/\" + key.keyInfo.signedBy, token));\n\t\t\t\tif (!signedByKey.keyInfo.usages.includes(\"keyTrust\")) throw new Error(\"NOT_KEY_AUTHORITY\");\n\t\t\t\tawait recursiveKeyVerify(signedByKey, khrl);\n\t\t\t\tsignedByKey = await crypto.subtle.importKey(\"jwk\", signedByKey.keyInfo.key, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t\t}\n\t\t\tif (!await crypto.subtle.verify({ name: \"Ed25519\" }, signedByKey, hexToU8A(key.signature), new TextEncoder().encode(JSON.stringify(key.keyInfo)))) throw new Error(\"KEY_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\treturn true;\n\t\t}\n\n\t\tasync function connfulConnect(connOpts) {\n\t\t\tlet {address, gate, key, private: privateKey, doNotVerifyServer, verifyByDomain} = connOpts;\n\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\tlet networkListenID = Array.from(crypto.getRandomValues(new Uint8Array(64))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tlet connID = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tlet newKeyKA, exportedKA;\n\t\t\tif (!key && !privateKey) {\n\t\t\t\tnewKeyKA = await crypto.subtle.generateKey({name: \"Ed25519\", namedCurve: \"P-256\"}, true, [\"sign\", \"verify\"]);\n\t\t\t\texportedKA = await crypto.subtle.exportKey(\"jwk\", newKeyKA.publicKey);\n\t\t\t\texportedKA = { keyInfo: { usages: [\"connfulSecureClient:\" + modules.network.address], key: exportedKA }, signature: null };\n\t\t\t\tnewKeyKA = newKeyKA.privateKey;\n\t\t\t} else {\n\t\t\t\tnewKeyKA = await crypto.subtle.importKey(\"jwk\", privateKey, {name: \"Ed25519\"}, true, [\"sign\"]);\n\t\t\t\texportedKA = key;\n\t\t\t}\n\t\t\tlet ephemeralKey = await crypto.subtle.generateKey({name: \"X25519\"}, true, [\"deriveBits\"]);\n\t\t\tlet exported = await crypto.subtle.exportKey(\"jwk\", ephemeralKey.publicKey);\n\t\t\texported = { signedBy: \"clientKey\", usages: [\"connfulSecureEphemeral\"], key: exported };\n\t\t\tlet signature = u8aToHex(new Uint8Array(await crypto.subtle.sign({ name: \"Ed25519\" }, newKeyKA, new TextEncoder().encode(JSON.stringify(exported)))));\n\t\t\tlet _dataBufferPromise = null;\n\t\t\tlet _rejectDataPromise = null;\n\t\t\tlet dataBufferPromise = new Promise((r, e) => [_dataBufferPromise, _rejectDataPromise] = [r, e]);\n\t\t\tlet _settlePromise = null;\n\t\t\tlet _rejectPromise = null;\n\t\t\tlet settlePromise = new Promise((r, e) => [_settlePromise, _rejectPromise] = [r, e]);\n\t\t\tlet packetID = crypto.getRandomValues(new Uint8Array(32)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tconnections[connID + \":client\"] = {\n\t\t\t\tourKey: ephemeralKey,\n\t\t\t\tfrom: address,\n\t\t\t\ttheirMainKeyReceived: false,\n\t\t\t\ttheirKeyRaw: null,\n\t\t\t\taesUsableKey: null,\n\t\t\t\tnetworkListenID,\n\t\t\t\tdataBuffer: [],\n\t\t\t\tdataBufferPromise,\n\t\t\t\tsettlePromise,\n\t\t\t\tgateIfNeeded: gate\n\t\t\t}\n\t\t\tasync function eventListener(e) {\n\t\t\t\ttry {\n\t\t\t\t\tlet packet = JSON.parse(e.data);\n\t\t\t\t\tif (!packet.from) {\n\t\t\t\t\t\tif (packet.event == \"AddressUnreachable\" && packet.packetID == packetID)\n\t\t\t\t\t\t\t_rejectPromise(new Error(\"ADDRESS_UNREACHABLE\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (packet.data.gate) return;\n\t\t\t\t\tif (packet.data.type == \"connectionful\" && packet.data.connectionID == connID && packet.data.action == \"start\") {\n\t\t\t\t\t\tif (connections[connID + \":client\"].aesUsableKey) return;\n\t\t\t\t\t\tlet theirUsableKey = await crypto.subtle.importKey(\"jwk\", packet.data.content.keyInfo.key, { name: \"X25519\" }, true, []);\n\t\t\t\t\t\tlet joinedKeys = await crypto.subtle.deriveBits({ name: \"X25519\", public: theirUsableKey }, ephemeralKey.privateKey, 256);\n\t\t\t\t\t\tlet aesUsableKey = await crypto.subtle.importKey(\"raw\", joinedKeys, {\n\t\t\t\t\t\t\tname: \"AES-GCM\"\n\t\t\t\t\t\t}, true, [\"encrypt\", \"decrypt\"]);\n\t\t\t\t\t\tconnections[connID + \":client\"].aesUsableKey = aesUsableKey;\n\t\t\t\t\t\tconnections[connID + \":client\"].theirKeyRaw = packet.data.content;\n\t\t\t\t\t\tlet iv = crypto.getRandomValues(new Uint8Array(16));\n\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\taction: \"xchange\",\n\t\t\t\t\t\t\t\tconnectionID: connID,\n\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\tiv: u8aToHex(iv),\n\t\t\t\t\t\t\t\t\tct: u8aToHex(new Uint8Array(await crypto.subtle.encrypt({\n\t\t\t\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\t\t\t\tiv\n\t\t\t\t\t\t\t\t\t}, aesUsableKey, new TextEncoder().encode(JSON.stringify(exportedKA)))))\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tgate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.connectionID == connID && packet.data.action == \"xchange\") {\n\t\t\t\t\t\tif (connections[connID + \":client\"].theirMainKeyReceived) return;\n\t\t\t\t\t\tlet theirMainKeyDecrypt = JSON.parse(new TextDecoder().decode(await crypto.subtle.decrypt({\n\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\tiv: hexToU8A(packet.data.content.iv)\n\t\t\t\t\t\t}, connections[connID + \":client\"].aesUsableKey, hexToU8A(packet.data.content.ct))));\n\t\t\t\t\t\tlet usableMainKey = await crypto.subtle.importKey(\"jwk\", theirMainKeyDecrypt.keyInfo.key, {name: \"Ed25519\"}, true, [\"verify\"]);\n\t\t\t\t\t\tlet verifyKeySignature = await crypto.subtle.verify({ name: \"Ed25519\" }, usableMainKey, hexToU8A(connections[connID + \":client\"].theirKeyRaw.signature), new TextEncoder().encode(JSON.stringify(connections[connID + \":client\"].theirKeyRaw.keyInfo)));\n\t\t\t\t\t\tif (!doNotVerifyServer && verifyKeySignature) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet khrlFiles = await modules.fs.ls(modules.defaultSystem + \"/etc/keys/khrl\", processToken);\n\t\t\t\t\t\t\t\tlet khrlSignatures = [];\n\t\t\t\t\t\t\t\tfor (let khrlFile of khrlFiles) {\n\t\t\t\t\t\t\t\t\tlet khrl = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/keys/khrl/\" + khrlFile, processToken));\n\t\t\t\t\t\t\t\t\tlet khrlSignature = khrl.signature;\n\t\t\t\t\t\t\t\t\tdelete khrl.signature;\n\t\t\t\t\t\t\t\t\tif (await crypto.subtle.verify({ name: \"Ed25519\" }, modules.ksk_imported, hexToU8A(khrlSignature), new TextEncoder().encode(JSON.stringify(khrl.list)))) {\n\t\t\t\t\t\t\t\t\t\tkhrlSignatures.push(...khrl.list);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tverifyKeySignature = await recursiveKeyVerify(theirMainKeyDecrypt, khrlSignatures);\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\tverifyKeySignature = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!verifyKeySignature || (!theirMainKeyDecrypt.keyInfo.usages.includes(\"connfulSecureServer:\" + address) &&\n\t\t\t\t\t\t\t\t!theirMainKeyDecrypt.keyInfo.usages.includes(\"connfulSecureServer:\" + verifyByDomain))) {\n\t\t\t\t\t\t\t_rejectPromise(new Error(\"SERVER_SIGNATURE_VERIFICATION_FAILED\"));\n\t\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\t\tdelete connections[connID + \":client\"];\n\t\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t\treturn websocket.send(JSON.stringify({\n\t\t\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\t\taction: \"drop\",\n\t\t\t\t\t\t\t\t\tconnectionID: connID,\n\t\t\t\t\t\t\t\t\tgate\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconnections[connID + \":client\"].theirMainKeyReceived = theirMainKeyDecrypt;\n\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\taction: \"nice2meetu\",\n\t\t\t\t\t\t\t\tconnectionID: connID,\n\t\t\t\t\t\t\t\tgate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\t_settlePromise();\n\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.connectionID == connID && packet.data.action == \"drop\") {\n\t\t\t\t\t\tif (connections[connID + \":client\"].dying) return;\n\t\t\t\t\t\t_rejectPromise(new Error(\"CONNECTION_DROPPED\"));\n\t\t\t\t\t\tif (_rejectDataPromise) _rejectDataPromise(new Error(\"CONNECTION_DROPPED\"));\n\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\taction: \"drop\",\n\t\t\t\t\t\t\t\tconnectionID: connID,\n\t\t\t\t\t\t\t\tgate\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tconnections[connID + \":client\"].dying = true;\n\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\tif (!connections[connID + \":client\"].dataBuffer.length) delete connections[connID + \":client\"];\n\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.connectionID == connID && packet.data.action == \"data\") {\n\t\t\t\t\t\tif (!connections[connID + \":client\"].aesUsableKey) return;\n\t\t\t\t\t\tif (!connections[connID + \":client\"].theirMainKeyReceived) return;\n\t\t\t\t\t\tif (connections[connID + \":client\"].writingLock) await connections[connID + \":client\"].writingLock;\n\t\t\t\t\t\tlet writingLockRelease;\n\t\t\t\t\t\tlet writingLock = new Promise(r => writingLockRelease = r);\n\t\t\t\t\t\tconnections[connID + \":client\"].writingLock = writingLock;\n\t\t\t\t\t\tconnections[connID + \":client\"].dataBuffer.push(new TextDecoder().decode(await crypto.subtle.decrypt({\n\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\tiv: hexToU8A(packet.data.content.iv)\n\t\t\t\t\t\t}, connections[connID + \":client\"].aesUsableKey, hexToU8A(packet.data.content.ct))));\n\t\t\t\t\t\tif (!(connections[connID + \":client\"].dataBuffer.length - 1)) {\n\t\t\t\t\t\t\t_dataBufferPromise();\n\t\t\t\t\t\t\tdataBufferPromise = new Promise((r, e) => [_dataBufferPromise, _rejectDataPromise] = [r, e]);\n\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":client\"].dataBufferPromise = dataBufferPromise;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twritingLockRelease();\n\t\t\t\t\t}\n\t\t\t\t} catch {}\n\t\t\t};\n\t\t\tnetworkListens[networkListenID] = { ws: websocket, gate: gate, fn: eventListener };\n\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\treceiver: address,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\taction: \"start\",\n\t\t\t\t\tgate,\n\t\t\t\t\tconnectionID: connID,\n\t\t\t\t\tcontent: { keyInfo: exported, signature }\n\t\t\t\t},\n\t\t\t\tid: packetID\n\t\t\t}));\n\t\t\tmodules.network.runOnClose.then(function() {\n\t\t\t\tif (connections.hasOwnProperty(connID + \":client\")) {\n\t\t\t\t\tconnections[connID + \":client\"].dying = true;\n\t\t\t\t\tif (!connections[connID + \":client\"].dataBuffer.length) delete connections[connID + \":client\"];\n\t\t\t\t}\n\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t_rejectPromise(new Error(\"NETWORK_CLOSED\"));\n\t\t\t\t_rejectDataPromise(new Error(\"NETWORK_CLOSED\"));\n\t\t\t});\n\t\t\treturn connID + \":client\";\n\t\t}\n\n\t\tasync function connfulWrite(sendOpts) {\n\t\t\tif (!connections.hasOwnProperty(sendOpts.connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\tif (connections[sendOpts.connectionID].dying) throw new Error(\"CONNECTION_DROPPED\");\n\t\t\tlet iv = crypto.getRandomValues(new Uint8Array(16));\n\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tnetworkListens[connections[sendOpts.connectionID].networkListenID].ws.send(JSON.stringify({\n\t\t\t\treceiver: connections[sendOpts.connectionID].from,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\taction: \"data\",\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\tiv: u8aToHex(iv),\n\t\t\t\t\t\tct: u8aToHex(new Uint8Array(await crypto.subtle.encrypt({\n\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\tiv\n\t\t\t\t\t\t}, connections[sendOpts.connectionID].aesUsableKey, new TextEncoder().encode(sendOpts.data))))\n\t\t\t\t\t},\n\t\t\t\t\tconnectionID: sendOpts.connectionID.slice(0, -7),\n\t\t\t\t\tgate: connections[sendOpts.connectionID].gateIfNeeded\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tasync function connfulRead(connectionID) {\n\t\t\tif (!connections.hasOwnProperty(connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\tif (!connections[connectionID].dataBuffer.length) await connections[connectionID].dataBufferPromise;\n\t\t\tlet data = connections[connectionID].dataBuffer.shift();\n\t\t\tif (connections[connectionID].dying && connections[connectionID].dataBuffer.length == 0) delete connections[connectionID]; \n\t\t\treturn data;\n\t\t}\n\n\t\tfunction connfulDisconnect(connectionID) {\n\t\t\tif (!connections.hasOwnProperty(connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\tif (connections[connectionID].dying) return;\n\t\t\tnetworkListens[connections[connectionID].networkListenID].ws.send(JSON.stringify({\n\t\t\t\treceiver: connections[connectionID].from,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\taction: \"drop\",\n\t\t\t\t\tconnectionID: connectionID.slice(0, -7),\n\t\t\t\t\tgate: connections[connectionID].gateIfNeeded\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tree.beforeCloseDown(async function() {\n\t\t\tfor (let processPipe of processPipes) delete modules.ipc._ipc[processPipe];\n\t\t\tfor (let connection in connections) try { networkListens[connections[connection].networkListenID].ws.send(JSON.stringify({\n\t\t\t\treceiver: connections[connection].from,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\taction: \"drop\",\n\t\t\t\t\tconnectionID: connection.slice(0, -7),\n\t\t\t\t\tgate: connections[connection].gateIfNeeded\n\t\t\t\t}\n\t\t\t})); } catch {}\n\t\t\tfor (let networkListen in networkListens) networkListens[networkListen].ws.removeEventListener(\"message\", networkListens[networkListen].fn);\n\t\t\tfor (let websocket of websockets) modules.websocket.close(websocket);\n\t\t\tawait modules.tokens.revoke(token);\n\t\t\tfor (let i in modules.csps) if (modules.csps[i].hasOwnProperty(\"removeSameGroupKeys\")) modules.csps[i].removeSameGroupKeys(null, taskId);\n\t\t});\n\t\tlet apis = {\n\t\t\tprivate: {\n\t\t\t\tsetUser: async function(newUser) {\n\t\t\t\t\tuser = newUser;\n\t\t\t\t\tgroups = (await modules.users.getUserInfo(newUser, false, token || processToken)).groups || [];\n\t\t\t\t},\n\t\t\t\taddPrivilege: (newPrivilege) => !privileges.includes(newPrivilege) && privileges.push(newPrivilege),\n\t\t\t\trmPrivilege: (newPrivilege) => privileges.includes(newPrivilege) && privileges.splice(privileges.indexOf(newPrivilege), 1),\n\t\t\t\tsetPrivileges: (newPrivileges) => privileges = newPrivileges,\n\t\t\t\treauthorize: async function() {\n\t\t\t\t\tlet tokenInfo = await modules.tokens.info(token);\n\t\t\t\t\tuser = tokenInfo.user;\n\t\t\t\t\tgroups = tokenInfo.groups || [];\n\t\t\t\t\tprivileges = tokenInfo.privileges;\n\t\t\t\t\tprivileges = await denyUnmanifested(limitations, token);\n\t\t\t\t}\n\t\t\t},\n\t\t\tpublic: {\n\t\t\t\tgetUser: () => user,\n\t\t\t\tgetPrivileges: () => privileges,\n\t\t\t\tterminate: async function() {\n\t\t\t\t\tawait ree.closeDown();\n\t\t\t\t},\n\t\t\t\trmPrivilege: async function(privilege) {\n\t\t\t\t\tif (!privileges.includes(privilege)) throw new Error(\"NO_SUCH_PRIVILEGE\");\n\t\t\t\t\tprivileges.splice(privileges.indexOf(privilege), 1);\n\t\t\t\t\tawait modules.tokens.removePrivilege(token, privilege);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\trmPrivileges: async function(privilegesRemoved) {\n\t\t\t\t\tprivileges = privileges.filter(x => !privilegesRemoved.includes(x));\n\t\t\t\t\tawait modules.tokens.removePrivileges(token, privilegesRemoved);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tswitchUser: async function(desiredUser) {\n\t\t\t\t\tif (!privileges.includes(\"SWITCH_USERS_AUTOMATICALLY\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.tokens.halfInitialize(token, desiredUser);\n\t\t\t\t\tlet tokenInfo = await modules.tokens.info(token);\n\t\t\t\t\tuser = tokenInfo.user;\n\t\t\t\t\tgroups = tokenInfo.groups || [];\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tshutdown: async function(arg) {\n\t\t\t\t\tlet {isKexec, isReboot, force, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"SYSTEM_SHUTDOWN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\ttry { modules.websocket._handles[modules.network.ws].ws.close(); } catch {}\n\t\t\t\t\t\tmodules.session.destroy();\n\t\t\t\t\t\tif (isReboot) return location.reload();\n\t\t\t\t\t\treturn modules.killSystem();\n\t\t\t\t\t}\n\t\t\t\t\tawait modules.restart(!isReboot, token || processToken, isKexec);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tfs_read: async function(arg) {\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await fs_action(\"read\", (fsPermissions) => fsPermissions.owner == user || fsPermissions.world.includes(\"r\") || groups.includes(fsPermissions.group) || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_ls: async function(arg) {\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await fs_action(\"ls\",\n\t\t\t\t\t(fsPermissions) =>\n\t\t\t\t\t\tfsPermissions.owner == user ||\n\t\t\t\t\t\tgroups.includes(fsPermissions.group) ||\n\t\t\t\t\t\t(fsPermissions.world.includes(\"r\") &&\n\t\t\t\t\t\tfsPermissions.world.includes(\"x\")) || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_write: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {path, data, token} = arg;\n\t\t\t\t\tlet pathParent = path.split(\"/\").slice(0, -1).join(\"/\");\n\t\t\t\t\tlet basename = path.split(\"/\").slice(-1)[0];\n\t\t\t\t\tlet isCreating = false;\n\t\t\t\t\tlet fsParentPermissions;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!(await modules.fs.ls(pathParent, token || processToken)).includes(basename)) isCreating = true;\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error(\"CREATION_CHECK_FAILED\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfsParentPermissions = await modules.fs.permissions(pathParent, token || processToken);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error(\"PERMISSION_CHECKING_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t\tif (!fsParentPermissions.world.includes(\"w\") && fsParentPermissions.owner != user && !groups.includes(fsParentPermissions.group) && !privileges.includes(\"FS_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t\n\t\t\t\t\tif (isCreating) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait modules.fs.chown(path, user, token || processToken);\n\t\t\t\t\t\t\tawait modules.fs.chgrp(path, groups[0], token || processToken);\n\t\t\t\t\t\t\tawait modules.fs.chmod(path, \"r\", token || processToken);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\t\tthrow new Error(\"PERMISSION_CHANGE_FAILED\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn await fs_action(\"write\", (fsPermissions) => fsPermissions.owner == user || groups.includes(fsPermissions.group) || fsPermissions.world.includes(\"w\") || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, data, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_rm: async function(arg) {\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_REMOVE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await fs_action(\"rm\", (fsPermissions) => fsPermissions.owner == user || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, token);\n\t\t\t\t},\n\t\t\t\tfs_mkdir: async function(arg) {\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet pathParent = path.split(\"/\").slice(0, -1).join(\"/\");\n\t\t\t\t\tlet fsPermissions;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfsPermissions = await modules.fs.permissions(pathParent, token || processToken);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error(\"PERMISSION_CHECKING_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t\tif (!fsPermissions.world.includes(\"w\") && fsPermissions.owner != user && !groups.includes(fsPermissions.group) && !privileges.includes(\"FS_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait modules.fs.chown(path, user, token || processToken);\n\t\t\t\t\t\tawait modules.fs.chgrp(path, groups[0] || user, token || processToken);\n\t\t\t\t\t\tawait modules.fs.chmod(path, \"rx\", token || processToken);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"PERMISSION_CHANGE_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs.mkdir(path, token || processToken);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfs_chown: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_CHANGE_PERMISSION\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {path, newUser, token} = arg;\n\t\t\t\t\treturn await fs_action(\"chown\", (fsPermissions) => fsPermissions.owner == user || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, newUser, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_chgrp: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_CHANGE_PERMISSION\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {path, newGrp, token} = arg;\n\t\t\t\t\treturn await fs_action(\"chgrp\", (fsPermissions) => fsPermissions.owner == user || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, newGrp, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_chmod: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_CHANGE_PERMISSION\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {path, newPermissions, token} = arg;\n\t\t\t\t\treturn await fs_action(\"chmod\", (fsPermissions) => fsPermissions.owner == user || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, newPermissions, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_permissions: async function(arg) {\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet pathParent = path.split(\"/\").slice(0, -1).join(\"/\");\n\t\t\t\t\tif (pathParent != \"\") {\n\t\t\t\t\t\tlet fsPermissions;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tfsPermissions = await modules.fs.permissions(pathParent, token || processToken);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthrow new Error(\"PERMISSION_CHECKING_FAILED\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!fsPermissions.world.includes(\"r\") && fsPermissions.owner != user && !privileges.includes(\"FS_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t}\n\t\t\t\t\treturn await fs_action(\"permissions\", () => true, path, token || processToken);\n\t\t\t\t},\n\t\t\t\tfs_mounts: async function() {\n\t\t\t\t\tif (!privileges.includes(\"FS_LIST_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs.lsmounts();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfs_sync: async function(arg) {\n\t\t\t\t\tlet {mount, token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_UNMOUNT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs.sync(mount, token || processToken);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfs_unmount: async function(arg) {\n\t\t\t\t\tlet {mount, token, force} = arg;\n\t\t\t\t\tif (!privileges.includes(\"FS_UNMOUNT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs.unmount(mount, token || processToken, force);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfs_mountInfo: async function(mount) {\n\t\t\t\t\tif (!privileges.includes(\"FS_LIST_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.fs.mountInfo(mount);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"FS_ACTION_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetSystemMount: async function() {\n\t\t\t\t\tif (!privileges.includes(\"FS_LIST_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.defaultSystem;\n\t\t\t\t},\n\t\t\t\tcreatePipe: async function() {\n\t\t\t\t\tif (!privileges.includes(\"IPC_CREATE_PIPE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet pipe = await modules.ipc.create();\n\t\t\t\t\tmodules.ipc.declareAccess(pipe, {\n\t\t\t\t\t\towner: user,\n\t\t\t\t\t\tgroup: groups[0],\n\t\t\t\t\t\tworld: false\n\t\t\t\t\t});\n\t\t\t\t\tprocessPipes.push(pipe);\n\t\t\t\t\treturn pipe;\n\t\t\t\t},\n\t\t\t\tlistenToPipe: async function(pipe) {\n\t\t\t\t\tif (!privileges.includes(\"IPC_LISTEN_PIPE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet permissions = await modules.ipc.getIPC(pipe);\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"IPC_BYPASS_PERMISSIONS\") && !processPipes.includes(pipe)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.ipc.listenFor(pipe);\n\t\t\t\t},\n\t\t\t\tsendToPipe: async function(dataSend) {\n\t\t\t\t\tif (!privileges.includes(\"IPC_SEND_PIPE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {pipe, data} = dataSend;\n\t\t\t\t\tlet permissions = await modules.ipc.getIPC(pipe);\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"IPC_BYPASS_PERMISSIONS\") && !processPipes.includes(pipe)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.ipc.send(pipe, data);\n\t\t\t\t},\n\t\t\t\tclosePipe: async function(pipe) {\n\t\t\t\t\tif (!processPipes.includes(pipe)) throw new Error(\"NOT_OWN_PIPE\");\n\t\t\t\t\tprocessPipes.splice(processPipes.indexOf(pipe), 1);\n\t\t\t\t\treturn delete modules.ipc._ipc[pipe];\n\t\t\t\t},\n\t\t\t\tsetPipePermissions: async function(opts) {\n\t\t\t\t\tif (!privileges.includes(\"IPC_CHANGE_PERMISSION\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {pipe, newPermissions} = opts;\n\t\t\t\t\tlet permissions = await modules.ipc.getIPC(pipe);\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"IPC_BYPASS_PERMISSIONS\") && !processPipes.includes(pipe)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.ipc.declareAccess(pipe, newPermissions);\n\t\t\t\t},\n\t\t\t\televate: async function(newPrivileges) {\n\t\t\t\t\tnewPrivileges = newPrivileges.filter(privilege => !privileges.includes(privilege));\n\t\t\t\t\tnewPrivileges = Array.from(new Set(newPrivileges));\n\t\t\t\t\tif (!privileges.includes(\"SWITCH_USERS_AUTOMATICALLY\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tprivileges.push(...newPrivileges);\n\t\t\t\t\tawait modules.tokens.addPrivileges(token, newPrivileges);\n\t\t\t\t\tprivileges = await denyUnmanifested(limitations, token);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgetVersion: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_BUILD\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.pcos_version;\n\t\t\t\t},\n\t\t\t\tlocale: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn language || navigator.languages[0].split(\"-\")[0].toLowerCase();\n\t\t\t\t},\n\t\t\t\tosLocale: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.locales.get(\"OS_LOCALE\", language);\n\t\t\t\t},\n\t\t\t\tgetUserInfo: async function(arg) {\n\t\t\t\t\tlet {desiredUser, token, sensitive} = arg;\n\t\t\t\t\tif (!privileges.includes(\"GET_USER_INFO\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (desiredUser != user && !privileges.includes(\"USER_INFO_OTHERS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (sensitive && desiredUser != user && !privileges.includes(\"SENSITIVE_USER_INFO_OTHERS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.users.getUserInfo(desiredUser, sensitive, token || processToken);\n\t\t\t\t},\n\t\t\t\tsetUserInfo: async function(arg) {\n\t\t\t\t\tlet {desiredUser, token, info} = arg;\n\t\t\t\t\tif (!privileges.includes(\"SET_USER_INFO\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await modules.users.moduser(desiredUser, info, token || processToken);\n\t\t\t\t},\n\t\t\t\tsetOwnSecurityChecks: async function(arg) {\n\t\t\t\t\tlet {token, checks} = arg;\n\t\t\t\t\tif (!privileges.includes(\"SET_SECURITY_CHECKS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet allowedTypes = [ \"pbkdf2\", \"informative\", \"informative_deny\", \"timeout\", \"timeout_deny\", \"serverReport\", \"pc-totp\", \"totp\", \"workingHours\", \"zkpp\" ];\n\t\t\t\t\tlet sanitizedChecks = [];\n\t\t\t\t\tchecks.filter(a => allowedTypes.includes(a.type));\n\t\t\t\t\tfor (let checkIndex in checks) {\n\t\t\t\t\t\tlet check = checks[checkIndex];\n\t\t\t\t\t\tif (check.type == \"pbkdf2\") {\n\t\t\t\t\t\t\tif (!check.salt || !check.hash) continue;\n\t\t\t\t\t\t\tcheck = { type: \"pbkdf2\", salt: check.salt, hash: check.hash };\n\t\t\t\t\t\t} else if (check.type == \"informative\" || check.type == \"informative_deny\") {\n\t\t\t\t\t\t\tif (!check.message) continue;\n\t\t\t\t\t\t\tcheck = { type: check.type, message: check.message };\n\t\t\t\t\t\t} else if (check.type == \"timeout\" || check.type == \"timeout_deny\") {\n\t\t\t\t\t\t\tif (!check.timeout) continue;\n\t\t\t\t\t\t\tcheck = { type: check.type, timeout: check.timeout };\n\t\t\t\t\t\t} else if (check.type == \"serverReport\") {\n\t\t\t\t\t\t\tif (!check.url) continue;\n\t\t\t\t\t\t\tcheck = { type: \"serverReport\", url: check.url };\n\t\t\t\t\t\t} else if (check.type == \"pc-totp\" || check.type == \"totp\") {\n\t\t\t\t\t\t\tif (!check.secret) continue;\n\t\t\t\t\t\t\tcheck = { type: check.type, secret: check.secret };\n\t\t\t\t\t\t} else if (check.type == \"workingHours\") {\n\t\t\t\t\t\t\tif (!check.start || !check.end) continue;\n\t\t\t\t\t\t\tif (typeof check.start.hours !== \"number\" || typeof check.start.minutes !== \"number\" || typeof check.start.seconds !== \"number\") continue;\n\t\t\t\t\t\t\tif (typeof check.end.hours !== \"number\" || typeof check.end.minutes !== \"number\" || typeof check.end.seconds !== \"number\") continue;\n\t\t\t\t\t\t\tcheck = {\n\t\t\t\t\t\t\t\ttype: \"workingHours\",\n\t\t\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\t\t\thours: check.start.hours,\n\t\t\t\t\t\t\t\t\tminutes: check.start.minutes,\n\t\t\t\t\t\t\t\t\tseconds: check.start.seconds\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tend: {\n\t\t\t\t\t\t\t\t\thours: check.end.hours,\n\t\t\t\t\t\t\t\t\tminutes: check.end.minutes,\n\t\t\t\t\t\t\t\t\tseconds: check.end.seconds\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else if (check.type == \"zkpp\") {\n\t\t\t\t\t\t\tif (!check.publicKey) continue;\n\t\t\t\t\t\t\tcheck = { type: \"zkpp\", publicKey: check.publicKey };\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsanitizedChecks.push(check);\n\t\t\t\t\t}\n\t\t\t\t\tlet previousUserInfo = await modules.users.getUserInfo(user, false, token || processToken);\n\t\t\t\t\tawait modules.users.moduser(user, { ...previousUserInfo, securityChecks: sanitizedChecks }, token || processToken);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgetNewToken: async function(desiredUser) {\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.session.attrib(ses, \"secureLock\")) await modules.session.attrib(ses, \"secureLock\");\n\t\t\t\t\tif (modules.session.active != ses) throw new Error(\"TRY_AGAIN_LATER\");\n\t\t\t\t\tlet releaseLock;\n\t\t\t\t\tlet lock = new Promise((resolve) => releaseLock = resolve);\n\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", lock);\n\t\t\t\t\tlet secureSession = await modules.session.mksession();\n\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", secureSession);\n\t\t\t\t\tmodules.session.attrib(secureSession, \"language\", language);\n\n\t\t\t\t\tlet dom = modules.session.tracker[secureSession].html;\n\t\t\t\t\tlet ogDom = modules.session.tracker[ses].html;\n\t\t\t\t\tlet bgfx = document.createElement(\"div\");\n\t\t\t\t\tbgfx.classList.add(\"session\", \"secure\");\n\t\t\t\t\tdom.appendChild(bgfx);\n\t\t\t\t\tmodules.session.attrib(secureSession, \"dark\", modules.session.attrib(ses, \"dark\"));\n\t\t\t\t\tdom.style.background = ogDom.style.background;\n\t\t\t\t\tdom.style.backgroundSize = \"100% 100%\";\n\n\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\tmodules.session.activateSession(secureSession);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet logonUI = await modules.authui(secureSession, desiredUser);\n\t\t\t\t\t\treturn new Promise(function(resolve) {\n\t\t\t\t\t\t\tlogonUI.hook(async function(result) {\n\t\t\t\t\t\t\t\treleaseLock();\n\t\t\t\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", null);\n\t\t\t\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", null);\n\t\t\t\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\t\t\t\tmodules.session.rmsession(secureSession);\n\t\t\t\t\t\t\t\tmodules.session.activateSession(ses);\n\t\t\t\t\t\t\t\tif (result.success == false) return resolve(false);\n\t\t\t\t\t\t\t\treturn resolve(result.token);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"authui:\", e);\n\t\t\t\t\t\treleaseLock();\n\t\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", null);\n\t\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", null);\n\t\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\t\tmodules.session.rmsession(secureSession);\n\t\t\t\t\t\tmodules.session.activateSession(ses);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetProcessToken: () => processToken,\n\t\t\t\tsetProcessToken: async function(desiredToken) {\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet validation = await modules.tokens.validate(desiredToken, {});\n\t\t\t\t\tif (!validation) throw new Error(\"INVALID_TOKEN\");\n\t\t\t\t\ttoken = processToken = desiredToken;\n\t\t\t\t\tlet tokenInfo = await modules.tokens.info(token);\n\t\t\t\t\tuser = tokenInfo.user;\n\t\t\t\t\tgroups = tokenInfo.groups || [];\n\t\t\t\t\tprivileges = tokenInfo.privileges;\n\t\t\t\t\tprivileges = await denyUnmanifested(limitations, token);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\trevokeToken: function(dt) {\n\t\t\t\t\tif (!privileges.includes(\"MANAGE_TOKENS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.tokens.revoke(dt || processToken);\n\t\t\t\t},\n\t\t\t\tforkToken: function(dt) {\n\t\t\t\t\tif (!privileges.includes(\"MANAGE_TOKENS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.tokens.fork(dt || processToken);\n\t\t\t\t},\n\t\t\t\tremoveTokenPrivilege: async function(arg) {\n\t\t\t\t\tlet {token, privilege} = arg;\n\t\t\t\t\tif (!privileges.includes(\"MANAGE_TOKENS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.tokens.removePrivilege(token, privilege);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tremoveTokenPrivileges: async function(arg) {\n\t\t\t\t\tlet {token} = arg;\n\t\t\t\t\tif (!privileges.includes(\"MANAGE_TOKENS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.tokens.removePrivileges(token, arg.privileges);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\testimateStorage: async function() {\n\t\t\t\t\tif (!privileges.includes(\"FS_LIST_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet estimate = await navigator.storage.estimate();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tinternal: {\n\t\t\t\t\t\t\tused: estimate.usage,\n\t\t\t\t\t\t\tfree: estimate.quota - estimate.usage,\n\t\t\t\t\t\t\ttotal: estimate.quota\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tstartTask: async function(arg) {\n\t\t\t\t\tlet {file, argPassed, token, runInBackground, silent, privateData} = arg;\n\t\t\t\t\tif (!privileges.includes(\"START_TASK\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (runInBackground && !privileges.includes(\"START_BACKGROUND_TASK\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!token) token = await modules.tokens.fork(processToken);\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await modules.tasks.exec(file, argPassed, modules.window(runInBackground ? modules.serviceSession : ses), token, silent, privateData);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e.name == \"Error\") throw e;\n\t\t\t\t\t\tthrow new Error(\"UNABLE_TO_START_TASK\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlistTasks: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LIST_TASKS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.tasks.listPublicTasks();\n\t\t\t\t},\n\t\t\t\ttaskInfo: async function(taskId) {\n\t\t\t\t\tif (!privileges.includes(\"LIST_TASKS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await modules.tasks.taskInfo(taskId);\n\t\t\t\t},\n\t\t\t\tsignalTask: async function(arg) {\n\t\t\t\t\tlet {taskId, signal} = arg;\n\t\t\t\t\tif (!privileges.includes(\"SIGNAL_TASK\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!privileges.includes(\"TASK_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\tlet taskInfo = await modules.tasks.taskInfo(taskId);\n\t\t\t\t\t\tif (taskInfo.runBy != user) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t}\n\t\t\t\t\treturn await modules.tasks.sendSignal(taskId, signal);\n\t\t\t\t},\n\t\t\t\tlookupLocale: function(key) {   \n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.locales.get(key, language);\n\t\t\t\t},\n\t\t\t\tlookupOtherLocale: function(arg) {\n\t\t\t\t\tlet {key, locale} = arg;   \n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.locales.get(key, locale);\n\t\t\t\t},\n\t\t\t\tufTimeInc: function(args) {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.userfriendliness.inconsiderateTime(language, ...args);\n\t\t\t\t},\n\t\t\t\tufInfoUnits: function(args) {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.userfriendliness.informationUnits(language, ...args)\n\t\t\t\t},\n\t\t\t\tisDarkThemed: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_THEME\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.session.attrib(ses, \"dark\")\n\t\t\t\t},\n\t\t\t\tfetchSend: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FETCH_SEND\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {url, init} = arg;\n\t\t\t\t\tlet fetc = await fetch(url, init);\n\t\t\t\t\tlet responseAB;\n\t\t\t\t\tif (init.mode != \"no-cors\" && !init.noArrayBuffer) responseAB = await fetc.arrayBuffer();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstatus: fetc.status,\n\t\t\t\t\t\tstatusText: fetc.statusText,\n\t\t\t\t\t\tok: fetc.ok,\n\t\t\t\t\t\tredirected: fetc.redirected,\n\t\t\t\t\t\ttype: fetc.type,\n\t\t\t\t\t\turl: fetc.url,\n\t\t\t\t\t\theaders: Object.fromEntries(Array.from(fetc.headers)),\n\t\t\t\t\t\tarrayBuffer: responseAB,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tswitchUserWithSetup: async function(desiredUser) {\n\t\t\t\t\tif (!privileges.includes(\"SWITCH_USERS_AUTOMATICALLY\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.tokens.userInitialize(token, desiredUser);\n\t\t\t\t\tlet tokenInfo = await modules.tokens.info(token);\n\t\t\t\t\tuser = tokenInfo.user;\n\t\t\t\t\tgroups = tokenInfo.groups || [];\n\t\t\t\t\tprivileges = tokenInfo.privileges;\n\t\t\t\t\tprivileges = await denyUnmanifested(limitations, token);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\trunKlvlCode: async function(code) {\n\t\t\t\t\tif (!privileges.includes(\"RUN_KLVL_CODE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn eval(code);\n\t\t\t\t},\n\t\t\t\tcspOperation: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"CSP_OPERATIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.csps[arg.cspProvider][arg.operation](arg.cspArgument, taskId);\n\t\t\t\t},\n\t\t\t\tavailableCsps: async function() {\n\t\t\t\t\tif (!privileges.includes(\"CSP_OPERATIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn Object.keys(modules.csps);\n\t\t\t\t},\n\t\t\t\tufTimeCon: function(args) {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.userfriendliness.considerateTime(language, ...args);\n\t\t\t\t},\n\t\t\t\twebsocketOpen: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"WEBSOCKETS_OPEN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet handle = await modules.websocket.getHandle(arg);\n\t\t\t\t\twebsockets.push(handle);\n\t\t\t\t\tmodules.websocket.assertAccess({ handle, newACL: {\n\t\t\t\t\t\towner: user,\n\t\t\t\t\t\tgroup: groups[0],\n\t\t\t\t\t\tworld: false\n\t\t\t\t\t}});\n\t\t\t\t\treturn handle;\n\t\t\t\t},\n\t\t\t\tlistenToWebsocket: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"WEBSOCKETS_LISTEN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet permissions = modules.websocket.assertAccess({ handle: arg.handle });\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"WEBSOCKET_BYPASS_PERMISSIONS\") && !websockets.includes(arg.handle)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.websocket.waitForEvent(arg);\n\t\t\t\t},\n\t\t\t\tsendToWebsocket: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"WEBSOCKETS_SEND\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet permissions = modules.websocket.assertAccess({ handle: arg.handle });\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"WEBSOCKET_BYPASS_PERMISSIONS\") && !websockets.includes(arg.handle)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.websocket.send(arg);\n\t\t\t\t},\n\t\t\t\tcloseWebsocket: async function(websocket) {\n\t\t\t\t\tif (!websockets.includes(websocket)) throw new Error(\"NOT_OWN_WEBSOCKET\");\n\t\t\t\t\twebsockets.splice(websockets.indexOf(websocket), 1);\n\t\t\t\t\treturn modules.websocket.close(websocket);\n\t\t\t\t},\n\t\t\t\twebsocketInfo: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"WEBSOCKET_INFO\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet permissions = modules.websocket.assertAccess({ handle: arg.handle });\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"WEBSOCKET_BYPASS_PERMISSIONS\") && !websockets.includes(arg.handle)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.websocket.getInfo(arg);\n\t\t\t\t},\n\t\t\t\tsetWebsocketPermissions: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"WEBSOCKET_SET_PERMISSIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet permissions = modules.websocket.assertAccess({ handle: arg.handle });\n\t\t\t\t\tif (permissions.owner != user && !groups.includes(permissions.group) && !permissions.world && !privileges.includes(\"WEBSOCKET_BYPASS_PERMISSIONS\") && !websockets.includes(arg.handle)) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\treturn await modules.websocket.assertAccess(arg);\n\t\t\t\t},\n\t\t\t\tgetPublicSystemID: async function() {\n\t\t\t\t\tif (!privileges.includes(\"IDENTIFY_SYSTEM\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn (modules.core.prefs.read(\"system_id\") || {}).public;\n\t\t\t\t},\n\t\t\t\tgetPrivateSystemID: async function() {\n\t\t\t\t\tif (!privileges.includes(\"IDENTIFY_SYSTEM_SENSITIVE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn (modules.core.prefs.read(\"system_id\") || {}).private;\n\t\t\t\t},\n\t\t\t\ttypeIntoOtherCLI: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"CLI_MODIFICATIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!modules.tasks.tracker.hasOwnProperty(arg.taskId)) throw new Error(\"TASK_NOT_FOUND\");\n\t\t\t\t\tlet bypassWorks = modules.tasks.tracker[arg.taskId].apis.public.getProcessToken() == arg.bypass;\n\t\t\t\t\tif (!bypassWorks) {\n\t\t\t\t\t\tlet taskInfo = await modules.tasks.taskInfo(arg.taskId);\n\t\t\t\t\t\tif (taskInfo.runBy != user && !privileges.includes(\"TASK_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t}\n\t\t\t\t\tif (!modules.tasks.tracker[arg.taskId].cliio) throw new Error(\"NO_CLI_ATTACHED\");\n\t\t\t\t\treturn await modules.tasks.tracker[arg.taskId].cliio.xtermInstance.input(arg.text, arg.human);\n\t\t\t\t},\n\t\t\t\tgetOtherCLIData: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"CLI_MODIFICATIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!modules.tasks.tracker.hasOwnProperty(arg.taskId)) throw new Error(\"TASK_NOT_FOUND\");\n\t\t\t\t\tlet bypassWorks = modules.tasks.tracker[arg.taskId].apis.public.getProcessToken() == arg.bypass;\n\t\t\t\t\tif (!bypassWorks) {\n\t\t\t\t\t\tlet taskInfo = await modules.tasks.taskInfo(arg.taskId);\n\t\t\t\t\t\tif (taskInfo.runBy != user && !privileges.includes(\"TASK_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t}\n\t\t\t\t\tif (!modules.tasks.tracker[arg.taskId].cliio) throw new Error(\"NO_CLI_ATTACHED\");\n\t\t\t\t\treturn await modules.tasks.tracker[arg.taskId].cliio.signup();\n\t\t\t\t},\n\t\t\t\twaitForOtherCLI: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"CLI_MODIFICATIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!modules.tasks.tracker.hasOwnProperty(arg.taskId)) throw new Error(\"TASK_NOT_FOUND\");\n\t\t\t\t\tlet bypassWorks = modules.tasks.tracker[arg.taskId].apis.public.getProcessToken() == arg.bypass;\n\t\t\t\t\tif (!bypassWorks) {\n\t\t\t\t\t\tlet taskInfo = await modules.tasks.taskInfo(arg.taskId);\n\t\t\t\t\t\tif (taskInfo.runBy != user && !privileges.includes(\"TASK_BYPASS_PERMISSIONS\")) throw new Error(\"PERMISSION_DENIED\");\n\t\t\t\t\t}\n\t\t\t\t\tif (modules.tasks.tracker[arg.taskId].cliio) return true;\n\t\t\t\t\treturn await modules.tasks.tracker[arg.taskId].cliio.attachedCLISignUp();\n\t\t\t\t},\n\t\t\t\tlldaRead: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.disk.partition(arg.partition).getData();\n\t\t\t\t},\n\t\t\t\tlldaWrite: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.disk.partition(arg.partition).setData(arg.data);\n\t\t\t\t},\n\t\t\t\tlldaList: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_LIST_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.disk.partitions();\n\t\t\t\t},\n\t\t\t\tlldaInitPartitions: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_INIT_PARTITIONS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.disk.insertPartitionTable();\n\t\t\t\t},\n\t\t\t\tlldaRemove: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_REMOVE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.disk.partition(arg.partition).remove();\n\t\t\t\t},\n\t\t\t\tlldaIDBRead: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_IDB_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.idb.readPart(arg.key);\n\t\t\t\t},\n\t\t\t\tlldaIDBWrite: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_IDB_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.core.idb.writePart(arg.key, arg.value);\n\t\t\t\t},\n\t\t\t\tlldaIDBRemove: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_IDB_REMOVE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.core.idb.removePart(arg.key);\n\t\t\t\t},\n\t\t\t\tlldaIDBList: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_IDB_LIST\")) throw new Error(\"UNAUTHORIZED_ACTION\"); \n\t\t\t\t\treturn modules.core.idb.listParts(); \n\t\t\t\t},\n\t\t\t\tlldaIDBSync: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LLDISK_IDB_SYNC\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.core.idb.sync();\n\t\t\t\t},\n\t\t\t\tfs_mount: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_MOUNT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.fs.mounts[arg.mountpoint]) throw new Error(\"MOUNT_EXISTS\");\n\t\t\t\t\tmodules.fs.mounts[arg.mountpoint] = await modules.mounts[arg.filesystem](arg.filesystemOptions);\n\t\t\t\t},\n\t\t\t\tsupportedFilesystems: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_FILESYSTEMS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn Object.keys(modules.mounts);\n\t\t\t\t},\n\t\t\t\tinstalledLocales: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_LOCALE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn Object.keys(modules.locales).filter(a => a != \"get\" && a != \"defaultLocale\");\n\t\t\t\t},\n\t\t\t\trunningServer: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_SERVER_URL\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn location.origin;\n\t\t\t\t},\n\t\t\t\tfs_isDirectory: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"FS_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {path, token} = arg;\n\t\t\t\t\treturn await fs_action(\"isDirectory\", (fsPermissions) => fsPermissions.owner == user || fsPermissions.world.includes(\"r\") || groups.includes(fsPermissions.group) || privileges.includes(\"FS_BYPASS_PERMISSIONS\"), path, token || processToken);\n\t\t\t\t},\n\t\t\t\tautomatedLogonCreate: async function(arg) {\n\t\t\t\t\tlet { desiredUser, token } = arg;\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet automatedLogon = Array.from(crypto.getRandomValues(new Uint8Array(64))).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet access = await modules.users.access(desiredUser, token || processToken);\n\t\t\t\t\t\taccess = await access.getNextPrompt();\n\t\t\t\t\t\tautomatedLogonSessions[automatedLogon] = access;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tthrow new Error(\"AUTOMATED_LOGON_CREATE_FAILED\")\n\t\t\t\t\t}\n\t\t\t\t\treturn automatedLogon;\n\t\t\t\t},\n\t\t\t\tautomatedLogonGet: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet sharedObj = { ...automatedLogonSessions[arg] };\n\t\t\t\t\t\tdelete sharedObj.input;\n\t\t\t\t\t\treturn sharedObj;\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error(\"AUTOMATED_LOGON_GET_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tautomatedLogonInput: async function(arg) {\n\t\t\t\t\tlet { session, input } = arg;\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tautomatedLogonSessions[session] = await automatedLogonSessions[session].input(input);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tthrow new Error(\"AUTOMATED_LOGON_INPUT_FAILED\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tautomatedLogonDelete: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tdelete automatedLogonSessions[arg];\n\t\t\t\t},\n\t\t\t\tsetSystemMount: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"SET_DEFAULT_SYSTEM\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tmodules.defaultSystem = arg;\n\t\t\t\t},\n\t\t\t\tusedRAM: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_SYSTEM_RESOURCES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet mem = performance.memory;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttotal: mem.jsHeapSizeLimit,\n\t\t\t\t\t\t\tused: mem.usedJSHeapSize,\n\t\t\t\t\t\t\tfree: mem.jsHeapSizeLimit - mem.usedJSHeapSize\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch {}\n\t\t\t\t\tlet mem = await performance.measureUserAgentSpecificMemory();\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttotal: Infinity,\n\t\t\t\t\t\tused: mem.bytes,\n\t\t\t\t\t\tfree: Infinity\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcheckBootMode: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_BOOT_MODE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.core.bootMode || \"normal\";\n\t\t\t\t},\n\t\t\t\tgetScreenInfo: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_SCREEN_INFO\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: document.documentElement.clientWidth,\n\t\t\t\t\t\theight: document.documentElement.clientHeight,\n\t\t\t\t\t\tcolorDepth: screen.colorDepth,\n\t\t\t\t\t\torientation: {\n\t\t\t\t\t\t\ttype: screen.orientation.type,\n\t\t\t\t\t\t\tangle: screen.orientation.angle\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfullWidth: screen.width,\n\t\t\t\t\t\tfullHeight: screen.height,\n\t\t\t\t\t\tavailWidth: screen.availWidth,\n\t\t\t\t\t\tavailHeight: screen.availHeight,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twaitTermination: async function(arg) {\n\t\t\t\t\tif (!privileges.includes(\"LIST_TASKS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.tasks.waitTermination(arg);\n\t\t\t\t},\n\t\t\t\tconsentGetToken: async function(params) {\n\t\t\t\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.session.attrib(ses, \"secureLock\")) await modules.session.attrib(ses, \"secureLock\");\n\t\t\t\t\tif (modules.session.active != ses) throw new Error(\"TRY_AGAIN_LATER\");\n\t\t\t\t\tlet { desiredUser, intent } = params;\n\t\t\t\t\tif (!intent) throw new Error(\"INTENT_REQUIRED\");\n\t\t\t\t\tlet releaseLock;\n\t\t\t\t\tlet lock = new Promise((resolve) => releaseLock = resolve);\n\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", lock);\n\t\t\t\t\tlet secureSession = await modules.session.mksession();\n\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", secureSession);\n\t\t\t\t\tmodules.session.attrib(secureSession, \"language\", language);\n\n\t\t\t\t\tlet dom = modules.session.tracker[secureSession].html;\n\t\t\t\t\tlet ogDom = modules.session.tracker[ses].html;\n\t\t\t\t\tlet bgfx = document.createElement(\"div\");\n\t\t\t\t\tbgfx.classList.add(\"session\", \"secure\");\n\t\t\t\t\tdom.appendChild(bgfx);\n\t\t\t\t\tmodules.session.attrib(secureSession, \"dark\", modules.session.attrib(ses, \"dark\"));\n\t\t\t\t\tdom.style.background = ogDom.style.background;\n\t\t\t\t\tdom.style.backgroundSize = \"100% 100%\";\n\n\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\tmodules.session.activateSession(secureSession);\n\t\t\t\t\tlet task = await modules.tasks.taskInfo(taskId);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet logonUI = await modules.consentui(secureSession, {\n\t\t\t\t\t\t\tuser: desiredUser,\n\t\t\t\t\t\t\tpath: task.file,\n\t\t\t\t\t\t\targs: task.arg,\n\t\t\t\t\t\t\tintent,\n\t\t\t\t\t\t\tname: params.name\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn new Promise(function(resolve) {\n\t\t\t\t\t\t\tlogonUI.hook(async function(result) {\n\t\t\t\t\t\t\t\treleaseLock();\n\t\t\t\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", null);\n\t\t\t\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", null);\n\t\t\t\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\t\t\t\tmodules.session.rmsession(secureSession);\n\t\t\t\t\t\t\t\tmodules.session.activateSession(ses);\n\t\t\t\t\t\t\t\tif (result.success == false) return resolve(false);\n\t\t\t\t\t\t\t\treturn resolve(result.token);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"consentui:\", e);\n\t\t\t\t\t\treleaseLock();\n\t\t\t\t\t\tmodules.session.attrib(ses, \"secureLock\", null);\n\t\t\t\t\t\tmodules.session.attrib(ses, \"secureID\", null);\n\t\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\t\tmodules.session.rmsession(secureSession);\n\t\t\t\t\t\tmodules.session.activateSession(ses);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnetworkPing: async function(address) {\n\t\t\t\t\tif (!privileges.includes(\"PCOS_NETWORK_PING\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\treturn Promise.race([ new Promise(async function(resolve, reject) {\n\t\t\t\t\t\tlet networkListenID = Array.from(crypto.getRandomValues(new Uint8Array(64))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet packetId = Array.from(crypto.getRandomValues(new Uint8Array(32))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet resend = Array.from(crypto.getRandomValues(new Uint8Array(32))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tfunction eventListener(e) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet packet = JSON.parse(e.data);\n\t\t\t\t\t\t\t\tif (packet.packetID == packetId && packet.event == \"AddressUnreachable\") {\n\t\t\t\t\t\t\t\t\treject(new Error(\"ADDRESS_UNREACHABLE\"));\n\t\t\t\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (packet.from == address && packet.data.type == \"pong\" && packet.data.resend == resend) {\n\t\t\t\t\t\t\t\t\tresolve(\"success\");\n\t\t\t\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnetworkListens[networkListenID] = { ws: websocket, fn: eventListener };\n\t\t\t\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: \"ping\",\n\t\t\t\t\t\t\t\tresend: resend\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tid: packetId\n\t\t\t\t\t\t}))\n\t\t\t\t\t}), new Promise((_, reject) => modules.network.runOnClose.then(_ => reject(new Error(\"NETWORK_CLOSED\")))) ]);\n\t\t\t\t},\n\t\t\t\tlogOut: async function(desiredUser) {\n\t\t\t\t\tif (desiredUser != user && !privileges.includes(\"LOGOUT_OTHERS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (desiredUser == user && !privileges.includes(\"LOGOUT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.session.active != ses && !privileges.includes(\"LOGOUT_OTHERS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.logOut(desiredUser);\n\t\t\t\t},\n\t\t\t\tlock: async function() {\n\t\t\t\t\tif (modules.session.active == ses && !privileges.includes(\"LOGOUT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.session.active != ses && !privileges.includes(\"LOGOUT_OTHERS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tmodules.session.muteAllSessions();\n\t\t\t\t\tmodules.session.activateSession(modules.session.systemSession);\n\t\t\t\t},\n\t\t\t\tgetPrivateData: () => privateData,\n\t\t\t\tlull: async function() {\n\t\t\t\t\tif (!privileges.includes(\"LULL_SYSTEM\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.session.active != ses && !privileges.includes(\"LULL_SYSTEM_FORCE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.lull();\n\t\t\t\t},\n\t\t\t\tconnlessListen: async function(gate) {\n\t\t\t\t\tif (!privileges.includes(\"CONNLESS_LISTEN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!gate.startsWith(\"user_\") && !privileges.includes(\"CONNLESS_LISTEN_GLOBAL\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\treturn Promise.race([ new Promise(async function(resolve) {\n\t\t\t\t\t\tlet networkListenID = Array.from(crypto.getRandomValues(new Uint8Array(64))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tfunction eventListener(e) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet packet = JSON.parse(e.data);\n\t\t\t\t\t\t\t\tif (packet.data.type == \"connectionless\" && packet.data.gate == gate) {\n\t\t\t\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t\t\t\tresolve(packet);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnetworkListens[networkListenID] = { ws: websocket, fn: eventListener };\n\t\t\t\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\t\t\t}), new Promise((_, reject) => modules.network.runOnClose.then(_ => reject(new Error(\"NETWORK_CLOSED\")))) ]);\n\t\t\t\t},\n\t\t\t\tconnlessSend: async function(sendOpts) {\n\t\t\t\t\tif (!privileges.includes(\"CONNLESS_SEND\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet { gate, address, content } = sendOpts;\n\t\t\t\t\tlet packetId = Array.from(crypto.getRandomValues(new Uint8Array(32))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\treceiver: address,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype: \"connectionless\",\n\t\t\t\t\t\t\tgate: gate,\n\t\t\t\t\t\t\tcontent: content\n\t\t\t\t\t\t},\n\t\t\t\t\t\tid: packetId\n\t\t\t\t\t}));\n\t\t\t\t\treturn Promise.race([ new Promise(async function(resolve, reject) {\n\t\t\t\t\t\tlet networkListenID = Array.from(crypto.getRandomValues(new Uint8Array(64))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tfunction eventListener(e) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet packet = JSON.parse(e.data);\n\t\t\t\t\t\t\t\tif (packet.from) return;\n\t\t\t\t\t\t\t\tif (packet.packetID == packetId) {\n\t\t\t\t\t\t\t\t\twebsocket.removeEventListener(\"message\", eventListener);\n\t\t\t\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t\t\t\tif (packet.event == \"PacketPong\") return resolve(\"success\");\n\t\t\t\t\t\t\t\t\treject(new Error(\"ADDRESS_UNREACHABLE\"));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnetworkListens[networkListenID] = { ws: websocket, fn: eventListener };\n\t\t\t\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\t\t\t}), new Promise((_, reject) => modules.network.runOnClose.then(_ => reject(new Error(\"NETWORK_CLOSED\")))) ]);\n\t\t\t\t},\n\t\t\t\tgetUsers: async function(token) {\n\t\t\t\t\tif (!privileges.includes(\"GET_USER_LIST\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn await modules.users.getUsers(token || processToken);\n\t\t\t\t},\n\t\t\t\tgetNetworkAddress: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_NETWORK_ADDRESS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.network.address;\n\t\t\t\t},\n\t\t\t\tconnfulListen: async function(listenOpts) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_LISTEN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet {gate, key, private: privateKey, verifyClientKeyChain} = listenOpts;\n\t\t\t\t\tif (!gate.startsWith(\"user_\") && !privileges.includes(\"CONNFUL_LISTEN_GLOBAL\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet networkListenID = Array.from(crypto.getRandomValues(new Uint8Array(64))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\tlet usableKey = await crypto.subtle.importKey(\"jwk\", privateKey, {name: \"Ed25519\"}, true, [\"sign\"]);\n\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\tlet _connectionBufferPromise = null;\n\t\t\t\t\tlet _connectionBufferReject = null;\n\t\t\t\t\tlet connectionBufferPromise = new Promise((r, j) => [_connectionBufferPromise, _connectionBufferReject] = [r, j]);\n\t\t\t\t\tasync function eventListener(e) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet packet = JSON.parse(e.data);\n\t\t\t\t\t\t\tif (!packet.from) return;\n\t\t\t\t\t\t\tif (packet.data.type == \"connectionful\" && packet.data.gate == gate && packet.data.action == \"start\") {\n\t\t\t\t\t\t\t\tif (!packet.data.connectionID) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"]) return;\n\t\t\t\t\t\t\t\tlet ephemeralKey = await crypto.subtle.generateKey({name: \"Ed25519\"}, true, [\"deriveBits\"]);\n\t\t\t\t\t\t\t\tlet exported = await crypto.subtle.exportKey(\"jwk\", ephemeralKey.publicKey);\n\t\t\t\t\t\t\t\texported = {signedBy: \"serverKey\", usages: [\"connfulSecureEphemeral\"], key:exported};\n\t\t\t\t\t\t\t\tlet signature = u8aToHex(new Uint8Array(await crypto.subtle.sign({\n\t\t\t\t\t\t\t\t\tname: \"Ed25519\"\n\t\t\t\t\t\t\t\t}, usableKey, new TextEncoder().encode(JSON.stringify(exported)))));\n\t\t\t\t\t\t\t\tlet theirUsableKey = await crypto.subtle.importKey(\"jwk\", packet.data.content.keyInfo.key, { name: \"X25519\" }, true, []);\n\t\t\t\t\t\t\t\tlet joinedKeys = await crypto.subtle.deriveBits({ name: \"X25519\", public: theirUsableKey }, ephemeralKey.privateKey, 256);\n\t\t\t\t\t\t\t\tlet aesUsableKey = await crypto.subtle.importKey(\"raw\", joinedKeys, {name: \"AES-GCM\"}, true, [\"encrypt\", \"decrypt\"]);\n\t\t\t\t\t\t\t\tlet _dataBufferPromise = null, _rejectDataPromise = null;\n\t\t\t\t\t\t\t\tlet dataBufferPromise = new Promise((r, j) => [_dataBufferPromise, _rejectDataPromise] = [r, j]);\n\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"] = {\n\t\t\t\t\t\t\t\t\tourKey: ephemeralKey,\n\t\t\t\t\t\t\t\t\tfrom: packet.from,\n\t\t\t\t\t\t\t\t\ttheirMainKeyReceived: false,\n\t\t\t\t\t\t\t\t\ttheirKeyRaw: packet.data.content,\n\t\t\t\t\t\t\t\t\taesUsableKey,\n\t\t\t\t\t\t\t\t\tdataBuffer: [],\n\t\t\t\t\t\t\t\t\tdataBufferPromise,\n\t\t\t\t\t\t\t\t\t_dataBufferPromise,\n\t\t\t\t\t\t\t\t\t_rejectDataPromise,\n\t\t\t\t\t\t\t\t\tnetworkListenID\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\t\t\treceiver: packet.from,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\t\t\taction: \"start\",\n\t\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\tkeyInfo: exported,\n\t\t\t\t\t\t\t\t\t\t\tsignature\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tconnectionID: packet.data.connectionID\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.gate == gate && packet.data.action == \"xchange\") {\n\t\t\t\t\t\t\t\tif (!packet.data.connectionID) return;\n\t\t\t\t\t\t\t\tif (!connections.hasOwnProperty(packet.data.connectionID + \":server\")) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].theirMainKeyReceived) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].dying) return;\n\t\t\t\t\t\t\t\tlet theirMainKeyDecrypt = JSON.parse(new TextDecoder().decode(await crypto.subtle.decrypt({\n\t\t\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\t\t\tiv: hexToU8A(packet.data.content.iv),\n\t\t\t\t\t\t\t\t}, connections[packet.data.connectionID + \":server\"].aesUsableKey, hexToU8A(packet.data.content.ct))));\n\t\t\t\t\t\t\t\tlet usableMainKey = await crypto.subtle.importKey(\"jwk\", theirMainKeyDecrypt.keyInfo.key, { name: \"Ed25519\" }, true, [\"verify\"]);\n\t\t\t\t\t\t\t\tlet verifyKeySignature = await crypto.subtle.verify({ name: \"Ed25519\" }, usableMainKey, hexToU8A(connections[packet.data.connectionID + \":server\"].theirKeyRaw.signature), new TextEncoder().encode(JSON.stringify(connections[packet.data.connectionID + \":server\"].theirKeyRaw.keyInfo)));\n\t\t\t\t\t\t\t\tif (verifyClientKeyChain && verifyKeySignature) {\n\t\t\t\t\t\t\t\t\tverifyKeySignature = false;\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet khrlFiles = await modules.fs.ls(modules.defaultSystem + \"/etc/keys/khrl\", processToken);\n\t\t\t\t\t\t\t\t\t\tlet khrlSignatures = [];\n\t\t\t\t\t\t\t\t\t\tfor (let khrlFile of khrlFiles) {\n\t\t\t\t\t\t\t\t\t\t\tlet khrl = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/keys/khrl/\" + khrlFile, processToken));\n\t\t\t\t\t\t\t\t\t\t\tlet khrlSignature = khrl.signature;\n\t\t\t\t\t\t\t\t\t\t\tdelete khrl.signature;\n\t\t\t\t\t\t\t\t\t\t\tif (await crypto.subtle.verify({ name: \"Ed25519\" }, modules.ksk_imported, hexToU8A(khrlSignature), new TextEncoder().encode(JSON.stringify(khrl.list)))) {\n\t\t\t\t\t\t\t\t\t\t\t\tkhrlSignatures.push(...khrl.list);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tverifyKeySignature = await recursiveKeyVerify(theirMainKeyDecrypt, khrlSignatures);\n\t\t\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!verifyKeySignature || !theirMainKeyDecrypt.keyInfo.usages.includes(\"connfulSecureClient:\" + packet.from)) {\n\t\t\t\t\t\t\t\t\tdelete connections[packet.data.connectionID + \":server\"];\n\t\t\t\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\t\t\t\treceiver: packet.from,\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\t\t\t\taction: \"drop\",\n\t\t\t\t\t\t\t\t\t\t\tconnectionID: packet.data.connectionID\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"].theirMainKeyReceived = theirMainKeyDecrypt;\n\t\t\t\t\t\t\t\tlet iv = crypto.getRandomValues(new Uint8Array(16));\n\t\t\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\t\t\treceiver: packet.from,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\t\t\taction: \"xchange\",\n\t\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\tiv: u8aToHex(iv),\n\t\t\t\t\t\t\t\t\t\t\tct: u8aToHex(new Uint8Array(await crypto.subtle.encrypt({\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\t\t\t\t\t\tiv\n\t\t\t\t\t\t\t\t\t\t\t}, connections[packet.data.connectionID + \":server\"].aesUsableKey, new TextEncoder().encode(JSON.stringify(key)))))\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tconnectionID: packet.data.connectionID\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.gate == gate && packet.data.action == \"drop\") {\n\t\t\t\t\t\t\t\tif (!packet.data.connectionID) return;\n\t\t\t\t\t\t\t\tif (!connections.hasOwnProperty(packet.data.connectionID + \":server\")) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].dying) return;\n\t\t\t\t\t\t\t\twebsocket.send(JSON.stringify({\n\t\t\t\t\t\t\t\t\treceiver: packet.from,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\ttype: \"connectionful\",\n\t\t\t\t\t\t\t\t\t\taction: \"drop\",\n\t\t\t\t\t\t\t\t\t\tconnectionID: packet.data.connectionID\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"]._rejectDataPromise)\n\t\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"]._rejectDataPromise(new Error(\"CONNECTION_DROPPED\"));\n\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"].dying = true;\n\t\t\t\t\t\t\t\tif (!connections[packet.data.connectionID + \":server\"].dataBuffer.length)\n\t\t\t\t\t\t\t\t\tdelete connections[packet.data.connectionID + \":server\"];\n\t\t\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.gate == gate && packet.data.action == \"nice2meetu\") {\n\t\t\t\t\t\t\t\tif (!packet.data.connectionID) return;\n\t\t\t\t\t\t\t\tif (!connections.hasOwnProperty(packet.data.connectionID + \":server\")) return;\n\t\t\t\t\t\t\t\tif (!connections[packet.data.connectionID + \":server\"].theirMainKeyReceived) return;\n\t\t\t\t\t\t\t\tif (!connections[packet.data.connectionID + \":server\"].aesUsableKey) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].dying) return;\n\t\t\t\t\t\t\t\tnetworkListens[networkListenID].connectionBuffer.push(packet.data.connectionID + \":server\");\n\t\t\t\t\t\t\t\tlet _curcbp = _connectionBufferPromise;\n\t\t\t\t\t\t\t\tconnectionBufferPromise = new Promise((r, j) => [_connectionBufferPromise, _connectionBufferReject] = [r, j]);\n\t\t\t\t\t\t\t\tnetworkListens[networkListenID].connectionBufferPromise = connectionBufferPromise;\n\t\t\t\t\t\t\t\t_curcbp();\n\t\t\t\t\t\t\t} else if (packet.data.type == \"connectionful\" && packet.data.gate == gate && packet.data.action == \"data\") {\n\t\t\t\t\t\t\t\tif (!packet.data.connectionID) return;\n\t\t\t\t\t\t\t\tif (!connections.hasOwnProperty(packet.data.connectionID + \":server\")) return;\n\t\t\t\t\t\t\t\tif (!connections[packet.data.connectionID + \":server\"].aesUsableKey) return;\n\t\t\t\t\t\t\t\tif (!connections[packet.data.connectionID + \":server\"].theirMainKeyReceived) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].dying) return;\n\t\t\t\t\t\t\t\tif (connections[packet.data.connectionID + \":server\"].writingLock) await connections[packet.data.connectionID + \":server\"].writingLock;\n\t\t\t\t\t\t\t\tlet writingLockRelease;\n\t\t\t\t\t\t\t\tlet writingLock = new Promise(r => writingLockRelease = r);\n\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"].writingLock = writingLock;\n\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"].dataBuffer.push(new TextDecoder().decode(await crypto.subtle.decrypt({\n\t\t\t\t\t\t\t\t\tname: \"AES-GCM\",\n\t\t\t\t\t\t\t\t\tiv: hexToU8A(packet.data.content.iv)\n\t\t\t\t\t\t\t\t}, connections[packet.data.connectionID + \":server\"].aesUsableKey, hexToU8A(packet.data.content.ct))));\n\t\t\t\t\t\t\t\tif (!(connections[connID + \":server\"].dataBuffer.length - 1)) {\n\t\t\t\t\t\t\t\t\tlet _curdbp = connections[packet.data.connectionID + \":server\"].dataBufferPromise;\n\t\t\t\t\t\t\t\t\tlet _dataBufferPromise = null, _rejectDataPromise = null;\n\t\t\t\t\t\t\t\t\tlet dataBufferPromise = new Promise((r, e) => [_dataBufferPromise, _rejectDataPromise] = [r, e]);\n\t\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"].dataBufferPromise = dataBufferPromise;\n\t\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"]._dataBufferPromise = _dataBufferPromise;\n\t\t\t\t\t\t\t\t\tconnections[packet.data.connectionID + \":server\"]._rejectDataPromise = _rejectDataPromise;\n\t\t\t\t\t\t\t\t\t_curdbp();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twritingLockRelease();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t}\n\t\t\t\t\tnetworkListens[networkListenID] = { ws: websocket, gate: gate, fn: eventListener, connectionBuffer: [], connectionBufferPromise }\n\t\t\t\t\tmodules.network.runOnClose.then(function() {\n\t\t\t\t\t\tfor (let connectionID in connections) if (connections[connectionID].networkListenID == networkListenID) {\n\t\t\t\t\t\t\tconnections[connectionID].dying = true;\n\t\t\t\t\t\t\tconnections[connectionID]._rejectDataPromise(new Error(\"NETWORK_CLOSED\"));\n\t\t\t\t\t\t\tif (!connections[connectionID].dataBuffer.length) delete connections[connectionID];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete networkListens[networkListenID];\n\t\t\t\t\t\t_connectionBufferReject(new Error(\"NETWORK_CLOSED\"));\n\t\t\t\t\t});\n\t\t\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\t\t\treturn networkListenID;\n\t\t\t\t},\n\t\t\t\tconnfulListenConnections: async function(networkListenID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_LISTEN\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!networkListens.hasOwnProperty(networkListenID)) throw new Error(\"INVALID_LISTEN_ID\");\n\t\t\t\t\tif (!networkListens[networkListenID].connectionBuffer.length) await networkListens[networkListenID].connectionBufferPromise;\n\t\t\t\t\tlet connectionID = networkListens[networkListenID].connectionBuffer[0];\n\t\t\t\t\tnetworkListens[networkListenID].connectionBuffer = networkListens[networkListenID].connectionBuffer.slice(1);\n\t\t\t\t\treturn connectionID;\n\t\t\t\t},\n\t\t\t\tgetBuildTime: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_BUILD\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.build_time;\n\t\t\t\t},\n\t\t\t\tconnfulConnect: async function(connOpts) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_CONNECT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn connfulConnect(connOpts);\n\t\t\t\t},\n\t\t\t\tconnfulConnectionSettled: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_CONNECT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!connections.hasOwnProperty(connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\t\t\tawait connections[connectionID].settlePromise;\n\t\t\t\t},\n\t\t\t\tconnfulDisconnect: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_DISCONNECT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn connfulDisconnect(connectionID);\n\t\t\t\t},\n\t\t\t\tconnfulForceDisconnect: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_DISCONNECT\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tdelete connections[connectionID];\n\t\t\t\t},\n\t\t\t\tconnfulWrite: async function(sendOpts) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn connfulWrite(sendOpts);\n\t\t\t\t},\n\t\t\t\tconnfulRead: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn connfulRead(connectionID);\n\t\t\t\t},\n\t\t\t\tconnfulAddressGet: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_ADDRESS_GET\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!connections.hasOwnProperty(connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\t\t\treturn connections[connectionID].from;\n\t\t\t\t},\n\t\t\t\tconnfulIdentityGet: async function(connectionID) {\n\t\t\t\t\tif (!privileges.includes(\"CONNFUL_IDENTITY_GET\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!connections.hasOwnProperty(connectionID)) throw new Error(\"NO_SUCH_CONNECTION\");\n\t\t\t\t\treturn connections[connectionID].theirMainKeyReceived;\n\t\t\t\t},\n\t\t\t\tsystemUptime: async function() {\n\t\t\t\t\tif (!privileges.includes(\"SYSTEM_UPTIME\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn Math.floor(performance.now());\n\t\t\t\t},\n\t\t\t\tnetworkRawWrite: function(data) {\n\t\t\t\t\tif (!privileges.includes(\"NETWORK_RAW_WRITE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\twebsocket.send(data);\n\t\t\t\t},\n\t\t\t\tnetworkRawRead: function() {\n\t\t\t\t\tif (!privileges.includes(\"NETWORK_RAW_READ\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\treturn Promise.race([ new Promise(async function(resolve) {\n\t\t\t\t\t\tnetworkListens[networkListenID] = { ws: websocket, fn: _ => resolve(_.data) };\n\t\t\t\t\t\twebsocket.addEventListener(\"message\", eventListener);\n\t\t\t\t\t}), new Promise((_, reject) => modules.network.runOnClose.then(_ => reject(new Error(\"NETWORK_CLOSED\")))) ]);\n\t\t\t\t},\n\t\t\t\tgetHostname: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_HOSTNAME\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.network.hostname;\n\t\t\t\t},\n\t\t\t\tresolve: async function(name) {\n\t\t\t\t\tif (!privileges.includes(\"RESOLVE_NAME\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet websocketHandle = modules.network.ws;\n\t\t\t\t\tif (!websocketHandle) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet websocket = modules.websocket._handles[websocketHandle].ws;\n\t\t\t\t\tif (websocket.readyState != 1) throw new Error(\"NETWORK_UNREACHABLE\");\n\t\t\t\t\tlet tlds = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/tlds.json\"));\n\t\t\t\t\tasync function resolveRecursive(name, address) {\n\t\t\t\t\t\tif (tlds.hasOwnProperty(name)) return tlds[name];\n\t\t\t\t\t\tif (address == null) return null;\n\t\t\t\t\t\tlet connectionID = await connfulConnect({\n\t\t\t\t\t\t\taddress, gate: \"resolve\",\n\t\t\t\t\t\t\tverifyByDomain: name.split(\".\").slice(1).join(\".\")\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait connections[connectionID].settlePromise;\n\t\t\t\t\t\tawait connfulWrite({ connectionID, data: name });\n\t\t\t\t\t\tlet resultAddress = JSON.parse(await connfulRead(connectionID));\n\t\t\t\t\t\tconnfulDisconnect(connectionID);\n\t\t\t\t\t\treturn resultAddress;\n\t\t\t\t\t}\n\t\t\t\t\tlet nameParts = name.split(\".\").reverse();\n\t\t\t\t\tlet currentResolve;\n\t\t\t\t\tfor (let part = 0; part < nameParts.length; part++) currentResolve = await resolveRecursive(nameParts.slice(0, part + 1).reverse().join(\".\"), currentResolve);\n\t\t\t\t\treturn currentResolve;\n\t\t\t\t},\n\t\t\t\tpatchDiff: function(libraryOptions) {\n\t\t\t\t\tif (!privileges.includes(\"PATCH_DIFF\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (!window.diff) throw new Error(\"MODULE_REQUIRED\");\n\t\t\t\t\tlet operations = { diff_core, diff, lcs, calcPatch, applyPatch, calcSlices };\n\t\t\t\t\treturn [ ...operations[libraryOptions.operation](...libraryOptions.args) ];\n\t\t\t\t},\n\t\t\t\tsetFirmware: async function(new_flash) {\n\t\t\t\t\tif (!privileges.includes(\"SET_FIRMWARE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tif (modules.core.setFW) {\n\t\t\t\t\t\tawait modules.core.setFW(new_flash);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem(\"runtime_flash\", new_flash);\n\t\t\t\t},\n\t\t\t\treloadNetworkConfig: async function() {\n\t\t\t\t\tif (!privileges.includes(\"RELOAD_NETWORK_CONFIG\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tawait modules.network.reloadConfig();\n\t\t\t\t},\n\t\t\t\tbatteryStatus: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_BATTERY_STATUS\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\tlet battery = await navigator.getBattery();\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcharging: battery.charging,\n\t\t\t\t\t\tlevel: battery.level,\n\t\t\t\t\t\tchargingTime: battery.chargingTime,\n\t\t\t\t\t\tdischargingTime: battery.dischargingTime\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tgetUpdateService: async function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_UPDATE_SERVICE\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.network.updates;\n\t\t\t\t},\n\t\t\t\tgetRootKey: function() {\n\t\t\t\t\tif (!privileges.includes(\"GET_ROOT_KEY\")) throw new Error(\"UNAUTHORIZED_ACTION\");\n\t\t\t\t\treturn modules.ksk;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet customAPIs = modules.customAPIs;\n\t\tif (customAPIs) {\n\t\t\tfor (let api in (customAPIs.public || {})) apis.public[api] = async (...args) => customAPIs.public[api](processToken, ...args);\n\t\t\tfor (let api in (customAPIs.private || {})) apis.private[api] = async (...args) => customAPIs.private[api](processToken, ...args);\n\t\t}\n\t\treturn apis;\n\t}\n}\nreeAPIs();","f30f924abc69a9ce7e35b9e353e1045ba911e57d37a99933c0cc826f5e03f5f3725bffdd09e6daa0cdfc3cff38c1b47a65416a8a389c627e696f9813435aa51e":"function loadBasicCSP() {\n\tmodules.csps = {};\n\tlet cryptoKeys = {};\n\tfunction cryptoKeyIntoKeyObject(ck, groupBy) {\n\t\tif (ck.privateKey && ck.publicKey) return {\n\t\t\tprivateKey: cryptoKeyIntoKeyObject(ck.privateKey, groupBy),\n\t\t\tpublicKey: cryptoKeyIntoKeyObject(ck.publicKey, groupBy),\n\t\t};\n\t\tlet keyID = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\tif (!cryptoKeys.hasOwnProperty(groupBy)) cryptoKeys[groupBy] = {};\n\t\tcryptoKeys[groupBy][keyID] = ck;\n\t\treturn {\n\t\t\ttype: ck.type,\n\t\t\textractable: ck.extractable,\n\t\t\talgorithm: ck.algorithm,\n\t\t\tusages: ck.usages,\n\t\t\tkeyID: keyID\n\t\t}\n\t}\n\tmodules.csps.basic = {\n\t\tcspMetadata: function() {\n\t\t\treturn {\n\t\t\t\tname: \"Basic Cryptographic Provider\",\n\t\t\t\tversion: modules.pcos_version,\n\t\t\t\tdeveloper: \"PCsoft\",\n\t\t\t\tfeatures: Object.keys(modules.csps.basic)\n\t\t\t}\n\t\t},\n\t\trandom: async function(typedArray) {\n\t\t\treturn crypto.getRandomValues(typedArray);\n\t\t},\n\t\timportKey: async function(arg, groupBy) {\n\t\t\treturn cryptoKeyIntoKeyObject(await crypto.subtle.importKey(arg.format, arg.keyData, arg.algorithm, arg.extractable, arg.keyUsages), groupBy);\n\t\t},\n\t\tgenerateKey: async function(arg, groupBy) {\n\t\t\treturn cryptoKeyIntoKeyObject(await crypto.subtle.generateKey(arg.algorithm, arg.extractable, arg.keyUsages), groupBy);\n\t\t},\n\t\tderiveBits: async function(arg, groupBy) {\n\t\t\targ.baseKey = cryptoKeys[groupBy][arg.baseKey.keyID];\n\t\t\tif (arg.algorithm.public) arg.algorithm.public = cryptoKeys[groupBy][arg.algorithm.public.keyID];\n\t\t\treturn crypto.subtle.deriveBits(arg.algorithm, arg.baseKey, arg.length);\n\t\t},\n\t\tderiveKey: async function(arg, groupBy) {\n\t\t\targ.baseKey = cryptoKeys[groupBy][arg.baseKey.keyID];\n\t\t\tif (arg.algorithm.public) arg.algorithm.public = cryptoKeys[groupBy][arg.algorithm.public.keyID];\n\t\t\treturn cryptoKeyIntoKeyObject(await crypto.subtle.deriveKey(arg.algorithm, arg.baseKey, arg.derivedKeyType, arg.extractable, arg.keyUsages), groupBy);\n\t\t},\n\t\twrapKey: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\targ.wrappingKey = cryptoKeys[groupBy][arg.wrappingKey.keyID];\n\t\t\treturn crypto.subtle.wrapKey(arg.format, arg.key, arg.wrappingKey, arg.wrapAlgorithm);\n\t\t},\n\t\tdigest: async function(arg) {\n\t\t\treturn crypto.subtle.digest(arg.algorithm, arg.data);\n\t\t},\n\t\tencrypt: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\treturn crypto.subtle.encrypt(arg.algorithm, arg.key, arg.data);\n\t\t},\n\t\tsign: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\treturn crypto.subtle.sign(arg.algorithm, arg.key, arg.data);\n\t\t},\n\t\texportKey: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\treturn crypto.subtle.exportKey(arg.format, arg.key);\n\t\t},\n\t\tunwrapKey: async function(arg, groupBy) {\n\t\t\targ.unwrappingKey = cryptoKeys[groupBy][arg.unwrappingKey.keyID];\n\t\t\treturn cryptoKeyIntoKeyObject(await crypto.subtle.unwrapKey(arg.format, arg.keyData, arg.unwrappingKey, arg.unwrapAlgorithm, arg.unwrappedKeyAlgorithm, arg.extractable, arg.keyUsages), groupBy);\n\t\t},\n\t\tdecrypt: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\treturn crypto.subtle.decrypt(arg.algorithm, arg.key, arg.data);\n\t\t},\n\t\tverify: async function(arg, groupBy) {\n\t\t\targ.key = cryptoKeys[groupBy][arg.key.keyID];\n\t\t\treturn crypto.subtle.verify(arg.algorithm, arg.key, arg.signature, arg.data);\n\t\t},\n\t\tunloadKey: (key, groupBy) => delete cryptoKeys[groupBy][key.keyID],\n\t\tremoveSameGroupKeys: (_, groupBy) => delete cryptoKeys[groupBy]\n\t}\n\tif (window.nacl) {\n\t\tmodules.csps.tweetnacl = {\n\t\t\tcspMetadata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tname: \"TweetNaCl Cryptographic Provider\",\n\t\t\t\t\tversion: \"1.0.3\",\n\t\t\t\t\tdeveloper: \"TweetNaCl.js developers (https://github.com/dchest/tweetnacl-js)\",\n\t\t\t\t\tfeatures: Object.keys(modules.csps.tweetnacl)\n\t\t\t\t}\n\t\t\t},\n\t\t\trandom: typedArray => nacl.randomBytes(typedArray.length),\n\t\t\tgenerateKey: type => nacl[type].keyPair(),\n\t\t\tderiveKey: arg => nacl[arg.type].keyPair.fromSeed(arg.seed),\n\t\t\tdigest: message => nacl.hash(message),\n\t\t\tencrypt: arg => nacl[arg.type](arg.message, arg.nonce, arg.key1, arg.key2),\n\t\t\tsign: arg => nacl.sign.detached(arg.message, arg.secretKey),\n\t\t\tdecrypt: arg => nacl[arg.type].open(arg.box, arg.nonce, arg.key1, arg.key2),\n\t\t\tverify: arg => nacl.sign.detached.verify(arg.message, arg.signature, arg.publicKey)\n\t\t};\n\t}\n}\nloadBasicCSP();","e3aaaa97f0c9d71a23a5c6c7460bc84cf42e4e7218e83788ca42a22c1859a49a0c02b9a57bdac6043fab4885c582ca6fc910cec1f409f58dc9ad0049e4461f49":"function localization() {\n\t// @pcos-app-mode native\n\tlet locales = {\n\t\tget: function(key, lang) {\n\t\t\tlang = lang || locales.defaultLocale || navigator.languages[0].split(\"-\")[0].toLowerCase();\n\t\t\tlet locale = locales[lang];\n\t\t\tif (!locale) locale = locales[locales.defaultLocale || \"en\"];\n\t\t\tif (!locale) locale = {};\n\t\t\tif (!locale.hasOwnProperty(key)) locale = locales[locales.defaultLocale || \"en\"] || {};\n\t\t\treturn locale.hasOwnProperty(key) ? locale[key] : key;\n\t\t}\n\t}\n\tmodules.locales = locales;\n}\nlocalization();","9f1541f40579ccc5abd8e534df52fbfaeb66ab2d8bd53440b64434f6c98e8eb23df0e11bba5479a566f183ef3f7d8865b06e62754ed9e679e54eee53d86845df":"function loadTasks() {\n\t// @pcos-app-mode native\n\tmodules.startupWindow.content.innerText = modules.locales.get(\"PCOS_STARTING\");\n\tlet tasks = {\n\t\texec: async function(file, arg, windowObject, token, silent, privateData) {\n\t\t\tlet errorAudio = new Audio();\n\t\t\ttry {\n\t\t\t\tlet errorSoundPerm = await modules.fs.permissions(modules.defaultSystem + \"/etc/sounds/error.aud\", token);\n\t\t\t\tif (!errorSoundPerm.world.includes(\"r\")) throw new Error(\"Not allowed to read error.aud\");\n\t\t\t\tlet errorSound = await modules.fs.read(modules.defaultSystem + \"/etc/sounds/error.aud\", token);\n\t\t\t\terrorAudio.src = errorSound;\n\t\t\t} catch {}\n\t\t\tif (modules.session.attrib(windowObject.sessionId, \"loggingOut\")) throw new Error(\"LOGGING_OUT\");\n\t\t\tlet language = modules.session.attrib(windowObject.sessionId, \"language\") || undefined;\n\t\t\tif (modules.shuttingDown) {\n\t\t\t\twindowObject.windowDiv.remove();\n\t\t\t\tthrow new Error(\"SYSTEM_SHUTDOWN_REQUESTED\");\n\t\t\t}\n\t\t\tlet appRedirecting = {};\n\t\t\ttry {\n\t\t\t\tappRedirecting = JSON.parse(await this.fs.read(modules.defaultSystem + \"/etc/appRedir\", token));\n\t\t\t} catch {}\n\t\t\tif (modules.core.bootMode == \"safe\") appRedirecting = {};\n\t\t\tif (appRedirecting.hasOwnProperty(file)) file = appRedirecting[file];\n\t\t\twindowObject.title.innerText = modules.locales.get(\"UNTITLED_APP\", language);\n\t\t\twindowObject.content.innerText = \"\";\n\t\t\twindowObject.content.style = \"\";\n\t\t\tlet taskId = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tlet executablePermissions, executable;\n\t\t\ttry {\n\t\t\t\texecutablePermissions = await this.fs.permissions(file, token);\n\t\t\t\texecutable = await this.fs.read(file, token);\n\t\t\t} catch (e) {\n\t\t\t\twindowObject.title.innerText = modules.locales.get(\"APP_STARTUP_CRASH_TITLE\", language);\n\t\t\t\twindowObject.content.innerText = modules.locales.get(\"APP_STARTUP_CRASH\", language);\n\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\tif (!silent) errorAudio.play();\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tif (!executablePermissions.world.includes(\"r\") || !executablePermissions.world.includes(\"x\")) {\n\t\t\t\twindowObject.title.innerText = modules.locales.get(\"PERMISSION_DENIED\", language);\n\t\t\t\twindowObject.content.innerText = modules.locales.get(\"MORE_PERMISSION_DENIED\", language);\n\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\tif (!silent) errorAudio.play();\n\t\t\t\tthrow new Error(\"MORE_PERMISSION_DENIED\", language);\n\t\t\t}\n\t\t\tif (!executable.includes(\"// @pcos-app-mode isolat\" + \"able\")) {\n\t\t\t\twindowObject.title.innerText = modules.locales.get(\"COMPATIBILITY_ISSUE_TITLE\", language);\n\t\t\t\twindowObject.content.innerText = modules.locales.get(\"COMPATIBILITY_ISSUE\", language);\n\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\tif (!silent) errorAudio.play();\n\t\t\t\tthrow new Error(\"COMPATIBILITY_ISSUE\");\n\t\t\t}\n\t\t\tlet appHardening = {overridable:true};\n\t\t\ttry {\n\t\t\t\tappHardening = JSON.parse(await this.fs.read(modules.defaultSystem + \"/etc/appHarden\", token));\n\t\t\t} catch {}\n\t\t\tlet disableHarden = appHardening.overridable && modules.core.bootMode == \"disable-harden\";\n\t\t\tif (disableHarden) appHardening = {overridable:true};\n\t\t\tlet limitations = [];\n\t\t\tlet execSignature = {};\n\t\t\tif (executable.includes(\"// =====BEGIN MANIFEST=====\")) {\n\t\t\t\tlet parsingLines = executable.split(\"\\n\");\n\t\t\t\tlet parsingBoundStart = parsingLines.indexOf(\"// =====BEGIN MANIFEST=====\");\n\t\t\t\tlet parsingBoundEnd = parsingLines.indexOf(\"// =====END MANIFEST=====\");\n\t\t\t\tlet upToParse = parsingLines.slice(parsingBoundStart, parsingBoundEnd + 1);\n\t\t\t\tlet knownLineTypes = [\"allow\", \"deny\"];\n\t\t\t\tfor (let line of upToParse) {\n\t\t\t\t\tlet lineType = line.split(\": \")[0].replace(\"// \", \"\");\n\t\t\t\t\tlet lineData = line.replace(\"// \" + lineType + \": \", \"\");\n\t\t\t\t\tif (lineType == \"signature\") {\n\t\t\t\t\t\texecSignature.signature = lineData;\n\t\t\t\t\t\texecutable = executable.replace(line + \"\\n\", \"\");\n\t\t\t\t\t}\n\t\t\t\t\tif (lineType == \"signer\") execSignature.signer = lineData;\n\t\t\t\t\tif (lineType == \"asck\") execSignature.selfContainedSigner = lineData;\n\t\t\t\t\tif (knownLineTypes.includes(lineType)) {\n\t\t\t\t\t\tlet dataParts = lineData.split(\", \");\n\t\t\t\t\t\tfor (let data of dataParts) limitations.push({ lineType, data });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (disableHarden) limitations = [];\n\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tif (!limitations.some(lim => lim.lineType == \"allow\") && appHardening.requireAllowlist && !disableHarden) {\n\t\t\t\twindowObject.title.innerText = modules.locales.get(\"PERMISSION_DENIED\", language);\n\t\t\t\twindowObject.content.innerText = modules.locales.get(\"NO_APP_ALLOWLIST\", language);\n\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\tif (!silent) errorAudio.play();\n\t\t\t\tthrow new Error(\"NO_APP_ALLOWLIST\");\n\t\t\t}\n\n\t\t\tasync function recursiveKeyVerify(key, khrl) {\n\t\t\t\tif (!key) throw new Error(\"NO_KEY\");\n\t\t\t\tif (key.keyInfo.dates?.since > Date.now()) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\t\t\tif (Date.now() > key.keyInfo.dates?.until) throw new Error(\"KEY_NOT_IN_TIME\");\n\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\tlet hash = u8aToHex(new Uint8Array(await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode((key.keyInfo.key).x))));\n\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\tif (khrl.includes(hash)) throw new Error(\"KEY_REVOKED\");\n\t\t\t\tlet signedByKey = modules.ksk_imported;\n\t\t\t\tif (key.keyInfo.signedBy) {\n\t\t\t\t\tsignedByKey = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/keys/\" + key.keyInfo.signedBy, token));\n\t\t\t\t\tif (!signedByKey.keyInfo.usages.includes(\"keyTrust\")) throw new Error(\"NOT_KEY_AUTHORITY\");\n\t\t\t\t\tawait recursiveKeyVerify(signedByKey, khrl);\n\t\t\t\t\tsignedByKey = await crypto.subtle.importKey(\"jwk\", signedByKey.keyInfo.key, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t\t\t}\n\t\t\t\tif (!await crypto.subtle.verify({ name: \"Ed25519\" }, signedByKey, hexToU8A(key.signature), new TextEncoder().encode(JSON.stringify(key.keyInfo)))) throw new Error(\"KEY_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((execSignature.signer || appHardening.requireSignature || execSignature.selfContainedSigner) && !disableHarden) {\n\t\t\t\ttry {\n\t\t\t\t\tlet khrlFiles = await this.fs.ls(modules.defaultSystem + \"/etc/keys/khrl\", token);\n\t\t\t\t\tlet khrlSignatures = [];\n\t\t\t\t\tfor (let khrlFile of khrlFiles) {\n\t\t\t\t\t\tlet khrl = JSON.parse(await this.fs.read(modules.defaultSystem + \"/etc/keys/khrl/\" + khrlFile, token));\n\t\t\t\t\t\tlet khrlSignature = khrl.signature;\n\t\t\t\t\t\tdelete khrl.signature;\n\t\t\t\t\t\tif (await crypto.subtle.verify({ name: \"Ed25519\" }, modules.ksk_imported, hexToU8A(khrlSignature), new TextEncoder().encode(JSON.stringify(khrl.list)))) {\n\t\t\t\t\t\t\tkhrlSignatures.push(...khrl.list);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet signingKey = JSON.parse(execSignature.selfContainedSigner || \"null\");\n\t\t\t\t\tif (!signingKey || appHardening.disableASCK) signingKey = JSON.parse(await this.fs.read(modules.defaultSystem + \"/etc/keys/\" + execSignature.signer, token));\n\t\t\t\t\tawait recursiveKeyVerify(signingKey, khrlSignatures);\n\t\t\t\t\tif (signingKey.keyInfo) if (!signingKey.keyInfo.usages.includes(\"appTrust\")) throw new Error(\"NOT_APP_SIGNING_KEY\");\n\t\t\t\t\tlet importSigningKey = await crypto.subtle.importKey(\"jwk\", signingKey.keyInfo.key, { name: \"Ed25519\" }, false, [\"verify\"]);\n\t\t\t\t\tif (!await crypto.subtle.verify({ name: \"Ed25519\" }, importSigningKey, hexToU8A(execSignature.signature), new TextEncoder().encode(executable))) throw new Error(\"APP_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to verify app signature:\", e);\n\t\t\t\t\twindowObject.title.innerText = modules.locales.get(\"PERMISSION_DENIED\", language);\n\t\t\t\t\twindowObject.content.innerText = modules.locales.get(\"SIGNATURE_VERIFICATION_FAILED\", language).replace(\"%s\", execSignature.signer || modules.locales.get(\"UNKNOWN_PLACEHOLDER\", language));\n\t\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\t\tif (!silent) errorAudio.play();\n\t\t\t\t\tthrow new Error(\"APP_OR_KEY_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet ree = await this.ree(windowObject.content, token);\n\t\t\ttry {\n\t\t\t\tmodules.session.attrib(windowObject.sessionId, \"openReeWindows\", [ ...(modules.session.attrib(windowObject.sessionId, \"openReeWindows\") || []), taskId ]);\n\t\t\t\targ = arg || [];\n\t\t\t\tif (!(arg instanceof Array)) arg = [];\n\t\t\t\targ = arg.map(a => String(a));\n\t\t\t\tlet that = this;\n\t\t\t\tree.iframe.style = \"width: 100%; height: 100%; border: none; top: 0; left: 0; position: absolute;\";\n\t\t\t\tlet reeAPIInstance = await modules.reeAPIInstance({ ree, ses: windowObject.sessionId, token, taskId, limitations, privateData });\n\t\t\t\tfor (let action in reeAPIInstance.public) ree.exportAPI(action, (e) => reeAPIInstance.public[action](e.arg));\n\t\t\t\tthis.tracker[taskId] = {\n\t\t\t\t\tree,\n\t\t\t\t\tfile: file,\n\t\t\t\t\targ: arg,\n\t\t\t\t\tapis: reeAPIInstance,\n\t\t\t\t\tcritical: false,\n\t\t\t\t\tcliio: {\n\t\t\t\t\t\tattached: false,\n\t\t\t\t\t\tattachedCLISignUp: function() {\n\t\t\t\t\t\t\treturn new Promise(a => attachedCLIRegistrations.push(a));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlet registrations = [];\n\t\t\t\tlet attachedCLIRegistrations = [];\n\t\t\t\tlet cliCache = [];\n\t\t\t\twindowObject.closeButton.addEventListener(\"click\", () => that.sendSignal(taskId, 15));\n\t\t\t\tree.exportAPI(\"attachCLI\", async function() {\n\t\t\t\t\tif (that.tracker[taskId].cliio.attached) return true;\n\t\t\t\t\tif (!window.Terminal) return false;\n\t\t\t\t\tfor (let registration of attachedCLIRegistrations) registration();\n\t\t\t\t\tattachedCLIRegistrations = [];\n\t\t\t\t\tlet signup = () => new Promise((resolve) => registrations.push(resolve));\n\t\t\t\t\tree.iframe.hidden = true;\n\t\t\t\t\tlet termDiv = document.createElement(\"div\");\n\t\t\t\t\ttermDiv.style = \"position: absolute; top: 0; left: 0; width: 100%; height: 100%;\";\n\t\t\t\t\tlet fitAddon = new FitAddon.FitAddon();\n\t\t\t\t\tlet termInstance = new Terminal();\n\t\t\t\t\ttermInstance.loadAddon(fitAddon);\n\t\t\t\t\ttermInstance.open(termDiv);\n\t\t\t\t\twindowObject.content.appendChild(termDiv);\n\t\t\t\t\tthat.tracker[taskId].cliio.attached = true;\n\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance = termInstance;\n\t\t\t\t\tlet onresizeFn = () => fitAddon.fit();\n\t\t\t\t\tonresizeFn();\n\t\t\t\t\tlet robs = new ResizeObserver(onresizeFn);\n\t\t\t\t\tthat.tracker[taskId].cliio.robsInstance = robs;\n\t\t\t\t\trobs.observe(windowObject.windowDiv);\n\t\t\t\t\tthat.tracker[taskId].cliio.signup = signup;\n\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.onData(e => cliCache.push(e));\n\t\t\t\t\ttermInstance.clear();\n\t\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 8));\n\t\t\t\t\treturn true;  \n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"toMyCLI\", async function(apiArg) {\n\t\t\t\t\tif (that.tracker[taskId].cliio.attached) {\n\t\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.write(apiArg.arg);\n\t\t\t\t\t\tfor (let registered in registrations) {\n\t\t\t\t\t\t\tawait registrations[registered]({ type: \"write\", data: apiArg.arg });\n\t\t\t\t\t\t\tregistrations.splice(0, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"fromMyCLI\", async function() {\n\t\t\t\t\tif (!that.tracker[taskId].cliio.attached) return false;\n\t\t\t\t\tlet ti = that.tracker[taskId].cliio.xtermInstance;\n\t\t\t\t\treturn new Promise(async function(resolve) {\n\t\t\t\t\t\tif (cliCache.length) {\n\t\t\t\t\t\t\tlet element = cliCache[0];\n\t\t\t\t\t\t\tcliCache = cliCache.slice(1);\n\t\t\t\t\t\t\tresolve(element);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet d = ti.onData(async function(e) {\n\t\t\t\t\t\t\tcliCache = cliCache.slice(1);\n\t\t\t\t\t\t\tresolve(e);\n\t\t\t\t\t\t\td.dispose();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"clearMyCLI\", async function() {\n\t\t\t\t\tif (that.tracker[taskId].cliio.attached) that.tracker[taskId].cliio.xtermInstance.clear();\n\t\t\t\t\tfor (let registered in registrations) {\n\t\t\t\t\t\tawait registrations[registered]({ type: \"consoleClear\" });\n\t\t\t\t\t\tregistrations.splice(registered, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"cliSize\", function() {\n\t\t\t\t\tif (!that.tracker[taskId].cliio.attached) return [ 0, 0 ];\n\t\t\t\t\treturn [ that.tracker[taskId].cliio.xtermInstance.cols, that.tracker[taskId].cliio.xtermInstance.rows ];\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"detachCLI\", function() {\n\t\t\t\t\tif (!that.tracker[taskId].cliio.attached) return true;\n\t\t\t\t\tthat.tracker[taskId].cliio.attached = false;\n\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.clear();\n\t\t\t\t\tthat.tracker[taskId].cliio.robsInstance.disconnect();\n\t\t\t\t\tdelete that.tracker[taskId].cliio.robsInstance;\n\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.dispose();\n\t\t\t\t\tdelete that.tracker[taskId].cliio.xtermInstance;\n\t\t\t\t\tdelete that.tracker[taskId].cliio.signup;\n\t\t\t\t\tregistrations = [];\n\t\t\t\t\tree.iframe.hidden = false;\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"windowVisibility\", (apiArg) => windowObject.windowDiv.classList.toggle(\"hidden\", !apiArg.arg));\n\t\t\t\tree.exportAPI(\"windowTitleSet\", (apiArg) => windowObject.title.innerText = apiArg.arg);\n\t\t\t\tree.exportAPI(\"windowResize\", function(apiArg) {\n\t\t\t\t\tif (reeAPIInstance.public.getPrivileges().includes(\"GRAB_ATTENTION\")) {\n\t\t\t\t\t\twindowObject.windowDiv.style.width = apiArg.arg[0] + \"px\";\n\t\t\t\t\t\twindowObject.windowDiv.style.height = apiArg.arg[1] + \"px\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"windowSize\", function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\twidth: windowObject.windowDiv.clientWidth,\n\t\t\t\t\t\theight: windowObject.windowDiv.clientHeight\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"windowRelocate\", function(apiArg) {\n\t\t\t\t\tif (reeAPIInstance.public.getPrivileges().includes(\"GRAB_ATTENTION\")) {\n\t\t\t\t\t\twindowObject.windowDiv.style.top = apiArg.arg[0] + \"px\";\n\t\t\t\t\t\twindowObject.windowDiv.style.left = apiArg.arg[1] + \"px\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"windowFullscreen\", function(apiArg) {\n\t\t\t\t\tif (reeAPIInstance.public.getPrivileges().includes(\"GRAB_ATTENTION\")) {\n\t\t\t\t\t\twindowObject.windowDiv.classList.toggle(\"fullscreen\", apiArg.arg);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.exportAPI(\"closeability\", (apiArg) => windowObject.closeButton.classList.toggle(\"hidden\", !apiArg.arg));\n\t\t\t\tree.exportAPI(\"critical\", function(apiArg) {\n\t\t\t\t\tif (reeAPIInstance.public.getPrivileges().includes(\"SYSTEM_STABILITY\")) {\n\t\t\t\t\t\tthat.tracker[taskId].critical = !!apiArg.arg;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tawait ree.eval(\"taskId = \" + JSON.stringify(taskId) + \";\");\n\t\t\t\tawait ree.eval(\"exec_args = \" + JSON.stringify(arg) + \";\");\n\t\t\t\tree.beforeCloseDown(function() {\n\t\t\t\t\tlet orw = modules.session.attrib(windowObject.sessionId, \"openReeWindows\");\n\t\t\t\t\torw.splice(orw.indexOf(taskId), 1);\n\t\t\t\t\tmodules.session.attrib(windowObject.sessionId, \"openReeWindows\", orw);\n\t\t\t\t\tif (that.tracker[taskId].cliio.attached) {    \n\t\t\t\t\t\tthat.tracker[taskId].cliio.attached = false;\n\t\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.clear();\n\t\t\t\t\t\tthat.tracker[taskId].cliio.robsInstance.disconnect();\n\t\t\t\t\t\tthat.tracker[taskId].cliio.robsInstance = null;\n\t\t\t\t\t\tthat.tracker[taskId].cliio.xtermInstance.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tree.beforeCloseDown(() => windowObject.windowDiv.remove());\n\t\t\t\tree.beforeCloseDown(() => delete that.tracker[taskId]);\n\t\t\t\tawait ree.eval(executable);\n\t\t\t} catch (e) {\n\t\t\t\tree.closeDown();\n\t\t\t\twindowObject.title.innerText = modules.locales.get(\"APP_STARTUP_CRASH_TITLE\", language);\n\t\t\t\twindowObject.content.innerText = modules.locales.get(\"APP_STARTUP_CRASH\", language);\n\t\t\t\twindowObject.content.style.padding = \"8px\";\n\t\t\t\twindowObject.closeButton.disabled = false;\n\t\t\t\twindowObject.windowDiv.classList.toggle(\"hidden\", false);\n\t\t\t\twindowObject.closeButton.onclick = (e) => windowObject.windowDiv.remove() && e.stopPropagation();\n\t\t\t\tif (silent) windowObject.windowDiv.remove();\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\treturn taskId;\n\t\t},\n\t\tsendSignal: async function(taskId, signal, bypassCritical) {\n\t\t\tif (signal == 9) {\n\t\t\t\tif (this.tracker[taskId].critical && !bypassCritical) {\n\t\t\t\t\tlet memory = this.tracker[taskId];\n\t\t\t\t\tawait memory.ree.closeDown();\n\t\t\t\t\tawait panic(\"CRITICAL_TASK_FAILED\", {\n\t\t\t\t\t\tname: memory.file,\n\t\t\t\t\t\tparams: memory.arg\n\t\t\t\t\t});\n\t\t\t\t\tthrow new Error(\"CRITICAL_TASK_FAILED\");\n\t\t\t\t}\n\t\t\t\treturn await this.tracker[taskId].ree.closeDown();\n\t\t\t}\n\t\t\treturn await this.tracker[taskId].ree.eval(\"dispatchEvent(new CustomEvent(\\\"signal\\\", { detail: \" + JSON.stringify(signal) + \", bubbles: true }));\");\n\t\t},\n\t\trunsProperly: async function(taskId) {\n\t\t\ttry {\n\t\t\t\treturn await this.tracker[taskId].ree.eval(\"true\");\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tlistPublicTasks: () => Object.keys(tasks.tracker),\n\t\twaitTermination: async function(taskId) {\n\t\t\tif (!this.tracker.hasOwnProperty(taskId)) return;\n\t\t\treturn new Promise((resolve) => this.tracker[taskId].ree.beforeCloseDown(() => resolve()));\n\t\t},\n\t\ttaskInfo: async function(taskId) {\n\t\t\tif (!this.tracker.hasOwnProperty(taskId)) return null;\n\t\t\tlet info = await modules.tokens.info(this.tracker[taskId].apis.public.getProcessToken());\n\t\t\tif (!info) info = { user: taskId.slice(0, 16) };\n\t\t\treturn {\n\t\t\t\tfile: this.tracker[taskId].file,\n\t\t\t\targ: this.tracker[taskId].arg,\n\t\t\t\trunBy: info.user,\n\t\t\t\tcliio: this.tracker[taskId].cliio.attached\n\t\t\t}\n\t\t},\n\t\ttracker: {},\n\t\tfs: modules.fs,\n\t\tree: modules.core.createREE\n\t};\n\t\n\tmodules.tasks = tasks;\n}\nloadTasks();","4308c34c1effc1e3ede6d994b41157c53c8ea8fe79ee646f4b465cfb90a24a15463926d1bc065d156516cb60a2b4f294236c9270ac8cc9ee56ce22181b41d3d6":"async function logOut(target) {\n\tlet liu = modules.liu;\n\tif (!liu.hasOwnProperty(target)) throw new Error(\"USER_NOT_LOGGED_IN\");\n\tlet session = liu[target].session;\n\tlet token = liu[target].logon.token;\n\tlet secureSession = modules.session.attrib(session, \"secureID\");\n\tawait modules.session.attrib(session, \"loggingOut\", true);\n\tclearInterval(liu[target].clockInterval);\n\tif (modules.session.active == session || (secureSession && modules.session.active == secureSession)) await modules.session.muteAllSessions();\n\tawait modules.session.activateSession(modules.session.systemSession);\n\tlet loggingOutWindow = modules.window(modules.session.systemSession, true);\n\tloggingOutWindow.title.innerText = modules.locales.get(\"LOGGING_OUT\");\n\tloggingOutWindow.content.style.padding = \"8px\";\n\tloggingOutWindow.closeButton.disabled = true;\n\tloggingOutWindow.content.innerText = modules.locales.get(\"LOGGING_OUT\");\n\tlet taskList = modules.session.attrib(session, \"openReeWindows\") || [];\n\tlet timeout = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\tfunction allProcessesClosed() {\n\t\treturn new Promise(function(resolve) {\n\t\t\tlet int = setInterval(function() {\n\t\t\t\ttry {\n\t\t\t\t\ttaskList = modules.session.attrib(session, \"openReeWindows\") || [];\n\t\t\t\t\tif (Object.keys(taskList).length == 0) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tclearInterval(int);\n\t\t\t\t\t}\n\t\t\t\t} catch {\n\t\t\t\t\tresolve();\n\t\t\t\t\tclearInterval(int);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n\tloggingOutWindow.content.innerText = modules.locales.get(\"POLITE_CLOSE_SIGNAL\");\n\tfor (let taskId of taskList) modules.tasks.sendSignal(taskId, 15);\n\tawait Promise.race([\n\t\ttimeout(5000),\n\t\tallProcessesClosed()\n\t]);\n\tloggingOutWindow.content.innerText = modules.locales.get(\"ABRUPT_CLOSE_SIGNAL\");\n\tif (secureSession) {\n\t\ttaskList = modules.session.attrib(secureSession, \"openReeWindows\") || [];\n\t\tfor (let taskId of taskList) modules.tasks.sendSignal(taskId, 9);\n\t}\n\ttaskList = modules.session.attrib(session, \"openReeWindows\") || [];\n\tfor (let taskId of taskList) modules.tasks.sendSignal(taskId, 9);\n\tawait allProcessesClosed();\n\tloggingOutWindow.windowDiv.remove();\n\tdelete modules.liu[target];\n\tawait modules.tokens.revoke(token);\n\tif (secureSession) await modules.session.rmsession(secureSession);\n\tawait modules.session.rmsession(session);\n}\n\nmodules.logOut = logOut;","b1c863692cf08fd057475697a8b3fb569138ea3a0788927435b93a39c83ea5e88f560a0b4e8f13c15a7d42581c117a9b79ae3507138e88526c267df1fbc69f92":"function restartLoad() {\n\t// @pcos-app-mode native\n\tfunction timeout(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\tfunction allProcessesClosed() {\n\t\treturn new Promise(function(resolve) {\n\t\t\tlet int = setInterval(function() {\n\t\t\t\tif (Object.keys(modules.tasks.tracker).length == 0) {\n\t\t\t\t\tresolve();\n\t\t\t\t\tclearInterval(int);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n\t\n\tasync function restart(noAutomaticReload = false, token, kexec) {\n\t\ttry {\n\t\t\tlet shutdownSoundPerm = await modules.fs.permissions(modules.defaultSystem + \"/etc/sounds/shutdown.aud\");\n\t\t\tif (!shutdownSoundPerm.world.includes(\"r\")) throw new Error(\"Not allowed to read shutdown.aud\");\n\t\t\tlet shutdownSound = await modules.fs.read(modules.defaultSystem + \"/etc/sounds/shutdown.aud\");\n\t\t\tlet shutdownAudio = new Audio();\n\t\t\tshutdownAudio.src = shutdownSound;\n\t\t\tshutdownAudio.play();\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to play shutdown.aud:\", e);\n\t\t}\n\t\tmodules.shuttingDown = true;\n\t\tlet window = modules.window;\n\t\tlet fs = modules.fs;\n\t\tlet tasks = modules.tasks;\n\t\tmodules.session.muteAllSessions();\n\t\tmodules.session.activateSession(modules.session.systemSession);\n\t\tlet windowDiv = window(modules.session.systemSession, true);\n\t\twindowDiv.closeButton.classList.toggle(\"hidden\", true);\n\t\twindowDiv.title.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", \"\");\n\t\twindowDiv.content.style.padding = \"8px\";\n\t\tlet description = document.createElement(\"p\");\n\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"PLEASE_WAIT\"));\n\t\twindowDiv.content.appendChild(description);\n\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"POLITE_CLOSE_SIGNAL\"));\n\t\tfor (let taskId in tasks.tracker) tasks.sendSignal(taskId, 15);\n\t\tawait Promise.race([\n\t\t\ttimeout(5000),\n\t\t\tallProcessesClosed()\n\t\t]);\n\t\ttry {\n\t\t\tmodules.websocket._handles[modules.network.ws].send(JSON.stringify({\n\t\t\t\tfinalProxyPacket: true\n\t\t\t}));\n\t\t} catch {}\n\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"ABRUPT_CLOSE_SIGNAL\"));\n\t\tfor (let taskId in tasks.tracker) tasks.sendSignal(taskId, 9, true);\n\t\tawait allProcessesClosed();\n\t\ttry {\n\t\t\tmodules.websocket._handles[modules.network.ws].ws.onclose = null;\n\t\t\tmodules.websocket._handles[modules.network.ws].ws.close();\n\t\t\tdelete modules.websocket._handles[modules.network.ws];\n\t\t} catch {}\n\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"UNMOUNTING_MOUNTS\"));\n\t\tfor (let mount in fs.mounts) try { await fs.sync(mount, token); } catch {}\n\t\tfor (let mount in fs.mounts) try { await fs.umount(mount, token); } catch {}\n\t\tfor (let mount in fs.mounts) try { await fs.umount(mount, token, true); } catch {}\n\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"RESTARTING\"));\n\t\tif (!noAutomaticReload) {\n\t\t\tif (kexec) {\n\t\t\t\ttry {\n\t\t\t\t\tmodules.session.destroy();\n\t\t\t\t\tawait new ((async _=>0).constructor)(\n\t\t\t\t\t\tmodules.core.disk.partition(\"boot\").getData()\n\t\t\t\t\t)();\n\t\t\t\t\treturn modules.killSystem();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tawait panic(\"KEXEC_FAILED\", {\n\t\t\t\t\t\tname: \"kexec\",\n\t\t\t\t\t\tunderlyingJS: e\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn location.reload();\n\t\t}\n\t\tmodules.killSystem();\n\t\tdescription.innerText = modules.locales.get(\"SAFE_TO_CLOSE\");\n\t\tlet button = document.createElement(\"button\");\n\t\tbutton.innerText = modules.locales.get(\"RESTART_BUTTON\");\n\t\tbutton.onclick = function() {\n\t\t\tdescription.innerText = modules.locales.get(\"PCOS_RESTARTING\").replace(\"%s\", modules.locales.get(\"RESTARTING\"));\n\t\t\tbutton.remove();\n\t\t\tlocation.reload();\n\t\t}\n\t\twindowDiv.content.appendChild(button);\n\t}\n\t\n\tmodules.restart = restart;\n}\n\nrestartLoad();","af307126dca2c780b36326c42138f30118b320c1d8c1780faf15b94c7f3d752c9aa81e7c1780d523d5c4be8d20c58efe572cbca5149e52fa432e4223d18c6298":"function loadUserFriendly() {\n\t// @pcos-app-mode native\n\tmodules.userfriendliness = {\n\t\tinconsiderateTime: function(language, ms, majorUnitsOnly, displayMs) {\n\t\t\tlet string = \"\";\n\t\t\tlet days = Math.floor(ms / 86400000);\n\t\t\tlet hours = Math.floor(ms / 3600000) % 24;\n\t\t\tlet minutes = Math.floor(ms / 60000) % 60;\n\t\t\tlet seconds = Math.floor(ms / 1000) % 60;\n\t\t\tif (days) string = string + modules.locales.get(\"SHORT_DAYS\", language).replace(\"%s\", days) + \" \";\n\t\t\tif (days && majorUnitsOnly) return string;\n\t\t\tif (hours) string = string + modules.locales.get(\"SHORT_HOURS\", language).replace(\"%s\", hours) + \" \";\n\t\t\tif (hours && majorUnitsOnly) return string;\n\t\t\tif (minutes) string = string + modules.locales.get(\"SHORT_MINUTES\", language).replace(\"%s\", minutes) + \" \";\n\t\t\tif (minutes && majorUnitsOnly) return string;\n\t\t\tif (seconds) string = string + modules.locales.get(\"SHORT_SECONDS\", language).replace(\"%s\", seconds) + \" \";\n\t\t\tif (displayMs && (ms % 1000)) {\n\t\t\t\tif (seconds && majorUnitsOnly) return string;\n\t\t\t\tstring = string + modules.locales.get(\"SHORT_MILLISECONDS\", language).replace(\"%s\", (ms % 1000)) + \" \";\n\t\t\t}\n\t\t\treturn string;\n\t\t},\n\t\tinformationUnits: function(language, bytes, majorUnitsOnly) {\n\t\t\tlet string = \"\";\n\t\t\tlet tb = Math.floor(bytes / (1024 * 1024 * 1024 * 1024));\n\t\t\tlet gb = Math.floor(bytes / (1024 * 1024 * 1024)) % 1024;\n\t\t\tlet mb = Math.floor(bytes / (1024 * 1024)) % 1024;\n\t\t\tlet kb = Math.floor(bytes / 1024) % 1024;\n\t\t\tlet b = bytes % 1024;\n\t\t\tif (tb) string = string + modules.locales.get(\"SHORT_TERABYTES\", language).replace(\"%s\", tb) + \" \";\n\t\t\tif (tb && majorUnitsOnly) return string;\n\t\t\tif (gb) string = string + modules.locales.get(\"SHORT_GIGABYTES\", language).replace(\"%s\", gb) + \" \";\n\t\t\tif (gb && majorUnitsOnly) return string;\n\t\t\tif (mb) string = string + modules.locales.get(\"SHORT_MEGABYTES\", language).replace(\"%s\", mb) + \" \";\n\t\t\tif (mb && majorUnitsOnly) return string;\n\t\t\tif (kb) string = string + modules.locales.get(\"SHORT_KILOBYTES\", language).replace(\"%s\", kb) + \" \";\n\t\t\tif (kb && majorUnitsOnly) return string;\n\t\t\tif (b) string = string + modules.locales.get(\"SHORT_BYTES\", language).replace(\"%s\", b);\n\t\t\tif (b && majorUnitsOnly) return string;\n\t\t\treturn string;\n\t\t},\n\t\tconsiderateTime: function(language, ms, majorUnitsOnly, displayMs) {\n\t\t\tlet dateObject = new Date(ms + (new Date(ms).getTimezoneOffset() * 60000));\n\t\t\tlet string = \"\";\n\t\t\tlet years = dateObject.getFullYear() - 1970;\n\t\t\tlet months = dateObject.getMonth();\n\t\t\tlet days = dateObject.getDate() - 1;\n\t\t\tlet hours = dateObject.getHours();\n\t\t\tlet minutes = dateObject.getMinutes();\n\t\t\tlet seconds = dateObject.getSeconds();\n\t\t\tlet millisec = dateObject.getMilliseconds();\n\t\t\tif (years) string = string + modules.locales.get(\"SHORT_YEARS\", language).replace(\"%s\", years) + \" \";\n\t\t\tif (years && majorUnitsOnly) return string;\n\t\t\tif (months) string = string + modules.locales.get(\"SHORT_MONTHS\", language).replace(\"%s\", months) + \" \";\n\t\t\tif (months && majorUnitsOnly) return string;\n\t\t\tif (days) string = string + modules.locales.get(\"SHORT_DAYS\", language).replace(\"%s\", days) + \" \";\n\t\t\tif (days && majorUnitsOnly) return string;\n\t\t\tif (hours) string = string + modules.locales.get(\"SHORT_HOURS\", language).replace(\"%s\", hours) + \" \";\n\t\t\tif (hours && majorUnitsOnly) return string;\n\t\t\tif (minutes) string = string + modules.locales.get(\"SHORT_MINUTES\", language).replace(\"%s\", minutes) + \" \";\n\t\t\tif (minutes && majorUnitsOnly) return string;\n\t\t\tif (seconds) string = string + modules.locales.get(\"SHORT_SECONDS\", language).replace(\"%s\", seconds) + \" \";\n\t\t\tif (displayMs && millisec) {\n\t\t\t\tif (seconds && majorUnitsOnly) return string;\n\t\t\t\tstring = string + modules.locales.get(\"SHORT_MILLISECONDS\", language).replace(\"%s\", (millisec % 1000)) + \" \";\n\t\t\t}\n\t\t\treturn string;\n\t\t}\n\t}\n}\nloadUserFriendly();","feceda0f61befeabef8687f1e02de3dabc8753f0175519021274deb32110fa955b65325777bc89393de6c0d545463881a7f8dd691673788b9044b676f0d992d8":"function setupTokens() {\n\t// @pcos-app-mode native\n\tmodules.tokens = {\n\t\tgenerate: async function() {\n\t\t\tlet rng = crypto.getRandomValues(new Uint8Array(64));\n\t\t\tlet token = Array.from(rng).map(x => x.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tthis._tokens[token] = { privileges: [], user: \"nobody\", groups: [] };\n\t\t\treturn token;\n\t\t},\n\t\trevoke: async function(token) {\n\t\t\tdelete this._tokens[token];\n\t\t},\n\t\tsetPrivileges: async function(token, privileges) {\n\t\t\tthis._tokens[token].privileges = privileges;\n\t\t},\n\t\taddPrivilege: async function(token, privilege) {\n\t\t\tthis._tokens[token].privileges.push(privilege);\n\t\t},\n\t\taddPrivileges: async function(token, privileges) {\n\t\t\tthis._tokens[token].privileges.push(...privileges);\n\t\t},\n\t\tremovePrivilege: async function(token, privilege) {\n\t\t\tthis._tokens[token].privileges = this._tokens[token].privileges.filter(x => x != privilege);\n\t\t},\n\t\tremovePrivileges: async function(token, privileges) {\n\t\t\tthis._tokens[token].privileges = this._tokens[token].privileges.filter(x => !privileges.includes(x));\n\t\t},\n\t\tuserInitialize: async function(token, user) {\n\t\t\tthis._tokens[token].user = user;\n\t\t\tthis._tokens[token].groups = (await modules.users.getUserInfo(user, token)).groups || [];\n\t\t\tthis._tokens[token].privileges = [\"FS_READ\", \"FS_WRITE\", \"FS_REMOVE\", \"FS_CHANGE_PERMISSION\", \"FS_LIST_PARTITIONS\", \"IPC_CREATE_PIPE\", \"IPC_LISTEN_PIPE\", \"IPC_SEND_PIPE\", \"IPC_CHANGE_PERMISSION\", \"ELEVATE_PRIVILEGES\", \"GET_USER_INFO\", \"SET_SECURITY_CHECKS\", \"START_TASK\", \"LIST_TASKS\", \"SIGNAL_TASK\", \"FETCH_SEND\", \"CSP_OPERATIONS\", \"IDENTIFY_SYSTEM\", \"WEBSOCKETS_OPEN\", \"WEBSOCKETS_LISTEN\", \"WEBSOCKETS_SEND\", \"WEBSOCKET_SET_PERMISSIONS\", \"MANAGE_TOKENS\", \"WEBSOCKET_INFO\", \"GRAB_ATTENTION\", \"CLI_MODIFICATIONS\", \"GET_THEME\", \"GET_LOCALE\", \"GET_FILESYSTEMS\", \"GET_BUILD\", \"GET_SERVER_URL\", \"START_BACKGROUND_TASK\", \"GET_BOOT_MODE\", \"GET_SCREEN_INFO\", \"PCOS_NETWORK_PING\", \"LOGOUT\", \"LULL_SYSTEM\", \"CONNLESS_LISTEN\", \"CONNLESS_SEND\", \"GET_NETWORK_ADDRESS\", \"CONNFUL_LISTEN\", \"CONNFUL_CONNECT\", \"CONNFUL_DISCONNECT\", \"CONNFUL_WRITE\", \"CONNFUL_READ\", \"CONNFUL_ADDRESS_GET\", \"SYSTEM_UPTIME\", \"GET_HOSTNAME\", \"RESOLVE_NAME\", \"PATCH_DIFF\", \"GET_BATTERY_STATUS\", \"CONNFUL_IDENTITY_GET\", \"GET_UPDATE_SERVICE\", \"GET_ROOT_KEY\"];\n\t\t\tif (user == \"root\") this._tokens[token].privileges.push(\"FS_UNMOUNT\", \"SYSTEM_SHUTDOWN\", \"SWITCH_USERS_AUTOMATICALLY\", \"USER_INFO_OTHERS\", \"SET_USER_INFO\", \"FS_BYPASS_PERMISSIONS\", \"IPC_BYPASS_PERMISSIONS\", \"TASK_BYPASS_PERMISSIONS\", \"SENSITIVE_USER_INFO_OTHERS\", \"SYSTEM_STABILITY\", \"RUN_KLVL_CODE\", \"IDENTIFY_SYSTEM_SENSITIVE\", \"WEBSOCKET_BYPASS_PERMISSIONS\", \"LLDISK_READ\", \"LLDISK_WRITE\", \"LLDISK_LIST_PARTITIONS\", \"LLDISK_REMOVE\", \"LLDISK_IDB_READ\", \"LLDISK_IDB_WRITE\", \"LLDISK_IDB_REMOVE\", \"LLDISK_IDB_LIST\", \"LLDISK_IDB_SYNC\", \"FS_MOUNT\", \"SET_DEFAULT_SYSTEM\", \"GET_SYSTEM_RESOURCES\", \"LLDISK_INIT_PARTITIONS\", \"LOGOUT_OTHERS\", \"LULL_SYSTEM_FORCE\", \"CONNLESS_LISTEN_GLOBAL\", \"GET_USER_LIST\", \"CONNFUL_LISTEN_GLOBAL\", \"NETWORK_RAW_WRITE\", \"NETWORK_RAW_READ\", \"SET_FIRMWARE\", \"RELOAD_NETWORK_CONFIG\");\n\t\t\tif ((await modules.users.getUserInfo(user, token)).blankPrivileges) this._tokens[token].privileges = [];\n\t\t\tthis._tokens[token].privileges.push(...((await modules.users.getUserInfo(user, token)).additionalPrivilegeSet || []));\n\t\t\tthis._tokens[token].privileges = Array.from(new Set(this._tokens[token].privileges));\n\t\t},\n\t\thalfInitialize: async function(token, user) {\n\t\t\tthis._tokens[token].user = user;\n\t\t\tthis._tokens[token].groups = (await modules.users.getUserInfo(user, token)).groups || [];\n\t\t},\n\t\tinfo: async function(token) {\n\t\t\treturn this._tokens[token];\n\t\t},\n\t\tvalidate: async function(token, criteria) {\n\t\t\tif (!this._tokens.hasOwnProperty(token)) return false;\n\t\t\tif (criteria.user && this._tokens[token].user != criteria.user) return false;\n\t\t\tif (criteria.group && !this._tokens[token].groups.includes(criteria.group)) return false;\n\t\t\tif (criteria.privilege && !this._tokens[token].privileges.includes(criteria.privilege)) return false;\n\t\t\treturn true;\n\t\t},\n\t\tfork: async function(token) {\n\t\t\tlet rng = crypto.getRandomValues(new Uint8Array(64));\n\t\t\tlet newToken = Array.from(rng).map(x => x.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\tthis._tokens[newToken] = JSON.parse(JSON.stringify(this._tokens[token]));\n\t\t\treturn newToken;  \n\t\t},\n\t\t_tokens: {}\n\t}\n}\nsetupTokens();","16e67f0e5f8d5c64290b14fe92afbaca966468b29f1541eec96216c37dd848a006ee5f6053f609f1934ceebf1505c0b54709b8f0909744c312312fa5b74616c0":"async function setupUsers() {\n\t// @pcos-app-mode native\n\tasync function handleAuthentication(user, prompts, finishFunction) {\n\t\tlet currentPromptIndex = 0;\n\t\tlet destroyed = false;\n\n\t\treturn {\n\t\t\tgetNextPrompt: async function() {\n\t\t\t\tif (destroyed) return {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\tmessage: modules.locales.get(\"AUTH_FAILED_NEW\")\n\t\t\t\t};\n\t\t\t\tif (currentPromptIndex >= prompts.length) {\n\t\t\t\t\tif (finishFunction) await finishFunction(true);\n\t\t\t\t\tlet token = await modules.tokens.generate();\n\t\t\t\t\tawait modules.tokens.userInitialize(token, user);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\tmessage: modules.locales.get(\"AUTH_SUCCESS\"),\n\t\t\t\t\t\ttoken: token\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tlet that = this;\n\t\t\t\tlet currentPrompt = prompts[currentPromptIndex];\n\t\t\t\tlet used = false;\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tsuccess: \"intermediate\",\n\t\t\t\t\ttype: currentPrompt.type,\n\t\t\t\t\tmessage: currentPrompt.message,\n\t\t\t\t\twantsUserInput: currentPrompt.userInput,\n\t\t\t\t\tchallenge: currentPrompt.challenge,\n\t\t\t\t\tinput: async function(input) {\n\t\t\t\t\t\tif (used || destroyed) return that.getNextPrompt();\n\t\t\t\t\t\tif (!used) used = true;\n\t\t\t\t\t\tlet verified;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tverified = await currentPrompt.verify(input);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tverified = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!verified) {\n\t\t\t\t\t\t\tdestroyed = true;\n\t\t\t\t\t\t\tif (finishFunction) await finishFunction(false);\n\t\t\t\t\t\t\treturn { success: false, message: modules.locales.get(\"AUTH_FAILED\") };\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurrentPromptIndex++;\n\t\t\t\t\t\treturn that.getNextPrompt();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\tlet test = \"{}\";\n\ttry {\n\t\ttest = await modules.fs.read(modules.defaultSystem + \"/etc/security/users\");\n\t} catch {\n\t\tif (!modules.settingUp) test = \"systemStatusInvalid\";\n\t}\n\ttry {\n\t\tJSON.parse(test);\n\t} catch (e) {\n\t\tif (!modules.settingUp) await panic(\"USER_SYSTEM_CORRUPTED\", {\n\t\t\tname: \"/etc/security/users\",\n\t\t\tparams: [modules.defaultSystem],\n\t\t\tunderlyingJS: e\n\t\t})\n\t}\n\n\tmodules.users = {\n\t\tinit: async function(token) {\n\t\t\tawait this.mkrecursive(modules.defaultSystem + \"/etc/security\", token);\n\t\t\tawait modules.fs.chmod(modules.defaultSystem + \"/etc\", \"rx\", token);\n\t\t\tawait this.mkrecursive(modules.defaultSystem + \"/root\", token);\n\t\t\tawait modules.fs.write(modules.defaultSystem + \"/etc/security/users\", JSON.stringify({root: {\n\t\t\t\tsecurityChecks: [],\n\t\t\t\tgroups: [\"root\"],\n\t\t\t\thomeDirectory: modules.defaultSystem + \"/root\"\n\t\t\t},\n\t\t\tauthui: {\n\t\t\t\tsecurityChecks: [],\n\t\t\t\tgroups: [\"authui\"],\n\t\t\t\thomeDirectory: modules.defaultSystem,\n\t\t\t\tblankPrivileges: true,\n\t\t\t\tadditionalPrivilegeSet:  [ \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"GET_THEME\", \"ELEVATE_PRIVILEGES\", \"FS_READ\", \"FS_LIST_PARTITIONS\", \"CSP_OPERATIONS\" ]\n\t\t\t}}), token);\n\t\t},\n\t\tmkrecursive: async function(dir, token) {\n\t\t\tlet slices = dir.split(\"/\");\n\t\t\tfor (let slice in slices) {\n\t\t\t\tlet previousParts = slices.slice(0, slice).join(\"/\");\n\t\t\t\tif (!previousParts) continue;\n\t\t\t\tlet currentPart = slices[slice];\n\t\t\t\tlet check = await modules.fs.ls(previousParts, token);\n\t\t\t\tpreviousParts += \"/\";\n\t\t\t\tif (!check.includes(currentPart)) await modules.fs.mkdir(previousParts + currentPart, token);\n\t\t\t}\n\t\t},\n\t\tmoduser: async function(user, data, token) {\n\t\t\tlet userDB = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/security/users\"), token);\n\t\t\tuserDB[user] = data;\n\t\t\tawait modules.fs.write(modules.defaultSystem + \"/etc/security/users\", JSON.stringify(userDB), token);\n\t\t},\n\t\tgetUserInfo: async function(user, sensitive = false, token) {\n\t\t\tlet userDB = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/security/users\"), token);\n\t\t\tif (!userDB.hasOwnProperty(user)) return null;\n\t\t\tuserDB = userDB[user];\n\t\t\tif (!sensitive) delete userDB.securityChecks;\n\t\t\treturn userDB;\n\t\t},\n\t\tconfigured: async function(token) {\n\t\t\ttry {\n\t\t\t\tJSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/security/users\"), token);\n\t\t\t\treturn true;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\taccess: async function(user, token) {\n\t\t\tlet userDB = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/security/users\"), token);\n\t\t\tlet credentials = userDB[user].securityChecks;\n\t\t\tfor (let check in credentials) {\n\t\t\t\tif (credentials[check].type == \"pbkdf2\") {\n\t\t\t\t\tcredentials[check].userInput = true;\n\t\t\t\t\tcredentials[check].type = \"password\";\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"PASSWORD_PROMPT\");\n\t\t\t\t\tcredentials[check].verify = async function(input) {\n\t\t\t\t\t\treturn (await modules.core.pbkdf2(input, credentials[check].salt)) == credentials[check].hash;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"informative\" || credentials[check].type == \"informative_deny\") {\n\t\t\t\t\tcredentials[check].verify = () => credentials[check].type == \"informative\";\n\t\t\t\t\tcredentials[check].type = \"informative\";\n\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"timeout\" || credentials[check].type == \"timeout_deny\") {\n\t\t\t\t\tlet isTimeout = credentials[check].type == \"timeout\";\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"PLEASE_WAIT_TIME\").replace(\"%s\", modules.userfriendliness.inconsiderateTime(credentials[check].timeout));\n\t\t\t\t\tcredentials[check].verify = () => new Promise(resolve => setTimeout(resolve, credentials[check].timeout, isTimeout));\n\t\t\t\t\tcredentials[check].type = \"promise\";\n\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"serverReport\") {\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"REPORTING_LOGON\");\n\t\t\t\t\tcredentials[check].type = \"promise\";\n\t\t\t\t\tcredentials[check].verify = async function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet response = await fetch(credentials[check].url);\n\t\t\t\t\t\t\tif (!response.ok) return false;\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"pc-totp\") {\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"TOTP_PC_PROMPT\");\n\t\t\t\t\tcredentials[check].type = \"text\";\n\t\t\t\t\tcredentials[check].userInput = true;\n\t\t\t\t\tcredentials[check].verify = async function(input) {\n\t\t\t\t\t\tlet sha256 = async b => Array.from(new Uint8Array(await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(b)))).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet c = Math.floor((Math.floor(Date.now() / 1000)) / 30);\n\t\t\t\t\t\tlet hash = await sha256(credentials[check].secret + c);\n\t\t\t\t\t\thash = parseInt(hash, 16);\n\t\t\t\t\t\thash = hash % 60466176;\n\t\t\t\t\t\thash = hash.toString();\n\t\t\t\t\t\thash = hash.split(\"\", 6);\n\t\t\t\t\t\thash = hash.join(\"\");\n\t\t\t\t\t\treturn hash == input;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"totp\") {\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"TOTP_PROMPT\");\n\t\t\t\t\tcredentials[check].type = \"text\";\n\t\t\t\t\tcredentials[check].userInput = true;\n\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\tlet keyImport = await crypto.subtle.importKey(\"raw\", hexToU8A(credentials[check].secret?.padStart(20, \"0\")), {\n\t\t\t\t\t\tname: \"HMAC\",\n\t\t\t\t\t\thash: \"SHA-1\"\n\t\t\t\t\t}, true, [ \"sign\" ]);\n\t\t\t\t\t\n\t\t\t\t\tcredentials[check].verify = async function(input) {\n\t\t\t\t\t\tlet counter = hexToU8A(Math.floor(Date.now() / 30000).toString(16).padStart(16, \"0\"));\n\t\t\t\t\t\tlet hmacSign = await crypto.subtle.sign(\"HMAC\", keyImport, counter);\n\t\t\t\t\t\thmacSign = Array.from(new Uint8Array(hmacSign));\n\t\t\t\t\t\tlet offset = hmacSign[19] & 0xf; // https://datatracker.ietf.org/doc/html/rfc4226#section-5.4\n\t\t\t\t\t\tlet code = (hmacSign[offset] & 0x7f) << 24\n\t\t\t\t\t\t\t| (hmacSign[offset + 1] & 0xff) << 16\n\t\t\t\t\t\t\t| (hmacSign[offset + 2] & 0xff) << 8\n\t\t\t\t\t\t\t| (hmacSign[offset + 3] & 0xff);\n\t\t\t\t\t\tcode = code % 1000000;\n\t\t\t\t\t\treturn (code.toString() == input) || (code.toString().padStart(6, \"0\") == input);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"workingHours\") {\n\t\t\t\t\tlet workingHourStarts = new Date();\n\t\t\t\t\tworkingHourStarts.setHours(credentials[check].start.hours || 0, credentials[check].start.minutes || 0, credentials[check].start.seconds || 0);\n\t\t\t\t\tlet workingHourEnds = new Date();\n\t\t\t\t\tworkingHourEnds.setHours(credentials[check].end.hours || 0, credentials[check].end.minutes || 0, credentials[check].end.seconds || 0);\n\t\t\t\t\t\n\t\t\t\t\tif (new Date() > workingHourEnds || new Date() < workingHourStarts) {\n\t\t\t\t\t\tcredentials[check].message = modules.locales.get(\"WORKING_HOURS_UNMET\");\n\t\t\t\t\t\tcredentials[check].type = \"informative\";\n\t\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t\t\tcredentials[check].verify = () => false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcredentials[check].message = modules.locales.get(\"AUTH_SUCCESS\");\n\t\t\t\t\t\tcredentials[check].type = \"promise\";\n\t\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t\t\tcredentials[check].verify = () => true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (credentials[check].type == \"zkpp\") {\n\t\t\t\t\tcredentials[check].message = modules.locales.get(\"MODULE_REQUIRED\").replace(\"%s\", \"tweetnacl\");\n\t\t\t\t\tcredentials[check].type = \"informative\";\n\t\t\t\t\tcredentials[check].userInput = false;\n\t\t\t\t\tcredentials[check].verify = () => false;\n\t\t\t\t\tif (window.nacl) {\n\t\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\t\tlet randomChallenge = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\t\t\tcredentials[check].message = modules.locales.get(\"PASSWORD_PROMPT\");\n\t\t\t\t\t\tcredentials[check].type = \"zkpp_password\";\n\t\t\t\t\t\tcredentials[check].userInput = true;\n\t\t\t\t\t\tcredentials[check].challenge = randomChallenge;\n\t\t\t\t\t\tcredentials[check].verify = input => nacl.sign.detached.verify(hexToU8A(credentials[check].challenge), hexToU8A(input), hexToU8A(credentials[check].publicKey));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (credentials.length == 0) {\n\t\t\t\tcredentials.push({\n\t\t\t\t\ttype: \"informative\",\n\t\t\t\t\tmessage: modules.locales.get(\"ACCESS_NOT_SETUP\"),\n\t\t\t\t\tuserInput: false,\n\t\t\t\t\tverify: () => false\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn handleAuthentication(user, credentials);\n\t\t},\n\t\tgetUsers: async function(token) {\n\t\t\tlet userDB = JSON.parse(await modules.fs.read(modules.defaultSystem + \"/etc/security/users\"), token);\n\t\t\treturn Object.keys(userDB);\n\t\t}\n\t}\n}\nawait setupUsers();","a9595ad70ef97186ddd3dada981212f170db75b2059cf6f103bf4486f5b7b7377f302093b049c3a119ab441d7be22bec9c9438ede7235e5dcf07408b58c9b65d":"async function authui(ses = modules.session.active, user, token, isLogonScreen) {\n\t// @pcos-app-mode native\n\tif (modules.shuttingDown) return { hook: _ => _ };\n\tlet appToken;\n\tif (token) appToken = modules.tokens.fork(token);\n\telse {\n\t\tappToken = await modules.tokens.generate();\n\t\tawait modules.tokens.userInitialize(appToken, \"authui\");\n\t}\n\tlet hook = new Function();\n\tlet ipc = await modules.ipc.create();\n\tmodules.ipc.declareAccess(ipc, { owner: \"authui\", group: \"authui\", world: false });\n\tlet windowObject = modules.window(ses);\n\tif (isLogonScreen) windowObject.closeButton.classList.toggle(\"hidden\", true);\n\tlet authTask = await modules.tasks.exec(modules.defaultSystem + \"/apps/authui.js\", [], windowObject, appToken, false, [ ipc, user || \"\" ]);\n\tasync function waitForIt() {\n\t\tlet msg = await Promise.race([\n\t\t\tmodules.ipc.listenFor(ipc),\n\t\t\tmodules.tasks.waitTermination(authTask)\n\t\t]);\n\t\tdelete modules.ipc._ipc[ipc];\n\t\ttry {\n\t\t\tawait modules.tasks.sendSignal(authTask, 9);\n\t\t\thook(msg);\n\t\t} catch {\n\t\t\thook({\n\t\t\t\tsuccess: false,\n\t\t\t\tcancelled: true\n\t\t\t});\n\t\t}\n\t}\n\twaitForIt();\n\treturn { hook: (e) => hook = e };\n}\nmodules.authui = authui;","48113822780009ae6737c850f8dda4ebc93928907105deb7f4ea620cdc38892a8369cbb25b0c17d14028d167ce75aeb2eeebced43ab5168643686da78b4e83a4":"async function consentui(ses = modules.session.active, config, token) {\n\t// @pcos-app-mode native\n\tif (modules.shuttingDown) return { hook: _ => _ };\n\tlet appToken;\n\tif (token) appToken = modules.tokens.fork(token);\n\telse {\n\t\tappToken = await modules.tokens.generate();\n\t\tawait modules.tokens.userInitialize(appToken, \"authui\");\n\t}\n\tlet hook = new Function();\n\tlet ipc = await modules.ipc.create();\n\tmodules.ipc.declareAccess(ipc, { owner: \"authui\", group: \"authui\", world: false });\n\tlet windowObject = modules.window(ses);\n\tlet authTask = await modules.tasks.exec(modules.defaultSystem + \"/apps/consentui.js\", [], windowObject, appToken, false, [\n\t\tipc,\n\t\tconfig.user || \"\",\n\t\tJSON.stringify({\n\t\t\tpath: config.path,\n\t\t\targs: config.args,\n\t\t\tsubmittedIntent: config.intent,\n\t\t\tsubmittedName: config.name\n\t\t})\n\t]);\n\tasync function waitForIt() {\n\t\tlet msg = await Promise.race([\n\t\t\tmodules.ipc.listenFor(ipc),\n\t\t\tmodules.tasks.waitTermination(authTask)\n\t\t]);\n\t\tdelete modules.ipc._ipc[ipc];\n\t\ttry {\n\t\t\tawait modules.tasks.sendSignal(authTask, 9);\n\t\t\thook(msg);\n\t\t} catch {\n\t\t\thook({\n\t\t\t\tsuccess: false,\n\t\t\t\tcancelled: true\n\t\t\t});\n\t\t}\n\t}\n\twaitForIt();\n\treturn { hook: (e) => hook = e };\n}\nmodules.consentui = consentui;","ae53b7b641724ee2e85bf300016e6d600676171f8ff9c0c9ddbc65d1f76c2cc65d70d870100a47e5fc36202621db49d017af0f1a520d0195c1bf5fcc008ffc15":"async function requireLogon() {\n\t// @pcos-app-mode native\n\ttry {\n\t\tlet startupSoundPerm = await modules.fs.permissions(modules.defaultSystem + \"/etc/sounds/startup.aud\");\n\t\tif (!startupSoundPerm.world.includes(\"r\")) throw new Error(\"Not allowed to read startup.aud\");\n\t\tlet startupSound = await modules.fs.read(modules.defaultSystem + \"/etc/sounds/startup.aud\");\n\t\tlet startupAudio = new Audio();\n\t\tstartupAudio.src = startupSound;\n\t\tstartupAudio.play();\n\t} catch (e) {\n\t\tconsole.error(\"Failed to play startup sound:\", e);\n\t}\n\tlet liu = {};\n\tmodules.liu = liu;\n\tserviceLogon();\n\tlet insertedLockMessage = false;\n\tasync function handleLogin(resolvedLogon, liu) {\n\t\tmodules.session.muteAllSessions();\n\t\tlet userInfo = await modules.tokens.info(resolvedLogon.token);\n\t\tlet session;\n\t\tlet liuUser = userInfo.user;\n\t\tlet wasLiuLoaded = false;\n\t\tif (liu.hasOwnProperty(userInfo.user)) {\n\t\t\tsession = liu[userInfo.user].session;\n\t\t\tawait modules.tokens.revoke(resolvedLogon.token);\n\t\t\tresolvedLogon = liu[userInfo.user].logon;\n\t\t\tuserInfo = await modules.tokens.info(resolvedLogon.token);\n\t\t\twasLiuLoaded = true;\n\t\t} else {\n\t\t\tsession = modules.session.mksession();\n\t\t\tliu[userInfo.user] = {\n\t\t\t\tsession,\n\t\t\t\tlogon: resolvedLogon,\n\t\t\t}\n\t\t}\n\t\tif (modules.session.attrib(session, \"secureID\")) return modules.session.activateSession(modules.session.attrib(session, \"secureID\"));\n\t\tmodules.session.activateSession(session);\n\t\tlet dom = modules.session.tracker[session].html;\n\t\tlet bgPic = \"\";\n\t\tlet isDark = false;\n\t\tlet locale;\n\t\tlet basicPrivilegeChecklist = [ \"FS_READ\", \"FS_LIST_PARTITIONS\", \"IPC_SEND_PIPE\", \"IPC_LISTEN_PIPE\", \"START_TASK\", \"GET_LOCALE\", \"GET_THEME\", \"LOGOUT\" ];\n\t\tif (!basicPrivilegeChecklist.every(privilege => userInfo.privileges.includes(privilege))) {\n\t\t\tlet failureMessage = modules.window(session);\n\t\t\tfailureMessage.title.innerText = \"Permission denied\";\n\t\t\tfailureMessage.content.style.padding = \"8px\";\n\t\t\tfailureMessage.content.innerText = \"There were not enough privileges to log you in. Please contact your system administrator.\";\n\t\t\tfailureMessage.closeButton.onclick = async function() {\n\t\t\t\tfailureMessage.windowDiv.remove();\n\t\t\t\tawait modules.logOut(userInfo.user);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlet permissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.wallpaper\", resolvedLogon.token);\n\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !(permissions.world.includes(\"r\") && permissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\tthrow new Error(\"Permission denied reading wallpaper\");\n\t\t\t}\n\t\t\tbgPic = await modules.fs.read((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.wallpaper\", resolvedLogon.token);\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to read wallpaper:\", e);\n\t\t}\n\t\ttry {\n\t\t\tlet permissionsdm = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.darkmode\", resolvedLogon.token);\n\t\t\tif (permissionsdm.owner != userInfo.user && !userInfo.groups.includes(permissionsdm.group) && !(permissionsdm.world.includes(\"r\") && permissionsdm.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\tthrow new Error(\"Permission denied reading dark mode preference\");\n\t\t\t}\n\t\t\tisDark = (await modules.fs.read((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.darkmode\", resolvedLogon.token)) == \"true\";\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to read dark mode preference:\", e);\n\t\t}\n\t\ttry {\n\t\t\tlet permissionsloc = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.locale\", resolvedLogon.token);\n\t\t\tif (permissionsloc.owner != userInfo.user && !userInfo.groups.includes(permissionsloc.group) && !(permissionsloc.world.includes(\"r\") && permissionsloc.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\tthrow new Error(\"Permission denied reading locale preference\");\n\t\t\t}\n\t\t\tlocale = await modules.fs.read((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.locale\", resolvedLogon.token);\n\t\t\tmodules.session.attrib(session, \"language\", locale);\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to read dark mode preference:\", e);\n\t\t}\n\t\tif (modules.core.bootMode == \"safe\") {\n\t\t\tisDark = true;\n\t\t\tif (!wasLiuLoaded) {\n\t\t\t\tlet message = document.createElement(\"span\");\n\t\t\t\tmessage.innerText = modules.locales.get(\"SAFE_MODE_MSG\", locale);\n\t\t\t\tmessage.style = \"position: absolute; right: 8px; bottom: 8px; color: white;\";\n\t\t\t\tdom.appendChild(message);\n\t\t\t\tlet message2 = document.createElement(\"span\");\n\t\t\t\tmessage2.innerText = modules.locales.get(\"SAFE_MODE_MSG\", locale);\n\t\t\t\tmessage2.style = \"position: absolute; top: 8px; left: 8px; color: white;\";\n\t\t\t\tdom.appendChild(message2);\n\t\t\t}\n\t\t\tbgPic = \"\";\n\t\t}\n\t\tif (modules.core.bootMode == \"disable-harden\" && !wasLiuLoaded) {\n\t\t\tlet message = document.createElement(\"span\");\n\t\t\tmessage.innerText = modules.locales.get(\"INSECURE_MODE_MSG\", locale);\n\t\t\tmessage.style = \"position: absolute; right: 8px; bottom: 8px; color: white;\";\n\t\t\tdom.appendChild(message);\n\t\t\tlet message2 = document.createElement(\"span\");\n\t\t\tmessage2.innerText = modules.locales.get(\"INSECURE_MODE_MSG\", locale);\n\t\t\tmessage2.style = \"position: absolute; top: 8px; left: 8px; color: white;\";\n\t\t\tdom.appendChild(message2);\n\t\t}\n\t\tmodules.session.attrib(session, \"dark\", isDark);\n\t\tdom.style.background = \"url(\" + JSON.stringify(bgPic) + \")\";\n\t\tif (modules.core.bootMode == \"safe\") dom.style.background = \"black\";\n\t\tdom.style.backgroundSize = \"100% 100%\";\n\t\tif (!wasLiuLoaded) {\n\t\t\tlet autoRunNecessities = [];\n\t\t\ttry {\n\t\t\t\tlet autoRunPermissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorunNecessity\", resolvedLogon.token);\n\t\t\t\tif (autoRunPermissions.owner != userInfo.user && !userInfo.groups.includes(autoRunPermissions.group) && !(autoRunPermissions.world.includes(\"r\") && autoRunPermissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\tthrow new Error(\"Permission denied reading autorun necessities\");\n\t\t\t\t}\n\t\t\t\tif (modules.core.bootMode != \"safe\") autoRunNecessities = await modules.fs.ls((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorunNecessity\", resolvedLogon.token);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to read autorun necessities:\", e);\n\t\t\t}\n\t\t\tfunction breakNecessityFailure() {\n\t\t\t\tlet failureMessage = modules.window(session);\n\t\t\t\tfailureMessage.title.innerText = modules.locales.get(\"PERMISSION_DENIED\", locale);\n\t\t\t\tfailureMessage.content.style.padding = \"8px\";\n\t\t\t\tfailureMessage.content.innerText = modules.locales.get(\"AUTORUN_NECESSITIES_FAILED\", locale);\n\t\t\t\tfailureMessage.closeButton.onclick = async function() {\n\t\t\t\t\tfailureMessage.windowDiv.remove();\n\t\t\t\t\tawait modules.logOut(userInfo.user);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let autoRunNecessity of autoRunNecessities) {\n\t\t\t\tlet necessityPermissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorunNecessity/\" + autoRunNecessity, resolvedLogon.token);\n\t\t\t\tif (necessityPermissions.owner != userInfo.user && !userInfo.groups.includes(necessityPermissions.group) && !(necessityPermissions.world.includes(\"r\") && necessityPermissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\treturn breakNecessityFailure();\n\t\t\t\t}\n\t\t\t\tlet link = await modules.fs.read((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorunNecessity/\" + autoRunNecessity, resolvedLogon.token);\n\t\t\t\ttry {\n\t\t\t\t\tlink = JSON.parse(link);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to parse autorun necessity:\", e);\n\t\t\t\t\treturn breakNecessityFailure();\n\t\t\t\t}\n\t\t\t\tif (link.disabled) continue;\n\t\t\t\ttry {\n\t\t\t\t\tlet ipcPipe = modules.ipc.create();\n\t\t\t\t\tmodules.ipc.declareAccess(ipcPipe, {\n\t\t\t\t\t\towner: userInfo.user,\n\t\t\t\t\t\tgroup: userInfo.groups[0],\n\t\t\t\t\t\tworld: false\n\t\t\t\t\t});\n\t\t\t\t\tlet forkedToken;\n\t\t\t\t\tif (link.automaticLogon) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet logon = await modules.users.access(link.automaticLogon.username, resolvedLogon.token);\n\t\t\t\t\t\t\tlogon = await logon.getNextPrompt();\n\t\t\t\t\t\t\tfor (let response of link.automaticLogon.responses)\n\t\t\t\t\t\t\t\tif (logon.success == \"intermediate\") logon = await logon.input(response);\n\t\t\t\t\t\t\tif (!logon.success) throw new Error(logon.message);\n\t\t\t\t\t\t\tforkedToken = logon.token;\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tif (necessityPermissions.world.includes(\"r\") && forkedToken) {\n\t\t\t\t\t\t\tlet ownUser = await modules.tokens.info(forkedToken);\n\t\t\t\t\t\t\tlet ownUserInfo = await modules.users.getUserInfo(ownUser.user, true, forkedToken);\n\t\t\t\t\t\t\townUserInfo.securityChecks = [];\n\t\t\t\t\t\t\tawait modules.users.moduser(ownUser.user, ownUserInfo, forkedToken);\n\t\t\t\t\t\t\tawait modules.tokens.revoke(forkedToken);\n\t\t\t\t\t\t\tforkedToken = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!forkedToken) forkedToken = await modules.tokens.fork(resolvedLogon.token);\n\t\t\t\t\tlet appWindow = modules.window(session);\n\t\t\t\t\tlet ipcResult = modules.ipc.listenFor(ipcPipe);\n\t\t\t\t\tlet taskId = await modules.tasks.exec(link.path, [ ...(link.args || []), ipcPipe ], appWindow, forkedToken, true);\n\t\t\t\t\tlet finishTaskPromise = new Promise(function(resolve) {\n\t\t\t\t\t\tmodules.tasks.tracker[taskId].ree.beforeCloseDown(() => resolve());\n\t\t\t\t\t})\n\t\t\t\t\tipcResult = await Promise.race([ipcResult, finishTaskPromise]);\n\t\t\t\t\tif (!ipcResult) throw new Error(\"Software rejected autorun necessity.\");\n\t\t\t\t\tif (modules.tasks.tracker.hasOwnProperty(taskId)) await modules.tasks.sendSignal(taskId, 9);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to execute autorun necessity:\", e);\n\t\t\t\t\treturn breakNecessityFailure();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlet autoRun = [];\n\t\t\ttry {\n\t\t\t\tlet autoRunPermissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorun\", resolvedLogon.token);\n\t\t\t\tif (autoRunPermissions.owner != userInfo.user && !userInfo.groups.includes(autoRunPermissions.group) && !(autoRunPermissions.world.includes(\"r\") && autoRunPermissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\tthrow new Error(\"Permission denied reading autorun\");\n\t\t\t\t}\n\t\t\t\tif (modules.core.bootMode != \"safe\") autoRun = await modules.fs.ls((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorun\", resolvedLogon.token);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to read autorun:\", e);\n\t\t\t}\n\t\t\tfor (let autoRunFile of autoRun) {\n\t\t\t\tlet autoRunItemPermissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorun/\" + autoRunFile, resolvedLogon.token);\n\t\t\t\tif (autoRunItemPermissions.owner != userInfo.user && !userInfo.groups.includes(autoRunItemPermissions.group) && !(autoRunItemPermissions.world.includes(\"r\") && autoRunItemPermissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) continue;\n\t\t\t\tlet link = await modules.fs.read((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/.autorun/\" + autoRunFile, resolvedLogon.token);\n\t\t\t\ttry {\n\t\t\t\t\tlink = JSON.parse(link);\n\t\t\t\t} catch {}\n\t\t\t\tif (link.disabled) continue;\n\t\t\t\ttry {\n\t\t\t\t\tlet forkedToken;\n\t\t\t\t\tif (link.automaticLogon) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet logon = await modules.users.access(link.automaticLogon.username, resolvedLogon.token);\n\t\t\t\t\t\t\tlogon = await logon.getNextPrompt();\n\t\t\t\t\t\t\tfor (let response of link.automaticLogon.responses)\n\t\t\t\t\t\t\t\tif (logon.success == \"intermediate\") logon = await logon.input(response);\n\t\t\t\t\t\t\tif (!logon.success) throw new Error(logon.message);\n\t\t\t\t\t\t\tforkedToken = logon.token;\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tif (autoRunItemPermissions.world.includes(\"r\") && forkedToken) {\n\t\t\t\t\t\t\tlet ownUser = await modules.tokens.info(forkedToken);\n\t\t\t\t\t\t\tlet ownUserInfo = await modules.users.getUserInfo(ownUser.user, true, forkedToken);\n\t\t\t\t\t\t\townUserInfo.securityChecks = [];\n\t\t\t\t\t\t\tawait modules.users.moduser(ownUser.user, ownUserInfo, forkedToken);\n\t\t\t\t\t\t\tawait modules.tokens.revoke(forkedToken);\n\t\t\t\t\t\t\tforkedToken = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!forkedToken) forkedToken = await modules.tokens.fork(resolvedLogon.token);\n\t\t\t\t\tlet appWindow = modules.window(session);\n\t\t\t\t\tawait modules.tasks.exec(link.path, [ ...(link.args || []) ], appWindow, forkedToken);\n\t\t\t\t} catch {}\n\t\t\t}\n\n\t\t\tlet icons = [];\n\t\t\tlet lastIconPlacement = [ 72, 72 ];\n\t\t\ttry {\n\t\t\t\tlet permissions = await modules.fs.permissions((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/desktop\", resolvedLogon.token);\n\t\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !(permissions.world.includes(\"r\") && permissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\tthrow new Error(\"Permission denied reading desktop icons\");\n\t\t\t\t}\n\t\t\t\ticons = await modules.fs.ls((await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/desktop\", resolvedLogon.token);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to read desktop icons:\", e);\n\t\t\t}\n\t\t\tfor (let icon of icons) {\n\t\t\t\tif (icon.split(\"/\").slice(-1)[0].startsWith(\".\")) continue;\n\t\t\t\ttry {\n\t\t\t\t\tlet iconPath = (await modules.users.getUserInfo(userInfo.user, false, resolvedLogon.token)).homeDirectory + \"/desktop/\" + icon;\n\t\t\t\t\tlet permissions = await modules.fs.permissions(iconPath, resolvedLogon.token);\n\t\t\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !permissions.world.includes(\"r\") && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\tthrow new Error(\"Permission denied reading desktop icon\");\n\t\t\t\t\t}\n\t\t\t\t\tlet isDir = await modules.fs.isDirectory(iconPath, resolvedLogon.token);\n\t\t\t\t\tlet linkName = iconPath.split(\"/\").slice(-1)[0];\n\t\t\t\t\tlet appLink = { path: modules.defaultSystem + \"/apps/explorer.js\", args: [ iconPath ], name: linkName, placed: lastIconPlacement, icon: modules.defaultSystem + \"/etc/icons/fileicon.pic\" };\n\t\t\t\t\tif (!isDir) {\n\t\t\t\t\t\tif (linkName.endsWith(\".lnk\")) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tappLink = { placed: lastIconPlacement, icon: modules.defaultSystem + \"/etc/icons/lnk.pic\", ...(JSON.parse(await modules.fs.read(iconPath, resolvedLogon.token))) };\n\t\t\t\t\t\t\t\tappLink._isRealLink = true;\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet ext = linkName.split(\".\").slice(-1)[0];\n\t\t\t\t\t\t\tlet assocsPermissions = await modules.fs.permissions(modules.defaultSystem + \"/apps/associations\", resolvedLogon.token);\n\t\t\t\t\t\t\tif (assocsPermissions.owner != userInfo.user && !userInfo.groups.includes(assocsPermissions.group) && !(assocsPermissions.world.includes(\"r\") && assocsPermissions.world.includes(\"x\")) && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\t\t\tthrow new Error(\"Permission denied reading associations\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet associations = await modules.fs.ls(modules.defaultSystem + \"/apps/associations\", resolvedLogon.token);\n\t\t\t\t\t\t\tif (!associations.includes(ext)) appLink.disabled = true;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tlet associationPermissions = await modules.fs.permissions(modules.defaultSystem + \"/apps/associations/\" + ext, resolvedLogon.token);\n\t\t\t\t\t\t\t\tif (!associationPermissions.world.includes(\"r\") && !userInfo.groups.includes(associationPermissions.group) && associationPermissions.owner != userInfo.user && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\t\t\t\tthrow new Error(\"Permission denied reading association\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tappLink = { placed: lastIconPlacement, icon: appLink.icon, ...(JSON.parse(await modules.fs.read(modules.defaultSystem + \"/apps/associations/\" + ext, resolvedLogon.token))) };\n\t\t\t\t\t\t\t\tappLink.args = [ ...(appLink.args || []), iconPath ];\n\t\t\t\t\t\t\t\tappLink.name = linkName;\n\t\t\t\t\t\t\t\tdelete appLink.localeDatabaseName;\n\t\t\t\t\t\t\t\tdelete appLink.localeReferenceName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (appLink.disabled) continue;\n\t\t\t\t\tif (isDir) appLink.icon = modules.defaultSystem + \"/etc/icons/foldericon.pic\";\n\t\t\t\t\tlet iconWindow = modules.window(session, false, true, async function(newx, newy) {\n\t\t\t\t\t\tif (appLink._isRealLink) {\n\t\t\t\t\t\t\tappLink.placed = [ newx, newy ];\n\t\t\t\t\t\t\tdelete appLink._isRealLink;\n\t\t\t\t\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !permissions.world.includes(\"w\") && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\t\t\tthrow new Error(\"Permission denied writing desktop icon\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tawait modules.fs.write(iconPath, JSON.stringify(appLink), resolvedLogon.token);\n\t\t\t\t\t\t\tappLink._isRealLink = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\ticonWindow.title.innerText = (appLink.localeReferenceName ? modules.locales.get(appLink.localeReferenceName, locale) : null) || (appLink.localeDatabaseName ? (appLink.localeDatabaseName[locale] || appLink.localeDatabaseName[modules.locales.defaultLocale] || appLink.localeDatabaseName[navigator.language.slice(0, 2).toLowerCase()]) : null) || appLink.name;\n\t\t\t\t\tlet iconEl = document.createElement(\"img\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet permissions = await modules.fs.permissions(appLink.icon, resolvedLogon.token);\n\t\t\t\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !permissions.world.includes(\"r\") && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\t\tthrow new Error(\"Permission denied reading desktop icon picture\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticonEl.src = await modules.fs.read(appLink.icon, resolvedLogon.token);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\"Failed to read desktop icon picture:\", e);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ticonEl.style = \"width: 100%; height: 100%; position: absolute;\";\n\t\t\t\t\ticonWindow.content.appendChild(iconEl);\n\t\t\t\t\ticonWindow.windowDiv.style.top = appLink.placed[1] + \"px\";\n\t\t\t\t\ticonWindow.windowDiv.style.left = appLink.placed[0] + \"px\";\n\t\t\t\t\ticonEl.addEventListener(\"click\", async function() {\n\t\t\t\t\t\tlet forkedToken;\n\t\t\t\t\t\tif (appLink.automaticLogon) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet logon = await modules.users.access(appLink.automaticLogon.username, resolvedLogon.token);\n\t\t\t\t\t\t\t\tlogon = await logon.getNextPrompt();\n\t\t\t\t\t\t\t\tfor (let response of appLink.automaticLogon.responses)\n\t\t\t\t\t\t\t\t\tif (logon.success == \"intermediate\") logon = await logon.input(response);\n\t\t\t\t\t\t\t\tif (!logon.success) throw new Error(logon.message);\n\t\t\t\t\t\t\t\tforkedToken = logon.token;\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!forkedToken) forkedToken = await modules.tokens.fork(resolvedLogon.token);\n\t\t\t\t\t\tlet appWindow = modules.window(session);\n\t\t\t\t\t\tawait modules.tasks.exec(appLink.path, [ ...(appLink.args || []) ], appWindow, forkedToken);\n\t\t\t\t\t});\n\t\t\t\t\tlastIconPlacement = appLink.placed;\n\t\t\t\t\tlastIconPlacement[1] += 136;\n\t\t\t\t\tif (lastIconPlacement[1] > (dom.clientHeight - 136)) {\n\t\t\t\t\t\tlastIconPlacement[0] += 136;\n\t\t\t\t\t\tlastIconPlacement[1] = 72;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to read desktop icon:\", e);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet startMenuChannel = modules.ipc.create();\n\t\t\tmodules.ipc.declareAccess(startMenuChannel, {\n\t\t\t\towner: userInfo.user,\n\t\t\t\tgroup: userInfo.groups[0],\n\t\t\t\tworld: false\n\t\t\t});\n\t\t\tlet taskbar = document.createElement(\"div\");\n\t\t\tlet clock = document.createElement(\"span\");\n\t\t\tlet startButton = document.createElement(\"button\");\n\t\t\tlet startMenu = modules.window(session);\n\t\t\tlet forkedStartMenuToken = await modules.tokens.fork(resolvedLogon.token);\n\n\t\t\tfunction startMenuStub() {\n\t\t\t\tif (startMenu.windowDiv.parentElement == null) startMenu = modules.window(session);\n\t\t\t\tstartMenu.windowDiv.classList.toggle(\"hidden\", true);\n\t\t\t\tstartMenu.title.innerText = modules.locales.get(\"START_MENU\", locale);\n\t\t\t\tstartMenu.content.style.padding = \"8px\";\n\t\t\t\tstartMenu.content.innerText = \"\";\n\t\t\t\tlet description = document.createElement(\"span\");\n\t\t\t\tlet logout = document.createElement(\"button\");\n\t\t\t\tdescription.innerText = modules.locales.get(\"START_MENU_FAILED\", locale);\n\t\t\t\tlogout.innerText = modules.locales.get(\"LOG_OUT_BUTTON\", locale).replace(\"%s\", userInfo.user);\n\t\t\t\tlogout.onclick = _ => modules.logOut(userInfo.user);\n\t\t\t\tstartMenu.content.appendChild(description);\n\t\t\t\tstartMenu.content.appendChild(document.createElement(\"br\"));\n\t\t\t\tstartMenu.content.appendChild(logout);\n\t\t\t\tstartMenu.closeButton.onclick = () => startMenu.windowDiv.classList.toggle(\"hidden\", true);\n\t\t\t\tstartButton.onclick = _ => startMenu.windowDiv.classList.toggle(\"hidden\");\n\t\t\t}\n\n\t\t\tstartMenuStub();\n\t\t\tstartButton.innerText = modules.locales.get(\"START_MENU_BTN\", locale);\n\t\t\tstartButton.style = \"padding: 4px;\";\n\t\t\ttry {\n\t\t\t\tawait modules.tasks.exec(modules.defaultSystem + \"/apps/startMenu.js\", [], startMenu, forkedStartMenuToken, true, startMenuChannel);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to start start menu:\", e);\n\t\t\t\tstartMenuStub();\n\t\t\t}\n\n\t\t\t(async function() {\n\t\t\t\twhile (true) {\n\t\t\t\t\tlet listen = await modules.ipc.listenFor(startMenuChannel);\n\t\t\t\t\tif (listen.run) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet forkedToken;\n\t\t\t\t\t\t\tif (listen.run.automaticLogon) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tlet logon = await modules.users.access(listen.run.automaticLogon.username, resolvedLogon.token);\n\t\t\t\t\t\t\t\t\tlogon = await logon.getNextPrompt();\n\t\t\t\t\t\t\t\t\tfor (let response of listen.run.automaticLogon.responses)\n\t\t\t\t\t\t\t\t\t\tif (logon.success == \"intermediate\") logon = await logon.input(response);\n\t\t\t\t\t\t\t\t\tif (!logon.success) throw new Error(logon.message);\n\t\t\t\t\t\t\t\t\tforkedToken = logon.token;\n\t\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!forkedToken) forkedToken = await modules.tokens.fork(resolvedLogon.token);\n\t\t\t\t\t\t\tlet appWindow = modules.window(session);\n\t\t\t\t\t\t\tawait modules.tasks.exec(listen.run.path, [ ...(listen.run.args || []) ], appWindow, forkedToken);\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t} else if (listen.success) {\n\t\t\t\t\t\tstartButton.onclick = () => modules.ipc.send(startMenuChannel, { open: true });\n\t\t\t\t\t} else if (listen.dying) {\n\t\t\t\t\t\tstartMenu = modules.window(session);\n\t\t\t\t\t\tstartMenuStub();\n\t\t\t\t\t\tforkedStartMenuToken = await modules.tokens.fork(resolvedLogon.token);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait modules.tasks.exec(modules.defaultSystem + \"/apps/startMenu.js\", [], startMenu, forkedStartMenuToken, true, startMenuChannel);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(\"Failed to start start menu:\", e);\n\t\t\t\t\t\t\tstartMenuStub();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})();\n\n\t\t\ttaskbar.className = \"taskbar\";\n\t\t\tclock.className = \"clock\";\n\t\t\tlet filler = document.createElement(\"div\");\n\t\t\tfiller.className = \"filler\";\n\t\t\tlet battery = document.createElement(\"div\");\n\t\t\tlet networkIcon = document.createElement(\"div\");\n\t\t\tlet pcosNetworkIcon = document.createElement(\"div\");\n\t\t\tlet iconCache = {};\n\t\t\tfor (let iconFile of [\"network_\", \"network_offline_\", \"pcos_network_\", \"pcos_network_offline_\", \"readyToPlay_\", \"batteryChargeFinished_\", \"dying_\", \"charging_\"]) {\n\t\t\t\ttry {\n\t\t\t\t\tlet permissions = await modules.fs.permissions(modules.defaultSystem + \"/etc/icons/\" + iconFile + \"icon.pic\", resolvedLogon.token);\n\t\t\t\t\tif (permissions.owner != userInfo.user && !userInfo.groups.includes(permissions.group) && !permissions.world.includes(\"r\") && !userInfo.privileges.includes(\"FS_BYPASS_PERMISSIONS\")) {\n\t\t\t\t\t\tthrow new Error(\"Permission denied reading taskbar icon picture\");\n\t\t\t\t\t}\n\t\t\t\t\ticonCache[iconFile] = await modules.fs.read(modules.defaultSystem + \"/etc/icons/\" + iconFile + \"icon.pic\", resolvedLogon.token);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Failed to read taskbar icon picture:\", e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet toggle = false;\n\t\t\tclock.addEventListener(\"click\", _ => toggle = !toggle);\n\t\t\tliu[liuUser].clockInterval = setInterval(async function() {\n\t\t\t\tclock.innerText = Intl.DateTimeFormat(locale, { timeStyle: toggle ? undefined : \"medium\" }).format()\n\t\t\t\tnetworkIcon.style.backgroundImage = \"url(\" + JSON.stringify(navigator.onLine ? iconCache.network_ : iconCache.network_offline_) + \")\";\n\t\t\t\tnetworkIcon.title = modules.locales.get(\"NETWORK_STATUS_\" + (navigator.onLine ? \"ONLINE\" : \"OFFLINE\"), locale)\n\t\t\t\tpcosNetworkIcon.style.backgroundImage = \"url(\" + JSON.stringify(modules.network.connected ? iconCache.pcos_network_ : iconCache.pcos_network_offline_) + \")\";\n\t\t\t\tpcosNetworkIcon.title = modules.locales.get(\"PCOS_NETWORK_STATUS_\" + (modules.network.connected ? \"ONLINE\" : \"OFFLINE\"), locale).replace(\"%s\", userInfo.privileges.includes(\"GET_HOSTNAME\") ? (modules.network.hostname || modules.locales.get(\"UNKNOWN_PLACEHOLDER\", locale)) : modules.locales.get(\"UNKNOWN_PLACEHOLDER\", locale)).replace(\"%s\", userInfo.privileges.includes(\"GET_NETWORK_ADDRESS\") ? (modules.network.address || \"0\").match(/.{1,4}/g).join(\":\") : modules.locales.get(\"UNKNOWN_PLACEHOLDER\", locale));\n\t\t\t\tif (modules.network.serviceStopped) pcosNetworkIcon.title = modules.locales.get(\"PCOS_NETWORK_STATUS_STOPPED\", locale);\n\t\t\t\tlet batteryStatus = {charging: true, chargingTime: 0, dischargingTime: 0, level: 1};\n\t\t\t\tlet batteryStatusIcon = iconCache.readyToPlay_;\n\t\t\t\tlet batteryStatusDescription = modules.locales.get(\"BATTERY_STATUS_UNAVAILABLE\", locale);\n\t\t\t\tif (navigator.getBattery && userInfo.privileges.includes(\"GET_BATTERY_STATUS\")) {\n\t\t\t\t\tbatteryStatus = await navigator.getBattery();\n\t\t\t\t\tbatteryStatusDescription = modules.locales.get(\"BATTERY_STATUS_\" + (batteryStatus.charging ? \"CHARGING\" : \"DISCHARGING\"), locale)\n\t\t\t\t\t\t.replace(\"%s\", (batteryStatus.level * 100).toFixed(2))\n\t\t\t\t\t\t.replace(\"%s\", modules.userfriendliness.inconsiderateTime(\n\t\t\t\t\t\t\t(batteryStatus.charging ? batteryStatus.chargingTime : batteryStatus.dischargingTime) * 1000\n\t\t\t\t\t\t));\n\t\t\t\t\tif (batteryStatus.level < 0.2) batteryStatusIcon = iconCache.dying_;\n\t\t\t\t\tif (batteryStatus.charging) batteryStatusIcon = batteryStatus.level == 1 ? iconCache.batteryChargeFinished_ : iconCache.charging_;\n\t\t\t\t}\n\t\t\t\tbattery.style.backgroundImage = \"url(\" + JSON.stringify(batteryStatusIcon) + \")\";\n\t\t\t\tbattery.title = batteryStatusDescription;\n\t\t\t}, 500);\n\t\t\t\n\t\t\tbattery.className = \"icon\";\n\t\t\tnetworkIcon.className = \"icon\";\n\t\t\tpcosNetworkIcon.className = \"icon\";\n\t\t\ttaskbar.appendChild(startButton);\n\t\t\ttaskbar.appendChild(filler);\n\t\t\ttaskbar.appendChild(battery);\n\t\t\ttaskbar.appendChild(networkIcon);\n\t\t\ttaskbar.appendChild(pcosNetworkIcon);\n\t\t\ttaskbar.appendChild(clock);\n\t\t\tdom.appendChild(taskbar);\n\t\t}\n\t}\n\twhile (!modules.shuttingDown) {\n\t\tlet useDefaultUser = await modules.fs.permissions(modules.defaultSystem + \"/etc/security/automaticLogon\");\n\t\tuseDefaultUser = !useDefaultUser.world.includes(\"w\");\n\t\tlet defaultUser;\n\t\ttry {\n\t\t\tif (useDefaultUser) defaultUser = await modules.fs.read(modules.defaultSystem + \"/etc/security/automaticLogon\");\n\t\t} catch {}\n\t\tlet sysDom = modules.session.tracker[modules.session.systemSession].html;\n\t\tlet lockWallpaper = \"\";\n\t\tlet lockIsDark = false;\n\t\ttry {\n\t\t\tlockWallpaper = await modules.fs.read(modules.defaultSystem + \"/etc/wallpapers/lockscreen.pic\");\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to read lockscreen.pic:\", e);\n\t\t}\n\t\ttry {\n\t\t\tlockIsDark = (await modules.fs.read(modules.defaultSystem + \"/etc/darkLockScreen\")) == \"true\";\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to read darkLockScreen:\", e);\n\t\t}\n\t\tif (modules.core.bootMode == \"safe\") {\n\t\t\tlockIsDark = true;\n\t\t\tlockWallpaper = \"\";\n\t\t\tif (!insertedLockMessage) {\n\t\t\t\tinsertedLockMessage = true;\n\t\t\t\tlet message = document.createElement(\"span\");\n\t\t\t\tmessage.innerText = modules.locales.get(\"SAFE_MODE_MSG\");\n\t\t\t\tmessage.style = \"position: absolute; right: 8px; bottom: 8px; color: white;\";\n\t\t\t\tsysDom.appendChild(message);\n\t\t\t\tlet message2 = document.createElement(\"span\");\n\t\t\t\tmessage2.innerText = modules.locales.get(\"SAFE_MODE_MSG\");\n\t\t\t\tmessage2.style = \"position: absolute; top: 8px; left: 8px; color: white;\";\n\t\t\t\tsysDom.appendChild(message2);\n\t\t\t}\n\t\t}\n\t\tif (modules.core.bootMode == \"disable-harden\" && !insertedLockMessage) {\n\t\t\tinsertedLockMessage = true;\n\t\t\tlet message = document.createElement(\"span\");\n\t\t\tmessage.innerText = modules.locales.get(\"INSECURE_MODE_MSG\");\n\t\t\tmessage.style = \"position: absolute; right: 8px; bottom: 8px; color: white;\";\n\t\t\tsysDom.appendChild(message);\n\t\t\tlet message2 = document.createElement(\"span\");\n\t\t\tmessage2.innerText = modules.locales.get(\"INSECURE_MODE_MSG\");\n\t\t\tmessage2.style = \"position: absolute; top: 8px; left: 8px; color: white;\";\n\t\t\tsysDom.appendChild(message2);\n\t\t}\n\t\tsysDom.style.background = \"url(\" + JSON.stringify(lockWallpaper) + \")\";\n\t\tif (modules.core.bootMode == \"safe\") sysDom.style.background = \"black\";\n\t\tsysDom.style.backgroundSize = \"100% 100%\";\n\t\tmodules.session.attrib(modules.session.systemSession, \"dark\", lockIsDark);\n\t\tlet logon, resolvedLogon;\n\t\twhile (!modules.shuttingDown) {\n\t\t\tlogon = await modules.authui(modules.session.systemSession, defaultUser, undefined, true);\n\t\t\tresolvedLogon = await waitForLogon(logon);\n\t\t\tif (resolvedLogon.success) break;\n\t\t}\n\t\tif (!resolvedLogon.success) break;\n\t\thandleLogin(resolvedLogon, liu);\n\t\tif (useDefaultUser && defaultUser) {\n\t\t\tlet newWindow = modules.window(modules.session.systemSession);\n\t\t\tnewWindow.title.innerText = modules.locales.get(\"LOG_IN_INVITATION\");\n\t\t\tlet button = document.createElement(\"button\");\n\t\t\tbutton.innerText = modules.locales.get(\"LOG_IN_INVITATION\");\n\t\t\tnewWindow.content.appendChild(button);\n\t\t\tnewWindow.closeButton.classList.toggle(\"hidden\", true);\n\t\t\tawait hookButtonClick(button);\n\t\t\tnewWindow.windowDiv.remove();\n\t\t}\n\t}\n}\n\nasync function serviceLogon() {\n\tlet session = modules.session.mksession();\n\tmodules.session.attrib(session, \"dark\", true);\n\tlet dom = modules.session.tracker[session].html;\n\tdom.style.backgroundColor = \"black\";\n\tlet message = document.createElement(\"span\");\n\tmessage.innerText = \"Service Desktop\";\n\tmessage.style = \"position: absolute; right: 8px; bottom: 8px; color: white;\";\n\tdom.appendChild(message);\n\tlet startButton = document.createElement(\"button\");\n\tstartButton.innerText = modules.locales.get(\"START_MENU_BTN\");\n\tstartButton.style = \"padding: 4px;\";\n\tstartButton.onclick = async function() {\n\t\tlet startMenu = modules.window(session);\n\t\tstartMenu.title.innerText = modules.locales.get(\"START_MENU\");\n\t\tstartMenu.content.style.padding = \"8px\";\n\t\tstartMenu.closeButton.onclick = () => startMenu.windowDiv.remove();\n\t\tlet lockButton = document.createElement(\"button\");\n\t\tlockButton.innerText = modules.locales.get(\"LOCK_BUTTON\");\n\t\tstartMenu.content.appendChild(lockButton);\n\t\tlockButton.onclick = async function() {\n\t\t\tstartMenu.windowDiv.remove();\n\t\t\tawait modules.session.muteAllSessions();\n\t\t\tawait modules.session.activateSession(modules.session.systemSession);\n\t\t}\n\t}\n\tlet taskbar = document.createElement(\"div\");\n\ttaskbar.className = \"taskbar\";\n\n\ttaskbar.appendChild(startButton);\n\tdom.appendChild(taskbar);\n\tmodules.serviceSession = session;\n\tif (modules.core.bootMode != \"safe\") {\n\t\tlet serviceList = [];\n\t\ttry {\n\t\t\tserviceList = await modules.fs.ls(modules.defaultSystem + \"/apps/services\");\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to list services:\", e);\n\t\t}\n\t\tfor (let service of serviceList) {\n\t\t\tlet serviceConfig;\n\t\t\tlet triggerPasswordReset = false;\n\t\t\ttry {\n\t\t\t\tlet permissions = await modules.fs.permissions(modules.defaultSystem + \"/apps/services/\" + service);\n\t\t\t\tif (permissions.world.includes(\"r\")) triggerPasswordReset = true;\n\t\t\t} catch {}\n\t\t\ttry {\n\t\t\t\tserviceConfig = await modules.fs.read(modules.defaultSystem + \"/apps/services/\" + service);\n\t\t\t\tserviceConfig = JSON.parse(serviceConfig);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to read service config of\", service, \":\", e);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (serviceConfig.disabled) continue;p\n\t\t\tlet serviceName = (serviceConfig.localeReferenceName ? modules.locales.get(serviceConfig.localeReferenceName) : null) || (serviceConfig.localeDatabaseName ? (serviceConfig.localeDatabaseName[navigator.language.slice(0, 2).toLowerCase()] || serviceConfig.localeDatabaseName[modules.locales.defaultLocale]) : null) || serviceConfig.name;\n\t\t\tif (!serviceConfig.automaticLogon) {\n\t\t\t\tconsole.error(\"Service\", serviceName, \"(\", service, \") does not have logon credentials set\");\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet forkedToken;\n\t\t\ttry {\n\t\t\t\tlet logon = await modules.users.access(serviceConfig.automaticLogon.username);\n\t\t\t\tlogon = await logon.getNextPrompt();\n\t\t\t\tfor (let response of serviceConfig.automaticLogon.responses)\n\t\t\t\t\tif (logon.success == \"intermediate\") logon = await logon.input(response);\n\t\t\t\tif (!logon.success) throw new Error(logon.message);\n\t\t\t\tforkedToken = logon.token;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to create a logon session for\", serviceName, \"(\", service, \"):\", e);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (triggerPasswordReset) {\n\t\t\t\tlet ownUser = await modules.tokens.info(forkedToken);\n\t\t\t\tlet ownUserInfo = await modules.users.getUserInfo(ownUser.user, true, forkedToken);\n\t\t\t\townUserInfo.securityChecks = [];\n\t\t\t\tawait modules.users.moduser(ownUser.user, ownUserInfo, forkedToken);\n\t\t\t\tawait modules.tokens.revoke(forkedToken);\n\t\t\t\tconsole.error(\"Exposed credentials for\", serviceName, \"(\", service, \") have been made invalid\");\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait modules.tasks.exec(serviceConfig.path, [ ...(serviceConfig.args || []) ], modules.window(session), forkedToken, true);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to start service\", serviceName, \"(\", service, \"):\", e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction waitForLogon(toHook) {\n\treturn new Promise(function(resolve) {\n\t\ttoHook.hook(resolve);\n\t});\n}\n\nasync function hookButtonClick(button) {\n\treturn new Promise(function(resolve) {\n\t\tbutton.onclick = (e) => resolve(e);\n\t});\n}","8e3c5a5d5bc5e543079c065532a48516ce8b4c48b8999547204e07bcf9b0fa810ceb9ef1980a8b3d478062abce468a057c2a3fd14c3773a42336524be7ffdaac":"requireLogon();","9c29176a7d43717910bf3b996e828aaae440cb15cd436a4dff4c86dc925b192ad7ab6c980ef56924abedb2208ae84aca2d111d97fe40742a5d9bb74eb9c740c6":"function systemKillWaiter() {\n\t// @pcos-app-mode native\n\tmodules.startupWindow.windowDiv.remove();\n\treturn new Promise(function(resolve) {\n\t\tmodules.killSystem = resolve;\n\t});\n}\nreturn await systemKillWaiter();"},"buildInfo":{"for":"1390","version":1390,"when":1755547941339,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"a7d0abcad2160d07668a9fbd2ab25eefb579c789fbca042724be4c8604dfecba2a13cf6fcdc10b75341cbf074b99b08bbb05f239c1df6881a656066137f87f05"}},"50-core.fs":{"backend":{"files":{"apps":{"associations":{"txt":"03de218d8875a62e4b148613e8bf97e458a084e89cc654945a252d16b2c608e911b18d21ea51e9750942d11589156fff3f2a76725635beb30b6ab7ba5b2c9f89"},"authui.js":"48f4ea4574f4d80424a9f7f41dabd40e80ad49f31070f2e12eb9018ef4394b0ceff30fd71fd721ca061f3163609edefa1121f97f60f36e15849040097306e479","consentui.js":"d46920ddc37cc89260f7e8b42d9ee395d85894d6f6e44de0fc5a6744c2a2199d21b8a37005499376b3fdbf3f6ce5361835b440090a26d32e8d3b1d16e472a9ad","explorer.js":"2e2c35ec24e16bdd8325f68ae542bd1edb3844bbf22291d3e19bc5970a9c6e9887fff098c7e333c2c8da8f4bcd868ce9a51eb13c0425b515715f9239af5a6a3e","filePicker.js":"0b4521c522a417df7199c3ac832b60fa7343c201a8df2d56a6c26536af0d5afa85862000d4c4640cb0990b115560d21e58c0b48130bae3c9081a33069f264837","links":{"explorer.lnk":"0157fc8bc44476e1acba4fc4f9f3a662076799486607a50676e5226baaa1d23614f47136f44b82e90c2618aabd68ad87ecc9ddafc56ca67c0420492aa5c52a7e","textEditor.lnk":"d1d5e0d68246a86903249f5f671d1b6382c166d052e82979202905d122391f04164b95f30d85b36f506e86957e9816af5fe4d20c76ca752af4486dee8b37df54"},"startMenu.js":"93f8ec4cb47c49917d461ada89791654221b16051ea96fe5d9639934e409b97185e23189c7d869f2b1a36f113a212b45c35c447d658b538ad31f35a43b6179af","textEditor.js":"5e9f95e7f76a97f666a7b055134a44250ec116c80040022d075f5687e157b39a4cfbaa48a4c42a8a9fcf69d459a96f75012ac3c84123136cd245be13dbc0f6fa"},"etc":{"tlds.json":"931ce13023c067a0412d8e31135c4f4f59975c2da8d47d8fc37adcd80408a4e3b59d6ce0f06e84776be5c008325b74b67588d6e0fe950cb3baa0bb8133df0098"}},"permissions":{"apps/associations/txt":{"world":"rx"},"apps/associations/":{"world":"rx"},"apps/authui.js":{"world":"rx"},"apps/consentui.js":{"world":"rx"},"apps/explorer.js":{"world":"rx"},"apps/filePicker.js":{"world":"rx"},"apps/links/explorer.lnk":{"world":"rx"},"apps/links/textEditor.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/startMenu.js":{"world":"rx"},"apps/textEditor.js":{"world":"rx"},"apps/":{"world":"rx"},"etc/tlds.json":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"03de218d8875a62e4b148613e8bf97e458a084e89cc654945a252d16b2c608e911b18d21ea51e9750942d11589156fff3f2a76725635beb30b6ab7ba5b2c9f89":"{\"path\":\"system/apps/textEditor.js\",\"localeReferenceName\":\"TEXT_EDITOR\",\"icon\":\"system/etc/icons/txt.pic\"}","48f4ea4574f4d80424a9f7f41dabd40e80ad49f31070f2e12eb9018ef4394b0ceff30fd71fd721ca061f3163609edefa1121f97f60f36e15849040097306e479":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: IPC_SEND_PIPE, GET_LOCALE, GET_THEME, ELEVATE_PRIVILEGES, CSP_OPERATIONS\n// signature: 0019e2811eb72fd03404480d896f3e8460d63f6b63b92db572329449b74bd59f81fafe5a20629176f47ebd4a3db6bbb7b0dddfeeb86960066f8c9d8e61a10d01\n// =====END MANIFEST=====\n\nlet ipc;\n(async function() {\n\t// @pcos-app-mode isolatable\n\texec_args = await availableAPIs.getPrivateData() || [];\n\tif (!(exec_args instanceof Array)) return availableAPIs.terminate();\n\tipc = exec_args[0];\n\tif (!ipc) return availableAPIs.terminate();\n\tlet user = exec_args[1];\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"LOG_IN_INVITATION\"));\n\tlet checklist = [ \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"GET_THEME\", \"ELEVATE_PRIVILEGES\", \"CSP_OPERATIONS\" ];\n\tlet privileges = await availableAPIs.getPrivileges();\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tif (privileges.includes(\"IPC_SEND_PIPE\")) await availableAPIs.sendToPipe({ pipe: ipc, data: { success: false, cancelled: false } });\n\t\treturn availableAPIs.terminate();\n\t}\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet describe = document.createElement(\"b\");\n\tlet form = document.createElement(\"form\");\n\tlet input = document.createElement(\"input\");\n\tlet submit = document.createElement(\"button\");\n\tdocument.body.appendChild(describe);\n\tdocument.body.appendChild(document.createElement(\"br\"));\n\tdocument.body.appendChild(form);\n\tform.appendChild(input);\n\tform.appendChild(submit);\n\tsubmit.innerText = await availableAPIs.lookupLocale(\"ENTER_BUTTON\");\n\tdescribe.innerText = await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\tasync function userSubmit(e) {\n\t\te.stopImmediatePropagation();\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tlet userLogonSession;\n\t\tlet userLogonID;\n\t\tlet desired_username = input.value;\n\t\ttry {\n\t\t\tuserLogonID = await availableAPIs.automatedLogonCreate({ desiredUser: desired_username });\n\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t} catch {\n\t\t\tdescribe.innerText = await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \" \" + await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\t\tinput.type = \"text\";\n\t\t\tinput.disabled = !!user;\n\t\t\tsubmit.disabled = false;\n\t\t\tinput.value = user || \"\";\n\t\t\tsubmit.addEventListener(\"click\", userSubmit);\n\t\t\treturn;\n\t\t}\n\t\tasync function updateProgress() {\n\t\t\tsubmit.removeEventListener(\"click\", userSubmit);\n\t\t\tinput.value = \"\";\n\t\t\tsubmit.innerText = await availableAPIs.lookupLocale(\"ENTER_BUTTON\");\n\t\t\tif (userLogonSession.success != \"intermediate\") await availableAPIs.automatedLogonDelete(userLogonID);\n\t\t\tif (userLogonSession.success == true) {\n\t\t\t\tawait availableAPIs.sendToPipe({ pipe: ipc, data: userLogonSession });\n\t\t\t\tawait availableAPIs.terminate();\n\t\t\t}\n\t\t\tif (userLogonSession.success == false) {\n\t\t\t\tdescribe.innerText = await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \" \" + await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\t\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\t\t\tinput.type = \"text\";\n\t\t\t\tinput.disabled = !!user;\n\t\t\t\tsubmit.disabled = false;\n\t\t\t\tinput.value = user || \"\";\n\t\t\t\tsubmit.addEventListener(\"click\", userSubmit);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdescribe.innerText = \"[\" + desired_username + \"] \" + userLogonSession.message;\n\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"RESPONSE_PLACEHOLDER\");\n\t\t\tinput.type = userLogonSession.type == \"password\" ? \"password\" : \"text\";\n\t\t\tinput.disabled = !userLogonSession.wantsUserInput;\n\t\t\tsubmit.disabled = !userLogonSession.wantsUserInput;\n\t\t\tif (userLogonSession.type == \"zkpp_password\") input.type = \"password\";\n\t\t\tif (userLogonSession.type == \"promise\") {\n\t\t\t\ttry {\n\t\t\t\t\tinput.disabled = true;\n\t\t\t\t\tsubmit.disabled = true;\n\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: userLogonID });\n\t\t\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t\t\t} catch {}\n\t\t\t\treturn await updateProgress();\n\t\t\t}\n\t\t\tif (userLogonSession.type == \"informative\") {\n\t\t\t\tinput.disabled = true;\n\t\t\t\tsubmit.disabled = false;\n\t\t\t\tsubmit.innerText = \"OK\";\n\t\t\t\tinput.placeholder = \"--->\";\n\t\t\t}\n\t\t\tsubmit.addEventListener(\"click\", async function updater(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tsubmit.removeEventListener(\"click\", updater);\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\ttry {\n\t\t\t\t\tinput.disabled = true;\n\t\t\t\t\tsubmit.disabled = true;\n\t\t\t\t\tif (userLogonSession.type == \"zkpp_password\") {\n\t\t\t\t\t\tlet passwordAsKey = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(input.value),\n\t\t\t\t\t\t\t\talgorithm: \"PBKDF2\",\n\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\"]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tlet rngSeed = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\tsalt: new Uint8Array(32),\n\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbaseKey: passwordAsKey,\n\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\tcspArgument: passwordAsKey\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: userLogonID, input: u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\toperation: \"sign\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tsecretKey: (await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\t\toperation: \"deriveKey\",\n\t\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\t\ttype: \"sign\",\n\t\t\t\t\t\t\t\t\t\tseed: new Uint8Array(rngSeed)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})).secretKey,\n\t\t\t\t\t\t\t\tmessage: hexToU8A(userLogonSession.challenge)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))});\n\t\t\t\t\t} else await availableAPIs.automatedLogonInput({ session: userLogonID, input: input.value });\n\t\t\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t\t\t} catch {}\n\t\t\t\treturn await updateProgress();\n\t\t\t});\n\t\t}\n\t\tawait updateProgress();\n\t\treturn false;\n\t}\n\tsubmit.addEventListener(\"click\", userSubmit);\n\tif (user) {\n\t\tinput.disabled = true;\n\t\tinput.value = user;\n\t\tuserSubmit({ preventDefault: () => {}, stopImmediatePropagation: () => {}, stopPropagation: () => {} });\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) {\n\t\ttry {\n\t\t\tawait availableAPIs.sendToPipe({ pipe: ipc, data: { success: false, cancelled: true } });\n\t\t} catch {}\n\t\tawait window.availableAPIs.terminate();\n\t}\n}); null;","d46920ddc37cc89260f7e8b42d9ee395d85894d6f6e44de0fc5a6744c2a2199d21b8a37005499376b3fdbf3f6ce5361835b440090a26d32e8d3b1d16e472a9ad":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: IPC_SEND_PIPE, GET_LOCALE, GET_THEME, ELEVATE_PRIVILEGES, FS_READ, FS_LIST_PARTITIONS, CSP_OPERATIONS\n// signature: 07f76df3f6f50d633db555c69c2a370f4b5acfa85be5835f625ff10564b1a79fd6ac56387a7f7a92621abac12d2386f6b524d3885bb1c7b41d9125073984e80f\n// =====END MANIFEST=====\n\nlet ipc;\n(async function() {\n\t// @pcos-app-mode isolatable\n\texec_args = await availableAPIs.getPrivateData() || [];\n\tif (!(exec_args instanceof Array)) return availableAPIs.terminate();\n\tipc = exec_args[0];\n\tif (!ipc) return availableAPIs.terminate();\n\tlet user = exec_args[1];\n\ttry {\n\t\tnew Audio(await availableAPIs.fs_read({ path: (await availableAPIs.getSystemMount()) + \"/etc/sounds/ask.aud\" })).play();\n\t} catch (e) {\n\t\tconsole.error(e);\n\t}\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"ACCESS_REQUEST_TITLE\"));\n\tlet checklist = [ \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"GET_THEME\", \"ELEVATE_PRIVILEGES\", \"CSP_OPERATIONS\" ];\n\tlet privileges = await availableAPIs.getPrivileges();\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tif (privileges.includes(\"IPC_SEND_PIPE\")) await availableAPIs.sendToPipe({ pipe: ipc, data: { success: false, cancelled: false } });\n\t\treturn availableAPIs.terminate();\n\t}\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet describe = document.createElement(\"span\");\n\tlet form = document.createElement(\"form\");\n\tlet input = document.createElement(\"input\");\n\tlet decline = document.createElement(\"button\");\n\tlet submit = document.createElement(\"button\");\n\tlet metadata = JSON.parse(exec_args[2]);\n\tdecline.type = \"button\";\n\tsubmit.type = \"submit\";\n\tdocument.body.appendChild(describe);\n\tdocument.body.appendChild(document.createElement(\"hr\"));\n\tdocument.body.appendChild(form);\n\tform.appendChild(input);\n\tform.appendChild(document.createElement(\"br\"));\n\tform.appendChild(decline);\n\tform.appendChild(submit);\n\tdescribe.innerText = (await availableAPIs.lookupLocale(\"DESCRIBE_TEMPLATE\")).replace(\"%s\", metadata.path.split(\"/\").pop()).replace(\"%s\", metadata.submittedName || metadata.path.split(\"/\").pop()).replace(\"%s\", metadata.submittedIntent);\n\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\tdecline.innerText = await availableAPIs.lookupLocale(\"DECLINE\");\n\tsubmit.innerText = await availableAPIs.lookupLocale(\"NEXT\");\n\n\tasync function extraData(e) {\n\t\te.stopImmediatePropagation();\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tdescribe.innerText = (await availableAPIs.lookupLocale(\"EXTRA_DESCRIBE_TEMPLATE\")).replace(\"%s\", metadata.path).replace(\"%s\", metadata.submittedName || metadata.path.split(\"/\").pop()).replace(\"%s\", JSON.stringify(metadata.args)).replace(\"%s\", metadata.submittedIntent);\n\t\tdescribe.removeEventListener(\"contextmenu\", extraData);\n\t}\n\n\tdescribe.addEventListener(\"contextmenu\", extraData);\n\n\tasync function userSubmit(e) {\n\t\tdescribe.removeEventListener(\"contextmenu\", extraData);\n\t\te.stopImmediatePropagation();\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tlet userLogonSession;\n\t\tlet userLogonID;\n\t\tlet desired_username = input.value;\n\t\ttry {\n\t\t\tuserLogonID = await availableAPIs.automatedLogonCreate({ desiredUser: desired_username });\n\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t} catch {\n\t\t\tdescribe.innerText = await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \" \" + await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\t\tinput.type = \"text\";\n\t\t\tinput.disabled = !!user;\n\t\t\tsubmit.disabled = false;\n\t\t\tinput.value = user || \"\";\n\t\t\tsubmit.addEventListener(\"click\", userSubmit);\n\t\t\treturn;\n\t\t}\n\t\tasync function updateProgress() {\n\t\t\tsubmit.removeEventListener(\"click\", userSubmit);\n\t\t\tinput.value = \"\";\n\t\t\tif (userLogonSession.success != \"intermediate\") await availableAPIs.automatedLogonDelete(userLogonID);\n\t\t\tif (userLogonSession.success == true) {\n\t\t\t\tawait availableAPIs.sendToPipe({ pipe: ipc, data: userLogonSession });\n\t\t\t\tawait availableAPIs.terminate();\n\t\t\t}\n\t\t\tif (userLogonSession.success == false) {\n\t\t\t\tdescribe.innerText = await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \" \" + await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\t\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\t\t\tinput.type = \"text\";\n\t\t\t\tinput.disabled = !!user;\n\t\t\t\tsubmit.disabled = false;\n\t\t\t\tinput.value = user || \"\";\n\t\t\t\tsubmit.addEventListener(\"click\", userSubmit);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdescribe.innerText = \"[\" + desired_username + \"] \" + userLogonSession.message;\n\t\t\tinput.placeholder = await availableAPIs.lookupLocale(\"RESPONSE_PLACEHOLDER\");\n\t\t\tinput.type = userLogonSession.type == \"password\" ? \"password\" : \"text\";\n\t\t\tinput.disabled = !userLogonSession.wantsUserInput;\n\t\t\tsubmit.disabled = !userLogonSession.wantsUserInput;\n\t\t\tif (userLogonSession.type == \"zkpp_password\") input.type = \"password\";\n\t\t\tif (userLogonSession.type == \"promise\") {\n\t\t\t\ttry {\n\t\t\t\t\tinput.disabled = true;\n\t\t\t\t\tsubmit.disabled = true;\n\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: userLogonID });\n\t\t\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t\t\t} catch {}\n\t\t\t\treturn await updateProgress();\n\t\t\t}\n\t\t\tif (userLogonSession.type == \"informative\") {\n\t\t\t\tinput.disabled = true;\n\t\t\t\tsubmit.disabled = false;\n\t\t\t\tinput.placeholder = \"\";\n\t\t\t}\n\t\t\tsubmit.addEventListener(\"click\", async function updater(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tsubmit.removeEventListener(\"click\", updater);\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\ttry {\n\t\t\t\t\tinput.disabled = true;\n\t\t\t\t\tsubmit.disabled = true;\n\t\t\t\t\tif (userLogonSession.type == \"zkpp_password\") {\n\t\t\t\t\t\tlet passwordAsKey = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(input.value),\n\t\t\t\t\t\t\t\talgorithm: \"PBKDF2\",\n\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\"]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tlet rngSeed = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\tsalt: new Uint8Array(32),\n\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbaseKey: passwordAsKey,\n\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\tcspArgument: passwordAsKey\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: userLogonID, input: u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\toperation: \"sign\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tsecretKey: (await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\t\toperation: \"deriveKey\",\n\t\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\t\ttype: \"sign\",\n\t\t\t\t\t\t\t\t\t\tseed: new Uint8Array(rngSeed)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})).secretKey,\n\t\t\t\t\t\t\t\tmessage: hexToU8A(userLogonSession.challenge)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))});\n\t\t\t\t\t} else await availableAPIs.automatedLogonInput({ session: userLogonID, input: input.value });\n\t\t\t\t\tuserLogonSession = await availableAPIs.automatedLogonGet(userLogonID);\n\t\t\t\t} catch {}\n\t\t\t\treturn await updateProgress();\n\t\t\t});\n\t\t}\n\t\tawait updateProgress();\n\t\treturn false;\n\t}\n\tsubmit.addEventListener(\"click\", userSubmit);\n\tdecline.addEventListener(\"click\", async function() {\n\t\tawait availableAPIs.sendToPipe({ pipe: ipc, data: { success: false, cancelled: true } });\n\t\tawait availableAPIs.terminate();\n\t});\n\tif (user) {\n\t\tinput.disabled = true;\n\t\tinput.value = user;\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) {\n\t\ttry {\n\t\t\tawait availableAPIs.sendToPipe({ pipe: ipc, data: { success: false, cancelled: true } });\n\t\t} catch {}\n\t\tawait window.availableAPIs.terminate();\n\t}\n}); null;","2e2c35ec24e16bdd8325f68ae542bd1edb3844bbf22291d3e19bc5970a9c6e9887fff098c7e333c2c8da8f4bcd868ce9a51eb13c0425b515715f9239af5a6a3e":"// =====BEGIN MANIFEST=====\n// link: lrn:FILE_EXPLORER\n// signer: automaticSigner\n// allow: FS_READ, FS_LIST_PARTITIONS, ELEVATE_PRIVILEGES, START_TASK, GET_LOCALE, GET_THEME, MANAGE_TOKENS, FS_REMOVE, FS_BYPASS_PERMISSIONS, FS_UNMOUNT, FS_CHANGE_PERMISSION, FS_MOUNT, GET_FILESYSTEMS, FS_WRITE, LLDISK_LIST_PARTITIONS, GET_USER_INFO\n// signature: 6a11581dc20ab1047843c21e73100c372dc082e75a7653325d7794322427eec9d8e4ab3e97726bc95626104e6e185c852352172c35c86d28a6c1f00c1aeb950a\n// =====END MANIFEST=====\nlet globalToken;\nlet cachedIcons = {};\nlet cachedAssocs = {};\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"FILE_EXPLORER\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"FS_READ\", \"FS_LIST_PARTITIONS\" ];\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"GRANT_FEXP_PERM\");\n\t\tlet button = document.createElement(\"button\");\n\t\tbutton.innerText = await availableAPIs.lookupLocale(\"GRANT_PERM\");\n\t\tdocument.body.appendChild(button);\n\t\tif (!privileges.includes(\"ELEVATE_PRIVILEGES\")) {\n\t\t\tbutton.disabled = true;\n\t\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"GRANT_FEXP_PERM_ADM\");\n\t\t\treturn;\n\t\t}\n\t\tawait new Promise(function(resolve) {\n\t\t\tbutton.onclick = async function() {\n\t\t\t\tbutton.disabled = true;\n\t\t\t\tlet currentToken = await availableAPIs.getProcessToken();\n\t\t\t\tlet newToken = await availableAPIs.consentGetToken({\n\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"FILE_EXPLORER_FULL_INTENT\"),\n\t\t\t\t\tname: await availableAPIs.lookupLocale(\"FILE_EXPLORER\")\n\t\t\t\t});\n\t\t\t\tbutton.disabled = false;\n\t\t\t\tif (!newToken) return;\n\t\t\t\tif (privileges.includes(\"MANAGE_TOKENS\")) globalToken = await availableAPIs.forkToken(newToken);\n\t\t\t\tawait availableAPIs.setProcessToken(newToken);\n\t\t\t\tawait availableAPIs.revokeToken(currentToken);\n\t\t\t\tprivileges = await availableAPIs.getPrivileges();\n\t\t\t\tif (checklist.every(p => privileges.includes(p))) resolve();\n\t\t\t\telse document.body.innerText = await availableAPIs.lookupLocale(\"GRANT_FEXP_PERM_USR\");\n\t\t\t}\n\t\t});\n\t}\n\tlet hideHiddenFiles = true;\n\ttry {\n\t\tlet homedir = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser() })).homeDirectory;\n\t\thideHiddenFiles = (await availableAPIs.fs_read({\n\t\t\tpath: homedir + \"/.hiddenFiles\",\n\t\t})) != \"show\";\n\t} catch {}\n\tdocument.body.innerText = \"\";\n\tlet mainComponent = document.createElement(\"div\");\n\tlet pathInputForm = document.createElement(\"form\");\n\tlet pathElement = document.createElement(\"input\");\n\tlet browseButton = document.createElement(\"button\");\n\tlet displayResult = document.createElement(\"div\");\n\tlet previousDirectory = \"\";\n\tlet clipboard = {\n\t\tpath: \"\",\n\t\tcut: false,\n\t\tselected: false\n\t};\n\tmainComponent.style.display = \"flex\";\n\tmainComponent.style.flexDirection = \"column\";\n\tmainComponent.style.width = \"100%\";\n\tmainComponent.style.height = \"100%\";\n\tmainComponent.style.position = \"absolute\";\n\tmainComponent.style.top = \"0\";\n\tmainComponent.style.left = \"0\";\n\tmainComponent.style.padding = \"8px\";\n\tmainComponent.style.boxSizing = \"border-box\";\n\tdisplayResult.style.flex = \"1\";\n\tbrowseButton.innerText = await availableAPIs.lookupLocale(\"BROWSE_FEXP\");\n\tpathInputForm.appendChild(pathElement);\n\tpathInputForm.appendChild(browseButton);\n\tmainComponent.appendChild(pathInputForm);\n\tmainComponent.appendChild(displayResult);\n\tdocument.body.appendChild(mainComponent);\n\tlet availableAssocs = [];\n\ttry {\n\t\tavailableAssocs = await availableAPIs.fs_ls({ path: await availableAPIs.getSystemMount() + \"/apps/associations\" });\n\t} catch {}\n\tdisplayResult.oncontextmenu = async function(e) {\n\t\te.stopImmediatePropagation();\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tdisplayResult.innerText = \"\";\n\t\tlet showHiddenFilesToggle = document.createElement(\"button\");\n\t\tshowHiddenFilesToggle.innerText = await availableAPIs.lookupLocale(\"TOGGLE_HIDDEN_FILES\");\n\t\tshowHiddenFilesToggle.addEventListener(\"click\", async function() {\n\t\t\thideHiddenFiles = !hideHiddenFiles;\n\t\t\ttry {\n\t\t\t\tlet homedir = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser() })).homeDirectory;\n\t\t\t\tavailableAPIs.fs_write({\n\t\t\t\t\tpath: homedir + \"/.hiddenFiles\",\n\t\t\t\t\tdata: (hideHiddenFiles ? \"hide\" : \"show\")\n\t\t\t\t});\n\t\t\t} catch {}\n\t\t\tbrowse();\n\t\t});\n\t\tdisplayResult.appendChild(showHiddenFilesToggle);\n\t\tdisplayResult.appendChild(document.createElement(\"hr\"));\n\t\tif (previousDirectory == \"\") {\n\t\t\tlet mountForm = document.createElement(\"form\");\n\t\t\tlet mountpoint = document.createElement(\"input\");\n\t\t\tlet filesystemOptions = document.createElement(\"select\");\n\t\t\tlet autoGenMountOptions = document.createElement(\"select\");\n\t\t\tlet mountOptions = document.createElement(\"textarea\");\n\t\t\tlet mountButton = document.createElement(\"button\");\n\t\t\tmountpoint.placeholder = await availableAPIs.lookupLocale(\"MOUNTPOINT\");\n\t\t\tlet availableFilesystems = await availableAPIs.supportedFilesystems();\n\t\t\tfor (let filesystem of availableFilesystems) {\n\t\t\t\tlet option = document.createElement(\"option\");\n\t\t\t\toption.value = filesystem;\n\t\t\t\toption.innerText = filesystem;\n\t\t\t\tfilesystemOptions.appendChild(option);\n\t\t\t}\n\t\t\tlet availablePartitions = [];\n\t\t\ttry {\n\t\t\t\tavailablePartitions = await availableAPIs.lldaList();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t\tlet defaultPartitionOption = document.createElement(\"option\");\n\t\t\tdefaultPartitionOption.value = \"\";\n\t\t\tdefaultPartitionOption.innerText = await availableAPIs.lookupLocale(\"GENERATE_PROMPT\");\n\t\t\tdefaultPartitionOption.selected = true;\n\t\t\tdefaultPartitionOption.disabled = true;\n\t\t\tdefaultPartitionOption.hidden = true;\n\t\t\tautoGenMountOptions.appendChild(defaultPartitionOption);\n\t\t\tfor (let partition of availablePartitions) {\n\t\t\t\tlet option = document.createElement(\"option\");\n\t\t\t\toption.value = partition;\n\t\t\t\toption.innerText = partition;\n\t\t\t\tautoGenMountOptions.appendChild(option);\n\t\t\t}\n\t\t\tautoGenMountOptions.onchange = function() {\n\t\t\t\tmountOptions.value = JSON.stringify({ partition: autoGenMountOptions.value });\n\t\t\t}\n\t\t\tmountOptions.value = \"{}\";\n\t\t\tmountButton.innerText = await availableAPIs.lookupLocale(\"MOUNT_BUTTON\");\n\t\t\tmountButton.onclick = async function() {\n\t\t\t\ttry {\n\t\t\t\t\tlet options = JSON.parse(mountOptions.value);\n\t\t\t\t\tawait availableAPIs.fs_mount({ mountpoint: mountpoint.value, filesystem: filesystemOptions.value, filesystemOptions: options });\n\t\t\t\t\tbrowse();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", e.name + \": \" + e.message);\n\t\t\t\t}\n\t\t\t}\n\t\t\tmountForm.appendChild(mountpoint);\n\t\t\tmountForm.appendChild(document.createElement(\"br\"));\n\t\t\tmountForm.appendChild(filesystemOptions);\n\t\t\tmountForm.appendChild(document.createElement(\"hr\"));\n\t\t\tmountForm.appendChild(autoGenMountOptions);\n\t\t\tmountForm.appendChild(document.createElement(\"br\"));\n\t\t\tmountForm.appendChild(mountOptions);\n\t\t\tmountForm.appendChild(document.createElement(\"hr\"));\n\t\t\tmountForm.appendChild(mountButton);\n\t\t\tdisplayResult.appendChild(mountForm);\n\t\t} else {\n\t\t\tlet makeDirectoryForm = document.createElement(\"form\");\n\t\t\tlet makeDirectoryInput = document.createElement(\"input\");\n\t\t\tlet makeDirectoryButton = document.createElement(\"button\");\n\t\t\tmakeDirectoryInput.pattern = \"[!-.0-~]+\";\n\t\t\tmakeDirectoryInput.placeholder = await availableAPIs.lookupLocale(\"NEW_DIR_NAME\");\n\t\t\tmakeDirectoryForm.appendChild(makeDirectoryInput);\n\t\t\tmakeDirectoryForm.appendChild(makeDirectoryButton);\n\t\t\tdisplayResult.appendChild(makeDirectoryForm);\n\t\t\tmakeDirectoryButton.innerText = await availableAPIs.lookupLocale(\"MKDIR_BUTTON\");\n\t\t\tmakeDirectoryButton.onclick = async function() {\n\t\t\t\tlet dirName = makeDirectoryInput.value;\n\t\t\t\tif (dirName == \"\") return;\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: previousDirectory + \"/\" + dirName });\n\t\t\t\t\tbrowse();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (clipboard.selected) {\n\t\t\t\tdisplayResult.appendChild(document.createElement(\"hr\"));\n\t\t\t\tlet pasteButton = document.createElement(\"button\");\n\t\t\t\tpasteButton.innerText = await availableAPIs.lookupLocale(\"CLIPBOARD_PASTE\");\n\t\t\t\tpasteButton.onclick = async function() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet copyAllowed = await isDirectory(clipboard.path) == \"file\";\n\t\t\t\t\t\tif (!copyAllowed) throw new Error(await availableAPIs.lookupLocale(\"CLIPBOARD_SOURCE_GONE\"));\n\t\t\t\t\t\tlet readFile = await availableAPIs.fs_read({ path: clipboard.path });\n\t\t\t\t\t\tlet basename = clipboard.path.split(\"/\").slice(-1)[0];\n\t\t\t\t\t\tcopyAllowed = await isDirectory(previousDirectory + \"/\" + basename) == \"unknown\";\n\t\t\t\t\t\tif (!copyAllowed) throw new Error(await availableAPIs.lookupLocale(\"CLIPBOARD_CONFLICT\"));\n\t\t\t\t\t\tawait availableAPIs.fs_write({ path: previousDirectory + \"/\" + basename, data: readFile });\n\t\t\t\t\t\tif (clipboard.cut) await availableAPIs.fs_rm({ path: clipboard.path });\n\t\t\t\t\t\tbrowse();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdisplayResult.appendChild(pasteButton);\n\t\t\t}\n\t\t}\n\t}\n\tasync function browse() {\n\t\tlet path = pathElement.value;\n\t\tif (path.endsWith(\"/\")) path = path.substring(0, path.length - 1);\n\t\tdisplayResult.innerText = \"\";\n\t\tif (path == \"\") {\n\t\t\tlet partitions = (await availableAPIs.fs_mounts()).sort((a, b) => a.localeCompare(b));\n\t\t\tfor (let partition of partitions) {\n\t\t\t\tif (partition.startsWith(\".\") && hideHiddenFiles) continue;\n\t\t\t\tlet openButton = document.createElement(\"button\");\n\t\t\t\topenButton.innerText = partition;\n\t\t\t\topenButton.onclick = function() {\n\t\t\t\t\tpathElement.value = partition;\n\t\t\t\t\tbrowse();\n\t\t\t\t}\n\t\t\t\topenButton.oncontextmenu = async function(e) {\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tdisplayResult.innerText = \"\";\n\t\t\t\t\tlet unmountButton = document.createElement(\"button\");\n\t\t\t\t\tunmountButton.innerText = await availableAPIs.lookupLocale(\"UNMOUNT_BTN\");\n\t\t\t\t\tunmountButton.onclick = async function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_unmount({ mount: partition });\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tunmountButton.oncontextmenu = async function(e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_unmount({ mount: partition, force: true });\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplayResult.appendChild(unmountButton);\n\t\t\t\t\tdisplayResult.appendChild(document.createElement(\"hr\"));\n\n\t\t\t\t\tlet deleteButton = document.createElement(\"button\");\n\t\t\t\t\tlet deleteConfirm = false;\n\t\t\t\t\tdeleteButton.innerText = await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\t\t\t\tdeleteButton.onclick = async function() {\n\t\t\t\t\t\tif (!deleteConfirm) {\n\t\t\t\t\t\t\tdeleteButton.style.fontWeight = \"bold\";\n\t\t\t\t\t\t\tdeleteConfirm = true;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait recursiveRemove(partition);\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplayResult.appendChild(deleteButton);\n\n\t\t\t\t\tdisplayResult.appendChild(document.createElement(\"br\"));\n\t\t\t\t\tlet permissions = { owner: \"nobody\", group: \"nobody\", world: \"rx\" };\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpermissions = await availableAPIs.fs_permissions({ path: partition });\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t\tlet chownForm = document.createElement(\"form\");\n\t\t\t\t\tlet chownInput = document.createElement(\"input\");\n\t\t\t\t\tlet chownButton = document.createElement(\"button\");\n\t\t\t\t\tchownInput.value = permissions.owner;\n\t\t\t\t\tchownButton.innerText = await availableAPIs.lookupLocale(\"CHOWN_BUTTON\");\n\t\t\t\t\tchownForm.appendChild(chownInput);\n\t\t\t\t\tchownForm.appendChild(chownButton);\n\t\t\t\t\tdisplayResult.appendChild(chownForm);\n\t\t\t\t\tchownButton.onclick = async function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: partition, newUser: chownInput.value });\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet chgrpForm = document.createElement(\"form\");\n\t\t\t\t\tlet chgrpInput = document.createElement(\"input\");\n\t\t\t\t\tlet chgrpButton = document.createElement(\"button\");\n\t\t\t\t\tchgrpInput.value = permissions.group;\n\t\t\t\t\tchgrpButton.innerText = await availableAPIs.lookupLocale(\"CHGRP_BUTTON\");\n\t\t\t\t\tchgrpForm.appendChild(chgrpInput);\n\t\t\t\t\tchgrpForm.appendChild(chgrpButton);\n\t\t\t\t\tdisplayResult.appendChild(chgrpForm);\n\t\t\t\t\tchgrpButton.onclick = async function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: partition, newGrp: chgrpInput.value });\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet chmodForm = document.createElement(\"form\");\n\t\t\t\t\tlet chmodInput = document.createElement(\"input\");\n\t\t\t\t\tlet chmodButton = document.createElement(\"button\");\n\t\t\t\t\tchmodInput.value = permissions.world;\n\t\t\t\t\tchownInput.pattern = \"[rwx]+\";\n\t\t\t\t\tchmodButton.innerText = await availableAPIs.lookupLocale(\"CHMOD_BUTTON\");\n\t\t\t\t\tchmodForm.appendChild(chmodInput);\n\t\t\t\t\tchmodForm.appendChild(chmodButton);\n\t\t\t\t\tdisplayResult.appendChild(chmodForm);\n\t\t\t\t\tchmodButton.onclick = async function() {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: partition, newPermissions: chmodInput.value });\n\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdisplayResult.appendChild(openButton);\n\t\t\t}\n\t\t\tdisplayResult.appendChild(document.createElement(\"hr\"));\n\t\t\tlet spaceDisplayer = document.createElement(\"div\");\n\t\t\tlet spaces = await availableAPIs.estimateStorage();\n\t\t\tfor (let space in spaces) {\n\t\t\t\tlet newSpace = document.createElement(\"div\");\n\t\t\t\tnewSpace.innerText = (await availableAPIs.lookupLocale(\"SPACE_SHOWER\")).replace(\"%s\", space).replace(\"%s\", await availableAPIs.ufInfoUnits([spaces[space].used])).replace(\"%s\", await availableAPIs.ufInfoUnits([spaces[space].total])).replace(\"%s\", (spaces[space].used / spaces[space].total * 100).toFixed(2));\n\t\t\t\tspaceDisplayer.appendChild(newSpace);\n\t\t\t}\n\t\t\tdisplayResult.appendChild(spaceDisplayer);\n\t\t\tpreviousDirectory = path;\n\t\t\treturn \"browsed\";\n\t\t}\n\t\ttry {\n\t\t\tlet type = await isDirectory(path);\n\t\t\tif (type == \"directory\") {\n\t\t\t\tlet ls = (await availableAPIs.fs_ls({ path: path })).sort((a, b) => a.localeCompare(b));\n\t\t\t\tfor (let file of ls) {\n\t\t\t\t\tif (file.startsWith(\".\") && hideHiddenFiles) continue;\n\t\t\t\t\tlet openButton = document.createElement(\"button\");\n\t\t\t\t\tlet fileIcon = document.createElement(\"img\");\n\t\t\t\t\tfileIcon.style.width = \"12px\";\n\t\t\t\t\tfileIcon.style.height = \"12px\";\n\t\t\t\t\tlet fileType = file.split(\".\").slice(-1)[0];\n\t\t\t\t\tlet isDir = await isDirectory(path + \"/\" + file);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet wantedIcon;\n\t\t\t\t\t\tif (isDir == \"directory\") wantedIcon = await availableAPIs.getSystemMount() + \"/etc/icons/foldericon.pic\";\n\t\t\t\t\t\telse wantedIcon = await availableAPIs.getSystemMount() + \"/etc/icons/fileicon.pic\";\n\t\t\t\t\t\tif (availableAssocs.includes(fileType)) {\n\t\t\t\t\t\t\tif (!cachedAssocs[fileType]) cachedAssocs[fileType] = JSON.parse(await availableAPIs.fs_read({ path: await availableAPIs.getSystemMount() + \"/apps/associations/\" + fileType }));\n\t\t\t\t\t\t\twantedIcon = cachedAssocs[fileType].icon;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!cachedIcons[wantedIcon]) cachedIcons[wantedIcon] = await availableAPIs.fs_read({ path: wantedIcon });\n\t\t\t\t\t\tfileIcon.src = cachedIcons[wantedIcon];\n\t\t\t\t\t} catch {}\n\t\t\t\t\topenButton.innerText = file;\n\t\t\t\t\topenButton.insertAdjacentElement(\"afterbegin\", fileIcon);\n\t\t\t\t\topenButton.onclick = function() {\n\t\t\t\t\t\tpathElement.value = path + \"/\" + file;\n\t\t\t\t\t\tbrowse();\n\t\t\t\t\t}\n\t\t\t\t\topenButton.oncontextmenu = async function(e) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tdisplayResult.innerText = \"\";\n\t\t\t\t\t\tlet copyAllow = false;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcopyAllow = isDir == \"file\";\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tif (copyAllow) {\n\t\t\t\t\t\t\tlet copyButton = document.createElement(\"button\");\n\t\t\t\t\t\t\tcopyButton.innerText = await availableAPIs.lookupLocale(\"CLIPBOARD_COPY\");\n\t\t\t\t\t\t\tcopyButton.onclick = async function() {\n\t\t\t\t\t\t\t\tclipboard = {\n\t\t\t\t\t\t\t\t\tpath: path + \"/\" + file,\n\t\t\t\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\t\t\t\tcut: false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdisplayResult.appendChild(copyButton);\n\n\t\t\t\t\t\t\tlet cutButton = document.createElement(\"button\");\n\t\t\t\t\t\t\tcutButton.innerText = await availableAPIs.lookupLocale(\"CLIPBOARD_CUT\");\n\t\t\t\t\t\t\tcutButton.onclick = async function() {\n\t\t\t\t\t\t\t\tclipboard = {\n\t\t\t\t\t\t\t\t\tpath: path + \"/\" + file,\n\t\t\t\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\t\t\t\tcut: true\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdisplayResult.appendChild(cutButton);\n\t\t\t\t\t\t\tdisplayResult.appendChild(document.createElement(\"hr\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet deleteButton = document.createElement(\"button\");\n\t\t\t\t\t\tlet deleteConfirm = false;\n\t\t\t\t\t\tdeleteButton.innerText = await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\t\t\t\t\tdeleteButton.onclick = async function() {\n\t\t\t\t\t\t\tif (!deleteConfirm) {\n\t\t\t\t\t\t\t\tdeleteButton.style.fontWeight = \"bold\";\n\t\t\t\t\t\t\t\tdeleteConfirm = true;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tlet isDir = await isDirectory(path + \"/\" + file);\n\t\t\t\t\t\t\t\tif (isDir == \"directory\") await recursiveRemove(path + \"/\" + file);\n\t\t\t\t\t\t\t\telse if (isDir == \"file\") await availableAPIs.fs_rm({ path: path + \"/\" + file });\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisplayResult.appendChild(deleteButton);\n\t\t\t\t\t\tdisplayResult.appendChild(document.createElement(\"br\"));\n\t\t\t\t\t\tlet permissions = { owner: \"nobody\", group: \"nobody\", world: \"rx\" };\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tpermissions = await availableAPIs.fs_permissions({ path: path + \"/\" + file });\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet chownForm = document.createElement(\"form\");\n\t\t\t\t\t\tlet chownInput = document.createElement(\"input\");\n\t\t\t\t\t\tlet chownButton = document.createElement(\"button\");\n\t\t\t\t\t\tchownInput.value = permissions.owner;\n\t\t\t\t\t\tchownButton.innerText = await availableAPIs.lookupLocale(\"CHOWN_BUTTON\");\n\t\t\t\t\t\tchownForm.appendChild(chownInput);\n\t\t\t\t\t\tchownForm.appendChild(chownButton);\n\t\t\t\t\t\tdisplayResult.appendChild(chownForm);\n\t\t\t\t\t\tchownButton.onclick = async function() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: path + \"/\" + file, newUser: chownInput.value });\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet chgrpForm = document.createElement(\"form\");\n\t\t\t\t\t\tlet chgrpInput = document.createElement(\"input\");\n\t\t\t\t\t\tlet chgrpButton = document.createElement(\"button\");\n\t\t\t\t\t\tchgrpInput.value = permissions.group;\n\t\t\t\t\t\tchgrpButton.innerText = await availableAPIs.lookupLocale(\"CHGRP_BUTTON\");\n\t\t\t\t\t\tchgrpForm.appendChild(chgrpInput);\n\t\t\t\t\t\tchgrpForm.appendChild(chgrpButton);\n\t\t\t\t\t\tdisplayResult.appendChild(chgrpForm);\n\t\t\t\t\t\tchgrpButton.onclick = async function() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: path + \"/\" + file, newGrp: chgrpInput.value });\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet chmodForm = document.createElement(\"form\");\n\t\t\t\t\t\tlet chmodInput = document.createElement(\"input\");\n\t\t\t\t\t\tlet chmodButton = document.createElement(\"button\");\n\t\t\t\t\t\tchmodInput.value = permissions.world;\n\t\t\t\t\t\tchownInput.pattern = \"[rwx]+\";\n\t\t\t\t\t\tchmodButton.innerText = await availableAPIs.lookupLocale(\"CHMOD_BUTTON\");\n\t\t\t\t\t\tchmodForm.appendChild(chmodInput);\n\t\t\t\t\t\tchmodForm.appendChild(chmodButton);\n\t\t\t\t\t\tdisplayResult.appendChild(chmodForm);\n\t\t\t\t\t\tchmodButton.onclick = async function() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: path + \"/\" + file, newPermissions: chmodInput.value });\n\t\t\t\t\t\t\t\tbrowse();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdisplayResult.appendChild(openButton);\n\t\t\t\t}\n\t\t\t\tpreviousDirectory = path;\n\t\t\t} else if (type == \"file\") {\n\t\t\t\tlet hasError = false;\n\t\t\t\tpathElement.value = previousDirectory;\n\t\t\t\tif (path.endsWith(\".js\")) {\n\t\t\t\t\tif (privileges.includes(\"START_TASK\") && privileges.includes(\"ELEVATE_PRIVILEGES\") && privileges.includes(\"MANAGE_TOKENS\")) {\n\t\t\t\t\t\tif (!globalToken) globalToken = await availableAPIs.consentGetToken({\n\t\t\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"FILE_EXPLORER_INTENT\"),\n\t\t\t\t\t\t\tname: await availableAPIs.lookupLocale(\"FILE_EXPLORER\"),\n\t\t\t\t\t\t\tdesiredUser: await availableAPIs.getUser()\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (globalToken) {\n\t\t\t\t\t\t\tlet newToken = await availableAPIs.forkToken(globalToken);\n\t\t\t\t\t\t\tawait availableAPIs.startTask({ file: path, token: newToken });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplayResult.innerText = await availableAPIs.lookupLocale(\"MORE_PERMISSION_DENIED\");\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (path.endsWith(\".lnk\") && privileges.includes(\"ELEVATE_PRIVILEGES\") && privileges.includes(\"MANAGE_TOKENS\")) {\n\t\t\t\t\tlet file = await availableAPIs.fs_read({ path: path });\n\t\t\t\t\tfile = JSON.parse(file);\n\t\t\t\t\tif (privileges.includes(\"START_TASK\")) {\n\t\t\t\t\t\tif (!globalToken) globalToken = await availableAPIs.consentGetToken({\n\t\t\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"FILE_EXPLORER_INTENT\"),\n\t\t\t\t\t\t\tname: await availableAPIs.lookupLocale(\"FILE_EXPLORER\"),\n\t\t\t\t\t\t\tdesiredUser: await availableAPIs.getUser()\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (globalToken) {\n\t\t\t\t\t\t\tlet newToken = await availableAPIs.forkToken(globalToken);\n\t\t\t\t\t\t\tawait availableAPIs.startTask({ file: file.path, argPassed: [ ...(file.args || []) ], token: newToken });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplayResult.innerText = await availableAPIs.lookupLocale(\"MORE_PERMISSION_DENIED\");\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet fileType = path.split(\".\").slice(-1)[0];\n\t\t\t\t\tif (!availableAssocs.includes(fileType)) return displayResult.innerText = await availableAPIs.lookupLocale(\"UNKNOWN_FILE_TYPE\");\n\t\t\t\t\tlet file = await availableAPIs.fs_read({ path: await availableAPIs.getSystemMount() + \"/apps/associations/\" + fileType });\n\t\t\t\t\tlet fileLink = JSON.parse(file);\n\t\t\t\t\tif (privileges.includes(\"START_TASK\") && privileges.includes(\"ELEVATE_PRIVILEGES\") && privileges.includes(\"MANAGE_TOKENS\")) {\n\t\t\t\t\t\tif (!globalToken) globalToken = await availableAPIs.consentGetToken({\n\t\t\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"FILE_EXPLORER_INTENT\"),\n\t\t\t\t\t\t\tname: await availableAPIs.lookupLocale(\"FILE_EXPLORER\"),\n\t\t\t\t\t\t\tdesiredUser: await availableAPIs.getUser()\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (globalToken) {\n\t\t\t\t\t\t\tlet newToken = await availableAPIs.forkToken(globalToken);\n\t\t\t\t\t\t\tawait availableAPIs.startTask({ file: fileLink.path, argPassed: [ ...(fileLink.args || []), path ], token: newToken });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdisplayResult.innerText = await availableAPIs.lookupLocale(\"MORE_PERMISSION_DENIED\");\n\t\t\t\t\t\thasError = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!hasError) await browse();\n\t\t\t} else {\n\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", (await availableAPIs.lookupLocale(\"UNKNOWN_FS_STRUCT\")).replace(\"%s\", type));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t}\n\t}\n\tif (exec_args[0]) pathElement.value = exec_args[0];\n\tbrowse();\n\tbrowseButton.onclick = browse;\n})();\nasync function recursiveRemove(path) {\n\tlet dirList = await availableAPIs.fs_ls({ path });\n\tfor (let fileIndex in dirList) {\n\t\tlet file = dirList[fileIndex];\n\t\tif (await availableAPIs.fs_isDirectory({ path: path + \"/\" + file })) await recursiveRemove(path + \"/\" + file);\n\t\telse await availableAPIs.fs_rm({ path: path + \"/\" + file });\n\t}\n\tawait availableAPIs.fs_rm({ path });\n}\nasync function isDirectory(path) {\n\ttry {\n\t\tlet isDirectoryVar = await availableAPIs.fs_isDirectory({ path });\n\t\treturn isDirectoryVar ? \"directory\" : \"file\";\n\t} catch {\n\t\treturn \"unknown\";\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) {\n\t\ttry {\n\t\t\tif (globalToken) await availableAPIs.revokeToken(globalToken);\n\t\t} catch {}\n\t\tawait window.availableAPIs.terminate();\n\t}\n}); null;","0b4521c522a417df7199c3ac832b60fa7343c201a8df2d56a6c26536af0d5afa85862000d4c4640cb0990b115560d21e58c0b48130bae3c9081a33069f264837":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: FS_READ, FS_LIST_PARTITIONS, IPC_SEND_PIPE, GET_LOCALE, GET_THEME, FS_BYPASS_PERMISSIONS, GET_USER_INFO\n// signature: ea6228fcad8ff9208d24d788e81cb81673e4d55501736b5bc481e3ff1e1f0be473f21c9cfb38b82f6689cc4abf5a2edcd6b2dc8b43036e87b1ab6492771f2c03\n// =====END MANIFEST=====\nlet ipcChannel = exec_args[0];\n(async function() {\n\t// @pcos-app-mode isolatable\n\tif (!ipcChannel) return availableAPIs.terminate();\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"FILE_PICKER\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"FS_READ\", \"FS_LIST_PARTITIONS\", \"IPC_SEND_PIPE\" ];\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tif (privileges.includes(\"IPC_SEND_PIPE\")) await availableAPIs.sendToPipe({ pipe: ipcChannel, data: { success: false, reason: \"permissions\" } });\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet hideHiddenFiles = false;\n\ttry {\n\t\tlet homedir = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser() })).homeDirectory;\n\t\thideHiddenFiles = true;\n\t\thideHiddenFiles = (await availableAPIs.fs_read({\n\t\t\tpath: homedir + \"/.hiddenFiles\",\n\t\t})) != \"show\";\n\t} catch {}\n\tdocument.body.innerText = \"\";\n\tlet mainComponent = document.createElement(\"div\");\n\tlet pathInputForm = document.createElement(\"form\");\n\tlet pathElement = document.createElement(\"input\");\n\tpathElement.value = exec_args[2] || \"\";\n\tlet browseButton = document.createElement(\"button\");\n\tlet displayResult = document.createElement(\"div\");\n\tlet newItemInput = document.createElement(\"input\");\n\tlet newItemBrowse = document.createElement(\"button\");\n\tlet newItemContainer = document.createElement(\"div\");\n\tlet previousDirectory = \"\";\n\tlet isDefaultChoice = true;\n\tmainComponent.style.display = \"flex\";\n\tmainComponent.style.flexDirection = \"column\";\n\tmainComponent.style.width = \"100%\";\n\tmainComponent.style.height = \"100%\";\n\tmainComponent.style.position = \"absolute\";\n\tmainComponent.style.top = \"0\";\n\tmainComponent.style.left = \"0\";\n\tmainComponent.style.padding = \"8px\";\n\tmainComponent.style.boxSizing = \"border-box\";\n\tdisplayResult.style.flex = \"1\";\n\tnewItemBrowse.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\tnewItemContainer.appendChild(document.createElement(\"hr\"));\n\tnewItemContainer.appendChild(newItemInput);\n\tbrowseButton.innerText = await availableAPIs.lookupLocale(\"BROWSE_FEXP\");\n\tnewItemContainer.appendChild(newItemBrowse);\n\tpathInputForm.appendChild(pathElement);\n\tpathInputForm.appendChild(browseButton);\n\tmainComponent.appendChild(pathInputForm);\n\tmainComponent.appendChild(displayResult);\n\tmainComponent.appendChild(newItemContainer);\n\tdocument.body.appendChild(mainComponent);\n\tnewItemContainer.hidden = exec_args[1] != \"save\";\n\tasync function browse() {\n\t\tlet path = pathElement.value;\n\t\tif (path.endsWith(\"/\")) path = path.substring(0, path.length - 1);\n\t\tdisplayResult.innerText = \"\";\n\t\tif (path == \"\") {\n\t\t\tlet partitions = (await availableAPIs.fs_mounts()).sort((a, b) => a.localeCompare(b));\n\t\t\tfor (let partition of partitions) {\n\t\t\t\tif (partition.startsWith(\".\") && hideHiddenFiles) continue;\n\t\t\t\tlet openButton = document.createElement(\"button\");\n\t\t\t\topenButton.innerText = partition;\n\t\t\t\topenButton.onclick = function() {\n\t\t\t\t\tpathElement.value = partition;\n\t\t\t\t\tbrowse();\n\t\t\t\t}\n\t\t\t\tdisplayResult.appendChild(openButton);\n\t\t\t}\n\t\t\tpreviousDirectory = path;\n\t\t\treturn \"browsed\";\n\t\t}\n\t\ttry {\n\t\t\tlet type = await isDirectory(path);\n\t\t\tif (type == \"directory\") {\n\t\t\t\tlet ls = (await availableAPIs.fs_ls({ path: path })).sort((a, b) => a.localeCompare(b));\n\t\t\t\tfor (let file of ls) {\n\t\t\t\t\tif (file.startsWith(\".\") && hideHiddenFiles) continue;\n\t\t\t\t\tlet openButton = document.createElement(\"button\");\n\t\t\t\t\topenButton.innerText = file;\n\t\t\t\t\topenButton.onclick = function() {\n\t\t\t\t\t\tpathElement.value = path + \"/\" + file;\n\t\t\t\t\t\tbrowse();\n\t\t\t\t\t}\n\t\t\t\t\tdisplayResult.appendChild(openButton);\n\t\t\t\t}\n\t\t\t\tpreviousDirectory = path;\n\t\t\t} else if (type == \"file\" || (type == \"unknown\" && exec_args[1] == \"save\")) {\n\t\t\t\tif (isDefaultChoice) {\n\t\t\t\t\tpathElement.value = path.split(\"/\").slice(0, -1).join(\"/\");\n\t\t\t\t\tnewItemInput.value = path.split(\"/\").slice(-1)[0];\n\t\t\t\t\treturn browse();\n\t\t\t\t}\n\t\t\t\tdisplayResult.innerText = \"\";\n\t\t\t\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { success: true, selected: path } });\n\t\t\t\tawait availableAPIs.terminate();\n\t\t\t} else {\n\t\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", (await availableAPIs.lookupLocale(\"UNKNOWN_FS_STRUCT\")).replace(\"%s\", type));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tdisplayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(e.message));\n\t\t}\n\t\tisDefaultChoice = false;\n\t}\n\tbrowse();\n\tbrowseButton.onclick = browse;\n\tnewItemBrowse.onclick = async function() {\n\t\tif (previousDirectory == \"\") return displayResult.innerText = (await availableAPIs.lookupLocale(\"FILE_STRUCT_BROWSE_FAIL\")).replace(\"%s\", await availableAPIs.lookupLocale(\"NO_SAVE_IN_MTN\"));\n\t\tpathElement.value = previousDirectory + \"/\" + newItemInput.value;\n\t\tbrowse();\n\t}\n})();\nasync function isDirectory(path) {\n\ttry {\n\t\tlet isDirectoryVar = await availableAPIs.fs_isDirectory({ path });\n\t\treturn isDirectoryVar ? \"directory\" : \"file\";\n\t} catch {\n\t\treturn \"unknown\";\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) {\n\t\ttry {\n\t\t\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { success: false, reason: \"closed\" } });\n\t\t} catch {}\n\t\tawait window.availableAPIs.terminate();\n\t}\n}); null;","0157fc8bc44476e1acba4fc4f9f3a662076799486607a50676e5226baaa1d23614f47136f44b82e90c2618aabd68ad87ecc9ddafc56ca67c0420492aa5c52a7e":"{\"path\":\"system/apps/explorer.js\",\"localeReferenceName\":\"FILE_EXPLORER\"}","d1d5e0d68246a86903249f5f671d1b6382c166d052e82979202905d122391f04164b95f30d85b36f506e86957e9816af5fe4d20c76ca752af4486dee8b37df54":"{\"path\":\"system/apps/textEditor.js\",\"localeReferenceName\":\"TEXT_EDITOR\"}","93f8ec4cb47c49917d461ada89791654221b16051ea96fe5d9639934e409b97185e23189c7d869f2b1a36f113a212b45c35c447d658b538ad31f35a43b6179af":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: FS_READ, FS_LIST_PARTITIONS, IPC_SEND_PIPE, IPC_LISTEN_PIPE, GET_LOCALE, GET_THEME, FS_BYPASS_PERMISSIONS, SYSTEM_SHUTDOWN, GET_USER_INFO, LOGOUT, GET_SCREEN_INFO, GRAB_ATTENTION, LULL_SYSTEM\n// signature: 2c289df2acf646fafd8899807e3db37300d9adebb173c6b61e9bd4ed3a5330b819dcefbc771fa2a80ee093c6a0f080e9016b31858b4515fb60011d447cb27a00\n// =====END MANIFEST=====\nlet ipcChannel;\nlet shouldShutdown = false;\nlet visibilityState = true;\nlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\nlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n(async function() {\n\t// @pcos-app-mode isolatable\n\tipcChannel = await availableAPIs.getPrivateData();\n\tif (!ipcChannel) return availableAPIs.terminate();\n\tawait visibility(false);\n\tawait window.availableAPIs.windowTitleSet(await window.availableAPIs.lookupLocale(\"START_MENU\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"FS_READ\", \"FS_LIST_PARTITIONS\", \"IPC_SEND_PIPE\", \"IPC_LISTEN_PIPE\" ];\n\tif (!checklist.every(p => privileges.includes(p))) return availableAPIs.terminate();\n\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { success: true } });\n\tdocument.body.innerText = \"\";\n\tlet logoutButton = document.createElement(\"button\");\n\tlogoutButton.innerText = (await availableAPIs.lookupLocale(\"LOG_OUT_BUTTON\")).replace(\"%s\", await availableAPIs.getUser());\n\tdocument.body.appendChild(logoutButton);\n\tlogoutButton.onclick = async function() {\n\t\tshouldShutdown = true;\n\t\tawait visibility(false);\n\t\tawait availableAPIs.logOut(await availableAPIs.getUser());\n\t}\n\tlet lockButton = document.createElement(\"button\");\n\tlockButton.innerText = await availableAPIs.lookupLocale(\"LOCK_BUTTON\");\n\tdocument.body.appendChild(lockButton);\n\tlockButton.onclick = async function() {\n\t\tawait visibility(false);\n\t\tawait availableAPIs.lock();\n\t}\n\tif (privileges.includes(\"SYSTEM_SHUTDOWN\")) {\n\t\tlet shutoff = document.createElement(\"button\");\n\t\tshutoff.innerText = await availableAPIs.lookupLocale(\"TURN_OFF_BUTTON\");\n\t\tdocument.body.appendChild(shutoff);\n\t\tshutoff.onclick = async function() {\n\t\t\tshouldShutdown = true;\n\t\t\tawait visibility(false);\n\t\t\tawait availableAPIs.shutdown({ isReboot: false });\n\t\t}\n\t\tlet reboot = document.createElement(\"button\");\n\t\treboot.innerText = await availableAPIs.lookupLocale(\"RESTART_BUTTON\");\n\t\tdocument.body.appendChild(reboot);\n\t\treboot.onclick = async function() {\n\t\t\tshouldShutdown = true;\n\t\t\tawait visibility(false);\n\t\t\tawait availableAPIs.shutdown({ isReboot: true, isKexec: true });\n\t\t}\n\t\treboot.oncontextmenu = async function(e) {\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tshouldShutdown = true;\n\t\t\tawait visibility(false);\n\t\t\tawait availableAPIs.shutdown({ isReboot: true, isKexec: false });\n\t\t}\n\t}\n\tif (privileges.includes(\"LULL_SYSTEM\")) {\n\t\tlet lull = document.createElement(\"button\");\n\t\tlull.innerText = await availableAPIs.lookupLocale(\"LULL_SYSTEM\");\n\t\tdocument.body.appendChild(lull);\n\t\tlull.onclick = async function() {\n\t\t\tawait visibility(false);\n\t\t\tawait availableAPIs.lull();\n\t\t}\n\t}\n\ttry {\n\t\tlet enumeration = (await availableAPIs.fs_ls({ path: (await availableAPIs.getSystemMount()) + \"/apps/links\" })).sort((a, b) => a.localeCompare(b));\n\t\tfor (let app of enumeration) {\n\t\t\tlet appLink = await availableAPIs.fs_read({ path: (await availableAPIs.getSystemMount()) + \"/apps/links/\" + app });\n\t\t\tappLink = JSON.parse(appLink);\n\t\t\tif (appLink.disabled) continue;\n\t\t\tlet appBtn = document.createElement(\"button\");\n\t\t\tappBtn.innerText = (appLink.localeReferenceName ? await availableAPIs.lookupLocale(appLink.localeReferenceName) : null) || (appLink.localeDatabaseName ? (appLink.localeDatabaseName[navigator.language.slice(0, 2).toLowerCase()] || appLink.localeDatabaseName[await availableAPIs.osLocale()]) : null) || appLink.name;\n\t\t\tappBtn.title = await availableAPIs.lookupLocale(\"PROVISIONED_PREFERENCE\");\n\t\t\tappBtn.onclick = async function() {\n\t\t\t\tawait visibility(false);\n\t\t\t\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { run: appLink } });\n\t\t\t}\n\t\t\tdocument.body.appendChild(appBtn);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(\"Failed to enumerate system app links\", e);\n\t}\n\ttry {\n\t\tlet enumeration = await availableAPIs.fs_ls({ path: (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser() })).homeDirectory + \"/.applinks\" });\n\t\tfor (let app of enumeration) {\n\t\t\tlet appLink = await availableAPIs.fs_read({ path: (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser() })).homeDirectory + \"/.applinks/\" + app });\n\t\t\tappLink = JSON.parse(appLink);\n\t\t\tif (appLink.disabled) continue;\n\t\t\tlet appBtn = document.createElement(\"button\");\n\t\t\tappBtn.innerText = (appLink.localeReferenceName ? await availableAPIs.lookupLocale(appLink.localeReferenceName) : null) || (appLink.localeDatabaseName ? (appLink.localeDatabaseName[navigator.language.slice(0, 2).toLowerCase()] || appLink.localeDatabaseName[await availableAPIs.osLocale()]) : null) || appLink.name;\n\t\t\tappBtn.onclick = async function() {\n\t\t\t\tawait visibility(false);\n\t\t\t\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { run: appLink } });\n\t\t\t}\n\t\t\tdocument.body.appendChild(appBtn);\n\t\t}\n\t} catch (e) {\n\t\tconsole.error(\"Failed to enumerate user app links\", e);\n\t}\n\n\tonresize = shapeshift;\n\n\twhile (true) {\n\t\tlet listen = await availableAPIs.listenToPipe(ipcChannel);\n\t\tif (listen.open) {\n\t\t\tawait visibility();\n\t\t\tshapeshift();\n\t\t}\n\t}\n})();\n\nasync function visibility(wantedState) {\n\tif (!wantedState) wantedState = !visibilityState;\n\tif (wantedState == visibilityState) return;\n\tawait availableAPIs.windowVisibility(wantedState);\n\tvisibilityState = wantedState;\n}\n\nasync function shapeshift() {\n\tlet screenInfo = await availableAPIs.getScreenInfo();\n\tlet winSize = await availableAPIs.windowSize();\n\tawait availableAPIs.windowRelocate([ screenInfo.height - (winSize.height / 2) - 35 - 8, winSize.width / 2 + 8 ]);\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) {\n\t\tawait visibility(false);\n\t\tawait availableAPIs.sendToPipe({ pipe: ipcChannel, data: { dying: true } });\n\t\tawait availableAPIs.terminate();\n\t}\n}); null;","5e9f95e7f76a97f666a7b055134a44250ec116c80040022d075f5687e157b39a4cfbaa48a4c42a8a9fcf69d459a96f75012ac3c84123136cd245be13dbc0f6fa":"// =====BEGIN MANIFEST=====\n// link: lrn:TEXT_EDITOR\n// association: txt\n// signer: automaticSigner\n// allow: FS_READ, FS_WRITE, FS_LIST_PARTITIONS, IPC_CREATE_PIPE, IPC_LISTEN_PIPE, GET_LOCALE, GET_THEME, START_TASK, IPC_SEND_PIPE, FS_BYPASS_PERMISSIONS, GET_USER_INFO\n// signature: e9ad0f530dd0fde2e47b6a333a796d1e3caffb162a07b28052b5ea182eea00b1e8d10d82c553de364af48fdf9eadb10bacac949d7e30e4bce37392b86df56408\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"TEXT_EDITOR\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tdocument.documentElement.style.height = \"100%\";\n\tdocument.documentElement.style.width = \"100%\";\n\tdocument.body.style.height = \"100%\";\n\tdocument.body.style.width = \"100%\";\n\tdocument.body.style.margin = \"0\";\n\tlet flexContainer = document.createElement(\"div\");\n\tlet buttonContainer = document.createElement(\"div\");\n\tlet loadButton = document.createElement(\"button\");\n\tlet saveButton = document.createElement(\"button\");\n\tlet statusMessage = document.createElement(\"span\");\n\tlet data = document.createElement(\"textarea\");\n\tlet hr = document.createElement(\"hr\");\n\tlet hrContainer = document.createElement(\"div\");\n\tlet lastFile = \"\";\n\tloadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\tsaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\tflexContainer.style.display = \"flex\";\n\tflexContainer.style.flexDirection = \"column\";\n\tflexContainer.style.width = \"100%\";\n\tflexContainer.style.height = \"100%\";\n\tdata.style.flexGrow = 1000;\n\tdata.style.resize = \"none\";\n\tif (await availableAPIs.isDarkThemed()) {\n\t\tdata.style.backgroundColor = \"#2b2a33\";\n\t\tdata.style.color = \"white\";\n\t}\n\tbuttonContainer.appendChild(loadButton);\n\tbuttonContainer.appendChild(saveButton);\n\tbuttonContainer.appendChild(statusMessage);\n\thrContainer.appendChild(hr);\n\tflexContainer.appendChild(buttonContainer);\n\tflexContainer.appendChild(hrContainer);\n\tflexContainer.appendChild(data);\n\tdocument.body.appendChild(flexContainer);\n\ttry {\n\t\tif (exec_args[0]) {\n\t\t\tdata.value = await availableAPIs.fs_read({ path: exec_args[0] });\n\t\t\tlastFile = exec_args[0];\n\t\t\tstatusMessage.innerText = exec_args[0].split(\"/\").pop();\n\t\t}\n\t} catch (e) {\n\t\tstatusMessage.innerText = e.name + \": \" + e.message;\n\t}\n\tloadButton.onclick = async function() {\n\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\tawait availableAPIs.windowVisibility(false);\n\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\", lastFile] });\n\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\tawait availableAPIs.windowVisibility(true);\n\t\ttry {\n\t\t\tif (result.success) {\n\t\t\t\tdata.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t\t\tlastFile = result.selected;\n\t\t\t\tstatusMessage.innerText = result.selected.split(\"/\").pop();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tstatusMessage.innerText = e.name + \": \" + e.message;\n\t\t}\n\t}\n\tsaveButton.onclick = async function() {\n\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\tawait availableAPIs.windowVisibility(false);\n\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\", lastFile] });\n\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\tawait availableAPIs.windowVisibility(true);\n\t\ttry {\n\t\t\tif (result.success) {\n\t\t\t\tawait availableAPIs.fs_write({ path: result.selected, data: data.value });\n\t\t\t\tlastFile = result.selected;\n\t\t\t\tstatusMessage.innerText = result.selected.split(\"/\").pop();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tstatusMessage.innerText = e.name + \": \" + e.message;\n\t\t}\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","931ce13023c067a0412d8e31135c4f4f59975c2da8d47d8fc37adcd80408a4e3b59d6ce0f06e84776be5c008325b74b67588d6e0fe950cb3baa0bb8133df0098":"{\n\t\"basic\": \"7f00000150434f53334e6574776f726b\",\n\t\"pc\": \"7f00000150434f53334e6574776f726b\"\n}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941353,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"dd590f1956ecbc900483ddd64b872462d6c2da832254294f4206b03c0ef23151ed03391e73de706d537ad9c32349729fc735cc3ee6d40eb4ac03a43377b91a0e"}},"50-locale-en.fs":{"backend":{"files":{"boot":{"06-localesappend-en.js":"e80f791111b328a78b2899adb5918e4592a12b611fc4d225edd8845091cea774e5ec1097b92762a351b6dd5a682d38a304011e02261e9f57ad28f1bbcdcf4656"}},"permissions":{"boot/06-localesappend-en.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"e80f791111b328a78b2899adb5918e4592a12b611fc4d225edd8845091cea774e5ec1097b92762a351b6dd5a682d38a304011e02261e9f57ad28f1bbcdcf4656":"modules.locales.en = {\n\t\"UNTITLED_APP\": \"Untitled program\",\n\t\"PERMISSION_DENIED\": \"Permission denied\",\n\t\"MORE_PERMISSION_DENIED\": \"There are not enough permissions to run this program.\",\n\t\"COMPATIBILITY_ISSUE_TITLE\": \"Compatibility issue\",\n\t\"COMPATIBILITY_ISSUE\": \"This program cannot run on this computer as a task. Check the application modes to include \\\"isolatable\\\".\",\n\t\"APP_STARTUP_CRASH_TITLE\": \"Something went wrong\",\n\t\"APP_STARTUP_CRASH\": \"The system failed to execute this program.\",\n\t\"JS_TERMINAL\": \"JavaScript Terminal\",\n\t\"TERMINAL_INVITATION\": \"PCOS 3, build %s\",\n\t\"PCOS_RESTARTING\": \"PCOS is restarting. %s\",\n\t\"PLEASE_WAIT\": \"Please wait.\",\n\t\"POLITE_CLOSE_SIGNAL\": \"Sending polite close.\",\n\t\"ABRUPT_CLOSE_SIGNAL\": \"Sending abrupt close.\",\n\t\"UNMOUNTING_MOUNTS\": \"Unmounting mounts.\",\n\t\"SAFE_TO_CLOSE\": \"It is now safe to close this tab.\",\n\t\"RESTART_BUTTON\": \"Reboot\",\n\t\"RESTARTING\": \"Restarting.\",\n\t\"INSTALL_PCOS\": \"Install PCOS\",\n\t\"INSTALLER_TITLE\": \"PCOS 3 Installer\",\n\t\"CLOSE_INSTALLER_CONFIRMATION\": \"Are you sure you want to stop the installation process? This computer will restart.\",\n\t\"YES\": \"Yes\",\n\t\"NO\": \"No\",\n\t\"INSTALLER_INVITATION\": \"You are installing PCOS 3 build %s on this computer.\",\n\t\"INSTALL_BUTTON\": \"Install\",\n\t\"LIVE_BUTTON\": \"Try out\",\n\t\"INSTALLER_PARTITIONING\": \"Select the boot and data partitions you would like to use.\",\n\t\"PARTITIONING_USE\": \"Use partitions\",\n\t\"PARTITION_DATA\": \"Data partition\",\n\t\"PARTITION_BOOT\": \"Boot partition\",\n\t\"FORMAT_DATA\": \"Format to PCFS\",\n\t\"DATA_INPUT_ALERT\": \"Please enter a data partition name.\",\n\t\"PROMPT_PARTITION_TABLE\": \"This disk does not seem to contain a valid partition table. Do you want to insert a partition table?\",\n\t\"CONFIRM_PARTITION_ERASE\": \"All data on that partition will be erased. Continue?\",\n\t\"BOOT_INPUT_ALERT\": \"Please enter a boot partition name.\",\n\t\"CANNOT_FIND_PARTITION\": \"Can't find a disk partition. Please try formatting the data partition to PCFS.\",\n\t\"PCFS_DETECTION_ERROR\": \"The data partition doesn't seem to contain PCFS. Do you still want to use it?\",\n\t\"INSTALLING_PCOS\": \"Installing PCOS: %s\",\n\t\"CREATING_BOOT_PARTITION\": \"Creating boot partition\",\n\t\"MOUNTING_DATA_PARTITION\": \"Mounting data partition as 'target'\",\n\t\"CHANGING_ROOT_PERMISSIONS\": \"Changing / permissions\",\n\t\"COPYING_FOLDERS\": \"Copying directories\",\n\t\"PREPARING_FOR_COPY\": \"Preparing for copying\",\n\t\"PATCHING_FS\": \"Patching for data mount\",\n\t\"INSTALLATION_SUCCESSFUL\": \"Successful installation. Close window to reboot.\",\n\t\"INSTALLATION_FAILED\": \"Installation of PCOS failed. Please try again. Close window to reboot.\",\n\t\"CREATING_DIR\": \"Creating %s\",\n\t\"COPYING_FILE\": \"Copying %s\",\n\t\"COMPLETE_COPY\": \"Complete copying %s\",\n\t\"REMOVING_OBJECT\": \"Removing %s\",\n\t\"COMPLETE_REMOVE\": \"Complete removing %s\",\n\t\"SHORT_DAYS\": \"%sd\",\n\t\"SHORT_HOURS\": \"%sh\",\n\t\"SHORT_MINUTES\": \"%smin\",\n\t\"SHORT_SECONDS\": \"%ss\",\n\t\"SHORT_MILLISECONDS\": \"%sms\",\n\t\"SHORT_TERABYTES\": \"%sTB\",\n\t\"SHORT_GIGABYTES\": \"%sGB\",\n\t\"SHORT_MEGABYTES\": \"%sMB\",\n\t\"SHORT_KILOBYTES\": \"%sKB\",\n\t\"SHORT_BYTES\": \"%sB\",\n\t\"AUTH_FAILED_NEW\": \"Authentication failed, please use a new instance!\",\n\t\"AUTH_SUCCESS\": \"Authentication successful.\",\n\t\"AUTH_FAILED\": \"Authentication failed.\",\n\t\"PLEASE_WAIT_TIME\": \"Please wait %s\",\n\t\"REPORTING_LOGON\": \"Reporting logon to server...\",\n\t\"TOTP_PC_PROMPT\": \"Enter TOTP-PC code\",\n\t\"TOTP_PROMPT\": \"Enter TOTP code\",\n\t\"ACCESS_NOT_SETUP\": \"Access to this user is not set up\",\n\t\"PASSWORD_PROMPT\": \"Enter password\",\n\t\"ENTER_BUTTON\": \"Enter\",\n\t\"USERNAME_PROMPT\": \"Enter an username.\",\n\t\"USERNAME\": \"Username\",\n\t\"ACCESS_FN_FAIL\": \"No such user.\",\n\t\"PROMPT_GET_FAIL\": \"Something went wrong while getting the authentication prompt.\",\n\t\"LET_TRY_AGAIN\": \"Let's try again.\",\n\t\"RESPONSE_PLACEHOLDER\": \"Response...\",\n\t\"START_MENU_BTN\": \"Start\",\n\t\"START_MENU\": \"Start menu\",\n\t\"LOG_IN_INVITATION\": \"Log in\",\n\t\"LOG_OUT_BUTTON\": \"Log out (%s)\",\n\t\"LOCK_BUTTON\": \"Lock\",\n\t\"TERMINAL_BUTTON\": \"Terminal\",\n\t\"TURN_OFF_BUTTON\": \"Turn off\",\n\t\"PASSWORD\": \"Password\",\n\t\"SET_UP_PCOS\": \"Set up PCOS\",\n\t\"LET_SETUP_SYSTEM\": \"Let's set up the system now.\",\n\t\"SET_UP\": \"Set up\",\n\t\"LET_CREATE_ACCOUNT\": \"Let's create your own user account.\",\n\t\"CREATE\": \"Create\",\n\t\"PASSWORD_INPUT_ALERT\": \"Please enter a password!\",\n\t\"SETUP_SUCCESSFUL\": \"Successful setup. Close window to log in.\",\n\t\"CREATING_USER_STRUCTURE\": \"Creating user structure\",\n\t\"CREATING_USER\": \"Creating user\",\n\t\"INSTALLING_WPS\": \"Installing wallpapers\",\n\t\"INSTALLING_APPS\": \"Installing programs\",\n\t\"INSTALLING_WP2U\": \"Installing wallpaper to user\",\n\t\"REMOVING_2STAGE\": \"Removing second-stage installer\",\n\t\"PATCHING_LOGON\": \"Patching for logon requirement\",\n\t\"CONFIRM\": \"Confirm\",\n\t\"RIGHT_REVIEW\": \"Let's review your rights.\",\n\t\"RIGHT_REVIEW_BTN\": \"Accept license\",\n\t\"DARK_MODE\": \"Dark mode\",\n\t\"INSTALLING_DARKMODE\": \"Installing dark mode preference\",\n\t\"CREATING_USER_HOME\": \"Creating user home directory\",\n\t\"PROVISIONED_PREFERENCE\": \"This setting is managed by the system administrator.\",\n\t\"USERNAME_EXISTS\": \"This user already exists in the system.\",\n\t\"VIDEO_PLAYER\": \"Video player\",\n\t\"INACCESSIBLE_FILE\": \"%s is inaccessible. Ensure you have permissions to access it, and that the object exists.\",\n\t\"FILE_NOT_SPECIFIED\": \"No file specified.\",\n\t\"PICTURE_VIEWER\": \"Picture viewer\",\n\t\"API_TEST_TERM\": \"API Developer's Terminal\",\n\t\"HELP_TERMINAL_APITEST\": \"help - Display help menu\\r\\nclear - Clear terminal\\r\\njs_ree - Execute JavaScript code\\r\\n--- REE API EXPORTS ---\\r\\n\",\n\t\"TERM_COMMAND_NOT_FOUND\": \"%s: command not found\",\n\t\"FILE_EXPLORER\": \"File explorer\",\n\t\"GRANT_FEXP_PERM\": \"Please grant permissions to read file structures and list partitions.\",\n\t\"GRANT_PERM\": \"Grant permissions\",\n\t\"GRANT_FEXP_PERM_ADM\": \"Please consult the administrator to grant privileges to this program to read file structures and list partitions. (FS_READ, FS_LIST_PARTITIONS)\",\n\t\"GRANT_FEXP_PERM_USR\": \"Please grant permissions to read file structures and list partitions using a different user.\",\n\t\"BROWSE_FEXP\": \"Browse\",\n\t\"SPACE_SHOWER\": \"Space in \\\"%s\\\": %s used of %s (%s%)\",\n\t\"FILE_STRUCT_BROWSE_FAIL\": \"Could not browse to this structure:\\n%s\",\n\t\"UNKNOWN_FS_STRUCT\": \"Unknown filesystem structure \\\"%s\\\"\",\n\t\"UNKNOWN_FILE_TYPE\": \"This is an unknown file type.\",\n\t\"TMGR_PERMISSION\": \"Task manager was not permitted to run under this condition. Please contact the system administrator.\\nRequired privileges: %s\",\n\t\"TASK_MANAGER\": \"Task manager\",\n\t\"BASENAME_TASK\": \"Basename\",\n\t\"USER_TASK\": \"User\",\n\t\"TERMINATE_TASK\": \"Terminate\",\n\t\"FULL_PATH_TASK\": \"Full path\",\n\t\"ARGUMENTS_TASK\": \"Arguments\",\n\t\"REMOVING_SETUP_STATE\": \"Removing setup status\",\n\t\"LOGGING_OUT\": \"Logging out...\",\n\t\"PANIC_LINE1\": \"A critical problem has been detected while using the operating system. Its stability is at risk now.\",\n\t\"PANIC_LINE2\": \"Problem code: %s\",\n\t\"PANIC_UNSPECIFIED_ERROR\": \"UNSPECIFIED_ERROR\",\n\t\"PROBLEMATIC_COMPONENT\": \"Problematic component: %s\",\n\t\"PROBLEMATIC_PARAMS\": \"Problematic parameters: %s\",\n\t\"PROBLEMATIC_JS\": \"Problematic JavaScript: %s: %s\",\n\t\"PANIC_LINE3\": \"If you have seen this error message the first time, attempt rebooting.\",\n\t\"PANIC_LINE4\": \"If you see this error message once more, there is something wrong with the system.\",\n\t\"PANIC_LINE5\": \"You can try repairing the filesystem by placing a .fsck file on the system root mountpoint, with the value \\\"recover\\\" in it.\",\n\t\"PANIC_LINE6\": \"Proper shutdown procedure follows now:\",\n\t\"PANIC_TASK_KILLED\": \"task:%s: killed\",\n\t\"PANIC_MOUNT_UNMOUNTED\": \"mount:%s: unmounted\",\n\t\"PANIC_MOUNT_FAILED\": \"mount:%s: %s: %s\",\n\t\"SHORT_YEARS\": \"%sy\",\n\t\"SHORT_MONTHS\": \"%smo\",\n\t\"SYSADMIN_TOOLS_TITLE\": \"Sysadmin Tools\",\n\t\"SYSADMIN_TOOLS_PRIVFAIL\": \"You are not a system administrator.\",\n\t\"FSCK_BUTTON\": \"Recover lost files\",\n\t\"SWIPE_BUTTON\": \"Wipe system securely\",\n\t\"SETTING_FSCK_FLAG\": \"Creating .fsck file\",\n\t\"SETTING_FSCK_FLAG_FAILED\": \"Failed to create .fsck file.\",\n\t\"WIPING_SYSTEM\": \"Securely wiping system...\",\n\t\"WIPING_SYSTEM_FAILED\": \"Failed to securely wipe system.\",\n\t\"WORKING_HOURS_UNMET\": \"You attempted to log in outside of your working hours. Try again later.\",\n\t\"NETCONFIG_TITLE\": \"PCOS Network configurator\",\n\t\"NETCONFIG_DENY\": \"There are not enough permissions to configure PCOS Network.\",\n\t\"NETCONFIG_URLF\": \"Proxy URL: \",\n\t\"NETCONFIG_AUTO\": \"Start on OS startup\",\n\t\"NETCONFIG_UC\": \"Customizable: \",\n\t\"NETCONFIG_SAVE\": \"Save config\",\n\t\"NETCONFIG_PREDICT\": \"Predict address\",\n\t\"EMPTY_STATUSBAR\": \"Status\",\n\t\"NETCONFIG_SAVE_OK\": \"Configuration saved successfully\",\n\t\"NETCONFIG_SAVE_FAIL\": \"Failed to save config\",\n\t\"PCOS_STARTING\": \"PCOS is starting...\",\n\t\"FILE_PICKER\": \"File picker\",\n\t\"TEXT_EDITOR\": \"Text editor\",\n\t\"LOAD_BTN\": \"Load\",\n\t\"SAVE_BTN\": \"Save\",\n\t\"NETCONFIG_SYSIDM\": \"No System ID available\",\n\t\"NO_SAVE_IN_MTN\": \"You can't save in the mountpoint directory.\",\n\t\"INSTALLING_WP2L\": \"Installing wallpaper to lock screen\",\n\t\"EXIT\": \"Exit\",\n\t\"DESCRIPTION_FIELD\": \"Description: %s\",\n\t\"REMOVE_BTN\": \"Remove\",\n\t\"UNMOUNT_BTN\": \"Unmount\",\n\t\"INSTALLING_DARKMODE2L\": \"Installing dark mode preference to lock screen\",\n\t\"MESSAGE_ENTER\": \"Enter a message to display\",\n\t\"TIMEOUT_FIELD\": \"Timeout (ms)\",\n\t\"SECRET_FIELD_TXT\": \"Secret (text)\",\n\t\"SECRET_FIELD_HEX\": \"Secret (hex)\",\n\t\"REGENERATE\": \"Regenerate\",\n\t\"START_TIME_FIELD\": \"Start time\",\n\t\"END_TIME_FIELD\": \"End time\",\n\t\"PBKDF2_OPTION\": \"PBKDF2 (Password)\",\n\t\"INFORMATIVE_MESSAGE_OPTION\": \"Informative message\",\n\t\"INFORMATIVE_MESSAGE_DENY_OPTION\": \"Informative message (deny)\",\n\t\"TIMEOUT_OPTION\": \"Timeout\",\n\t\"TIMEOUT_DENY_OPTION\": \"Timeout (deny)\",\n\t\"SERVER_REPORT_OPTION\": \"Server reporting\",\n\t\"PCTOTP_OPTION\": \"PC's TOTP interpretation\",\n\t\"RFCTOTP_OPTION\": \"RFC TOTP\",\n\t\"WORKING_HOURS_OPTION\": \"Working hours\",\n\t\"PERSONAL_SECURITY_TITLE\": \"Personal Security\",\n\t\"PERSONAL_SECURITY_DENY\": \"Not enough privileges were granted for Personal Security.\",\n\t\"ADD_BTN\": \"Add\",\n\t\"OS_LOCALE\": \"en\",\n\t\"SYSTEM_SECURITY_TITLE\": \"System Security\",\n\t\"SYSTEM_SECURITY_DENY\": \"Not enough privileges were granted for System Security.\",\n\t\"EDIT\": \"Edit\",\n\t\"USER_GROUPS\": \"Groups\",\n\t\"USER_HOMEDIR\": \"Home directory\",\n\t\"REMOVE_USER_WITH_HD\": \"Remove user with home directory\",\n\t\"CREATE_HD\": \"Create home directory\",\n\t\"CREATING_HD_OK\": \"The home directory was created successfully.\",\n\t\"CREATING_HD_FAIL\": \"Failed to create the home directory.\",\n\t\"SIGNATURE_VERIFICATION_FAILED\": \"This program claims it is trusted by %s, but the system failed to verify that claim.\",\n\t\"UNKNOWN_PLACEHOLDER\": \"<Unknown>\",\n\t\"NO_APP_ALLOWLIST\": \"The system administrator requires programs to have an allowlist of permissions, but this program didn't have that list.\",\n\t\"DISCARD_BUTTON\": \"Discard lost files\",\n\t\"MOUNTPOINT\": \"Mountpoint\",\n\t\"GENERATE_PROMPT\": \"Generate?\",\n\t\"MOUNT_BUTTON\": \"Mount\",\n\t\"NEW_DIR_NAME\": \"New directory name\",\n\t\"MKDIR_BUTTON\": \"Create directory\",\n\t\"CHOWN_BUTTON\": \"Change owner\",\n\t\"CHGRP_BUTTON\": \"Change group\",\n\t\"CHMOD_BUTTON\": \"Change permissions\",\n\t\"CLIPBOARD_COPY\": \"Copy\",\n\t\"CLIPBOARD_CUT\": \"Cut\",\n\t\"CLIPBOARD_PASTE\": \"Paste\",\n\t\"CLIPBOARD_SOURCE_GONE\": \"The source no longer exists or is no longer a file.\",\n\t\"CLIPBOARD_CONFLICT\": \"The destination directory already has a file or directory with the same name.\",\n\t\"SAFE_MODE_MSG\": \"Safe mode\",\n\t\"INSTALLING_SFX\": \"Installing sound effects\",\n\t\"APP_OR_KEY_SIGNATURE_VERIFICATION_FAILED\": \"Signature verification for the program or the key signing the program failed.\",\n\t\"NO_SUCH_DEVICE\": \"No such device\",\n\t\"READ_ONLY_BMGR\": \"Writes restricted by boot manager.\",\n\t\"READ_ONLY_DEV\": \"Device is read-only\",\n\t\"NO_DIRECTORY_SUPPORT\": \"Device does not support directories\",\n\t\"NO_PERMIS_SUPPORT\": \"Device does not support permissions\",\n\t\"IS_A_DIR\": \"Is a directory\",\n\t\"NO_SUCH_FILE\": \"No such file\",\n\t\"NO_SUCH_DIR\": \"No such directory\",\n\t\"NO_SUCH_FILE_DIR\": \"No such file or directory\",\n\t\"NON_EMPTY_DIR\": \"Non-empty directory\",\n\t\"IS_A_FILE\": \"Is a file\",\n\t\"DIR_EXISTS\": \"Directory already exists\",\n\t\"FS_ACTION_FAILED\": \"Failed to perform this file system action.\",\n\t\"UNAUTHORIZED_ACTION\": \"The program does not have permissions to perform this action.\",\n\t\"CREATION_CHECK_FAILED\": \"Failed to check if this object is being created.\",\n\t\"PERMISSION_CHANGE_FAILED\": \"Failed to change permissions for this object.\",\n\t\"UPDATE_EXTRA_FAIL\": \"Failed to update apps, wallpapers, sounds.\",\n\t\"UPDATE_BOOT_FAIL\": \"Failed to update boot files.\",\n\t\"UPDATE_BUTTON\": \"Update OS\",\n\t\"TOGGLE_HIDDEN_FILES\": \"Hide/unhide files\",\n\t\"AUTORUN_NECESSITIES_FAILED\": \"Failed to run one of your autorun files. The system will not log you in.\",\n\t\"CRYPTO_TOOLS_TITLE\": \"Cryptographic Tools\",\n\t\"CRYPTO_TOOLS_NOPERM\": \"Not enough privileges were given to use Cryptographic Tools.\",\n\t\"CRYPTO_RNG\": \"Random generation\",\n\t\"CRYPTO_HASH\": \"Hashing\",\n\t\"CRYPTO_KEYGEN\": \"Key generation\",\n\t\"CRYPTO_ENCRYPT\": \"Encryption\",\n\t\"CRYPTO_DECRYPT\": \"Decryption\",\n\t\"CRYPTO_SIGN\": \"Signing\",\n\t\"CRYPTO_VERIFY\": \"Verification\",\n\t\"CRYPTO_DERIVEBITS\": \"Bit derivation\",\n\t\"GENERATE\": \"Generate\",\n\t\"RAW_HEX_DATA\": \"Raw data (hex)\",\n\t\"CRYPTO_HASH_FIELD\": \"Hash algorithm: \",\n\t\"CRYPTO_PLAINTEXT_FIELD\": \"Plaintext: \",\n\t\"ALGORITHM_FIELD\": \"Algorithm: \",\n\t\"LENGTH_FIELD\": \"Length: \",\n\t\"CRYPTO_NC_FIELD\": \"Named curve: \",\n\t\"IMPORT_AS_FIELD\": \"Import as: \",\n\t\"CRYPTO_KEY_FIELD\": \"Key: \",\n\t\"CRYPTO_CIPHERTEXT_FIELD\": \"Ciphertext (hex): \",\n\t\"CRYPTO_SIGNATURE_FIELD\": \"Signature (hex): \",\n\t\"CRYPTO_KEYGEN_MSG\": \"Generating key(s)...\",\n\t\"CRYPTO_KEYGEN_SYMM\": \"Is a symmetric key type\",\n\t\"CRYPTO_KEYGEN_EXPFAIL\": \"Export failed, check export settings\",\n\t\"CRYPTO_RNGOUT_FIELD\": \"Random numbers (hex): \",\n\t\"CRYPTO_KEYGEN_ACTION\": \"Generate key(s)\",\n\t\"CRYPTO_HASH_ACTION\": \"Hash\",\n\t\"CRYPTO_ENCRYPT_ACTION\": \"Encrypt\",\n\t\"CRYPTO_DECRYPT_ACTION\": \"Decrypt\",\n\t\"CRYPTO_SIGN_ACTION\": \"Sign\",\n\t\"CRYPTO_VERIFY_ACTION\": \"Verify\",\n\t\"CRYPTO_DERIVEBITS_ACTION\": \"Derive bits\",\n\t\"CRYPTO_PUBKEY_FIELD\": \"Public key: \",\n\t\"CRYPTO_PRIVKEY_FIELD\": \"Private key: \",\n\t\"CRYPTO_BASEKEY_FIELD\": \"Base key: \",\n\t\"CRYPTO_HASHOUT_FIELD\": \"Hash value (hex): \",\n\t\"CRYPTO_MODLEN_FIELD\": \"Modulus length: \",\n\t\"CRYPTO_PUBEXP_FIELD\": \"Public exponent (hex): \",\n\t\"EXPORT_AS_FIELD\": \"Export as: \",\n\t\"CRYPTO_KEYUSE_FIELD\": \"Key usages:\",\n\t\"CRYPTO_PLAINTEXTAS_FIELD\": \"Process plaintext as: \",\n\t\"CRYPTO_IV_FIELD\": \"IV (hex): \",\n\t\"CRYPTO_CTR_FIELD\": \"Counter (hex): \",\n\t\"CRYPTO_VERIFIED_CHECKBOX\": \"Verified successfully\",\n\t\"CRYPTO_SALT_FIELD\": \"Salt (hex): \",\n\t\"CRYPTO_DERIVEOUT_FIELD\": \"Derived bits (hex): \",\n\t\"CRYPTO_ITERATIONS_FIELD\": \"Iterations: \",\n\t\"PATH_INCLUDES_EMPTY\": \"The specified path includes an object with an empty name.\",\n\t\"BASIC_CURL_USAGE\": \"Usage: basiccurl [source] [output]\",\n\t\"BASIC_CURL_DESCRIPTION\": \"Downloads the specified source and saves it to the specified output.\",\n\t\"NO_ARGUMENTS\": \"No arguments specified\",\n\t\"CAT_USAGE\": \"Usage: cat [file1] <file2> <file3> ... <fileN>\",\n\t\"CAT_DESCRIPTION\": \"Concatenates the specified files and outputs to CLI output\",\n\t\"CHGRP_USAGE\": \"Usage: chgrp [group] [file]\",\n\t\"CHGRP_DESCRIPTION\": \"Changes the owning group of the specified file\",\n\t\"CHMOD_USAGE\": \"Usage: chmod [mode] [file]\",\n\t\"CHMOD_DESCRIPTION\": \"Changes what everyone may do with the specified file\",\n\t\"CHMOD_MODE_DESCRIPTION\": \"[mode] may consist of characters r (Read), w (Write) and x (eXecute).\",\n\t\"CHMOD_MODE_CONVERT\": \"[mode] number to string table: 0 - \\\"\\\", 1 - \\\"x\\\", 2 - \\\"w\\\", 3 - \\\"wx\\\", 4 - \\\"r\\\", 5 - \\\"rx\\\", 6 - \\\"rw\\\", 7 - \\\"rwx\\\"\",\n\t\"CHOWN_USAGE\": \"Usage: chown [user] [file]\",\n\t\"CHOWN_DESCRIPTION\": \"Changes the owning user of the specified file\",\n\t\"CP_USAGE\": \"Usage: cp <options> [source] [destination]\",\n\t\"CP_DESCRIPTION\": \"Copies files or directories from the source to the destination.\",\n\t\"OPT_RECURSIVE_DESCRIPTION\": \"--recursive: run on directories\",\n\t\"OPT_FORCE_DESCRIPTION\": \"--force: do not fail immediately in case of an error\",\n\t\"ARGUMENT_COUNT_MISMATCH\": \"Too much or not enough arguments\",\n\t\"DF_HEADER\": \"Medium\\tSize\\tUsed\\tAvail\\tUse%\",\n\t\"LS_USAGE\": \"Usage: ls [directory]\",\n\t\"LS_DESCRIPTION\": \"Lists the contents of the specified directory.\",\n\t\"LS_MOUNTPOINT_LIST\": \"You have the following mountpoints: \",\n\t\"MOUNTPOINT_SYSTEM\": \"system\",\n\t\"PASSWD_NEW_PROMPT\": \"Setting a new password for your user account.\",\n\t\"PASSWD_2FACTOR_LOSS_WARN\": \"Any previously set up additional factors will be removed.\",\n\t\"PASSWD_PROMPT\": \"New password: \",\n\t\"PASSWD_CONFIRM_PROMPT\": \"Re-enter password: \",\n\t\"PASSWD_FEEDBACK\": \"New password set\",\n\t\"PASSWD_MISMATCH\": \"Sorry, passwords do not match.\",\n\t\"PING_USAGE\": \"Usage: ping <--internet> [networkAddress]\",\n\t\"PING_DESCRIPTION\": \"Sends a request to the specified address to verify its availability.\",\n\t\"PING_INTERNET_OPTION\": \"--internet: send a ping to the Internet instead of PCOS Network\",\n\t\"PIVOT_ROOT_USAGE\": \"Usage: pivot_root [mountpoint]\",\n\t\"PIVOT_ROOT_DESCRIPTION\": \"Makes the specified mountpoint the new default system mountpoint for every program.\",\n\t\"REAL_TERMINAL_NAME\": \"Terminal\",\n\t\"REAL_TERMINAL_BUILTIN_LIST\": \"Built-in commands:\",\n\t\"REAL_TERMINAL_HELP_USEDESC\": \"help - Display the list, description and usage of all available built-in commands.\",\n\t\"REAL_TERMINAL_CLEAR_USEDESC\": \"clear - Clear everything displayed on the terminal right now.\",\n\t\"REAL_TERMINAL_SUGRAPH_USEDESC\": \"sugraph <desiredUsername> - Switch the terminal user using a graphical utility.\",\n\t\"REAL_TERMINAL_SU_USEDESC\": \"su <desiredUsername> - Switch the terminal user.\",\n\t\"REAL_TERMINAL_GRAPHIC_USEDESC\": \"graphic <boolean> - Enable or disable running new applications outside of background.\",\n\t\"REAL_TERMINAL_EXIT_USEDESC\": \"exit - Exit the terminal.\",\n\t\"REAL_TERMINAL_LOGON_REQUIRED\": \"(internal): You must run sugraph %s before running this program.\",\n\t\"RM_USAGE\": \"Usage: rm <options> [file]\",\n\t\"RM_DESCRIPTION\": \"Removes the specified file or directory.\",\n\t\"RKL_USAGE\": \"Usage: runKlvlCode [codeFile]\",\n\t\"RKL_DESCRIPTION\": \"Runs the specified code file in the kernel level.\",\n\t\"WRITE_USAGE\": \"Usage: write [file] [data]\",\n\t\"WRITE_DESCRIPTION\": \"Writes data to the specified file.\",\n\t\"CP_PERMISSIONS_OPTION\": \"--permissions: сopy the permissions of the original files\",\n\t\"REAL_TERMINAL_DEFAULT_PATH_FIELD\": \"Default path: %s\",\n\t\"REAL_TERMINAL_PUSHPATH_USEDESC\": \"pushpath [path] - Add a new path to explore to find commands.\",\n\t\"REAL_TERMINAL_RESETPATH_USEDESC\": \"resetpath - Reset the list of paths to explore to the default path.\",\n\t\"REAL_TERMINAL_LSPATH_USEDESC\": \"lspath - See the current list of paths to explore and the default path.\",\n\t\"MKDIR_USAGE\": \"Usage: mkdir [directory]\",\n\t\"MKDIR_DESCRIPTION\": \"Creates a new directory in the specified path.\",\n\t\"NEXT\": \"Next\",\n\t\"DESCRIBE_TEMPLATE\": \"Program: %s (%s)\\nIntent: %s\",\n\t\"EXTRA_DESCRIBE_TEMPLATE\": \"Program: %s (%s)\\nArguments: %s\\nIntent: %s\",\n\t\"DECLINE\": \"Decline\",\n\t\"ACCESS_REQUEST_TITLE\": \"Access request\",\n\t\"REAL_TERMINAL_INTENT\": \"Launch commands with your permissions\",\n\t\"PERSONAL_SECURITY_INTENT\": \"Manage your security settings\",\n\t\"FILE_EXPLORER_INTENT\": \"Launch programs and open files\",\n\t\"FILE_EXPLORER_FULL_INTENT\": \"Browse files, launch programs, and open files\",\n\t\"CRYPTO_TOOLS_INTENT\": \"Perform cryptographic operations\",\n\t\"SYSTEM_SECURITY_INTENT\": \"Management of the system-wide user account setup\",\n\t\"FORMAT_USAGE\": \"Usage: format [filesystem_type] [partition] <overwrite>\",\n\t\"FORMAT_DESCRIPTION\": \"Prepares the selected partition for use.\",\n\t\"FORMAT_FSTYPE\": \"Filesystem types: pcfs (corresponds to mountpoint PCFSiDBMount), pcfs_crypt (PCFSiDBAESCryptMount), pcfs_crypt_monokey (PCFSiDBAESCryptMount), pcfs_crypt_filetable_monokey (PCFSiDBAESCryptMount), pcbm:<data_partition> (like code in boot partition), null (DELETE the partition)\",\n\t\"FORMAT_OVERWRITE_WARN\": \"The partition already contains data. Set the overwrite parameter to 'overwrite' to remove data anyway. In that case, ALL DATA ON THE PARTITION MAY BE REMOVED.\",\n\t\"FORMAT_UNKNOWN_FSTYPE\": \"Unknown target formatting\",\n\t\"LLDA_USAGE\": \"Usage: llda_tool [action] [parameters]\",\n\t\"LLDA_ACTION_EXPORT\": \"action export: [input partition] [output file]\",\n\t\"LLDA_ACTION_IMPORT\": \"action import: [input file] [output partition]\",\n\t\"LLDA_ACTION_IMPORTSTRING\": \"action importstring: [input file] [output partition]\",\n\t\"LLDA_ACTION_COPY\": \"action copy: [input partition] [output partition]\",\n\t\"LLDA_ACTION_REMOVE\": \"action remove: [partition]\",\n\t\"LLDA_ACTION_LIST\": \"action list\",\n\t\"LLDA_DISCLAIMER\": \"When using this tool you may encounter LOSS OF DATA!\",\n\t\"LLDA_UNKNOWN_ACTION\": \"Unknown action\",\n\t\"INITDISK_OVERWRITE_WARN\": \"The system disk already contains partitioning data. Set the overwrite parameter to 'overwrite' to remove data anyway. In that case, ALL DATA ON THE DISK MAY BE REMOVED.\",\n\t\"INITDISK_USAGE\": \"Usage: initdisk [whatever] <overwrite>\",\n\t\"INITDISK_DESCRIPTION\": \"Prepares the system disk for use.\",\n\t\"MOUNT_USAGE\": \"Usage: mount [options] [fs_type] [mountpoint]\",\n\t\"MOUNT_DESCRIPTION\": \"Mounts a filesystem.\",\n\t\"MOUNT_KNOWN_FS\": \"Known filesystems: %s\",\n\t\"MOUNT_KNOWN_PPART\": \"--partition=[dataPartition] - Specify the data partition\",\n\t\"MOUNT_KNOWN_PINPA\": \"--interactivePassword - Ask for the password interactively\",\n\t\"MOUNT_KNOWN_PPASS\": \"--password=[password] - Specify the password\",\n\t\"MOUNT_KNOWN_PKEY\": \"--key=[hexKey] - Specify the encryption key\",\n\t\"MOUNT_KNOWN_PTYPE\": \"--type=[type] - For ramMount, specify type=run to create /run\",\n\t\"MOUNT_KNOWN_PURL\": \"--url=[URL] - Specify the URL\",\n\t\"MOUNT_KNOWN_PINPI\": \"--inputPipeId=[pipeId] - Specify the input pipe\",\n\t\"MOUNT_KNOWN_POUPI\": \"--outputPipeId=[pipeId] - Specify the output pipe\",\n\t\"MOUNTINFO_USAGE\": \"Usage: mountinfo [mountpoint]\",\n\t\"MOUNTINFO_DESCRIPTION\": \"Get information about a mountpoint.\",\n\t\"UMOUNT_USAGE\": \"Usage: umount <options> [mountpoint]\",\n\t\"UMOUNT_DESCRIPTION\": \"Unmounts a filesystem.\",\n\t\"UMOUNT_OPT_SYNCONLY\": \"--sync-only - Only sync the filesystem, not unmount (overrides --force)\",\n\t\"UMOUNT_OPT_FORCE\": \"--force - Force unmount the filesystem, do not sync\",\n\t\"CALC_TITLE\": \"Calculator\",\n\t\"CALC_BASIC_MODE\": \"Calculator: Basic mode\",\n\t\"CALC_ADVANCED_MODE\": \"Calculator: Advanced mode\",\n\t\"CALC_ADD\": \"Add\",\n\t\"CALC_SUBTRACT\": \"Subtract\",\n\t\"CALC_MULTIPLY\": \"Multiply\",\n\t\"CALC_DIVIDE\": \"Divide\",\n\t\"CALC_ADVMODE_BTN\": \"Advanced mode\",\n\t\"CALC_BASICMODE_BTN\": \"Basic mode\",\n\t\"CALC_OPERAND\": \"Operand %s\",\n\t\"CALC_TOMIXED_BTN\": \"Convert to mixed fraction\",\n\t\"CALC_TOIMPR_BTN\": \"Convert to improper fraction\",\n\t\"CALC_GCD\": \"GCD\",\n\t\"CALC_FACTORIAL\": \"Factorial\",\n\t\"CALC_GCD_PAGE\": \"Greatest common divisor\",\n\t\"ZKPP_OPTION\": \"ZKPP (Password)\",\n\t\"SECONDSTAGE_INSTALLER_INTENT\": \"Complete the OS configuration\",\n\t\"SETUP_FAILED\": \"Setting up PCOS failed. Please try again by rebooting.\",\n\t\"WARNING_PRIVILEGES\": \"Be careful with this feature! You may compromise system security.\",\n\t\"USER_EXT_PRIVILEGES\": \"Extended privilege set\",\n\t\"LULL_SYSTEM\": \"Sleep mode\",\n\t\"SYSTEM_IMAGING\": \"System imaging\",\n\t\"CREATE_IMAGE\": \"Create system image\",\n\t\"RESTORE_IMAGE\": \"Restore system image\",\n\t\"SELECT_FILE_PROMPT\": \"Select file: \",\n\t\"REBOOT_ON_RESTORE\": \"Reboot after restoring\",\n\t\"MERGE_STATES\": \"Merge image states\",\n\t\"LISTING_PARTITIONS_FAILED\": \"Failed to list partitions.\",\n\t\"READING_PARTITION_FAILED\": \"Failed to read partition %s\",\n\t\"LISTING_DATA_FAILED\": \"Failed to list data.\",\n\t\"READING_DATA_FAILED\": \"Failed to read data.\",\n\t\"WRITING_IMAGE_FAILED\": \"Failed to write image.\",\n\t\"SUCCESSFUL_OP\": \"The process was successfully completed.\",\n\t\"FAILED_OP\": \"The process has failed.\",\n\t\"READING_IMAGE_FAILED\": \"Failed to read image.\",\n\t\"WRITING_PARTITION_FAILED\": \"Failed to write partition %s\",\n\t\"WRITING_DATA_FAILED\": \"Failed to write data.\",\n\t\"DELETING_PARTITION_FAILED\": \"Failed to delete partition %s\",\n\t\"DELETING_DATA_FAILED\": \"Failed to delete data.\",\n\t\"SHUTTING_DOWN_FAILED\": \"Failed to shut the system down.\",\n\t\"NETWORK_STATUS_ONLINE\": \"You are connected to a local area network.\",\n\t\"NETWORK_STATUS_OFFLINE\": \"You aren't connected to any sort of network.\",\n\t\"PCOS_NETWORK_STATUS_ONLINE\": \"You are connected to PCOS Network. (hostname: %s, address: %s)\",\n\t\"PCOS_NETWORK_STATUS_OFFLINE\": \"You are disconnected from PCOS Network.\",\n\t\"PCOS_NETWORK_STATUS_STOPPED\": \"The PCOS Network service was stopped.\",\n\t\"START_MENU_FAILED\": \"The start menu has failed to launch. You can log out instead.\",\n\t\"SYSTEM_BUILT_AT\": \"System built at %s\",\n\t\"REAL_TERMINAL_VER_USEDESC\": \"ver - Show the build version and time\",\n\t\"BLANK_PRIVILEGE_FLAG\": \"Blank user privileges\",\n\t\"INSTALLING_SYSTEM_APPHARDEN\": \"Installing program security rules\",\n\t\"INSTALLING_NET_CONF\": \"Installing PCOS Network configuration\",\n\t\"NETWORK_ADDRESS_FIELD\": \"Network address: %s\",\n\t\"NETWORK_AUTOHOST_FIELD\": \"Automatic hostname: %s\",\n\t\"NETCONFIG_HOSTNAME\": \"Hostname: \",\n\t\"DIFF_USAGE\": \"Usage: diff [original] [new] [difference]\",\n\t\"DIFF_DESCRIPTION\": \"Calculates the difference between two files.\",\n\t\"PATCH_USAGE\": \"Usage: patch [original] [difference] [new]\",\n\t\"PATCH_DESCRIPTION\": \"Calculates the 'sum' of the original and the difference.\",\n\t\"SYSTEM_UP_TO_DATE\": \"The system is up to date\",\n\t\"POWER_USAGE\": \"Usage: power <options> <r|reboot|restart|k|kexec>\",\n\t\"POWER_DESCRIPTION\": \"Powers down or restarts the system. Supplying nothing to power makes a shutdown.\",\n\t\"POWER_FORCE\": \"--force: don't wait for processes, reboot or power down immediately\",\n\t\"POWER_KEXEC\": \"--kexec: reboot without reloading the page or firmware (automatically toggles reboot)\",\n\t\"UPDATEFW_BUTTON\": \"Update firmware\",\n\t\"UPDATEFW_DOWNLOADING\": \"Downloading local init.js...\",\n\t\"UPDATEFW_DOWNLOAD_FAILED\": \"Failed to download local init.js.\",\n\t\"UPDATEFW_DECODING\": \"Parsing init.js as text\",\n\t\"UPDATEFW_SETTING\": \"Setting init.js as firmware\",\n\t\"ADDUSER_USAGE\": \"Usage: adduser <options> [username]\",\n\t\"ADDUSER_DESCRIPTION\": \"Creates a new user account.\",\n\t\"ADDUSER_SKIP_PASSWD\": \"--skip-passwd: don't prompt for a password\",\n\t\"ADDUSER_SKIP_HOME\": \"--skip-home: don't create a home directory\",\n\t\"ADDUSER_GROUPS\": \"--groups: group to add (specify multiple times for multiple groups)\",\n\t\"ADDUSER_HOME\": \"--home: custom home directory\",\n\t\"NEW_USER_CREATION\": \"Creating new user \\\"%s\\\"\",\n\t\"BLOCKUSER_USAGE\": \"Usage: blockuser <username>\",\n\t\"BLOCKUSER_DESCRIPTION\": \"Blocks a user account.\",\n\t\"DELUSER_USAGE\": \"Usage: deluser <options> [username]\",\n\t\"DELUSER_DESCRIPTION\": \"Deletes a user account.\",\n\t\"DELUSER_HOMEDIR\": \"--homedir: delete the home directory\",\n\t\"OLD_USER_DELETION\": \"Deleting old user \\\"%s\\\"\",\n\t\"BATTERY_STATUS_UNAVAILABLE\": \"The battery status is unavailable.\",\n\t\"BATTERY_STATUS_CHARGING\": \"The battery is charging (%s%, %suntil full)\",\n\t\"BATTERY_STATUS_DISCHARGING\": \"The battery is discharging (%s%, %sof play)\",\n\t\"PATCH_HUNK_COUNT\": \"Patch hunks: %s\",\n\t\"SERVER_SIGNATURE_VERIFICATION_FAILED\": \"Signature verification for the server failed.\",\n\t\"NETWORK_UNREACHABLE\": \"Network is unreachable.\",\n\t\"ADDRESS_UNREACHABLE\": \"Address is unreachable.\",\n\t\"NETWORK_CLOSED\": \"The network has closed.\",\n\t\"CONNECTION_DROPPED\": \"The connection has been dropped.\",\n\t\"BLOG_BROWSER_NAME\": \"Blog Browser\",\n\t\"BLOG_BROWSER_LOADING\": \"Hold on, loading this page...\",\n\t\"BLOG_BROWSER_PROTO\": \"There's no such protocol. This version only supports the bdp:// protocol.\",\n\t\"BLOG_BROWSER_GATESET\": \"To set a connful gate, use the username part of the URL: bdp://gate@myblog.pc\",\n\t\"HOSTNAME_RESOLUTION_FAILED\": \"Failed to resolve hostname.\",\n\t\"BLOG_BROWSER_POSTCLOSE\": \"This interactive post has been closed.\",\n\t\"BLOG_BROWSER_FILEPOST\": \"This is a file post. You can save it to this system.\",\n\t\"BLOG_BROWSER_DLFILEPOST\": \"You have downloaded this file post.\",\n\t\"BLOG_BROWSER_LOADING_PROGRESS\": \"Loading this post (%s of %s chunks received)\",\n\t\"BLOG_BROWSER_NOVERIFY\": \"You have enabled an option to disable the verification of the server. This is not recommended as the network proxy can execute a man-in-the-middle attack and see your information. Would you let that happen?\",\n\t\"BLOG_BROWSER_NOSANDBOX\": \"You have enabled an option to pass through all APIs of your operating system. This is not recommended as the blog post can do anything as if it were the blog browser application. Would you let that happen?\",\n\t\"NETWORKFS_USAGE\": \"Usage: networkfs <options> [url] [mountpoint]\",\n\t\"NETWORKFS_DESCRIPTION\": \"Mounts a filesystem available over PCOS Network.\",\n\t\"NETWORKFS_NOVERIFY\": \"--no-verification: Don't verify the server's key\",\n\t\"NETWORKFS_KEY\": \"--key=[path]: Path to key for mutual verification\",\n\t\"NETWORKFS_PROTO\": \"This version only supports the netfs:// protocol.\",\n\t\"NETCONFIG_UPDATES\": \"Updates from: \",\n\t\"NETWORK_UPDATES_FIELD\": \"Updates from: %s\",\n\t\"LOCALE_NAME\": \"English\",\n\t\"SETTING_LOCALE_PREFERENCE\": \"Setting locale preference\",\n\t\"LANGUAGE_SELECT\": \"Your language: \",\n\t\"CHANGE_LOCALE\": \"Change language\",\n\t\"INSTALLER_INTENT\": \"Start the OS installation\",\n\t\"MOUNT_EXISTS\": \"Mount already exists\",\n\t\"INSECURE_MODE_MSG\": \"Insecure configuration!\",\n\t\"MODULE_REQUIRED\": \"The module \\\"%s\\\" is required for this function. Contact the system administrator.\",\n\t\"CREATING_DIRECTORY_STRUCTURE\": \"Creating directory structures\",\n\t\"GENERATING_KERNEL\": \"Generating system kernel\",\n\t\"REGENERATE_KERNEL\": \"Regenerate system kernel\",\n\t\"REGENERATING_KERNEL_FAILED\": \"Failed to regenerate system kernel\",\n\t\"TECHNICAL_LIMITATIONS\": \"This file can't be created due to technical limitations.\",\n\t\"REVIEWING_MIGRATION\": \"Reviewing migration paths\",\n\t\"MIGRATING_USER_PROFILES\": \"Migrating user profiles\",\n\t\"UPDATING_MODCFG\": \"Getting module configuration\",\n\t\"UPDATING_MODULES\": \"Updating modules\",\n\t\"FAILED_TO_UPDATE\": \"Failed to update modules\",\n\t\"UPDATE_COUNTING\": \"Counting updatable modules\",\n\t\"UPDATE_COUNT\": \"%s modules can be updated\",\n\t\"UPDATE_MODCFG\": \"Update module configuration\",\n\t\"INSTALL_ONLINE_MODULE\": \"Install online modules\",\n\t\"REMOVE_MODULES\": \"Remove modules\",\n\t\"MODMGR_PRIVFAIL\": \"Not enough permissions were granted for module management.\",\n\t\"MODMGR_TITLE\": \"Module Manager\",\n\t\"MODMGR_INTENT\": \"Manage and maintain modules on this system\",\n\t\"INSTALLING_MODULE\": \"Installing module: %s (%s of %s, %s%)\",\n\t\"MODNAME_CELL\": \"Module name\",\n\t\"MODVER_CELL\": \"Module version\",\n\t\"MODTGT_CELL\": \"Targeted build\",\n\t\"APPLY_CHANGES\": \"Apply changes\",\n\t\"DISCARD_CHANGES\": \"Discard changes\",\n\t\"REMOVING_MODULE\": \"Removing module: %s (%s of %s, %s%)\",\n\t\"RELOADING_MODULES\": \"Reloading system modules\"\n};\n"},"buildInfo":{"for":"1390","version":1390,"when":1755547941365,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"8337b463097c85713b2fbc231cfa264a5a4a80af66d5696fa35f733e072785753fe6772740b657f5208abef1ecd2ae7a3533a96e2666f49bf65e0644d789140f"}},"50-locale-ru.fs":{"backend":{"files":{"boot":{"06-localesappend-ru.js":"bd7adef7c49f8f987a0db761b701e7b6b33ce0b5c41a19e878c20f6f9a2377b875b902c54ed57f54bbf6bdb92b815cea163f0e41945edda9fb6320dc55673fe0"}},"permissions":{"boot/06-localesappend-ru.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"bd7adef7c49f8f987a0db761b701e7b6b33ce0b5c41a19e878c20f6f9a2377b875b902c54ed57f54bbf6bdb92b815cea163f0e41945edda9fb6320dc55673fe0":"modules.locales.ru = {\n\t\"UNTITLED_APP\": \"Безымянная программа\",\n\t\"PERMISSION_DENIED\": \"Отказано в доступе\",\n\t\"MORE_PERMISSION_DENIED\": \"Недостаточно прав для запуска этой программы.\",\n\t\"COMPATIBILITY_ISSUE_TITLE\": \"Проблема с совместимостью\",\n\t\"COMPATIBILITY_ISSUE\": \"Эта программа не может запускаться на этом компьютере как задача. Проверьте, есть ли у приложения режим \\\"isolatable\\\".\",\n\t\"APP_STARTUP_CRASH_TITLE\": \"Что-то пошло не так\",\n\t\"APP_STARTUP_CRASH\": \"Системе не удалось запустить эту программу.\",\n\t\"JS_TERMINAL\": \"Терминал JavaScript\",\n\t\"TERMINAL_INVITATION\": \"PCOS 3, сборка %s\",\n\t\"PCOS_RESTARTING\": \"PCOS перезагружается. %s\",\n\t\"PLEASE_WAIT\": \"Пожалуйста, подождите.\",\n\t\"POLITE_CLOSE_SIGNAL\": \"Отправка сигнала закрытия.\",\n\t\"ABRUPT_CLOSE_SIGNAL\": \"Отправка аварийного закрытия.\",\n\t\"UNMOUNTING_MOUNTS\": \"Размонтирование точек монтирования.\",\n\t\"SAFE_TO_CLOSE\": \"Теперь эту вкладку можно закрыть.\",\n\t\"RESTART_BUTTON\": \"Перезапустить\",\n\t\"RESTARTING\": \"Выполняется перезагрузка.\",\n\t\"INSTALL_PCOS\": \"Установить PCOS\",\n\t\"INSTALLER_TITLE\": \"Установщик PCOS 3\",\n\t\"CLOSE_INSTALLER_CONFIRMATION\": \"Вы уверены, что хотите остановить установку? Этот компьютер перезапустится.\",\n\t\"YES\": \"Да\",\n\t\"NO\": \"Нет\",\n\t\"INSTALLER_INVITATION\": \"Вы устанавливаете PCOS 3 сборки %s на этом компьютере.\",\n\t\"INSTALL_BUTTON\": \"Установить\",\n\t\"LIVE_BUTTON\": \"Попробовать\",\n\t\"INSTALLER_PARTITIONING\": \"Выберите разделы загрузки и данных, которые вы хотите использовать.\",\n\t\"PARTITIONING_USE\": \"Использовать разделы\",\n\t\"PARTITION_DATA\": \"Раздел данных\",\n\t\"PARTITION_BOOT\": \"Раздел загрузки\",\n\t\"FORMAT_DATA\": \"Форматировать в PCFS\",\n\t\"DATA_INPUT_ALERT\": \"Введите имя раздела данных.\",\n\t\"PROMPT_PARTITION_TABLE\": \"Этот диск, кажется, не содержит таблицу разделов. Вы хотите вставить таблицу разделов?\",\n\t\"CONFIRM_PARTITION_ERASE\": \"Все данные на этом разделе будут удалены. Продолжить?\",\n\t\"BOOT_INPUT_ALERT\": \"Введите имя раздела загрузки.\",\n\t\"CANNOT_FIND_PARTITION\": \"Не удаётся найти раздел диска. Попробуйте форматировать раздел данных в PCFS.\",\n\t\"PCFS_DETECTION_ERROR\": \"Раздел данных, кажется, не содержит PCFS. Вы хотите использовать его?\",\n\t\"INSTALLING_PCOS\": \"Установка PCOS: %s\",\n\t\"CREATING_BOOT_PARTITION\": \"Создание раздела загрузки\",\n\t\"MOUNTING_DATA_PARTITION\": \"Монтирование раздела данных как 'target'\",\n\t\"CHANGING_ROOT_PERMISSIONS\": \"Изменение разрешений /\",\n\t\"COPYING_FOLDERS\": \"Копирование каталогов\",\n\t\"PREPARING_FOR_COPY\": \"Подготовка к копированию\",\n\t\"PATCHING_FS\": \"Изменение для монтирования раздела данных\",\n\t\"INSTALLATION_SUCCESSFUL\": \"Установка успешна. Закройте окно для перезагрузки.\",\n\t\"INSTALLATION_FAILED\": \"Установка не удалась. Попробуйте ещё раз. Закройте окно для перезагрузки.\",\n\t\"CREATING_DIR\": \"Создание %s\",\n\t\"COPYING_FILE\": \"Копирование %s\",\n\t\"COMPLETE_COPY\": \"Копирование %s завершено\",\n\t\"REMOVING_OBJECT\": \"Удаление %s\",\n\t\"COMPLETE_REMOVE\": \"Удаление %s завершено\",\n\t\"SHORT_DAYS\": \"%sдн\",\n\t\"SHORT_HOURS\": \"%sч\",\n\t\"SHORT_MINUTES\": \"%sмин\",\n\t\"SHORT_SECONDS\": \"%sс\",\n\t\"SHORT_MILLISECONDS\": \"%sмс\",\n\t\"SHORT_TERABYTES\": \"%sТБ\",\n\t\"SHORT_GIGABYTES\": \"%sГБ\",\n\t\"SHORT_MEGABYTES\": \"%sМБ\",\n\t\"SHORT_KILOBYTES\": \"%sКБ\",\n\t\"SHORT_BYTES\": \"%sБ\",\n\t\"AUTH_FAILED_NEW\": \"Аутентификация не удалась, пожалуйста, используйте новую сессию!\",\n\t\"AUTH_SUCCESS\": \"Аутентификация успешна!\",\n\t\"AUTH_FAILED\": \"Аутентификация не удалась.\",\n\t\"PLEASE_WAIT_TIME\": \"Пожалуйста, подождите %s\",\n\t\"REPORTING_LOGON\": \"Сообщаю о входе в систему серверу...\",\n\t\"TOTP_PC_PROMPT\": \"Введите код TOTP-PC\",\n\t\"TOTP_PROMPT\": \"Введите код TOTP\",\n\t\"ACCESS_NOT_SETUP\": \"Доступ к данному пользователю не настроен\",\n\t\"PASSWORD_PROMPT\": \"Введите пароль\",\n\t\"ENTER_BUTTON\": \"Ввод\",\n\t\"USERNAME_PROMPT\": \"Введите имя пользователя\",\n\t\"USERNAME\": \"Имя пользователя\",\n\t\"ACCESS_FN_FAIL\": \"Нет такого пользователя.\",\n\t\"PROMPT_GET_FAIL\": \"Что-то пошло не так при получении вопроса аутентификации.\",\n\t\"LET_TRY_AGAIN\": \"Давайте попробуем ещё раз.\",\n\t\"RESPONSE_PLACEHOLDER\": \"Ответ...\",\n\t\"START_MENU_BTN\": \"Пуск\",\n\t\"START_MENU\": \"Меню \\\"Пуск\\\"\",\n\t\"LOG_IN_INVITATION\": \"Войти в систему\",\n\t\"LOG_OUT_BUTTON\": \"Выйти (%s)\",\n\t\"LOCK_BUTTON\": \"Заблокировать\",\n\t\"TERMINAL_BUTTON\": \"Терминал\",\n\t\"TURN_OFF_BUTTON\": \"Выключить\",\n\t\"PASSWORD\": \"Пароль\",\n\t\"SET_UP_PCOS\": \"Настройка PCOS\",\n\t\"LET_SETUP_SYSTEM\": \"Давайте теперь настроим систему.\",\n\t\"SET_UP\": \"Настроить\",\n\t\"LET_CREATE_ACCOUNT\": \"Давайте создадим вашу учётную запись.\",\n\t\"CREATE\": \"Создать\",\n\t\"PASSWORD_INPUT_ALERT\": \"Введите пароль.\",\n\t\"SETUP_SUCCESSFUL\": \"Настройка успешна. Закройте окно для входа в систему.\",\n\t\"CREATING_USER_STRUCTURE\": \"Создание структуры пользователей\",\n\t\"CREATING_USER\": \"Создание пользователя\",\n\t\"INSTALLING_WPS\": \"Установка фонов\",\n\t\"INSTALLING_APPS\": \"Установка программ\",\n\t\"INSTALLING_WP2U\": \"Установка фона на пользователя\",\n\t\"REMOVING_2STAGE\": \"Удаление установщика 2-го этапа\",\n\t\"PATCHING_LOGON\": \"Изменение для требования входа в систему\",\n\t\"CONFIRM\": \"Подтвердить\",\n\t\"RIGHT_REVIEW\": \"Давайте рассмотрим ваши права.\",\n\t\"RIGHT_REVIEW_BTN\": \"Принять лицензию\",\n\t\"DARK_MODE\": \"Тёмная тема\",\n\t\"INSTALLING_DARKMODE\": \"Установка предпочтения тёмной темы\",\n\t\"CREATING_USER_HOME\": \"Создание домашнего каталога пользователя\",\n\t\"PROVISIONED_PREFERENCE\": \"Эта настройка управляется системным администратором.\",\n\t\"USERNAME_EXISTS\": \"Этот пользователь уже существует в системе.\",\n\t\"VIDEO_PLAYER\": \"Видеопроигрыватель\",\n\t\"INACCESSIBLE_FILE\": \"%s недоступен. Убедитесь, что у вас есть разрешения на доступ к нему, и что объект существует.\",\n\t\"FILE_NOT_SPECIFIED\": \"Файл не указан.\",\n\t\"PICTURE_VIEWER\": \"Просмотр изображений\",\n\t\"API_TEST_TERM\": \"Терминал API-разработчика\",\n\t\"HELP_TERMINAL_APITEST\": \"help - Показать справочное меню\\r\\nclear - Очистить терминал\\r\\njs_ree - Запустить код JavaScript\\r\\n--- ЭКСПОРТИРОВАННЫЕ ИПП СОВ ---\\r\\n\",\n\t\"TERM_COMMAND_NOT_FOUND\": \"%s: команда не найдена\",\n\t\"FILE_EXPLORER\": \"Проводник\",\n\t\"GRANT_FEXP_PERM\": \"Пожалуйста, предоставьте разрешения на чтение файловых структур и просмотр списка разделов.\",\n\t\"GRANT_PERM\": \"Предоставить разрешения\",\n\t\"GRANT_FEXP_PERM_ADM\": \"Свяжитесь с администратором, чтобы предоставить разрешения на чтение файловых структур и просмотр списка разделов. (FS_READ, FS_LIST_PARTITIONS)\",\n\t\"GRANT_FEXP_PERM_USR\": \"Пожалуйста, предоставьте разрешения на чтение файловых структур и просмотр списка разделов используя иную учётную запись.\",\n\t\"BROWSE_FEXP\": \"Просмотр\",\n\t\"SPACE_SHOWER\": \"Хранение в \\\"%s\\\": использовано %s из %s (%s%)\",\n\t\"FILE_STRUCT_BROWSE_FAIL\": \"Невозможно просмотреть структуру:\\n%s\",\n\t\"UNKNOWN_FS_STRUCT\": \"Неизвестная файловая структура \\\"%s\\\"\",\n\t\"UNKNOWN_FILE_TYPE\": \"Это неизвестный тип файла.\",\n\t\"TMGR_PERMISSION\": \"Диспетчеру задач не разрешено запускаться при этих условиях. Свяжитесь с системным администратором\\nТребуемые разрешения: %s\",\n\t\"TASK_MANAGER\": \"Диспетчер задач\",\n\t\"BASENAME_TASK\": \"Имя\",\n\t\"USER_TASK\": \"Пользователь\",\n\t\"TERMINATE_TASK\": \"Завершить\",\n\t\"FULL_PATH_TASK\": \"Полный путь\",\n\t\"ARGUMENTS_TASK\": \"Параметры\",\n\t\"REMOVING_SETUP_STATE\": \"Удаление статуса установки\",\n\t\"LOGGING_OUT\": \"Выход из системы...\",\n\t\"PANIC_LINE1\": \"При использовании операционной системы была обнаружена критическая ошибка. Стабильность системы под угрозой.\",\n\t\"PANIC_LINE2\": \"Код ошибки: %s\",\n\t\"PANIC_UNSPECIFIED_ERROR\": \"НЕУКАЗАННАЯ_ОШИБКА\",\n\t\"PROBLEMATIC_COMPONENT\": \"Проблемный компонент: %s\",\n\t\"PROBLEMATIC_PARAMS\": \"Проблемные параметры: %s\",\n\t\"PROBLEMATIC_JS\": \"Проблемный JavaScript: %s: %s\",\n\t\"PANIC_LINE3\": \"Если вы видите эту ошибку в первый раз, попробуйте перезагрузить систему.\",\n\t\"PANIC_LINE4\": \"Если вы видите эту ошибку ещё раз, это значит, что что-то не так с системой.\",\n\t\"PANIC_LINE5\": \"Вы можете попытаться восстановить файловую систему, расположив файл .fsck в корневой точке монтирования системы, со значением \\\"recover\\\" в нём.\",\n\t\"PANIC_LINE6\": \"Далее выполняется процедура завершения работы:\",\n\t\"PANIC_TASK_KILLED\": \"задача:%s: убита\",\n\t\"PANIC_MOUNT_UNMOUNTED\": \"точка:%s: размонтирована\",\n\t\"PANIC_MOUNT_FAILED\": \"точка:%s: %s: %s\",\n\t\"SHORT_YEARS\": \"%sг\",\n\t\"SHORT_MONTHS\": \"%sмес\",\n\t\"SYSADMIN_TOOLS_TITLE\": \"Утилиты для сисадминов\",\n\t\"SYSADMIN_TOOLS_PRIVFAIL\": \"Вы не являетесь системным администратором.\",\n\t\"FSCK_BUTTON\": \"Восстановить потерянные файлы\",\n\t\"SWIPE_BUTTON\": \"Безопасно удалить систему\",\n\t\"SETTING_FSCK_FLAG\": \"Создание файла .fsck...\",\n\t\"SETTING_FSCK_FLAG_FAILED\": \"Не удалось создать файл .fsck.\",\n\t\"WIPING_SYSTEM\": \"Безопасное удаление системы...\",\n\t\"WIPING_SYSTEM_FAILED\": \"Не удалось безопасно удалить систему.\",\n\t\"WORKING_HOURS_UNMET\": \"Вы попытались войти в систему вне рабочего времени. Повторите попытку позже.\",\n\t\"NETCONFIG_TITLE\": \"Конфигурация PCOS Network\",\n\t\"NETCONFIG_DENY\": \"Недостаточно разрешений для конфигурации PCOS Network.\",\n\t\"NETCONFIG_URLF\": \"URL прокси: \",\n\t\"NETCONFIG_AUTO\": \"Запускать при загрузке ОС\",\n\t\"NETCONFIG_UC\": \"Изменяемое: \",\n\t\"NETCONFIG_SAVE\": \"Сохранить конфиг.\",\n\t\"NETCONFIG_PREDICT\": \"Предсказать адрес\",\n\t\"EMPTY_STATUSBAR\": \"Статус\",\n\t\"NETCONFIG_SAVE_OK\": \"Конфигурация успешно сохранена\",\n\t\"NETCONFIG_SAVE_FAIL\": \"Конфигурация НЕ сохранена!\",\n\t\"PCOS_STARTING\": \"PCOS приступает к работе...\",\n\t\"FILE_PICKER\": \"Выбор файла\",\n\t\"TEXT_EDITOR\": \"Текстовый редактор\",\n\t\"LOAD_BTN\": \"Загрузить\",\n\t\"SAVE_BTN\": \"Сохранить\",\n\t\"NETCONFIG_SYSIDM\": \"System ID недоступен\",\n\t\"NO_SAVE_IN_MTN\": \"Нельзя выполнять сохранение в папке монтирований.\",\n\t\"INSTALLING_WP2L\": \"Установка фона на экран блокировки\",\n\t\"EXIT\": \"Выйти\",\n\t\"DESCRIPTION_FIELD\": \"Описание: %s\",\n\t\"REMOVE_BTN\": \"Удалить\",\n\t\"UNMOUNT_BTN\": \"Размонтировать\",\n\t\"INSTALLING_DARKMODE2L\": \"Установка предпочтения тёмной темы на экран блокировки\",\n\t\"MESSAGE_ENTER\": \"Введите сообщение для отображения\",\n\t\"TIMEOUT_FIELD\": \"Ожидание (мс)\",\n\t\"SECRET_FIELD_TXT\": \"Секретное значение (текст)\",\n\t\"SECRET_FIELD_HEX\": \"Секретное значение (шестнадцатиричное)\",\n\t\"REGENERATE\": \"Регенерировать\",\n\t\"START_TIME_FIELD\": \"Время начала\",\n\t\"END_TIME_FIELD\": \"Время конца\",\n\t\"PBKDF2_OPTION\": \"PBKDF2 (Пароль)\",\n\t\"INFORMATIVE_MESSAGE_OPTION\": \"Информативное сообщение\",\n\t\"INFORMATIVE_MESSAGE_DENY_OPTION\": \"Информативное сообщение (отказ)\",\n\t\"TIMEOUT_OPTION\": \"Ожидание\",\n\t\"TIMEOUT_DENY_OPTION\": \"Ожидание (отказ)\",\n\t\"SERVER_REPORT_OPTION\": \"Сообщение серверу\",\n\t\"PCTOTP_OPTION\": \"Интерпретация TOTP от PC\",\n\t\"RFCTOTP_OPTION\": \"TOTP по RFC\",\n\t\"WORKING_HOURS_OPTION\": \"График работы\",\n\t\"PERSONAL_SECURITY_TITLE\": \"Личная безопасность\",\n\t\"PERSONAL_SECURITY_DENY\": \"Было предоставлено недостаточно привилегий для запуска Личной безопасности.\",\n\t\"ADD_BTN\": \"Добавить\",\n\t\"OS_LOCALE\": \"ru\",\n\t\"SYSTEM_SECURITY_TITLE\": \"Безопасность системы\",\n\t\"SYSTEM_SECURITY_DENY\": \"Было предоставлено недостаточно привилегий для запуска Безопасности системы.\",\n\t\"EDIT\": \"Редактировать\",\n\t\"USER_GROUPS\": \"Группы\",\n\t\"USER_HOMEDIR\": \"Домашний каталог\",\n\t\"REMOVE_USER_WITH_HD\": \"Удалить с домашним каталогом\",\n\t\"CREATE_HD\": \"Создать домашний каталог\",\n\t\"CREATING_HD_OK\": \"Домашний каталог успешно создан.\",\n\t\"CREATING_HD_FAIL\": \"Не удалось создать домашний каталог.\",\n\t\"SIGNATURE_VERIFICATION_FAILED\": \"Эта программа утверждает, что ей доверяет %s, но системе не удалось проверить это утверждение.\",\n\t\"UNKNOWN_PLACEHOLDER\": \"<Неизвестно>\",\n\t\"NO_APP_ALLOWLIST\": \"Системный администратор требует, чтобы у программ был белый список разрешений, но у этого программы нет этого списка.\",\n\t\"DISCARD_BUTTON\": \"Удалить потерянные файлы\",\n\t\"MOUNTPOINT\": \"Точка монтирования\",\n\t\"GENERATE_PROMPT\": \"Сгенерировать?\",\n\t\"MOUNT_BUTTON\": \"Монтировать\",\n\t\"NEW_DIR_NAME\": \"Имя нового каталога\",\n\t\"MKDIR_BUTTON\": \"Создать каталог\",\n\t\"CHOWN_BUTTON\": \"Сменить владельца\",\n\t\"CHGRP_BUTTON\": \"Сменить группу\",\n\t\"CHMOD_BUTTON\": \"Сменить разрешения\",\n\t\"CLIPBOARD_COPY\": \"Копировать\",\n\t\"CLIPBOARD_CUT\": \"Вырезать\",\n\t\"CLIPBOARD_PASTE\": \"Вставить\",\n\t\"CLIPBOARD_SOURCE_GONE\": \"Источник больше не существует или не файл.\",\n\t\"CLIPBOARD_CONFLICT\": \"В папке назначения уже есть файл или каталог с таким именем.\",\n\t\"SAFE_MODE_MSG\": \"Безопасный режим\",\n\t\"INSTALLING_SFX\": \"Установка звуковых эффектов\",\n\t\"APP_OR_KEY_SIGNATURE_VERIFICATION_FAILED\": \"Проверка подписи программы или ключа, который подписал программу не удалась.\",\n\t\"NO_SUCH_DEVICE\": \"Нет такого устройства\",\n\t\"READ_ONLY_BMGR\": \"Записи ограничены загрузчиком ОС.\",\n\t\"READ_ONLY_DEV\": \"Устройство только для чтения\",\n\t\"NO_DIRECTORY_SUPPORT\": \"Устройство не поддерживает каталоги\",\n\t\"NO_PERMIS_SUPPORT\": \"Устройство не поддерживает разрешения\",\n\t\"IS_A_DIR\": \"Является каталогом\",\n\t\"NO_SUCH_FILE\": \"Нет такого файла\",\n\t\"NO_SUCH_DIR\": \"Нет такого каталога\",\n\t\"NO_SUCH_FILE_DIR\": \"Нет такого файла или каталога\",\n\t\"NON_EMPTY_DIR\": \"Непустой каталог\",\n\t\"IS_A_FILE\": \"Является файлом\",\n\t\"DIR_EXISTS\": \"Каталог уже существует\",\n\t\"FS_ACTION_FAILED\": \"Не удалось выполнить это действие с файловой системой.\",\n\t\"UNAUTHORIZED_ACTION\": \"У программы нет прав на это действие.\",\n\t\"CREATION_CHECK_FAILED\": \"Не удалось проверить, создаётся ли этот объект.\",\n\t\"PERMISSION_CHANGE_FAILED\": \"Не удалось изменить разрешения для этого объекта.\",\n\t\"UPDATE_EXTRA_FAIL\": \"Не удалось обновить приложения, фоны, звуки.\",\n\t\"UPDATE_BOOT_FAIL\": \"Не удалось обновить файлы загрузки.\",\n\t\"UPDATE_BUTTON\": \"Обновить ОС\",\n\t\"TOGGLE_HIDDEN_FILES\": \"Скрыть/показать файлы\",\n\t\"AUTORUN_NECESSITIES_FAILED\": \"Не удалось запустить один из ваших файлов автозапуска. Система не позволит выполнить вход.\",\n\t\"CRYPTO_TOOLS_TITLE\": \"Утилиты для криптографии\",\n\t\"CRYPTO_TOOLS_NOPERM\": \"Недостаточно прав для использования утилит для криптографии.\",\n\t\"CRYPTO_RNG\": \"Случайная генерация\",\n\t\"CRYPTO_HASH\": \"Хэширование\",\n\t\"CRYPTO_KEYGEN\": \"Генерация ключей\",\n\t\"CRYPTO_ENCRYPT\": \"Шифрование\",\n\t\"CRYPTO_DECRYPT\": \"Расшифровка\",\n\t\"CRYPTO_SIGN\": \"Подписывание\",\n\t\"CRYPTO_VERIFY\": \"Проверка подписи\",\n\t\"CRYPTO_DERIVEBITS\": \"Преобразование\",\n\t\"GENERATE\": \"Генерировать\",\n\t\"RAW_HEX_DATA\": \"Прямые данные (шестнадцатиричные)\",\n\t\"CRYPTO_HASH_FIELD\": \"Алгоритм хэширования: \",\n\t\"CRYPTO_PLAINTEXT_FIELD\": \"Простой текст: \",\n\t\"ALGORITHM_FIELD\": \"Алгоритм: \",\n\t\"LENGTH_FIELD\": \"Длина: \",\n\t\"CRYPTO_NC_FIELD\": \"Имя кривой: \",\n\t\"IMPORT_AS_FIELD\": \"Импортировать как: \",\n\t\"CRYPTO_KEY_FIELD\": \"Ключ: \",\n\t\"CRYPTO_CIPHERTEXT_FIELD\": \"Шифр (шестнадцатиричный): \",\n\t\"CRYPTO_SIGNATURE_FIELD\": \"Подпись (шестнадцатиричная): \",\n\t\"CRYPTO_KEYGEN_MSG\": \"Генерация ключа (ключей)...\",\n\t\"CRYPTO_KEYGEN_SYMM\": \"Является симметричным типом ключа\",\n\t\"CRYPTO_KEYGEN_EXPFAIL\": \"Не удалось экспортировать, проверьте настройки экспорта\",\n\t\"CRYPTO_RNGOUT_FIELD\": \"Случайные числа (шестнадцатиричные): \",\n\t\"CRYPTO_KEYGEN_ACTION\": \"Сгенерировать ключ(и)\",\n\t\"CRYPTO_HASH_ACTION\": \"Хэшировать\",\n\t\"CRYPTO_ENCRYPT_ACTION\": \"Зашифровать\",\n\t\"CRYPTO_DECRYPT_ACTION\": \"Расшифровать\",\n\t\"CRYPTO_SIGN_ACTION\": \"Подписать\",\n\t\"CRYPTO_VERIFY_ACTION\": \"Проверить подпись\",\n\t\"CRYPTO_DERIVEBITS_ACTION\": \"Преобразовать\",\n\t\"CRYPTO_PUBKEY_FIELD\": \"Открытый ключ: \",\n\t\"CRYPTO_PRIVKEY_FIELD\": \"Закрытый ключ: \",\n\t\"CRYPTO_BASEKEY_FIELD\": \"Базовый ключ: \",\n\t\"CRYPTO_HASHOUT_FIELD\": \"Значение хэша (шестнадцатиричное): \",\n\t\"CRYPTO_MODLEN_FIELD\": \"Длина модуля: \",\n\t\"CRYPTO_PUBEXP_FIELD\": \"Открытая экспонента (шестнадцатиричная): \",\n\t\"EXPORT_AS_FIELD\": \"Экспортировать как: \",\n\t\"CRYPTO_KEYUSE_FIELD\": \"Использования ключа:\",\n\t\"CRYPTO_PLAINTEXTAS_FIELD\": \"Обработать простой текст как: \",\n\t\"CRYPTO_IV_FIELD\": \"Вектор инициализации (шестнадцатиричный): \",\n\t\"CRYPTO_CTR_FIELD\": \"Счётчик (шестнадцатиричный): \",\n\t\"CRYPTO_VERIFIED_CHECKBOX\": \"Проверено успешно\",\n\t\"CRYPTO_SALT_FIELD\": \"Соль (шестнадцатиричная): \",\n\t\"CRYPTO_DERIVEOUT_FIELD\": \"Преобразование (шестнадцатиричное): \",\n\t\"CRYPTO_ITERATIONS_FIELD\": \"Итераций: \",\n\t\"PATH_INCLUDES_EMPTY\": \"В указанном пути есть объект с пустым именем.\",\n\t\"BASIC_CURL_USAGE\": \"Использование: basiccurl [источник] [выход]\",\n\t\"BASIC_CURL_DESCRIPTION\": \"Скачивает указаный источник и записывает его в указанный выход.\",\n\t\"NO_ARGUMENTS\": \"Параметры не указаны\",\n\t\"CAT_USAGE\": \"Использование: cat [файл1] <файл2> <файл3> ... <файлN>\",\n\t\"CAT_DESCRIPTION\": \"Складывает эти файлы и выводит их в выход консоли\",\n\t\"CHGRP_USAGE\": \"Использование: chgrp [группа] [файл]\",\n\t\"CHGRP_DESCRIPTION\": \"Изменяет владеющую группу файлы\",\n\t\"CHMOD_USAGE\": \"Использование: chmod [режим] [файл]\",\n\t\"CHMOD_DESCRIPTION\": \"Задаёт, что могут делать все с файлом.\",\n\t\"CHMOD_MODE_DESCRIPTION\": \"[режим] может состоять из символов r (Read, чтение), w (Write, запись) и x (eXecute, исполнение).\",\n\t\"CHMOD_MODE_CONVERT\": \"Конвертация чисел [режима] в строку: 0 - \\\"\\\", 1 - \\\"x\\\", 2 - \\\"w\\\", 3 - \\\"wx\\\", 4 - \\\"r\\\", 5 - \\\"rx\\\", 6 - \\\"rw\\\", 7 - \\\"rwx\\\"\",\n\t\"CHOWN_USAGE\": \"Использование: chown [пользователь] [файл]\",\n\t\"CHOWN_DESCRIPTION\": \"Изменяет владеющего пользователя файлы\",\n\t\"CP_USAGE\": \"Использование: cp <параметры> [источник] [назначение]\",\n\t\"CP_DESCRIPTION\": \"Копирует файлы или каталоги в указанное назначение.\",\n\t\"OPT_RECURSIVE_DESCRIPTION\": \"--recursive: запускать на каталогах\",\n\t\"OPT_FORCE_DESCRIPTION\": \"--force: не выходить сразу при ошибке\",\n\t\"ARGUMENT_COUNT_MISMATCH\": \"Слишком много или слишком мало аргументов\",\n\t\"DF_HEADER\": \"Хранилище\\tРазмер\\tИспользовано\\tДост\\tИспользовано%\",\n\t\"LS_USAGE\": \"Использование: ls [каталог]\",\n\t\"LS_DESCRIPTION\": \"Отображает содержимое указанного каталога.\",\n\t\"LS_MOUNTPOINT_LIST\": \"У вас следующие точки монтирования: \",\n\t\"MOUNTPOINT_SYSTEM\": \"системная\",\n\t\"PASSWD_NEW_PROMPT\": \"Установка нового пароля для вашей учётной записи.\",\n\t\"PASSWD_2FACTOR_LOSS_WARN\": \"Раннее установленные дополнительные факторы будут удалены.\",\n\t\"PASSWD_PROMPT\": \"Новый пароль: \",\n\t\"PASSWD_CONFIRM_PROMPT\": \"Повторите пароль: \",\n\t\"PASSWD_FEEDBACK\": \"Задан новый пароль\",\n\t\"PASSWD_MISMATCH\": \"Пароли не совпадают.\",\n\t\"PING_USAGE\": \"Использование: ping <--internet> [адресСети]\",\n\t\"PING_DESCRIPTION\": \"Отправляет запрос на указанный адрес для проверки его доступности.\",\n\t\"PING_INTERNET_OPTION\": \"--internet: отправить ping в Интернет, а не в PCOS Network\",\n\t\"PIVOT_ROOT_USAGE\": \"Использование: pivot_root [точкаМонтирования]\",\n\t\"PIVOT_ROOT_DESCRIPTION\": \"Устанавливает указанную точку монтирования как системную для всех программ.\",\n\t\"REAL_TERMINAL_NAME\": \"Терминал\",\n\t\"REAL_TERMINAL_BUILTIN_LIST\": \"Встроенные команды:\",\n\t\"REAL_TERMINAL_HELP_USEDESC\": \"help - Показать список, использование и описание встроенных команд.\",\n\t\"REAL_TERMINAL_CLEAR_USEDESC\": \"clear - Стереть всё, что сейчас в терминале.\",\n\t\"REAL_TERMINAL_SUGRAPH_USEDESC\": \"sugraph <нужноеИмя> - Переключить пользователя терминала с помощью графического интерфейса.\",\n\t\"REAL_TERMINAL_SU_USEDESC\": \"su <нужноеИмя> - Переключить пользователя терминала.\",\n\t\"REAL_TERMINAL_GRAPHIC_USEDESC\": \"graphic <булево> - Включить или выключить запуск новых программ вне фонового режима.\",\n\t\"REAL_TERMINAL_EXIT_USEDESC\": \"exit - Выйти из терминала.\",\n\t\"REAL_TERMINAL_LOGON_REQUIRED\": \"(внутреннее): Перед запуском программы необходимо запустить sugraph %s.\",\n\t\"RM_USAGE\": \"Использование: rm <параметры> [файл]\",\n\t\"RM_DESCRIPTION\": \"Удаляет указанный файл или каталог.\",\n\t\"RKL_USAGE\": \"Использование: runKlvlCode [файлСКодом]\",\n\t\"RKL_DESCRIPTION\": \"Запускает указанный файл с кодом на уровне ядра.\",\n\t\"WRITE_USAGE\": \"Использование: write [файл] [данные]\",\n\t\"WRITE_DESCRIPTION\": \"Записывает данные в указанный файл.\",\n\t\"CP_PERMISSIONS_OPTION\": \"--permissions: скопировать разрешения файлов\",\n\t\"REAL_TERMINAL_DEFAULT_PATH_FIELD\": \"Путь по умолчанию: %s\",\n\t\"REAL_TERMINAL_PUSHPATH_USEDESC\": \"pushpath [путь] - Добавить новый путь для просмотра команд.\",\n\t\"REAL_TERMINAL_RESETPATH_USEDESC\": \"resetpath - Сбросить список путей для просмотра команд к значению пути по умолчанию.\",\n\t\"REAL_TERMINAL_LSPATH_USEDESC\": \"lspath - Просмотреть текущие пути для просмотра команд и путь по умолчанию.\",\n\t\"MKDIR_USAGE\": \"Использование: mkdir [каталог]\",\n\t\"MKDIR_DESCRIPTION\": \"Создаёт новый каталог в указанном пути.\",\n\t\"NEXT\": \"Далее\",\n\t\"DESCRIBE_TEMPLATE\": \"Программа: %s (%s)\\nНамерение: %s\",\n\t\"EXTRA_DESCRIBE_TEMPLATE\": \"Программа: %s (%s)\\nПараметры: %s\\nНамерение: %s\",\n\t\"DECLINE\": \"Отклонить\",\n\t\"ACCESS_REQUEST_TITLE\": \"Запрос доступа\",\n\t\"REAL_TERMINAL_INTENT\": \"Запуск команд с вашими разрешениями\",\n\t\"PERSONAL_SECURITY_INTENT\": \"Управлять вашими настройками безопасности\",\n\t\"FILE_EXPLORER_INTENT\": \"Запускать программы и открывать файлы\",\n\t\"FILE_EXPLORER_FULL_INTENT\": \"Просматривать файлы, запускать программы и открывать файлы\",\n\t\"CRYPTO_TOOLS_INTENT\": \"Выполнять криптографические операции\",\n\t\"SYSTEM_SECURITY_INTENT\": \"Управление настройками учётных записей по всей системе\",\n\t\"FORMAT_USAGE\": \"Использование: format [тип_фс] [раздел] <перезапись>\",\n\t\"FORMAT_DESCRIPTION\": \"Готовит указанный раздел к использованию.\",\n\t\"FORMAT_FSTYPE\": \"Типы файловых систем: pcfs (соответствует точке монтирования PCFSiDBMount), pcfs_crypt (PCFSiDBAESCryptMount), pcfs_crypt_monokey (PCFSiDBAESCryptMount), pcfs_crypt_filetable_monokey (PCFSiDBAESCryptMount), pcbm:<раздел_данных> (как код загрузочного раздела), null (УДАЛИТЬ раздел)\",\n\t\"FORMAT_OVERWRITE_WARN\": \"Раздел уже содержит данные. Установите параметр перезаписи равным 'overwrite' для продолжения в любом случае. В таком случае ВСЕ ДАННЫЕ НА РАЗДЕЛЕ МОГУТ БЫТЬ УДАЛЕНЫ.\",\n\t\"FORMAT_UNKNOWN_FSTYPE\": \"Неизвестное целевое форматирование\",\n\t\"LLDA_USAGE\": \"Использование: llda_tool [действие] [параметры]\",\n\t\"LLDA_ACTION_EXPORT\": \"действие export: [раздел ввода] [файл вывода]\",\n\t\"LLDA_ACTION_IMPORT\": \"действие import: [файл ввода] [раздел вывода]\",\n\t\"LLDA_ACTION_IMPORTSTRING\": \"действие importstring: [файл ввода] [раздел вывода]\",\n\t\"LLDA_ACTION_COPY\": \"действие copy: [раздел ввода] [раздел вывода]\",\n\t\"LLDA_ACTION_REMOVE\": \"действие remove: [раздел]\",\n\t\"LLDA_ACTION_LIST\": \"действие list\",\n\t\"LLDA_DISCLAIMER\": \"При использовании утилиты можно столкнуться с ПОТЕРЕЙ ДАННЫХ!\",\n\t\"LLDA_UNKNOWN_ACTION\": \"Неизвестное действие\",\n\t\"INITDISK_OVERWRITE_WARN\": \"Системный диск уже сожержит таблицу разделов. Установите параметр перезаписи равным 'overwrite' для продолжения в любом случае. В таком случае ВСЕ ДАННЫЕ НА ДИСКЕ МОГУТ БЫТЬ УДАЛЕНЫ.\",\n\t\"INITDISK_USAGE\": \"Использование: initdisk [что угодно] <перезапись>\",\n\t\"INITDISK_DESCRIPTION\": \"Готовит системный диск к использованию.\",\n\t\"MOUNT_USAGE\": \"Использование: mount [параметры] [тип_фс] [точка_монтирования]\",\n\t\"MOUNT_DESCRIPTION\": \"Монтирует файловую систему.\",\n\t\"MOUNT_KNOWN_FS\": \"Известные типы файловых систем: %s\",\n\t\"MOUNT_KNOWN_PPART\": \"--partition=[разделДанных] - Указать раздел данных\",\n\t\"MOUNT_KNOWN_PINPA\": \"--interactivePassword - Интерактивно спрашивать пароль\",\n\t\"MOUNT_KNOWN_PPASS\": \"--password=[пароль] - Указать пароль\",\n\t\"MOUNT_KNOWN_PKEY\": \"--key=[прямойКлюч] - Указать ключ шифрования\",\n\t\"MOUNT_KNOWN_PTYPE\": \"--type=[тип] - Для ramMount, укажите type=run для авто-создания /run\",\n\t\"MOUNT_KNOWN_PURL\": \"--url=[URL] - Указать URL\",\n\t\"MOUNT_KNOWN_PINPI\": \"--inputPipeId=[идКанала] - Указать канал ввода\",\n\t\"MOUNT_KNOWN_POUPI\": \"--outputPipeId=[идКанала] - Указать канал вывода\",\n\t\"MOUNTINFO_USAGE\": \"Использование: mountinfo [точка_монтирования]\",\n\t\"MOUNTINFO_DESCRIPTION\": \"Получить информацию о точке монтирования.\",\n\t\"UMOUNT_USAGE\": \"Использование: umount <параметры> [точка_монтирования]\",\n\t\"UMOUNT_DESCRIPTION\": \"Размонтирует файловую систему.\",\n\t\"UMOUNT_OPT_SYNCONLY\": \"--sync-only - Только синхронизация, а не размонтирование (перезаписывает --force)\",\n\t\"UMOUNT_OPT_FORCE\": \"--force - Принудительно размонтировать, не синхронизовать\",\n\t\"CALC_TITLE\": \"Калькулятор\",\n\t\"CALC_BASIC_MODE\": \"Калькулятор: Основные операции\",\n\t\"CALC_ADVANCED_MODE\": \"Калькулятор: Расширенный режим\",\n\t\"CALC_ADD\": \"Сумма\",\n\t\"CALC_SUBTRACT\": \"Разность\",\n\t\"CALC_MULTIPLY\": \"Произведение\",\n\t\"CALC_DIVIDE\": \"Частное\",\n\t\"CALC_ADVMODE_BTN\": \"Расширенный режим\",\n\t\"CALC_BASICMODE_BTN\": \"Основные операции\",\n\t\"CALC_OPERAND\": \"Операнд %s\",\n\t\"CALC_TOMIXED_BTN\": \"Перевести в смешанную дробь\",\n\t\"CALC_TOIMPR_BTN\": \"Перевести в неправильную дробь\",\n\t\"CALC_GCD\": \"НОД\",\n\t\"CALC_FACTORIAL\": \"Факториал\",\n\t\"CALC_GCD_PAGE\": \"Наибольший общий делитель\",\n\t\"ZKPP_OPTION\": \"ZKPP (Пароль)\",\n\t\"SECONDSTAGE_INSTALLER_INTENT\": \"Завершить конфигурацию ОС\",\n\t\"SETUP_FAILED\": \"Настройка не удалась. Попробуйте ещё раз, перезапустив систему.\",\n\t\"WARNING_PRIVILEGES\": \"Будьте осторожны с этой функцией! Вы можете понизить уровень безопасности системы.\",\n\t\"USER_EXT_PRIVILEGES\": \"Расширенный набор разрешений\",\n\t\"LULL_SYSTEM\": \"Режим сна\",\n\t\"SYSTEM_IMAGING\": \"Образы системы\",\n\t\"CREATE_IMAGE\": \"Создать образ системы\",\n\t\"RESTORE_IMAGE\": \"Восстановить образ системы\",\n\t\"SELECT_FILE_PROMPT\": \"Выберите файл: \",\n\t\"REBOOT_ON_RESTORE\": \"Перезагрузить после восстановления\",\n\t\"MERGE_STATES\": \"Слиять состояния образов\",\n\t\"LISTING_PARTITIONS_FAILED\": \"Не удалось получить список разделов.\",\n\t\"READING_PARTITION_FAILED\": \"Не удалось прочитать раздел %s\",\n\t\"LISTING_DATA_FAILED\": \"Не удалось получить список данных.\",\n\t\"READING_DATA_FAILED\": \"Не удалось прочитать данные.\",\n\t\"WRITING_IMAGE_FAILED\": \"Не удалось записать образ.\",\n\t\"SUCCESSFUL_OP\": \"Процесс был успешно завершён.\",\n\t\"FAILED_OP\": \"Процесс завершён безуспешно.\",\n\t\"READING_IMAGE_FAILED\": \"Не удалось прочитать образ.\",\n\t\"WRITING_PARTITION_FAILED\": \"Не удалось записать раздел %s\",\n\t\"WRITING_DATA_FAILED\": \"Не удалось записать данные.\",\n\t\"DELETING_PARTITION_FAILED\": \"Не удалось удалить раздел %s\",\n\t\"DELETING_DATA_FAILED\": \"Не удалось удалить данные.\",\n\t\"SHUTTING_DOWN_FAILED\": \"Не удалось завершить работу системы.\",\n\t\"NETWORK_STATUS_ONLINE\": \"Вы подключены к локальной вычислительной сети.\",\n\t\"NETWORK_STATUS_OFFLINE\": \"Вы не подключены ни к какой сети.\",\n\t\"PCOS_NETWORK_STATUS_ONLINE\": \"Вы подключены к PCOS Network. (имя: %s, адрес: %s)\",\n\t\"PCOS_NETWORK_STATUS_OFFLINE\": \"Вы отключены от PCOS Network.\",\n\t\"PCOS_NETWORK_STATUS_STOPPED\": \"Служба PCOS Network была остановлена.\",\n\t\"START_MENU_FAILED\": \"Не удалось запустить меню \\\"Пуск\\\". Вместо этого можно выполнить выход из системы.\",\n\t\"SYSTEM_BUILT_AT\": \"Система скомпилирована %s\",\n\t\"REAL_TERMINAL_VER_USEDESC\": \"ver - Показать номер и время компиляции системы\",\n\t\"BLANK_PRIVILEGE_FLAG\": \"Нулевые привилегии\",\n\t\"INSTALLING_SYSTEM_APPHARDEN\": \"Установка правил безопасности программ\",\n\t\"INSTALLING_NET_CONF\": \"Установка конфигурации PCOS Network\",\n\t\"NETWORK_ADDRESS_FIELD\": \"Сетевой адрес: %s\",\n\t\"NETWORK_AUTOHOST_FIELD\": \"Автоматическое имя: %s\",\n\t\"NETCONFIG_HOSTNAME\": \"Имя в сети: \",\n\t\"DIFF_USAGE\": \"Использование: diff [оригинал] [новый] [разность]\",\n\t\"DIFF_DESCRIPTION\": \"Вычисляет разность между двумя файлами.\",\n\t\"PATCH_USAGE\": \"Использование: patch [оригинал] [разность] [новый]\",\n\t\"PATCH_DESCRIPTION\": \"Вычисляет 'сумму' оригинального файла и разности.\",\n\t\"SYSTEM_UP_TO_DATE\": \"Обновления отсутствуют\",\n\t\"POWER_USAGE\": \"Использование: power <параметры> <r|reboot|restart|k|kexec>\",\n\t\"POWER_DESCRIPTION\": \"Выключает или перезагружает систему. Указывание ничего приводит к завершению работы.\",\n\t\"POWER_FORCE\": \"--force: не ждать процессов, перезагрузиться или выключиться немедленно\",\n\t\"POWER_KEXEC\": \"--kexec: перезагрузить систему, не перезагружая страницу или прошивку (автоматически выбирает reboot)\",\n\t\"UPDATEFW_BUTTON\": \"Обновить прошивку\",\n\t\"UPDATEFW_DOWNLOADING\": \"Скачивание местного init.js...\",\n\t\"UPDATEFW_DOWNLOAD_FAILED\": \"Не удалось скачать местный init.js.\",\n\t\"UPDATEFW_DECODING\": \"Обработка init.js как текст\",\n\t\"UPDATEFW_SETTING\": \"Задание init.js как прошивки\",\n\t\"ADDUSER_USAGE\": \"Использование: adduser <параметры> [пользователь]\",\n\t\"ADDUSER_DESCRIPTION\": \"Создать новую учётную запись пользователя.\",\n\t\"ADDUSER_SKIP_PASSWD\": \"--skip-passwd: не спрашивать пароль\",\n\t\"ADDUSER_SKIP_HOME\": \"--skip-home: не создавать домашнюю директорию\",\n\t\"ADDUSER_GROUPS\": \"--groups: добавить в группы (указать несколько раз, чтобы добавить в несколько групп)\",\n\t\"ADDUSER_HOME\": \"--home: своя домашняя директория\",\n\t\"NEW_USER_CREATION\": \"Создание нового пользователя \\\"%s\\\"\",\n\t\"BLOCKUSER_USAGE\": \"Использование: blockuser <пользователь>\",\n\t\"BLOCKUSER_DESCRIPTION\": \"Блокирует учётную запись пользователя.\",\n\t\"DELUSER_USAGE\": \"Использование: deluser <параметры> [пользователь]\",\n\t\"DELUSER_DESCRIPTION\": \"Удаляет учётную запись пользователя.\",\n\t\"DELUSER_HOMEDIR\": \"--homedir: удалять домашнюю директорию\",\n\t\"OLD_USER_DELETION\": \"Удаление старого пользователя \\\"%s\\\"\",\n\t\"BATTERY_STATUS_UNAVAILABLE\": \"Статус батареи недоступен.\",\n\t\"BATTERY_STATUS_CHARGING\": \"Батарея заряжается (%s%, %sдо полной)\",\n\t\"BATTERY_STATUS_DISCHARGING\": \"Батарея разряжается (%s%, %sигры)\",\n\t\"PATCH_HUNK_COUNT\": \"Фраз разности: %s\",\n\t\"SERVER_SIGNATURE_VERIFICATION_FAILED\": \"Проверка подписи сервера не удалась.\",\n\t\"NETWORK_UNREACHABLE\": \"Сеть недоступна.\",\n\t\"ADDRESS_UNREACHABLE\": \"Адрес недоступен.\",\n\t\"NETWORK_CLOSED\": \"Сеть была закрыта.\",\n\t\"CONNECTION_DROPPED\": \"Соединение была закрыта.\",\n\t\"BLOG_BROWSER_NAME\": \"Обозреватель блогов\",\n\t\"BLOG_BROWSER_LOADING\": \"Подождите, страница загружается...\",\n\t\"BLOG_BROWSER_PROTO\": \"Нет такого протокола. Эта версия поддерживает только протокол bdp://.\",\n\t\"BLOG_BROWSER_GATESET\": \"Для того, чтобы задать ворота, используйте часть имени пользователя: bdp://gate@myblog.pc\",\n\t\"HOSTNAME_RESOLUTION_FAILED\": \"Не удалось преобразовать имя компьютера.\",\n\t\"BLOG_BROWSER_POSTCLOSE\": \"Этот интерактивный пост был закрыт.\",\n\t\"BLOG_BROWSER_FILEPOST\": \"Это пост-файл. Вы можете скачать его на этот компьютер.\",\n\t\"BLOG_BROWSER_DLFILEPOST\": \"Вы скачали этот пост-файл.\",\n\t\"BLOG_BROWSER_LOADING_PROGRESS\": \"Загрузка поста (получено %s из %s частей)\",\n\t\"BLOG_BROWSER_NOVERIFY\": \"Вы включили параметр, пропускающий проверку сервера. Это не рекомендуется, так как сетевой прокси-сервер сможет выполнить атаку \\\"человек посередине\\\" и тем самым, получить доступ к вашим данным. Вы бы позволили этому случиться?\",\n\t\"BLOG_BROWSER_NOSANDBOX\": \"Вы включили параметр пробрасывания всех ИПП вашей операционной системы. Это не рекомендуется, так как пост может выполнять любое действие, как будто он является этим приложением. Вы бы позволили этому случиться?\",\n\t\"NETWORKFS_USAGE\": \"Использование: networkfs <параметры> [url] [точка_монтирования]\",\n\t\"NETWORKFS_DESCRIPTION\": \"Монтирует файловую систему, доступную через PCOS Network.\",\n\t\"NETWORKFS_NOVERIFY\": \"--no-verification: Не проверять ключ сервера\",\n\t\"NETWORKFS_KEY\": \"--key=[путь]: Путь до ключа для взаимной проверки\",\n\t\"NETWORKFS_PROTO\": \"Данная версия поддерживает только протокол netfs://.\",\n\t\"NETCONFIG_UPDATES\": \"Обновления: \",\n\t\"NETWORK_UPDATES_FIELD\": \"Обновления с: %s\",\n\t\"LOCALE_NAME\": \"Русский (Russian)\",\n\t\"SETTING_LOCALE_PREFERENCE\": \"Установка предпочитаемого языка\",\n\t\"LANGUAGE_SELECT\": \"Ваш язык: \",\n\t\"CHANGE_LOCALE\": \"Изменить язык\",\n\t\"INSTALLER_INTENT\": \"Начать конфигурацию ОС\",\n\t\"MOUNT_EXISTS\": \"Монтирование уже существует\",\n\t\"INSECURE_MODE_MSG\": \"Небезопасные параметры!\",\n\t\"MODULE_REQUIRED\": \"Для этой функции требуется модуль \\\"%s\\\". Обратитесь к системному администратору.\",\n\t\"CREATING_DIRECTORY_STRUCTURE\": \"Создание структуры каталогов\",\n\t\"GENERATING_KERNEL\": \"Создание ядра системы\",\n\t\"REGENERATE_KERNEL\": \"Повторно создать ядро системы\",\n\t\"TECHNICAL_LIMITATIONS\": \"Этот файл нельзя создать из-за технических ограничений.\",\n\t\"REVIEWING_MIGRATION\": \"Обзор путей миграции\",\n\t\"MIGRATING_USER_PROFILES\": \"Мигрируем профили пользователей\",\n\t\"UPDATING_MODCFG\": \"Получение конфигурации модулей\",\n\t\"UPDATING_MODULES\": \"Обновление модулей\",\n\t\"FAILED_TO_UPDATE\": \"Не удалось обновить модули\",\n\t\"UPDATE_COUNTING\": \"Вычисление обновляемых модулей\",\n\t\"UPDATE_COUNT\": \"Можно обновить %s модулей\",\n\t\"UPDATE_MODCFG\": \"Обновить конфигурацию модулей\",\n\t\"INSTALL_ONLINE_MODULE\": \"Установить модули по сети\",\n\t\"REMOVE_MODULES\": \"Удалить модули\",\n\t\"MODMGR_PRIVFAIL\": \"Было предоставлено недостаточно разрешений для управления модулями.\",\n\t\"MODMGR_TITLE\": \"Управление модулями\",\n\t\"MODMGR_INTENT\": \"Управлять и поддерживать модули на этой системе\",\n\t\"INSTALLING_MODULE\": \"Установка модуля: %s (%s из %s, %s%)\",\n\t\"MODNAME_CELL\": \"Имя модуля\",\n\t\"MODVER_CELL\": \"Версия модуля\",\n\t\"MODTGT_CELL\": \"Целевая сборка\",\n\t\"APPLY_CHANGES\": \"Применить изменения\",\n\t\"DISCARD_CHANGES\": \"Отменить изменения\",\n\t\"REMOVING_MODULE\": \"Удаление модуля: %s (%s из %s, %s%)\",\n\t\"RELOADING_MODULES\": \"Перезагрузка модулей системы\"\n};"},"buildInfo":{"for":"1390","version":1390,"when":1755547941366,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"fff68d31a9fdfa83145c47a035d4429c3bd21af52f7b839536cbcdb34033501adb1e231aae23378de2133cf88b56a751ce823d943ea57a5df69080fe5a1acd03"}},"50-pcos-icons.fs":{"backend":{"files":{"etc":{"icons":{"batteryChargeFinished_icon.pic":"f7b8a0f0f4a0c833d6c2910c5bb13eff97faf843705e04478466a621acd6665ac2eefc99ae757ccf7878effe1489dcb4a6a7f3f29a768910414a5b51908575e1","charging_icon.pic":"ac7e29bf13f98eb8aa20d8e2d701d64aba008ff54d8090f8a427070bc83015b4bbfae46ba4a823ae27049962fceb3e777dd0f71084271f4f2c7f3c4b70b7cd13","dying_icon.pic":"e19978e5f1eda2e9756e65eb3bacd3345accdc876678cc0edf4b24c2f4ae4eee23d943b64c4a4a9d54608a7f9ee4ca957ce13c433bc46dc7234edf749f7c9de7","fileicon.pic":"a58448615a5a6990fe530ba0f257b94a068b460f099504d3a1eec621054b0cf2309f49fe3d7ae9451d617a85fdd0eb2491130be4814085b9b7590cd5efd6323d","foldericon.pic":"24943b4c69d3ebf68d2a9684bc4c436923105f4e8556ab377001ea525dc4f70539fca91b91be0876786ee4e4e408dd932499877079645d6acbf226dd19f25baa","js.pic":"1e495dcabc73446e93360a3c1598bd1cdc20e94bedc7dbe59fbaf0011448a755fed0a19f090dc860d6cc881bb9fef6b2c4998b00358577969efad280c452c5fa","lnk.pic":"047fd21c5ee6edc0bd6ca953ea73228174d8835a9d56fd236160c56c16254b759855b7db3995aa803eb0a43d0e3f69bf23d90a9f9d4fc8b75fe375430af5d4c7","network_icon.pic":"71a24713a59d0d732d72d53bb1086c09d8b9f3a4132c771eaef6e8050d2500df4063ddeeb672784cba4543356a96f8768d28cf68eb4437ff2c0793a113ac8c02","network_offline_icon.pic":"0779508fd2ece5d8b58c5c8cd9b285feaa53e4cde7ca552ac2a11e5d9fc2ac1acb3027d570b6610eefb732587bdf1f397e42c251c45d51cd59b832bd48c569fd","pcos_network_icon.pic":"321ff0abc16dbe1e63a526692aa1d28b78ff9a939dd5cb01afcbfdd3640b5f0dcc628f603c0a8dd347a3c22ac6717b6d3f84410a86da43f2035188621e5fd08a","pcos_network_offline_icon.pic":"c9415d0ae69fc6a75b046e0946d9501efe42a8d054b7f99c9e6e8b51594cae558c81c56f038d654f3b8b3b05c376d00fd5c3537d4d10a1dcaae153e0d91989b5","pic.pic":"f4592e448c65790e56926d9f8993a3629aa8d76528fe21717150e5a269adbb429a89cb095ffc6fca651482d2b3264c5e318a377f19d97779fbc5df91a9fc2617","readyToPlay_icon.pic":"7a1882c594c3f154268404dca118b6375ba1a42643cb62d6831f49fb1865f1051906788b6edadc81e00c69b454bf9244d407f0326d1af1e12994bf38a742bae4","txt.pic":"b209a9b9a002b640b7ff0ccc37d4c84568e5ec247ea90c2372ee0cb54844109f2e24312137a6c8adf38b9b284b94a50a081672c13f7e2150e9026978dd781450","vid.pic":"f1a77c60c7a9495e9629aac6b3ba1821df0721ae00b413ce1d6d2b099317c11d26973350d9cc50c11781d19b0935493f30271e1d0f1830dbfc49fcb39cb2dcc4"}}},"permissions":{"etc/icons/batteryChargeFinished_icon.pic":{"world":"rx"},"etc/icons/charging_icon.pic":{"world":"rx"},"etc/icons/dying_icon.pic":{"world":"rx"},"etc/icons/fileicon.pic":{"world":"rx"},"etc/icons/foldericon.pic":{"world":"rx"},"etc/icons/js.pic":{"world":"rx"},"etc/icons/lnk.pic":{"world":"rx"},"etc/icons/network_icon.pic":{"world":"rx"},"etc/icons/network_offline_icon.pic":{"world":"rx"},"etc/icons/pcos_network_icon.pic":{"world":"rx"},"etc/icons/pcos_network_offline_icon.pic":{"world":"rx"},"etc/icons/pic.pic":{"world":"rx"},"etc/icons/readyToPlay_icon.pic":{"world":"rx"},"etc/icons/txt.pic":{"world":"rx"},"etc/icons/vid.pic":{"world":"rx"},"etc/icons/":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"f7b8a0f0f4a0c833d6c2910c5bb13eff97faf843705e04478466a621acd6665ac2eefc99ae757ccf7878effe1489dcb4a6a7f3f29a768910414a5b51908575e1":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMzQiIHdpZHRoPSIxMTIiIGhlaWdodD0iNjAiIHN0cm9rZT0iIzgwODA4MCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJ0cmFuc3BhcmVudCIgLz4KCQk8cmVjdCB4PSIxMTIiIHk9IjQ4IiB3aWR0aD0iMTYiIGhlaWdodD0iMzIiIGZpbGw9IiM4MDgwODAiIC8+CgkJPHJlY3QgeD0iMSIgeT0iMzUiIHdpZHRoPSIxMTAiIGhlaWdodD0iNTgiIGZpbGw9IiMwMGZmMDAiIC8+CgkJPHJlY3QgeD0iNzkiIHk9IjM1IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiNmZmZmZmYiIC8+CgkJPHJlY3QgeD0iOTUiIHk9IjM1IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNzkiIHk9IjUxIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iOTUiIHk9IjUxIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiNmZmZmZmYiIC8+CgkJPHJlY3QgeD0iNzkiIHk9IjY3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiNmZmZmZmYiIC8+CgkJPHJlY3QgeD0iOTUiIHk9IjY3IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNzkiIHk9IjgzIiB3aWR0aD0iMTYiIGhlaWdodD0iMTAiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iOTUiIHk9IjgzIiB3aWR0aD0iMTYiIGhlaWdodD0iMTAiIGZpbGw9IiNmZmZmZmYiIC8+Cgk8L2c+Cjwvc3ZnPgo=","ac7e29bf13f98eb8aa20d8e2d701d64aba008ff54d8090f8a427070bc83015b4bbfae46ba4a823ae27049962fceb3e777dd0f71084271f4f2c7f3c4b70b7cd13":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMzQiIHdpZHRoPSIxMTIiIGhlaWdodD0iNjAiIHN0cm9rZT0iIzgwODA4MCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJ0cmFuc3BhcmVudCIgLz4KCQk8cmVjdCB4PSIxMTIiIHk9IjQ4IiB3aWR0aD0iMTYiIGhlaWdodD0iMzIiIGZpbGw9IiM4MDgwODAiIC8+CgkJPHJlY3QgeD0iMSIgeT0iMzUiIHdpZHRoPSIxOCIgaGVpZ2h0PSI1OCIgZmlsbD0iI2ZmMDAwMCIgLz4KCQk8bGluZSB4MT0iMjQiIHkxPSI2NCIgeDI9IjEwOCIgeTI9IjY0IiBzdHJva2U9IiMwMGZmMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8bGluZSB4MT0iMTA4IiB5MT0iNjQiIHgyPSI4NCIgeTI9IjQwIiBzdHJva2U9IiMwMGZmMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8bGluZSB4MT0iMTA4IiB5MT0iNjQiIHgyPSI4NCIgeTI9Ijg4IiBzdHJva2U9IiMwMGZmMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCTwvZz4KPC9zdmc+Cg==","e19978e5f1eda2e9756e65eb3bacd3345accdc876678cc0edf4b24c2f4ae4eee23d943b64c4a4a9d54608a7f9ee4ca957ce13c433bc46dc7234edf749f7c9de7":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMzQiIHdpZHRoPSIxMTIiIGhlaWdodD0iNjAiIHN0cm9rZT0iIzgwODA4MCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJ0cmFuc3BhcmVudCIgLz4KCQk8cmVjdCB4PSIxMTIiIHk9IjQ4IiB3aWR0aD0iMTYiIGhlaWdodD0iMzIiIGZpbGw9IiM4MDgwODAiIC8+CgkJPHJlY3QgeD0iMSIgeT0iMzUiIHdpZHRoPSIxOCIgaGVpZ2h0PSI1OCIgZmlsbD0iI2ZmMDAwMCIgLz4KCTwvZz4KPC9zdmc+Cg==","a58448615a5a6990fe530ba0f257b94a068b460f099504d3a1eec621054b0cf2309f49fe3d7ae9451d617a85fdd0eb2491130be4814085b9b7590cd5efd6323d":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIGZpbGw9IiNmZmZmZmYiIC8+CgkJPHJlY3QgeD0iMCIgeT0iLTQiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iIzgwODA4MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI4LCAtMzIpIHJvdGF0ZSg0NSkiIC8+Cgk8L2c+Cjwvc3ZnPgo=","24943b4c69d3ebf68d2a9684bc4c436923105f4e8556ab377001ea525dc4f70539fca91b91be0876786ee4e4e408dd932499877079645d6acbf226dd19f25baa":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIGZpbGw9IiNmZjdiMDAiIC8+CgkJPHJlY3QgeD0iMCIgeT0iNjAiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZDgwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLCAtMTYpIHJvdGF0ZSg0NSkiIC8+CgkJPHJlY3QgeD0iOTQiIHk9IjAiIHdpZHRoPSI0OCIgaGVpZ2h0PSI2MCIgZmlsbD0iI2ZmZDgwMCIgLz4KCTwvZz4KPC9zdmc+Cg==","1e495dcabc73446e93360a3c1598bd1cdc20e94bedc7dbe59fbaf0011448a755fed0a19f090dc860d6cc881bb9fef6b2c4998b00358577969efad280c452c5fa":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIzMiIgZmlsbD0iI2NjY2NjYyIgLz4KCQk8cmVjdCB4PSIwIiB5PSIzMiIgd2lkdGg9IjEyOCIgaGVpZ2h0PSI5NiIgZmlsbD0iI2ZmZmZmZiIgLz4KCQk8cmVjdCB4PSIxMDIiIHk9IjgiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iI2ZmMDAwMCIgLz4KCQk8cmVjdCB4PSI4MCIgeT0iOCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSIjZTllOWU5IiAvPgoJCTx0ZXh0IHg9IjEwNiIgeT0iMjAiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjEycHgiPuKclTwvdGV4dD4KCQk8dGV4dCB4PSI4NCIgeT0iMjAiIGZpbGw9ImJsYWNrIiBmb250LXNpemU9IjEycHgiPuKWoTwvdGV4dD4KCQk8dGV4dCB4PSI2IiB5PSIyMCIgZmlsbD0iYmxhY2siIGZvbnQtc2l6ZT0iMTJweCI+SW5zdGFsbCBQQ09TPC90ZXh0PgoJCTx0ZXh0IHg9IjYiIHk9IjQ4IiBmaWxsPSJibGFjayIgZm9udC1zaXplPSIxMnB4IiBmb250LXdlaWdodD0iYm9sZCI+UENPUyAzIEluc3RhbGxlcjwvdGV4dD4KCQk8dGV4dCB4PSI2IiB5PSI2NCIgZmlsbD0iYmxhY2siIGZvbnQtc2l6ZT0iMTJweCI+WW91IGFyZSBpbnN0YWxsaW5nIFBDT1M8L3RleHQ+CgkJPHRleHQgeD0iNiIgeT0iODAiIGZpbGw9ImJsYWNrIiBmb250LXNpemU9IjEycHgiPjMgb24gdGhpcyBjb21wdXRlci48L3RleHQ+CgkJPHJlY3QgeD0iNiIgeT0iODQiIHdpZHRoPSIzMiIgaGVpZ2h0PSIxNiIgZmlsbD0iI2U5ZTllOSIgLz4KCQk8dGV4dCB4PSI3IiB5PSI5NiIgZmlsbD0iYmxhY2siIGZvbnQtc2l6ZT0iMTJweCI+SW5zdGFsbDwvdGV4dD4KCQk8cmVjdCB4PSI2IiB5PSIxMDQiIHdpZHRoPSIzMiIgaGVpZ2h0PSIxNiIgZmlsbD0iI2U5ZTllOSIgLz4KCQk8dGV4dCB4PSI4IiB5PSIxMTYiIGZpbGw9ImJsYWNrIiBmb250LXNpemU9IjEycHgiPlRyeSBpdDwvdGV4dD4KCTwvZz4KPC9zdmc+Cg==","047fd21c5ee6edc0bd6ca953ea73228174d8835a9d56fd236160c56c16254b759855b7db3995aa803eb0a43d0e3f69bf23d90a9f9d4fc8b75fe375430af5d4c7":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEyOCIgZmlsbD0iI2ZmZmZmZiIgLz4KCQk8cmVjdCB4PSI2NCIgeT0iMCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEyOCIgZmlsbD0iIzAwMDAwMCIgLz4KCQk8ZWxsaXBzZSBjeD0iMzIiIGN5PSI2NCIgcng9IjE2IiByeT0iNDgiIHN0cm9rZT0iIzAwOTRmZiIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJibGFjayIgLz4KCQk8ZWxsaXBzZSBjeD0iOTYiIGN5PSI2NCIgcng9IjE2IiByeT0iNDgiIHN0cm9rZT0iI2ZmNmIwMCIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJ3aGl0ZSIgLz4KCTwvZz4KPC9zdmc+Cg==","71a24713a59d0d732d72d53bb1086c09d8b9f3a4132c771eaef6e8050d2500df4063ddeeb672784cba4543356a96f8768d28cf68eb4437ff2c0793a113ac8c02":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iMTciIHk9IjE3IiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+CgkJPGxpbmUgeDE9IjU1IiB5MT0iMzIiIHgyPSI3OCIgeTI9IjMyIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8cmVjdCB4PSI3MyIgeT0iMTUiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzNSIgZmlsbD0iIzAwMDAwMCIgLz4KCQk8bGluZSB4MT0iMzUiIHkxPSI1MCIgeDI9IjU0IiB5Mj0iNzgiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJCTxsaW5lIHgxPSI5MyIgeTE9IjUwIiB4Mj0iNzQiIHkyPSI3OCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjgiIC8+CgkJPHJlY3QgeD0iNDQiIHk9Ijc4IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNDYiIHk9IjgwIiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiMwMGJmZmYiIC8+Cgk8L2c+Cjwvc3ZnPgo=","0779508fd2ece5d8b58c5c8cd9b285feaa53e4cde7ca552ac2a11e5d9fc2ac1acb3027d570b6610eefb732587bdf1f397e42c251c45d51cd59b832bd48c569fd":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iMTciIHk9IjE3IiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+CgkJPGxpbmUgeDE9IjU1IiB5MT0iMzIiIHgyPSI3OCIgeTI9IjMyIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8cmVjdCB4PSI3MyIgeT0iMTUiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzNSIgZmlsbD0iIzAwMDAwMCIgLz4KCQk8bGluZSB4MT0iMzUiIHkxPSI1MCIgeDI9IjU0IiB5Mj0iNzgiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJCTxsaW5lIHgxPSI5MyIgeTE9IjUwIiB4Mj0iNzQiIHkyPSI3OCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjgiIC8+CgkJPHJlY3QgeD0iNDQiIHk9Ijc4IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNDYiIHk9IjgwIiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiMwMGJmZmYiIC8+CgkJPGxpbmUgeDE9IjAiIHkxPSIwIiB4Mj0iMTI4IiB5Mj0iMTI4IiBzdHJva2U9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8bGluZSB4MT0iMTI4IiB5MT0iMCIgeDI9IjAiIHkyPSIxMjgiIHN0cm9rZT0iI2ZmMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJPC9nPgo8L3N2Zz4K","321ff0abc16dbe1e63a526692aa1d28b78ff9a939dd5cb01afcbfdd3640b5f0dcc628f603c0a8dd347a3c22ac6717b6d3f84410a86da43f2035188621e5fd08a":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iMTciIHk9IjE3IiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+CgkJPGxpbmUgeDE9IjU1IiB5MT0iMzIiIHgyPSI3OCIgeTI9IjMyIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8cmVjdCB4PSI3MyIgeT0iMTUiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzNSIgZmlsbD0iIzAwMDAwMCIgLz4KCQk8cmVjdCB4PSI3NSIgeT0iMTciIHdpZHRoPSIzNiIgaGVpZ2h0PSIzMSIgZmlsbD0iI2E3MDBmZiIgLz4KCQk8bGluZSB4MT0iMzUiIHkxPSI1MCIgeDI9IjU0IiB5Mj0iNzgiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJCTxsaW5lIHgxPSI5MyIgeTE9IjUwIiB4Mj0iNzQiIHkyPSI3OCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjgiIC8+CgkJPHJlY3QgeD0iNDQiIHk9Ijc4IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNDYiIHk9IjgwIiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+Cgk8L2c+Cjwvc3ZnPgo=","c9415d0ae69fc6a75b046e0946d9501efe42a8d054b7f99c9e6e8b51594cae558c81c56f038d654f3b8b3b05c376d00fd5c3537d4d10a1dcaae153e0d91989b5":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iMTciIHk9IjE3IiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+CgkJPGxpbmUgeDE9IjU1IiB5MT0iMzIiIHgyPSI3OCIgeTI9IjMyIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8cmVjdCB4PSI3MyIgeT0iMTUiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzNSIgZmlsbD0iIzAwMDAwMCIgLz4KCQk8cmVjdCB4PSI3NSIgeT0iMTciIHdpZHRoPSIzNiIgaGVpZ2h0PSIzMSIgZmlsbD0iI2E3MDBmZiIgLz4KCQk8bGluZSB4MT0iMzUiIHkxPSI1MCIgeDI9IjU0IiB5Mj0iNzgiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJCTxsaW5lIHgxPSI5MyIgeTE9IjUwIiB4Mj0iNzQiIHkyPSI3OCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjgiIC8+CgkJPHJlY3QgeD0iNDQiIHk9Ijc4IiB3aWR0aD0iNDAiIGhlaWdodD0iMzUiIGZpbGw9IiMwMDAwMDAiIC8+CgkJPHJlY3QgeD0iNDYiIHk9IjgwIiB3aWR0aD0iMzYiIGhlaWdodD0iMzEiIGZpbGw9IiNhNzAwZmYiIC8+CgkJPGxpbmUgeDE9IjAiIHkxPSIwIiB4Mj0iMTI4IiB5Mj0iMTI4IiBzdHJva2U9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iOCIgLz4KCQk8bGluZSB4MT0iMTI4IiB5MT0iMCIgeDI9IjAiIHkyPSIxMjgiIHN0cm9rZT0iI2ZmMDAwMCIgc3Ryb2tlLXdpZHRoPSI4IiAvPgoJPC9nPgo8L3N2Zz4K","f4592e448c65790e56926d9f8993a3629aa8d76528fe21717150e5a269adbb429a89cb095ffc6fca651482d2b3264c5e318a377f19d97779fbc5df91a9fc2617":"data:image/png;base64,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","7a1882c594c3f154268404dca118b6375ba1a42643cb62d6831f49fb1865f1051906788b6edadc81e00c69b454bf9244d407f0326d1af1e12994bf38a742bae4":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMzQiIHdpZHRoPSIxMTIiIGhlaWdodD0iNjAiIHN0cm9rZT0iIzgwODA4MCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJ0cmFuc3BhcmVudCIgLz4KCQk8cmVjdCB4PSIxMTIiIHk9IjQ4IiB3aWR0aD0iMTYiIGhlaWdodD0iMzIiIGZpbGw9IiM4MDgwODAiIC8+CgkJPHJlY3QgeD0iMSIgeT0iMzUiIHdpZHRoPSIxMTAiIGhlaWdodD0iNTgiIGZpbGw9IiMwMGZmMDAiIC8+Cgk8L2c+Cjwvc3ZnPgo=","b209a9b9a002b640b7ff0ccc37d4c84568e5ec247ea90c2372ee0cb54844109f2e24312137a6c8adf38b9b284b94a50a081672c13f7e2150e9026978dd781450":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiIGZpbGw9IiNmZmZmZmYiIC8+CgkJPHJlY3QgeD0iMCIgeT0iLTQiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iIzgwODA4MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI4LCAtMzIpIHJvdGF0ZSg0NSkiIC8+CgkJPHRleHQgeD0iNiIgeT0iMTYiIGZvbnQtc2l6ZT0iMTJweCI+TG9yZW0gaXBzdW0gZG9sb3I8L3RleHQ+CgkJPHRleHQgeD0iNiIgeT0iMzIiIGZvbnQtc2l6ZT0iMTJweCI+c2l0IGFtZXQsIGNvbnNlY3RldHVyPC90ZXh0PgoJCTx0ZXh0IHg9IjYiIHk9IjQ4IiBmb250LXNpemU9IjEycHgiPmFkaXBpc2NpbmcgZWxpdC4gTnVsbGFtPC90ZXh0PgoJCTx0ZXh0IHg9IjYiIHk9IjY0IiBmb250LXNpemU9IjEycHgiPnVsbGFtY29ycGVyIG1vbGxpczwvdGV4dD4KCQk8dGV4dCB4PSI2IiB5PSI4MCIgZm9udC1zaXplPSIxMnB4Ij5sYWNpbmlhLiBVdCBkaWduaXNzaW0sPC90ZXh0PgoJCTx0ZXh0IHg9IjYiIHk9Ijk2IiBmb250LXNpemU9IjEycHgiPmxvcmVtIHNlZCB1bHRyaWNlczwvdGV4dD4KCQk8dGV4dCB4PSI2IiB5PSIxMTIiIGZvbnQtc2l6ZT0iMTJweCI+cG9ydHRpdG9yLCB0ZWxsdXMuLi48L3RleHQ+Cgk8L2c+Cjwvc3ZnPgo=","f1a77c60c7a9495e9629aac6b3ba1821df0721ae00b413ce1d6d2b099317c11d26973350d9cc50c11781d19b0935493f30271e1d0f1830dbfc49fcb39cb2dcc4":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAwXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjabVDbEcMgDPv3FB0BLPMahzTpXTfo+DVgcqGp7pCFDcKYjs/7RY8G9kISUo4lRqeQIoWriuwGamfvpHPHLOl+ydNZYE1BI+xCtPMz70+DEaqqcDV6WmFbC0XMP/8Y8QhoHTW9m1ExI/AoeDOo41sulpyuX9gOtyKPRY0kr23f9kmntwd9B8wHPJwyEEcDaCsQqgqv7JG5KXSdlIFppgP5N6cJ+gLqhVkYh0XxjQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU6VSKortIOKQoTrZRUUcaxWKUCHUCq06mLz0D5o0JCkujoJrwcGfxaqDi7OuDq6CIPgD4i44KbpIifelhRYxXni8j/PuObx3HyA0KkyzeuKApttmOpkQs7lVMfAKH4YQxCDCMrOMOUlKwbO+7qmb6i7Gs7z7/qx+NW8xwCcSx5lh2sQbxDObtsF5nzjCSrJKfE48YdIFiR+5rrT4jXPRZYFnRsxMep44QiwWu1jpYlYyNeJp4qiq6ZQvZFusct7irFVqrH1P/sJQXl9Z5jqtUSSxiCVIEKGghjIqsBGjXSfFQprOEx7+EdcvkUshVxmMHAuoQoPs+sH/4PdsrcLUZCsplAB6XxznYwwI7ALNuuN8HztO8wTwPwNXesdfbQCzn6TXO1r0CBjYBi6uO5qyB1zuAMNPhmzKruSnJRQKwPsZfVMOCN8CwbXW3NrnOH0AMjSr1A1wcAiMFyl73ePdfd1z+7enPb8fQC5ykgotUKYAAA14aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjRlZDI3MGJiLTk1NTctNDkxMy1hMzJlLWRmODlhZDI2YTBmZiIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MjI3NTNhNC02OTI4LTQ5ZmMtOTY1Mi1jOGI0OWI3NTIxZTciCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMmVlMjdlNS04YTUyLTRiYzUtOGZhNS01ZWEzNjE3ZTAyMGQiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MzcxOTU0NTA1NTkwNDciCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zNiIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjU6MDE6MThUMTM6MTc6MzArMDM6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDI1OjAxOjE4VDEzOjE3OjMwKzAzOjAwIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTljYjcwYTMtMmNkZi00NjE5LWEzMTUtOTUyNjRkZjNhMDliIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHaW1wIDIuMTAgKExpbnV4KSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyNS0wMS0xOFQxMzoxNzozMCswMzowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz5S1XxbAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6QESChEenq7N6wAADn5JREFUeNrtnGtsVNW7xn9r7z33XrgVCpRSWwpyx3ByPDlRvxDN+WBiIPFShINwYsDMiZrwQROrMYKJXzX/JiBEbU00qGhMIOYfJSFKTg7NSQBREEpLodza0mLbaee2917nw56Z3ktpZ0qns55kMu2+zKznXc963nevvWaDgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgkLWora2Vu7cuVM+zDbcvn37wunTp+WRI0ceSjtErnb8/v37aWhoAOC3337jySefnLJYtLS0yOvXr/PVV18N2l5TUyOUADKIuro6uW/fvlTHV1ZWUl1dzY4dOzIeh+bmZnnt2jW++eabYft27dpFaWnpjqKiojolgCkY8cmOf/nll3G73di2nZFYXLlyRV67do3vv/9+2L5XX32VDRs2PPT4i1zs+K1bt/Lmm28C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"},"buildInfo":{"for":"1390","version":1390,"when":1755547941370,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"34b7c0ae237c382fb156fd77ff3985069f9e3247947bfd18514cd78a585aea08f4d45d47f78f0438b1ca4f41f33fef9c62ea52d5fe481490f9e96d73f4654e04"}},"50-pcos-sounds.fs":{"backend":{"files":{"etc":{"sounds":{"ask.aud":"71689393b17429a035a3f6cade931328938131437e4b3f5be23a915ac21b7eab95a692573c1538c2deb03bc413e6b70ef912b5507b3923c9a9e4a78a432b0224","ding.aud":"c75c9744e53a3a6bf220825e6501254ad18c9a82973f100288a889284c6d5dc68688b4593580e5b8f6384a3f9d8cc8a0f859c82dbcace436006b8eadacd2fe89","error.aud":"4319b59278b49dc4621311977af2ab866b22fe6b1b3fbdcefaf25d204a25a321cc09f64cb59b5ffc80b0e235ea29d828d6311bf7473e35910237cc1991e0c481","shutdown.aud":"fcb3f5cbc37cc3d78d52cda9c8840ef9662de55827259e09b8d8b3ec46415c030f0ec3ac1d7ecb702df323449e9a678c349a54f7892b75e2ae3a85ed2afe4fe3","startup.aud":"d413a258326c04c8941b9c171dd6435b9db8206f4dbf138daaad304b4d8a499d0a102c576968bdc7856fdd900a43e13c1771430070e816a860e90ecc1f24ab5e"}}},"permissions":{"etc/sounds/ask.aud":{"world":"rx"},"etc/sounds/ding.aud":{"world":"rx"},"etc/sounds/error.aud":{"world":"rx"},"etc/sounds/shutdown.aud":{"world":"rx"},"etc/sounds/startup.aud":{"world":"rx"},"etc/sounds/":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"71689393b17429a035a3f6cade931328938131437e4b3f5be23a915ac21b7eab95a692573c1538c2deb03bc413e6b70ef912b5507b3923c9a9e4a78a432b0224":"data:audio/mpeg;base64,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HBACSjLCdkCoB7AQef0SNjeA1gLPKVQUv5qT7L5IQX7QSBtZvt6ZkxOf4xqEdtadXsMiMCsnqx3Dy8ylqhkvY1TAXICjGGXJD5USCVrBZJF5P/p/0Xf///tSxOkDC4CvGi29sQmBEWMFt6YYcN+kIcpCBjFwfMewEqXSJuZYSZd+aj8HK4EaTIWnyoDGERzAojcRgcJapHz0FmZtjILpdijPImIkMJUZ0C2MbiUkeVfd9DpmqJd+Ja+cz6te/94XiRy3nThUNcJtZxN3/+4CAApeHYA6KonhTlMsLgACLxMcUwvDGHBDY0kIo8j7F+pQQCZvwW0GAOCcDPlgqCGtnlf2xgSwJx13X8o4vUVo2/PyFmWtln5/Nkeqcq+uJEJWGVEEkQUDZH//+1LE6IOLnK8YDb1wwX8RowW9PHL/R+nT9v/+z2gQAA9sDBCaACGRRpy6WyFLkxZmBMEPtjQC7a4VGq6ctgLiZrpmkFZumMkLvz/Ebd6zNS8WAOMWENvp6NqksmeLCINSW3RUGPPBUJCYFAEkRjjJNhCFP20ggkSQjKlUiNgDRUDdsousU0ZcRHin7Gkhr1yvfgdBw4pyD5mOlBBr5gFk5iOu3OEwBKbjujZNcypnhaxlgnWFzJARFFMRmhMxWn/sa9lW7+r//vu27B24cDIjcP/7UsToAAtYeSFM6Q6BfBJiwc08cQjBlRKcD0HIj5RCEKs3jcxlY/U8woAzgcaHBwQsuIiQFIiG0dBPOMltspdWlpmjK5rwBDZhCZHpaPwpq0c2ifUOF1Jq7n3G2yUcmTr6xOkTHK5SvODM4Q2V0T7i9iG0bi9YnYZXOuPqG2Eq5336XgZtX6UvlbO/S+wbbvcDIIxIGRRiQMjDEhapRIWjKpC0ZUALRlQOqMqjojKoyItUDpClUdKyTEFNRTMuMTAwqqqqqgABZOsDOyNKEk6G//tSxOkDDFSfGs2wcUFcEGNJt6IQCMosgnHArmBmEEwIULQXP2Tirjc2aLEho0Kihp7N7P/F9ISFdQv1M//9fWKcVbxRD6//4vVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+1LE6gMK+HcebTEQgp+fIsW9MLlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7UsTBg8fsSQ5HsMhAAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","c75c9744e53a3a6bf220825e6501254ad18c9a82973f100288a889284c6d5dc68688b4593580e5b8f6384a3f9d8cc8a0f859c82dbcace436006b8eadacd2fe89":"data:audio/mpeg;base64,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tluDvAwCOUOAMPM0SaMIgyJqkiacCP7p3GfhxadKjIbMoX6UB40bzuAl52FU0vnZUgexzLVcRKx6YhhWqx5CqAiOm9mthi+sUN5qu3lZaxnzKShTCMYt//tSxOACCkSlI00kdMlLkKNFvC4Yq3XUAxEKKDcF/a0bJQD7BBQqfDZgL+AwG9euLxfuU0QwHoUTA34dKljxkoBYsQdb1jMQJtXH0x1a1tdqTFKln7SWFIcxNZjJh89GjzpCFiBEa9H/s///+rSn/94jBHbVQBp+a7bhcQC4IXREO+bAaiQG9L/QVZuK2GJk51A+mbK4HAQBF8fHAxJuV1YokLXhhsAggZcfG7zXmgDmVF5ZaRJYQMOmvBSEnF8xK1apYRGYFpB0H1qXQkHoN3//+1LE64IMCLsc7bB0wYcT4wm8IhhYOgkgxIRKbKPxiMEmAQMjUKoM4uLR4JtFuPTBc/Exg1mYa7qRs4kaMT9VHpBJeu0svs3qqBSOCakWxt7v46wCRLN8mUeFEcG1Tey7/v53+2moICcyIS6l4ua3XwAYAAQSMsFru4nAgkmHhCmDNwgKcE8c6GMa4XbAxgKIPDCSjiGvtyLgFbFrMqqgyACg1GWRFU82Xz0YuM5h/+RigGCAcSNTMPYce+Zu+73f/3bMQfq+kIDPJwCADCoKTv/7UsTogAuEvRgtvRDBYw7j3ZeaGHc3hGUu7UAMI4yVmwQNVqV4rtTRG8EAjIA0bnrZ8zpXUOy4sHiNgERUSmjxOCQGhCRITRhGgOHUmTR42YLh8Y6SJZlim6Sg5hMQWRJKWgeUaklCcW01ij0Lh/lrgtnqFwB0jEhekYkLUjEhatZJVGWDC0ZRIWjKpKoyoBVOqB1RlQOidVHSLVA6ZVQOlUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//tSxOwDzBiNFA29NIlsk6LBzBngVQVGsLFVJrKkQhB4DgcgTi0sBCSoWEZkYLC5lzVEQELNF0//FfFOtvZ//8X4szi/sd//1tVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+1LE7AAK0IkhTT1JQlgbIsWkmllVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7UsS7g8ZwJxBEmGhAAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","4319b59278b49dc4621311977af2ab866b22fe6b1b3fbdcefaf25d204a25a321cc09f64cb59b5ffc80b0e235ea29d828d6311bf7473e35910237cc1991e0c481":"data:audio/mpeg;base64,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","fcb3f5cbc37cc3d78d52cda9c8840ef9662de55827259e09b8d8b3ec46415c030f0ec3ac1d7ecb702df323449e9a678c349a54f7892b75e2ae3a85ed2afe4fe3":"data:audio/mpeg;base64,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","d413a258326c04c8941b9c171dd6435b9db8206f4dbf138daaad304b4d8a499d0a102c576968bdc7856fdd900a43e13c1771430070e816a860e90ecc1f24ab5e":"data:audio/mpeg;base64,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"},"buildInfo":{"for":"1390","version":1390,"when":1755547941373,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"56d9f0c3cc52a826649865368984a5d2c58bf04deae98dce68e16d9ab40760745fe41676edcbe8992c338e0b71ae9a3cab4b074d0ae35c5c36e095951b00c608"}},"50-pcos-wallpapers.fs":{"backend":{"files":{"etc":{"wallpapers":{"pcos-beta.pic":"bd4dc1cdfd6ef7391f509264e3e7114e137c6f05f3f1ae41c82afa3fc59ddd4ed807a4e183aa82b7136099181752de930414398c69271fa134168852dba24baf","pcos-dark-beta.pic":"faa1cd0fb5554dc33c67c254d7aa1879a99f308b511717b7ad90e70263891f34e00012273e2e403b036220ccc50b67c855a8b8191d49e11827372ee9cb605ff2","pcos-lock-beta.pic":"6ef021d1c8135407b8c842ceaf74d8e02ad595695e7d703b0328ed583a7404fdd69eb60db5d9fa7f87b384c38bc53761807fd1254dc85549c8d5525b18060c02"}}},"permissions":{"etc/wallpapers/pcos-beta.pic":{"world":"rx"},"etc/wallpapers/pcos-dark-beta.pic":{"world":"rx"},"etc/wallpapers/pcos-lock-beta.pic":{"world":"rx"},"etc/wallpapers/":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"bd4dc1cdfd6ef7391f509264e3e7114e137c6f05f3f1ae41c82afa3fc59ddd4ed807a4e183aa82b7136099181752de930414398c69271fa134168852dba24baf":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgk8ZGVmcz4KCQk8bGluZWFyR3JhZGllbnQgaWQ9IkJnR3JhZGllbnQiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj4KCQkJPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwYmZmZiIgLz4KCQkJPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjYTcwMGZmIiAvPgoJCTwvbGluZWFyR3JhZGllbnQ+Cgk8L2RlZnM+Cgk8Zz4KCQk8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSJ1cmwoI0JnR3JhZGllbnQpIiAvPgoJCTx0ZXh0IHg9IjM1IiB5PSIxNTAiIGNsYXNzPSJzZWdvZWZvbnQiIGZpbGw9IiNmZmZmZmYiPlBDT1MgMzwvdGV4dD4KCQk8dGV4dCB4PSIxNTU1IiB5PSIxMDMwIiBjbGFzcz0ic2Vnb2Vmb250IiBmaWxsPSIjMzAzMDMwIj50ZXN0IGJ1aWxkPC90ZXh0PgoJPC9nPgoJPHN0eWxlPgoJCS5zZWdvZWZvbnQgewoJCQlmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CgkJCWZvbnQtc2l6ZTogNjRweDsKCQkJZm9udC13ZWlnaHQ6IGJvbGQ7CgkJfQoJPC9zdHlsZT4KPC9zdmc+Cg==","faa1cd0fb5554dc33c67c254d7aa1879a99f308b511717b7ad90e70263891f34e00012273e2e403b036220ccc50b67c855a8b8191d49e11827372ee9cb605ff2":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgk8ZGVmcz4KCQk8bGluZWFyR3JhZGllbnQgaWQ9IkJnR3JhZGllbnQiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj4KCQkJPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgLz4KCQkJPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjYTcwMGZmIiAvPgoJCTwvbGluZWFyR3JhZGllbnQ+Cgk8L2RlZnM+Cgk8Zz4KCQk8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSJ1cmwoI0JnR3JhZGllbnQpIiAvPgoJCTx0ZXh0IHg9IjM1IiB5PSIxNTAiIGNsYXNzPSJzZWdvZWZvbnQiIGZpbGw9IiNhNzAwZmYiPlBDT1MgMzwvdGV4dD4KCQk8dGV4dCB4PSIxNTU1IiB5PSIxMDMwIiBjbGFzcz0ic2Vnb2Vmb250IiBmaWxsPSIjMzAzMDMwIj50ZXN0IGJ1aWxkPC90ZXh0PgoJPC9nPgoJPHN0eWxlPgoJCS5zZWdvZWZvbnQgewoJCQlmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CgkJCWZvbnQtc2l6ZTogNjRweDsKCQkJZm9udC13ZWlnaHQ6IGJvbGQ7CgkJfQoJPC9zdHlsZT4KPC9zdmc+Cg==","6ef021d1c8135407b8c842ceaf74d8e02ad595695e7d703b0328ed583a7404fdd69eb60db5d9fa7f87b384c38bc53761807fd1254dc85549c8d5525b18060c02":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Cgk8ZGVmcz4KCQk8bGluZWFyR3JhZGllbnQgaWQ9IkJnR3JhZGllbnQiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj4KCQkJPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwYmZmZiIgLz4KCQkJPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNhNzAwZmYiIC8+CgkJCTxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgLz4KCQk8L2xpbmVhckdyYWRpZW50PgoJPC9kZWZzPgoJPGc+CgkJPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjE5MjAiIGhlaWdodD0iMTA4MCIgZmlsbD0idXJsKCNCZ0dyYWRpZW50KSIgLz4KCQk8dGV4dCB4PSI4MDAiIHk9IjIwMCIgY2xhc3M9InNlZ29lZm9udCIgZmlsbD0iIzAwMDAwMCIgZm9udC1zaXplPSI3MnB4IiBmb250LXdlaWdodD0iYm9sZCI+UENPUyAzPC90ZXh0PgoJCTx0ZXh0IHg9Ijg2MCIgeT0iMjQwIiBjbGFzcz0ic2Vnb2Vmb250IiBmaWxsPSIjNDA0MDQwIiBmb250LXNpemU9IjM2cHgiPmxvY2tlZDwvdGV4dD4KCQk8dGV4dCB4PSIxNTU1IiB5PSIxMDUwIiBjbGFzcz0ic2Vnb2Vmb250IiBmaWxsPSIjNDA0MDQwIiBmb250LXNpemU9IjcycHgiIGZvbnQtd2VpZ2h0PSJib2xkIj50ZXN0IGJ1aWxkPC90ZXh0PgoJPC9nPgoJPHN0eWxlPgoJCS5zZWdvZWZvbnQgewoJCQlmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CgkJfQoJPC9zdHlsZT4KPC9zdmc+Cg=="},"buildInfo":{"for":"1390","version":1390,"when":1755547941376,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"69f2dc64e8ca4f170bf3bde8d87c149c5fc183ba89ec1950f4653594502b2c49fc6ded34ab7e9737360b6d0748dae1cc4943eb4825275941af661797b8996d03"}},"50-diff.fs":{"backend":{"files":{"boot":{"03-diff.js":"3df2fc15bf132fd70c0bed8cb175fe546e60bf64bb572aa7a74f9c06b03885a55932e30ed0b18535c7e3f16e7807334674159ac3662acb79ef0227d18fb63330"}},"permissions":{"boot/03-diff.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"3df2fc15bf132fd70c0bed8cb175fe546e60bf64bb572aa7a74f9c06b03885a55932e30ed0b18535c7e3f16e7807334674159ac3662acb79ef0227d18fb63330":"function loadDiff() {\n\t// fast-myers-diff, version 3.2.0\n\t// @pcos-app-mode native\n\t\"use strict\";function diff_internal(e,t){var{b:a,eq:l,stack_base:s}=e;let{i:f,N:c,j:n,M:p,Z:h,stack_top:y}=e;for(;;)switch(t){case 0:e:for(;0<c&&0<p;){a.fill(0,0,2*h);var u=c-p,r=c+p,x=1&r,d=f+c-1,v=n+p-1,M=(r+x)/2;let o;t:for(let i=0;i<=M;i++){var b=2*Math.max(0,i-p)-i,_=i-2*Math.max(0,i-c);for(let r=b;r<=_;r+=2){var m=a[r-1-h*Math.floor((r-1)/h)],S=a[r+1-h*Math.floor((r+1)/h)],S=r===-i||r!==i&&m<S?S:m+1,m=S-r;let e=S,t=m;for(;e<c&&t<p&&l(f+e,n+t);)e++,t++;if(a[r-h*Math.floor(r/h)]=e,1==x&&(o=u-r)>=1-i&&o<i&&e+a[h+o-h*Math.floor(o/h)]>=c){if(1<i||e!==S){s[y++]=f+e,s[y++]=c-e,s[y++]=n+t,s[y++]=p-t,c=S,p=m,h=2*(Math.min(c,p)+1);continue e}break t}}for(let r=b;r<=_;r+=2){var A=a[h+r-1-h*Math.floor((r-1)/h)],P=a[h+r+1-h*Math.floor((r+1)/h)],P=r===-i||r!==i&&A<P?P:A+1,A=P-r;let e=P,t=A;for(;e<c&&t<p&&l(d-e,v-t);)e++,t++;if(a[h+r-h*Math.floor(r/h)]=e,0==x&&(o=u-r)>=-i&&o<=i&&e+a[o-h*Math.floor(o/h)]>=c){if(0<i||e!==P){s[y++]=f+c-P,s[y++]=P,s[y++]=n+p-A,s[y++]=A,c-=e,p-=t,h=2*(Math.min(c,p)+1);continue e}break t}}}if(c!==p){p>c?(f+=c,n+=c,p-=c,c=0):(f+=p,n+=p,c-=p,p=0);break}}if(c+p!==0)if(e.pxe===f||e.pye===n)e.pxe=f+c,e.pye=n+p;else{var i=e.pxs;if(e.oxs=e.pxs,e.oxe=e.pxe,e.oys=e.pys,e.oye=e.pye,e.pxs=f,e.pxe=f+c,e.pys=n,e.pye=n+p,0<=i)return e.i=f,e.N=c,e.j=n,e.M=p,e.Z=h,e.stack_top=y,1}case 1:if(0===y)return 2;p=s[--y],n=s[--y],c=s[--y],f=s[--y],h=2*(Math.min(c,p)+1),t=0}};class DiffGen{constructor(e){this.state=e,this.c=0,this.result={value:null,done:!1}}[Symbol.iterator](){return this}next(){var e,{state:t,result:r}=this;return 1<this.c?(r.done=!0,r.value=void 0):(e=diff_internal(t,this.c),1===(this.c=e)?r.value=[t.oxs,t.oxe,t.oys,t.oye]:0<=t.pxs?r.value=[t.pxs,t.pxe,t.pys,t.pye]:(r.done=!0,r.value=void 0)),r}}function diff_core(e,t,r,i,o){var a=2*(Math.min(t,i)+1),l=t+i,l=new(l<256?Uint8Array:l<65536?Uint16Array:Uint32Array)(2*a);return new DiffGen({i:e,N:t,j:r,M:i,Z:a,b:l,eq:o,pxs:-1,pxe:-1,pys:-1,pye:-1,oxs:-1,oxe:-1,oys:-1,oye:-1,stack_top:0,stack_base:[]})}function diff(r,i,e){let[t,o,a]=[0,r.length,i.length];if(\"function\"==typeof e){for(;t<o&&t<a&&e(t,t);)t++;if(t===o&&t===a)return[][Symbol.iterator]();for(;e(--o,--a)&&o>t&&a>t;);}else{for(;t<o&&t<a&&r[t]===i[t];)t++;if(t===o&&t===a)return[][Symbol.iterator]();for(;r[--o]===i[--a]&&o>t&&a>t;);e=(e,t)=>r[e]===i[t]}return diff_core(t,o+1-t,t,a+1-t,e)}globalThis.diff_core=diff_core,globalThis.diff=diff;class LCSGen{constructor(e,t){this.diff=e,this.N=t,this.i=0,this.j=0}[Symbol.iterator](){return this}next(){var i=this.diff.next();if(i.done){let{i:e,j:t,N:r}=this;e<r&&(i.done=!1,i.value=[e,t,r-e],this.i=r)}else{var r=i.value,o=r[0],a=r[1],l=r[3];let{i:e,j:t}=this;e!==o&&(r.length--,r[0]=e,r[1]=t,r[2]=o-e),this.i=a,this.j=l}return i}}function lcs(e,t,r){return new LCSGen(diff(e,t,r),e.length)}function*calcPatch(e,t,r){var i=ArrayBuffer.isView(e)?Uint8Array.prototype.subarray:e.slice;for(const o of diff(e,t,r))o[2]=i.call(t,o[2],o[3]),yield o}function*applyPatch(e,t){let r=0;var i,o,a,l=ArrayBuffer.isView(e)?Uint8Array.prototype.subarray:e.slice;for([i,o,a]of t)r<i&&(yield l.call(e,r,i)),0<a.length&&(yield a),r=o;r<e.length&&(yield l.call(e,r))}function*calcSlices(e,t,r){let i=0;var o,a,l,s,f=ArrayBuffer.isView(e)?Uint8Array.prototype.subarray:e.slice;for([o,a,l,s]of diff(e,t,r))i<o&&(yield[0,f.call(e,i,o)]),o<a&&(yield[-1,f.call(e,o,a)]),l<s&&(yield[1,f.call(t,l,s)]),i=a;i<e.length&&(yield[0,e.slice(i)])}globalThis.lcs=lcs,globalThis.calcPatch=calcPatch,globalThis.applyPatch=applyPatch,globalThis.calcSlices=calcSlices;\n}\nloadDiff();"},"buildInfo":{"for":"1390","version":1390,"when":1755547941359,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"4135d0a87cc8deaf9d3ef5e53e2c24196f1b4e4e9f9043ecb4a35c486818f49ca6b8a567da431dba6d1393e144ad3e62a6bab1068ded8b48cae6246ee37fe70b"}},"50-tweetnacl.fs":{"backend":{"files":{"boot":{"05-tweetnacl.js":"4a4709aca797ac133d59c43c875dd4f682ba50f977a6863f99e4972c8c7f33971e547c95b1414d98049a5df61c29dbeebf197721105aea0169649d587656737c"}},"permissions":{"boot/05-tweetnacl.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"4a4709aca797ac133d59c43c875dd4f682ba50f977a6863f99e4972c8c7f33971e547c95b1414d98049a5df61c29dbeebf197721105aea0169649d587656737c":"function tweetnacl() {\n    (function(nacl) {\n        'use strict';\n        \n        // Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n        // Public domain.\n        //\n        // Implementation derived from TweetNaCl version 20140427.\n        // See for details: http://tweetnacl.cr.yp.to/\n        \n        var gf = function(init) {\n          var i, r = new Float64Array(16);\n          if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n          return r;\n        };\n        \n        //  Pluggable, initialized in high-level API below.\n        var randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n        \n        var _0 = new Uint8Array(16);\n        var _9 = new Uint8Array(32); _9[0] = 9;\n        \n        var gf0 = gf(),\n            gf1 = gf([1]),\n            _121665 = gf([0xdb41, 1]),\n            D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n            D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n            X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n            Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n            I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n        \n        function ts64(x, i, h, l) {\n          x[i]   = (h >> 24) & 0xff;\n          x[i+1] = (h >> 16) & 0xff;\n          x[i+2] = (h >>  8) & 0xff;\n          x[i+3] = h & 0xff;\n          x[i+4] = (l >> 24)  & 0xff;\n          x[i+5] = (l >> 16)  & 0xff;\n          x[i+6] = (l >>  8)  & 0xff;\n          x[i+7] = l & 0xff;\n        }\n        \n        function vn(x, xi, y, yi, n) {\n          var i,d = 0;\n          for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n          return (1 & ((d - 1) >>> 8)) - 1;\n        }\n        \n        function crypto_verify_16(x, xi, y, yi) {\n          return vn(x,xi,y,yi,16);\n        }\n        \n        function crypto_verify_32(x, xi, y, yi) {\n          return vn(x,xi,y,yi,32);\n        }\n        \n        function core_salsa20(o, p, k, c) {\n          var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n              j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n              j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n              j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n              j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n              j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n              j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n              j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n              j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n              j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n              j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n              j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n              j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n              j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n              j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n              j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n        \n          var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n              x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n              x15 = j15, u;\n        \n          for (var i = 0; i < 20; i += 2) {\n            u = x0 + x12 | 0;\n            x4 ^= u<<7 | u>>>(32-7);\n            u = x4 + x0 | 0;\n            x8 ^= u<<9 | u>>>(32-9);\n            u = x8 + x4 | 0;\n            x12 ^= u<<13 | u>>>(32-13);\n            u = x12 + x8 | 0;\n            x0 ^= u<<18 | u>>>(32-18);\n        \n            u = x5 + x1 | 0;\n            x9 ^= u<<7 | u>>>(32-7);\n            u = x9 + x5 | 0;\n            x13 ^= u<<9 | u>>>(32-9);\n            u = x13 + x9 | 0;\n            x1 ^= u<<13 | u>>>(32-13);\n            u = x1 + x13 | 0;\n            x5 ^= u<<18 | u>>>(32-18);\n        \n            u = x10 + x6 | 0;\n            x14 ^= u<<7 | u>>>(32-7);\n            u = x14 + x10 | 0;\n            x2 ^= u<<9 | u>>>(32-9);\n            u = x2 + x14 | 0;\n            x6 ^= u<<13 | u>>>(32-13);\n            u = x6 + x2 | 0;\n            x10 ^= u<<18 | u>>>(32-18);\n        \n            u = x15 + x11 | 0;\n            x3 ^= u<<7 | u>>>(32-7);\n            u = x3 + x15 | 0;\n            x7 ^= u<<9 | u>>>(32-9);\n            u = x7 + x3 | 0;\n            x11 ^= u<<13 | u>>>(32-13);\n            u = x11 + x7 | 0;\n            x15 ^= u<<18 | u>>>(32-18);\n        \n            u = x0 + x3 | 0;\n            x1 ^= u<<7 | u>>>(32-7);\n            u = x1 + x0 | 0;\n            x2 ^= u<<9 | u>>>(32-9);\n            u = x2 + x1 | 0;\n            x3 ^= u<<13 | u>>>(32-13);\n            u = x3 + x2 | 0;\n            x0 ^= u<<18 | u>>>(32-18);\n        \n            u = x5 + x4 | 0;\n            x6 ^= u<<7 | u>>>(32-7);\n            u = x6 + x5 | 0;\n            x7 ^= u<<9 | u>>>(32-9);\n            u = x7 + x6 | 0;\n            x4 ^= u<<13 | u>>>(32-13);\n            u = x4 + x7 | 0;\n            x5 ^= u<<18 | u>>>(32-18);\n        \n            u = x10 + x9 | 0;\n            x11 ^= u<<7 | u>>>(32-7);\n            u = x11 + x10 | 0;\n            x8 ^= u<<9 | u>>>(32-9);\n            u = x8 + x11 | 0;\n            x9 ^= u<<13 | u>>>(32-13);\n            u = x9 + x8 | 0;\n            x10 ^= u<<18 | u>>>(32-18);\n        \n            u = x15 + x14 | 0;\n            x12 ^= u<<7 | u>>>(32-7);\n            u = x12 + x15 | 0;\n            x13 ^= u<<9 | u>>>(32-9);\n            u = x13 + x12 | 0;\n            x14 ^= u<<13 | u>>>(32-13);\n            u = x14 + x13 | 0;\n            x15 ^= u<<18 | u>>>(32-18);\n          }\n           x0 =  x0 +  j0 | 0;\n           x1 =  x1 +  j1 | 0;\n           x2 =  x2 +  j2 | 0;\n           x3 =  x3 +  j3 | 0;\n           x4 =  x4 +  j4 | 0;\n           x5 =  x5 +  j5 | 0;\n           x6 =  x6 +  j6 | 0;\n           x7 =  x7 +  j7 | 0;\n           x8 =  x8 +  j8 | 0;\n           x9 =  x9 +  j9 | 0;\n          x10 = x10 + j10 | 0;\n          x11 = x11 + j11 | 0;\n          x12 = x12 + j12 | 0;\n          x13 = x13 + j13 | 0;\n          x14 = x14 + j14 | 0;\n          x15 = x15 + j15 | 0;\n        \n          o[ 0] = x0 >>>  0 & 0xff;\n          o[ 1] = x0 >>>  8 & 0xff;\n          o[ 2] = x0 >>> 16 & 0xff;\n          o[ 3] = x0 >>> 24 & 0xff;\n        \n          o[ 4] = x1 >>>  0 & 0xff;\n          o[ 5] = x1 >>>  8 & 0xff;\n          o[ 6] = x1 >>> 16 & 0xff;\n          o[ 7] = x1 >>> 24 & 0xff;\n        \n          o[ 8] = x2 >>>  0 & 0xff;\n          o[ 9] = x2 >>>  8 & 0xff;\n          o[10] = x2 >>> 16 & 0xff;\n          o[11] = x2 >>> 24 & 0xff;\n        \n          o[12] = x3 >>>  0 & 0xff;\n          o[13] = x3 >>>  8 & 0xff;\n          o[14] = x3 >>> 16 & 0xff;\n          o[15] = x3 >>> 24 & 0xff;\n        \n          o[16] = x4 >>>  0 & 0xff;\n          o[17] = x4 >>>  8 & 0xff;\n          o[18] = x4 >>> 16 & 0xff;\n          o[19] = x4 >>> 24 & 0xff;\n        \n          o[20] = x5 >>>  0 & 0xff;\n          o[21] = x5 >>>  8 & 0xff;\n          o[22] = x5 >>> 16 & 0xff;\n          o[23] = x5 >>> 24 & 0xff;\n        \n          o[24] = x6 >>>  0 & 0xff;\n          o[25] = x6 >>>  8 & 0xff;\n          o[26] = x6 >>> 16 & 0xff;\n          o[27] = x6 >>> 24 & 0xff;\n        \n          o[28] = x7 >>>  0 & 0xff;\n          o[29] = x7 >>>  8 & 0xff;\n          o[30] = x7 >>> 16 & 0xff;\n          o[31] = x7 >>> 24 & 0xff;\n        \n          o[32] = x8 >>>  0 & 0xff;\n          o[33] = x8 >>>  8 & 0xff;\n          o[34] = x8 >>> 16 & 0xff;\n          o[35] = x8 >>> 24 & 0xff;\n        \n          o[36] = x9 >>>  0 & 0xff;\n          o[37] = x9 >>>  8 & 0xff;\n          o[38] = x9 >>> 16 & 0xff;\n          o[39] = x9 >>> 24 & 0xff;\n        \n          o[40] = x10 >>>  0 & 0xff;\n          o[41] = x10 >>>  8 & 0xff;\n          o[42] = x10 >>> 16 & 0xff;\n          o[43] = x10 >>> 24 & 0xff;\n        \n          o[44] = x11 >>>  0 & 0xff;\n          o[45] = x11 >>>  8 & 0xff;\n          o[46] = x11 >>> 16 & 0xff;\n          o[47] = x11 >>> 24 & 0xff;\n        \n          o[48] = x12 >>>  0 & 0xff;\n          o[49] = x12 >>>  8 & 0xff;\n          o[50] = x12 >>> 16 & 0xff;\n          o[51] = x12 >>> 24 & 0xff;\n        \n          o[52] = x13 >>>  0 & 0xff;\n          o[53] = x13 >>>  8 & 0xff;\n          o[54] = x13 >>> 16 & 0xff;\n          o[55] = x13 >>> 24 & 0xff;\n        \n          o[56] = x14 >>>  0 & 0xff;\n          o[57] = x14 >>>  8 & 0xff;\n          o[58] = x14 >>> 16 & 0xff;\n          o[59] = x14 >>> 24 & 0xff;\n        \n          o[60] = x15 >>>  0 & 0xff;\n          o[61] = x15 >>>  8 & 0xff;\n          o[62] = x15 >>> 16 & 0xff;\n          o[63] = x15 >>> 24 & 0xff;\n        }\n        \n        function core_hsalsa20(o,p,k,c) {\n          var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n              j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n              j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n              j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n              j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n              j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n              j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n              j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n              j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n              j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n              j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n              j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n              j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n              j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n              j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n              j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n        \n          var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n              x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n              x15 = j15, u;\n        \n          for (var i = 0; i < 20; i += 2) {\n            u = x0 + x12 | 0;\n            x4 ^= u<<7 | u>>>(32-7);\n            u = x4 + x0 | 0;\n            x8 ^= u<<9 | u>>>(32-9);\n            u = x8 + x4 | 0;\n            x12 ^= u<<13 | u>>>(32-13);\n            u = x12 + x8 | 0;\n            x0 ^= u<<18 | u>>>(32-18);\n        \n            u = x5 + x1 | 0;\n            x9 ^= u<<7 | u>>>(32-7);\n            u = x9 + x5 | 0;\n            x13 ^= u<<9 | u>>>(32-9);\n            u = x13 + x9 | 0;\n            x1 ^= u<<13 | u>>>(32-13);\n            u = x1 + x13 | 0;\n            x5 ^= u<<18 | u>>>(32-18);\n        \n            u = x10 + x6 | 0;\n            x14 ^= u<<7 | u>>>(32-7);\n            u = x14 + x10 | 0;\n            x2 ^= u<<9 | u>>>(32-9);\n            u = x2 + x14 | 0;\n            x6 ^= u<<13 | u>>>(32-13);\n            u = x6 + x2 | 0;\n            x10 ^= u<<18 | u>>>(32-18);\n        \n            u = x15 + x11 | 0;\n            x3 ^= u<<7 | u>>>(32-7);\n            u = x3 + x15 | 0;\n            x7 ^= u<<9 | u>>>(32-9);\n            u = x7 + x3 | 0;\n            x11 ^= u<<13 | u>>>(32-13);\n            u = x11 + x7 | 0;\n            x15 ^= u<<18 | u>>>(32-18);\n        \n            u = x0 + x3 | 0;\n            x1 ^= u<<7 | u>>>(32-7);\n            u = x1 + x0 | 0;\n            x2 ^= u<<9 | u>>>(32-9);\n            u = x2 + x1 | 0;\n            x3 ^= u<<13 | u>>>(32-13);\n            u = x3 + x2 | 0;\n            x0 ^= u<<18 | u>>>(32-18);\n        \n            u = x5 + x4 | 0;\n            x6 ^= u<<7 | u>>>(32-7);\n            u = x6 + x5 | 0;\n            x7 ^= u<<9 | u>>>(32-9);\n            u = x7 + x6 | 0;\n            x4 ^= u<<13 | u>>>(32-13);\n            u = x4 + x7 | 0;\n            x5 ^= u<<18 | u>>>(32-18);\n        \n            u = x10 + x9 | 0;\n            x11 ^= u<<7 | u>>>(32-7);\n            u = x11 + x10 | 0;\n            x8 ^= u<<9 | u>>>(32-9);\n            u = x8 + x11 | 0;\n            x9 ^= u<<13 | u>>>(32-13);\n            u = x9 + x8 | 0;\n            x10 ^= u<<18 | u>>>(32-18);\n        \n            u = x15 + x14 | 0;\n            x12 ^= u<<7 | u>>>(32-7);\n            u = x12 + x15 | 0;\n            x13 ^= u<<9 | u>>>(32-9);\n            u = x13 + x12 | 0;\n            x14 ^= u<<13 | u>>>(32-13);\n            u = x14 + x13 | 0;\n            x15 ^= u<<18 | u>>>(32-18);\n          }\n        \n          o[ 0] = x0 >>>  0 & 0xff;\n          o[ 1] = x0 >>>  8 & 0xff;\n          o[ 2] = x0 >>> 16 & 0xff;\n          o[ 3] = x0 >>> 24 & 0xff;\n        \n          o[ 4] = x5 >>>  0 & 0xff;\n          o[ 5] = x5 >>>  8 & 0xff;\n          o[ 6] = x5 >>> 16 & 0xff;\n          o[ 7] = x5 >>> 24 & 0xff;\n        \n          o[ 8] = x10 >>>  0 & 0xff;\n          o[ 9] = x10 >>>  8 & 0xff;\n          o[10] = x10 >>> 16 & 0xff;\n          o[11] = x10 >>> 24 & 0xff;\n        \n          o[12] = x15 >>>  0 & 0xff;\n          o[13] = x15 >>>  8 & 0xff;\n          o[14] = x15 >>> 16 & 0xff;\n          o[15] = x15 >>> 24 & 0xff;\n        \n          o[16] = x6 >>>  0 & 0xff;\n          o[17] = x6 >>>  8 & 0xff;\n          o[18] = x6 >>> 16 & 0xff;\n          o[19] = x6 >>> 24 & 0xff;\n        \n          o[20] = x7 >>>  0 & 0xff;\n          o[21] = x7 >>>  8 & 0xff;\n          o[22] = x7 >>> 16 & 0xff;\n          o[23] = x7 >>> 24 & 0xff;\n        \n          o[24] = x8 >>>  0 & 0xff;\n          o[25] = x8 >>>  8 & 0xff;\n          o[26] = x8 >>> 16 & 0xff;\n          o[27] = x8 >>> 24 & 0xff;\n        \n          o[28] = x9 >>>  0 & 0xff;\n          o[29] = x9 >>>  8 & 0xff;\n          o[30] = x9 >>> 16 & 0xff;\n          o[31] = x9 >>> 24 & 0xff;\n        }\n        \n        function crypto_core_salsa20(out,inp,k,c) {\n          core_salsa20(out,inp,k,c);\n        }\n        \n        function crypto_core_hsalsa20(out,inp,k,c) {\n          core_hsalsa20(out,inp,k,c);\n        }\n        \n        var sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n                    // \"expand 32-byte k\"\n        \n        function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n          var z = new Uint8Array(16), x = new Uint8Array(64);\n          var u, i;\n          for (i = 0; i < 16; i++) z[i] = 0;\n          for (i = 0; i < 8; i++) z[i] = n[i];\n          while (b >= 64) {\n            crypto_core_salsa20(x,z,k,sigma);\n            for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n            u = 1;\n            for (i = 8; i < 16; i++) {\n              u = u + (z[i] & 0xff) | 0;\n              z[i] = u & 0xff;\n              u >>>= 8;\n            }\n            b -= 64;\n            cpos += 64;\n            mpos += 64;\n          }\n          if (b > 0) {\n            crypto_core_salsa20(x,z,k,sigma);\n            for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n          }\n          return 0;\n        }\n        \n        function crypto_stream_salsa20(c,cpos,b,n,k) {\n          var z = new Uint8Array(16), x = new Uint8Array(64);\n          var u, i;\n          for (i = 0; i < 16; i++) z[i] = 0;\n          for (i = 0; i < 8; i++) z[i] = n[i];\n          while (b >= 64) {\n            crypto_core_salsa20(x,z,k,sigma);\n            for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n            u = 1;\n            for (i = 8; i < 16; i++) {\n              u = u + (z[i] & 0xff) | 0;\n              z[i] = u & 0xff;\n              u >>>= 8;\n            }\n            b -= 64;\n            cpos += 64;\n          }\n          if (b > 0) {\n            crypto_core_salsa20(x,z,k,sigma);\n            for (i = 0; i < b; i++) c[cpos+i] = x[i];\n          }\n          return 0;\n        }\n        \n        function crypto_stream(c,cpos,d,n,k) {\n          var s = new Uint8Array(32);\n          crypto_core_hsalsa20(s,n,k,sigma);\n          var sn = new Uint8Array(8);\n          for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n          return crypto_stream_salsa20(c,cpos,d,sn,s);\n        }\n        \n        function crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n          var s = new Uint8Array(32);\n          crypto_core_hsalsa20(s,n,k,sigma);\n          var sn = new Uint8Array(8);\n          for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n          return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n        }\n        \n        /*\n        * Port of Andrew Moon's Poly1305-donna-16. Public domain.\n        * https://github.com/floodyberry/poly1305-donna\n        */\n        \n        var poly1305 = function(key) {\n          this.buffer = new Uint8Array(16);\n          this.r = new Uint16Array(10);\n          this.h = new Uint16Array(10);\n          this.pad = new Uint16Array(8);\n          this.leftover = 0;\n          this.fin = 0;\n        \n          var t0, t1, t2, t3, t4, t5, t6, t7;\n        \n          t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n          t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n          t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n          t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n          t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n          this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n          t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n          t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n          t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n          this.r[9] = ((t7 >>>  5)) & 0x007f;\n        \n          this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n          this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n          this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n          this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n          this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n          this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n          this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n          this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n        };\n        \n        poly1305.prototype.blocks = function(m, mpos, bytes) {\n          var hibit = this.fin ? 0 : (1 << 11);\n          var t0, t1, t2, t3, t4, t5, t6, t7, c;\n          var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n        \n          var h0 = this.h[0],\n              h1 = this.h[1],\n              h2 = this.h[2],\n              h3 = this.h[3],\n              h4 = this.h[4],\n              h5 = this.h[5],\n              h6 = this.h[6],\n              h7 = this.h[7],\n              h8 = this.h[8],\n              h9 = this.h[9];\n        \n          var r0 = this.r[0],\n              r1 = this.r[1],\n              r2 = this.r[2],\n              r3 = this.r[3],\n              r4 = this.r[4],\n              r5 = this.r[5],\n              r6 = this.r[6],\n              r7 = this.r[7],\n              r8 = this.r[8],\n              r9 = this.r[9];\n        \n          while (bytes >= 16) {\n            t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n            t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n            t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n            t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n            t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n            h5 += ((t4 >>>  1)) & 0x1fff;\n            t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n            t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n            t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n            h9 += ((t7 >>> 5)) | hibit;\n        \n            c = 0;\n        \n            d0 = c;\n            d0 += h0 * r0;\n            d0 += h1 * (5 * r9);\n            d0 += h2 * (5 * r8);\n            d0 += h3 * (5 * r7);\n            d0 += h4 * (5 * r6);\n            c = (d0 >>> 13); d0 &= 0x1fff;\n            d0 += h5 * (5 * r5);\n            d0 += h6 * (5 * r4);\n            d0 += h7 * (5 * r3);\n            d0 += h8 * (5 * r2);\n            d0 += h9 * (5 * r1);\n            c += (d0 >>> 13); d0 &= 0x1fff;\n        \n            d1 = c;\n            d1 += h0 * r1;\n            d1 += h1 * r0;\n            d1 += h2 * (5 * r9);\n            d1 += h3 * (5 * r8);\n            d1 += h4 * (5 * r7);\n            c = (d1 >>> 13); d1 &= 0x1fff;\n            d1 += h5 * (5 * r6);\n            d1 += h6 * (5 * r5);\n            d1 += h7 * (5 * r4);\n            d1 += h8 * (5 * r3);\n            d1 += h9 * (5 * r2);\n            c += (d1 >>> 13); d1 &= 0x1fff;\n        \n            d2 = c;\n            d2 += h0 * r2;\n            d2 += h1 * r1;\n            d2 += h2 * r0;\n            d2 += h3 * (5 * r9);\n            d2 += h4 * (5 * r8);\n            c = (d2 >>> 13); d2 &= 0x1fff;\n            d2 += h5 * (5 * r7);\n            d2 += h6 * (5 * r6);\n            d2 += h7 * (5 * r5);\n            d2 += h8 * (5 * r4);\n            d2 += h9 * (5 * r3);\n            c += (d2 >>> 13); d2 &= 0x1fff;\n        \n            d3 = c;\n            d3 += h0 * r3;\n            d3 += h1 * r2;\n            d3 += h2 * r1;\n            d3 += h3 * r0;\n            d3 += h4 * (5 * r9);\n            c = (d3 >>> 13); d3 &= 0x1fff;\n            d3 += h5 * (5 * r8);\n            d3 += h6 * (5 * r7);\n            d3 += h7 * (5 * r6);\n            d3 += h8 * (5 * r5);\n            d3 += h9 * (5 * r4);\n            c += (d3 >>> 13); d3 &= 0x1fff;\n        \n            d4 = c;\n            d4 += h0 * r4;\n            d4 += h1 * r3;\n            d4 += h2 * r2;\n            d4 += h3 * r1;\n            d4 += h4 * r0;\n            c = (d4 >>> 13); d4 &= 0x1fff;\n            d4 += h5 * (5 * r9);\n            d4 += h6 * (5 * r8);\n            d4 += h7 * (5 * r7);\n            d4 += h8 * (5 * r6);\n            d4 += h9 * (5 * r5);\n            c += (d4 >>> 13); d4 &= 0x1fff;\n        \n            d5 = c;\n            d5 += h0 * r5;\n            d5 += h1 * r4;\n            d5 += h2 * r3;\n            d5 += h3 * r2;\n            d5 += h4 * r1;\n            c = (d5 >>> 13); d5 &= 0x1fff;\n            d5 += h5 * r0;\n            d5 += h6 * (5 * r9);\n            d5 += h7 * (5 * r8);\n            d5 += h8 * (5 * r7);\n            d5 += h9 * (5 * r6);\n            c += (d5 >>> 13); d5 &= 0x1fff;\n        \n            d6 = c;\n            d6 += h0 * r6;\n            d6 += h1 * r5;\n            d6 += h2 * r4;\n            d6 += h3 * r3;\n            d6 += h4 * r2;\n            c = (d6 >>> 13); d6 &= 0x1fff;\n            d6 += h5 * r1;\n            d6 += h6 * r0;\n            d6 += h7 * (5 * r9);\n            d6 += h8 * (5 * r8);\n            d6 += h9 * (5 * r7);\n            c += (d6 >>> 13); d6 &= 0x1fff;\n        \n            d7 = c;\n            d7 += h0 * r7;\n            d7 += h1 * r6;\n            d7 += h2 * r5;\n            d7 += h3 * r4;\n            d7 += h4 * r3;\n            c = (d7 >>> 13); d7 &= 0x1fff;\n            d7 += h5 * r2;\n            d7 += h6 * r1;\n            d7 += h7 * r0;\n            d7 += h8 * (5 * r9);\n            d7 += h9 * (5 * r8);\n            c += (d7 >>> 13); d7 &= 0x1fff;\n        \n            d8 = c;\n            d8 += h0 * r8;\n            d8 += h1 * r7;\n            d8 += h2 * r6;\n            d8 += h3 * r5;\n            d8 += h4 * r4;\n            c = (d8 >>> 13); d8 &= 0x1fff;\n            d8 += h5 * r3;\n            d8 += h6 * r2;\n            d8 += h7 * r1;\n            d8 += h8 * r0;\n            d8 += h9 * (5 * r9);\n            c += (d8 >>> 13); d8 &= 0x1fff;\n        \n            d9 = c;\n            d9 += h0 * r9;\n            d9 += h1 * r8;\n            d9 += h2 * r7;\n            d9 += h3 * r6;\n            d9 += h4 * r5;\n            c = (d9 >>> 13); d9 &= 0x1fff;\n            d9 += h5 * r4;\n            d9 += h6 * r3;\n            d9 += h7 * r2;\n            d9 += h8 * r1;\n            d9 += h9 * r0;\n            c += (d9 >>> 13); d9 &= 0x1fff;\n        \n            c = (((c << 2) + c)) | 0;\n            c = (c + d0) | 0;\n            d0 = c & 0x1fff;\n            c = (c >>> 13);\n            d1 += c;\n        \n            h0 = d0;\n            h1 = d1;\n            h2 = d2;\n            h3 = d3;\n            h4 = d4;\n            h5 = d5;\n            h6 = d6;\n            h7 = d7;\n            h8 = d8;\n            h9 = d9;\n        \n            mpos += 16;\n            bytes -= 16;\n          }\n          this.h[0] = h0;\n          this.h[1] = h1;\n          this.h[2] = h2;\n          this.h[3] = h3;\n          this.h[4] = h4;\n          this.h[5] = h5;\n          this.h[6] = h6;\n          this.h[7] = h7;\n          this.h[8] = h8;\n          this.h[9] = h9;\n        };\n        \n        poly1305.prototype.finish = function(mac, macpos) {\n          var g = new Uint16Array(10);\n          var c, mask, f, i;\n        \n          if (this.leftover) {\n            i = this.leftover;\n            this.buffer[i++] = 1;\n            for (; i < 16; i++) this.buffer[i] = 0;\n            this.fin = 1;\n            this.blocks(this.buffer, 0, 16);\n          }\n        \n          c = this.h[1] >>> 13;\n          this.h[1] &= 0x1fff;\n          for (i = 2; i < 10; i++) {\n            this.h[i] += c;\n            c = this.h[i] >>> 13;\n            this.h[i] &= 0x1fff;\n          }\n          this.h[0] += (c * 5);\n          c = this.h[0] >>> 13;\n          this.h[0] &= 0x1fff;\n          this.h[1] += c;\n          c = this.h[1] >>> 13;\n          this.h[1] &= 0x1fff;\n          this.h[2] += c;\n        \n          g[0] = this.h[0] + 5;\n          c = g[0] >>> 13;\n          g[0] &= 0x1fff;\n          for (i = 1; i < 10; i++) {\n            g[i] = this.h[i] + c;\n            c = g[i] >>> 13;\n            g[i] &= 0x1fff;\n          }\n          g[9] -= (1 << 13);\n        \n          mask = (c ^ 1) - 1;\n          for (i = 0; i < 10; i++) g[i] &= mask;\n          mask = ~mask;\n          for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n        \n          this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n          this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n          this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n          this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n          this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n          this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n          this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n          this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n        \n          f = this.h[0] + this.pad[0];\n          this.h[0] = f & 0xffff;\n          for (i = 1; i < 8; i++) {\n            f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n            this.h[i] = f & 0xffff;\n          }\n        \n          mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n          mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n          mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n          mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n          mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n          mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n          mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n          mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n          mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n          mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n          mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n          mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n          mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n          mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n          mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n          mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n        };\n        \n        poly1305.prototype.update = function(m, mpos, bytes) {\n          var i, want;\n        \n          if (this.leftover) {\n            want = (16 - this.leftover);\n            if (want > bytes)\n              want = bytes;\n            for (i = 0; i < want; i++)\n              this.buffer[this.leftover + i] = m[mpos+i];\n            bytes -= want;\n            mpos += want;\n            this.leftover += want;\n            if (this.leftover < 16)\n              return;\n            this.blocks(this.buffer, 0, 16);\n            this.leftover = 0;\n          }\n        \n          if (bytes >= 16) {\n            want = bytes - (bytes % 16);\n            this.blocks(m, mpos, want);\n            mpos += want;\n            bytes -= want;\n          }\n        \n          if (bytes) {\n            for (i = 0; i < bytes; i++)\n              this.buffer[this.leftover + i] = m[mpos+i];\n            this.leftover += bytes;\n          }\n        };\n        \n        function crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n          var s = new poly1305(k);\n          s.update(m, mpos, n);\n          s.finish(out, outpos);\n          return 0;\n        }\n        \n        function crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n          var x = new Uint8Array(16);\n          crypto_onetimeauth(x,0,m,mpos,n,k);\n          return crypto_verify_16(h,hpos,x,0);\n        }\n        \n        function crypto_secretbox(c,m,d,n,k) {\n          var i;\n          if (d < 32) return -1;\n          crypto_stream_xor(c,0,m,0,d,n,k);\n          crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n          for (i = 0; i < 16; i++) c[i] = 0;\n          return 0;\n        }\n        \n        function crypto_secretbox_open(m,c,d,n,k) {\n          var i;\n          var x = new Uint8Array(32);\n          if (d < 32) return -1;\n          crypto_stream(x,0,32,n,k);\n          if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n          crypto_stream_xor(m,0,c,0,d,n,k);\n          for (i = 0; i < 32; i++) m[i] = 0;\n          return 0;\n        }\n        \n        function set25519(r, a) {\n          var i;\n          for (i = 0; i < 16; i++) r[i] = a[i]|0;\n        }\n        \n        function car25519(o) {\n          var i, v, c = 1;\n          for (i = 0; i < 16; i++) {\n            v = o[i] + c + 65535;\n            c = Math.floor(v / 65536);\n            o[i] = v - c * 65536;\n          }\n          o[0] += c-1 + 37 * (c-1);\n        }\n        \n        function sel25519(p, q, b) {\n          var t, c = ~(b-1);\n          for (var i = 0; i < 16; i++) {\n            t = c & (p[i] ^ q[i]);\n            p[i] ^= t;\n            q[i] ^= t;\n          }\n        }\n        \n        function pack25519(o, n) {\n          var i, j, b;\n          var m = gf(), t = gf();\n          for (i = 0; i < 16; i++) t[i] = n[i];\n          car25519(t);\n          car25519(t);\n          car25519(t);\n          for (j = 0; j < 2; j++) {\n            m[0] = t[0] - 0xffed;\n            for (i = 1; i < 15; i++) {\n              m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n              m[i-1] &= 0xffff;\n            }\n            m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n            b = (m[15]>>16) & 1;\n            m[14] &= 0xffff;\n            sel25519(t, m, 1-b);\n          }\n          for (i = 0; i < 16; i++) {\n            o[2*i] = t[i] & 0xff;\n            o[2*i+1] = t[i]>>8;\n          }\n        }\n        \n        function neq25519(a, b) {\n          var c = new Uint8Array(32), d = new Uint8Array(32);\n          pack25519(c, a);\n          pack25519(d, b);\n          return crypto_verify_32(c, 0, d, 0);\n        }\n        \n        function par25519(a) {\n          var d = new Uint8Array(32);\n          pack25519(d, a);\n          return d[0] & 1;\n        }\n        \n        function unpack25519(o, n) {\n          var i;\n          for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n          o[15] &= 0x7fff;\n        }\n        \n        function A(o, a, b) {\n          for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n        }\n        \n        function Z(o, a, b) {\n          for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n        }\n        \n        function M(o, a, b) {\n          var v, c,\n             t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n             t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n            t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n            t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n            b0 = b[0],\n            b1 = b[1],\n            b2 = b[2],\n            b3 = b[3],\n            b4 = b[4],\n            b5 = b[5],\n            b6 = b[6],\n            b7 = b[7],\n            b8 = b[8],\n            b9 = b[9],\n            b10 = b[10],\n            b11 = b[11],\n            b12 = b[12],\n            b13 = b[13],\n            b14 = b[14],\n            b15 = b[15];\n        \n          v = a[0];\n          t0 += v * b0;\n          t1 += v * b1;\n          t2 += v * b2;\n          t3 += v * b3;\n          t4 += v * b4;\n          t5 += v * b5;\n          t6 += v * b6;\n          t7 += v * b7;\n          t8 += v * b8;\n          t9 += v * b9;\n          t10 += v * b10;\n          t11 += v * b11;\n          t12 += v * b12;\n          t13 += v * b13;\n          t14 += v * b14;\n          t15 += v * b15;\n          v = a[1];\n          t1 += v * b0;\n          t2 += v * b1;\n          t3 += v * b2;\n          t4 += v * b3;\n          t5 += v * b4;\n          t6 += v * b5;\n          t7 += v * b6;\n          t8 += v * b7;\n          t9 += v * b8;\n          t10 += v * b9;\n          t11 += v * b10;\n          t12 += v * b11;\n          t13 += v * b12;\n          t14 += v * b13;\n          t15 += v * b14;\n          t16 += v * b15;\n          v = a[2];\n          t2 += v * b0;\n          t3 += v * b1;\n          t4 += v * b2;\n          t5 += v * b3;\n          t6 += v * b4;\n          t7 += v * b5;\n          t8 += v * b6;\n          t9 += v * b7;\n          t10 += v * b8;\n          t11 += v * b9;\n          t12 += v * b10;\n          t13 += v * b11;\n          t14 += v * b12;\n          t15 += v * b13;\n          t16 += v * b14;\n          t17 += v * b15;\n          v = a[3];\n          t3 += v * b0;\n          t4 += v * b1;\n          t5 += v * b2;\n          t6 += v * b3;\n          t7 += v * b4;\n          t8 += v * b5;\n          t9 += v * b6;\n          t10 += v * b7;\n          t11 += v * b8;\n          t12 += v * b9;\n          t13 += v * b10;\n          t14 += v * b11;\n          t15 += v * b12;\n          t16 += v * b13;\n          t17 += v * b14;\n          t18 += v * b15;\n          v = a[4];\n          t4 += v * b0;\n          t5 += v * b1;\n          t6 += v * b2;\n          t7 += v * b3;\n          t8 += v * b4;\n          t9 += v * b5;\n          t10 += v * b6;\n          t11 += v * b7;\n          t12 += v * b8;\n          t13 += v * b9;\n          t14 += v * b10;\n          t15 += v * b11;\n          t16 += v * b12;\n          t17 += v * b13;\n          t18 += v * b14;\n          t19 += v * b15;\n          v = a[5];\n          t5 += v * b0;\n          t6 += v * b1;\n          t7 += v * b2;\n          t8 += v * b3;\n          t9 += v * b4;\n          t10 += v * b5;\n          t11 += v * b6;\n          t12 += v * b7;\n          t13 += v * b8;\n          t14 += v * b9;\n          t15 += v * b10;\n          t16 += v * b11;\n          t17 += v * b12;\n          t18 += v * b13;\n          t19 += v * b14;\n          t20 += v * b15;\n          v = a[6];\n          t6 += v * b0;\n          t7 += v * b1;\n          t8 += v * b2;\n          t9 += v * b3;\n          t10 += v * b4;\n          t11 += v * b5;\n          t12 += v * b6;\n          t13 += v * b7;\n          t14 += v * b8;\n          t15 += v * b9;\n          t16 += v * b10;\n          t17 += v * b11;\n          t18 += v * b12;\n          t19 += v * b13;\n          t20 += v * b14;\n          t21 += v * b15;\n          v = a[7];\n          t7 += v * b0;\n          t8 += v * b1;\n          t9 += v * b2;\n          t10 += v * b3;\n          t11 += v * b4;\n          t12 += v * b5;\n          t13 += v * b6;\n          t14 += v * b7;\n          t15 += v * b8;\n          t16 += v * b9;\n          t17 += v * b10;\n          t18 += v * b11;\n          t19 += v * b12;\n          t20 += v * b13;\n          t21 += v * b14;\n          t22 += v * b15;\n          v = a[8];\n          t8 += v * b0;\n          t9 += v * b1;\n          t10 += v * b2;\n          t11 += v * b3;\n          t12 += v * b4;\n          t13 += v * b5;\n          t14 += v * b6;\n          t15 += v * b7;\n          t16 += v * b8;\n          t17 += v * b9;\n          t18 += v * b10;\n          t19 += v * b11;\n          t20 += v * b12;\n          t21 += v * b13;\n          t22 += v * b14;\n          t23 += v * b15;\n          v = a[9];\n          t9 += v * b0;\n          t10 += v * b1;\n          t11 += v * b2;\n          t12 += v * b3;\n          t13 += v * b4;\n          t14 += v * b5;\n          t15 += v * b6;\n          t16 += v * b7;\n          t17 += v * b8;\n          t18 += v * b9;\n          t19 += v * b10;\n          t20 += v * b11;\n          t21 += v * b12;\n          t22 += v * b13;\n          t23 += v * b14;\n          t24 += v * b15;\n          v = a[10];\n          t10 += v * b0;\n          t11 += v * b1;\n          t12 += v * b2;\n          t13 += v * b3;\n          t14 += v * b4;\n          t15 += v * b5;\n          t16 += v * b6;\n          t17 += v * b7;\n          t18 += v * b8;\n          t19 += v * b9;\n          t20 += v * b10;\n          t21 += v * b11;\n          t22 += v * b12;\n          t23 += v * b13;\n          t24 += v * b14;\n          t25 += v * b15;\n          v = a[11];\n          t11 += v * b0;\n          t12 += v * b1;\n          t13 += v * b2;\n          t14 += v * b3;\n          t15 += v * b4;\n          t16 += v * b5;\n          t17 += v * b6;\n          t18 += v * b7;\n          t19 += v * b8;\n          t20 += v * b9;\n          t21 += v * b10;\n          t22 += v * b11;\n          t23 += v * b12;\n          t24 += v * b13;\n          t25 += v * b14;\n          t26 += v * b15;\n          v = a[12];\n          t12 += v * b0;\n          t13 += v * b1;\n          t14 += v * b2;\n          t15 += v * b3;\n          t16 += v * b4;\n          t17 += v * b5;\n          t18 += v * b6;\n          t19 += v * b7;\n          t20 += v * b8;\n          t21 += v * b9;\n          t22 += v * b10;\n          t23 += v * b11;\n          t24 += v * b12;\n          t25 += v * b13;\n          t26 += v * b14;\n          t27 += v * b15;\n          v = a[13];\n          t13 += v * b0;\n          t14 += v * b1;\n          t15 += v * b2;\n          t16 += v * b3;\n          t17 += v * b4;\n          t18 += v * b5;\n          t19 += v * b6;\n          t20 += v * b7;\n          t21 += v * b8;\n          t22 += v * b9;\n          t23 += v * b10;\n          t24 += v * b11;\n          t25 += v * b12;\n          t26 += v * b13;\n          t27 += v * b14;\n          t28 += v * b15;\n          v = a[14];\n          t14 += v * b0;\n          t15 += v * b1;\n          t16 += v * b2;\n          t17 += v * b3;\n          t18 += v * b4;\n          t19 += v * b5;\n          t20 += v * b6;\n          t21 += v * b7;\n          t22 += v * b8;\n          t23 += v * b9;\n          t24 += v * b10;\n          t25 += v * b11;\n          t26 += v * b12;\n          t27 += v * b13;\n          t28 += v * b14;\n          t29 += v * b15;\n          v = a[15];\n          t15 += v * b0;\n          t16 += v * b1;\n          t17 += v * b2;\n          t18 += v * b3;\n          t19 += v * b4;\n          t20 += v * b5;\n          t21 += v * b6;\n          t22 += v * b7;\n          t23 += v * b8;\n          t24 += v * b9;\n          t25 += v * b10;\n          t26 += v * b11;\n          t27 += v * b12;\n          t28 += v * b13;\n          t29 += v * b14;\n          t30 += v * b15;\n        \n          t0  += 38 * t16;\n          t1  += 38 * t17;\n          t2  += 38 * t18;\n          t3  += 38 * t19;\n          t4  += 38 * t20;\n          t5  += 38 * t21;\n          t6  += 38 * t22;\n          t7  += 38 * t23;\n          t8  += 38 * t24;\n          t9  += 38 * t25;\n          t10 += 38 * t26;\n          t11 += 38 * t27;\n          t12 += 38 * t28;\n          t13 += 38 * t29;\n          t14 += 38 * t30;\n          // t15 left as is\n        \n          // first car\n          c = 1;\n          v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n          v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n          v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n          v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n          v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n          v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n          v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n          v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n          v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n          v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n          v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n          v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n          v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n          v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n          v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n          v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n          t0 += c-1 + 37 * (c-1);\n        \n          // second car\n          c = 1;\n          v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n          v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n          v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n          v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n          v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n          v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n          v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n          v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n          v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n          v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n          v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n          v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n          v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n          v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n          v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n          v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n          t0 += c-1 + 37 * (c-1);\n        \n          o[ 0] = t0;\n          o[ 1] = t1;\n          o[ 2] = t2;\n          o[ 3] = t3;\n          o[ 4] = t4;\n          o[ 5] = t5;\n          o[ 6] = t6;\n          o[ 7] = t7;\n          o[ 8] = t8;\n          o[ 9] = t9;\n          o[10] = t10;\n          o[11] = t11;\n          o[12] = t12;\n          o[13] = t13;\n          o[14] = t14;\n          o[15] = t15;\n        }\n        \n        function S(o, a) {\n          M(o, a, a);\n        }\n        \n        function inv25519(o, i) {\n          var c = gf();\n          var a;\n          for (a = 0; a < 16; a++) c[a] = i[a];\n          for (a = 253; a >= 0; a--) {\n            S(c, c);\n            if(a !== 2 && a !== 4) M(c, c, i);\n          }\n          for (a = 0; a < 16; a++) o[a] = c[a];\n        }\n        \n        function pow2523(o, i) {\n          var c = gf();\n          var a;\n          for (a = 0; a < 16; a++) c[a] = i[a];\n          for (a = 250; a >= 0; a--) {\n              S(c, c);\n              if(a !== 1) M(c, c, i);\n          }\n          for (a = 0; a < 16; a++) o[a] = c[a];\n        }\n        \n        function crypto_scalarmult(q, n, p) {\n          var z = new Uint8Array(32);\n          var x = new Float64Array(80), r, i;\n          var a = gf(), b = gf(), c = gf(),\n              d = gf(), e = gf(), f = gf();\n          for (i = 0; i < 31; i++) z[i] = n[i];\n          z[31]=(n[31]&127)|64;\n          z[0]&=248;\n          unpack25519(x,p);\n          for (i = 0; i < 16; i++) {\n            b[i]=x[i];\n            d[i]=a[i]=c[i]=0;\n          }\n          a[0]=d[0]=1;\n          for (i=254; i>=0; --i) {\n            r=(z[i>>>3]>>>(i&7))&1;\n            sel25519(a,b,r);\n            sel25519(c,d,r);\n            A(e,a,c);\n            Z(a,a,c);\n            A(c,b,d);\n            Z(b,b,d);\n            S(d,e);\n            S(f,a);\n            M(a,c,a);\n            M(c,b,e);\n            A(e,a,c);\n            Z(a,a,c);\n            S(b,a);\n            Z(c,d,f);\n            M(a,c,_121665);\n            A(a,a,d);\n            M(c,c,a);\n            M(a,d,f);\n            M(d,b,x);\n            S(b,e);\n            sel25519(a,b,r);\n            sel25519(c,d,r);\n          }\n          for (i = 0; i < 16; i++) {\n            x[i+16]=a[i];\n            x[i+32]=c[i];\n            x[i+48]=b[i];\n            x[i+64]=d[i];\n          }\n          var x32 = x.subarray(32);\n          var x16 = x.subarray(16);\n          inv25519(x32,x32);\n          M(x16,x16,x32);\n          pack25519(q,x16);\n          return 0;\n        }\n        \n        function crypto_scalarmult_base(q, n) {\n          return crypto_scalarmult(q, n, _9);\n        }\n        \n        function crypto_box_keypair(y, x) {\n          randombytes(x, 32);\n          return crypto_scalarmult_base(y, x);\n        }\n        \n        function crypto_box_beforenm(k, y, x) {\n          var s = new Uint8Array(32);\n          crypto_scalarmult(s, x, y);\n          return crypto_core_hsalsa20(k, _0, s, sigma);\n        }\n        \n        var crypto_box_afternm = crypto_secretbox;\n        var crypto_box_open_afternm = crypto_secretbox_open;\n        \n        function crypto_box(c, m, d, n, y, x) {\n          var k = new Uint8Array(32);\n          crypto_box_beforenm(k, y, x);\n          return crypto_box_afternm(c, m, d, n, k);\n        }\n        \n        function crypto_box_open(m, c, d, n, y, x) {\n          var k = new Uint8Array(32);\n          crypto_box_beforenm(k, y, x);\n          return crypto_box_open_afternm(m, c, d, n, k);\n        }\n        \n        var K = [\n          0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n          0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n          0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n          0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n          0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n          0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n          0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n          0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n          0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n          0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n          0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n          0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n          0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n          0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n          0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n          0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n          0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n          0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n          0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n          0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n          0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n          0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n          0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n          0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n          0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n          0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n          0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n          0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n          0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n          0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n          0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n          0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n          0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n          0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n          0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n          0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n          0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n          0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n          0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n          0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n        ];\n        \n        function crypto_hashblocks_hl(hh, hl, m, n) {\n          var wh = new Int32Array(16), wl = new Int32Array(16),\n              bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n              bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n              th, tl, i, j, h, l, a, b, c, d;\n        \n          var ah0 = hh[0],\n              ah1 = hh[1],\n              ah2 = hh[2],\n              ah3 = hh[3],\n              ah4 = hh[4],\n              ah5 = hh[5],\n              ah6 = hh[6],\n              ah7 = hh[7],\n        \n              al0 = hl[0],\n              al1 = hl[1],\n              al2 = hl[2],\n              al3 = hl[3],\n              al4 = hl[4],\n              al5 = hl[5],\n              al6 = hl[6],\n              al7 = hl[7];\n        \n          var pos = 0;\n          while (n >= 128) {\n            for (i = 0; i < 16; i++) {\n              j = 8 * i + pos;\n              wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n              wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n            }\n            for (i = 0; i < 80; i++) {\n              bh0 = ah0;\n              bh1 = ah1;\n              bh2 = ah2;\n              bh3 = ah3;\n              bh4 = ah4;\n              bh5 = ah5;\n              bh6 = ah6;\n              bh7 = ah7;\n        \n              bl0 = al0;\n              bl1 = al1;\n              bl2 = al2;\n              bl3 = al3;\n              bl4 = al4;\n              bl5 = al5;\n              bl6 = al6;\n              bl7 = al7;\n        \n              // add\n              h = ah7;\n              l = al7;\n        \n              a = l & 0xffff; b = l >>> 16;\n              c = h & 0xffff; d = h >>> 16;\n        \n              // Sigma1\n              h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n              l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              // Ch\n              h = (ah4 & ah5) ^ (~ah4 & ah6);\n              l = (al4 & al5) ^ (~al4 & al6);\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              // K\n              h = K[i*2];\n              l = K[i*2+1];\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              // w\n              h = wh[i%16];\n              l = wl[i%16];\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              b += a >>> 16;\n              c += b >>> 16;\n              d += c >>> 16;\n        \n              th = c & 0xffff | d << 16;\n              tl = a & 0xffff | b << 16;\n        \n              // add\n              h = th;\n              l = tl;\n        \n              a = l & 0xffff; b = l >>> 16;\n              c = h & 0xffff; d = h >>> 16;\n        \n              // Sigma0\n              h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n              l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              // Maj\n              h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n              l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              b += a >>> 16;\n              c += b >>> 16;\n              d += c >>> 16;\n        \n              bh7 = (c & 0xffff) | (d << 16);\n              bl7 = (a & 0xffff) | (b << 16);\n        \n              // add\n              h = bh3;\n              l = bl3;\n        \n              a = l & 0xffff; b = l >>> 16;\n              c = h & 0xffff; d = h >>> 16;\n        \n              h = th;\n              l = tl;\n        \n              a += l & 0xffff; b += l >>> 16;\n              c += h & 0xffff; d += h >>> 16;\n        \n              b += a >>> 16;\n              c += b >>> 16;\n              d += c >>> 16;\n        \n              bh3 = (c & 0xffff) | (d << 16);\n              bl3 = (a & 0xffff) | (b << 16);\n        \n              ah1 = bh0;\n              ah2 = bh1;\n              ah3 = bh2;\n              ah4 = bh3;\n              ah5 = bh4;\n              ah6 = bh5;\n              ah7 = bh6;\n              ah0 = bh7;\n        \n              al1 = bl0;\n              al2 = bl1;\n              al3 = bl2;\n              al4 = bl3;\n              al5 = bl4;\n              al6 = bl5;\n              al7 = bl6;\n              al0 = bl7;\n        \n              if (i%16 === 15) {\n                for (j = 0; j < 16; j++) {\n                  // add\n                  h = wh[j];\n                  l = wl[j];\n        \n                  a = l & 0xffff; b = l >>> 16;\n                  c = h & 0xffff; d = h >>> 16;\n        \n                  h = wh[(j+9)%16];\n                  l = wl[(j+9)%16];\n        \n                  a += l & 0xffff; b += l >>> 16;\n                  c += h & 0xffff; d += h >>> 16;\n        \n                  // sigma0\n                  th = wh[(j+1)%16];\n                  tl = wl[(j+1)%16];\n                  h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n                  l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n        \n                  a += l & 0xffff; b += l >>> 16;\n                  c += h & 0xffff; d += h >>> 16;\n        \n                  // sigma1\n                  th = wh[(j+14)%16];\n                  tl = wl[(j+14)%16];\n                  h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n                  l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n        \n                  a += l & 0xffff; b += l >>> 16;\n                  c += h & 0xffff; d += h >>> 16;\n        \n                  b += a >>> 16;\n                  c += b >>> 16;\n                  d += c >>> 16;\n        \n                  wh[j] = (c & 0xffff) | (d << 16);\n                  wl[j] = (a & 0xffff) | (b << 16);\n                }\n              }\n            }\n        \n            // add\n            h = ah0;\n            l = al0;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[0];\n            l = hl[0];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[0] = ah0 = (c & 0xffff) | (d << 16);\n            hl[0] = al0 = (a & 0xffff) | (b << 16);\n        \n            h = ah1;\n            l = al1;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[1];\n            l = hl[1];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[1] = ah1 = (c & 0xffff) | (d << 16);\n            hl[1] = al1 = (a & 0xffff) | (b << 16);\n        \n            h = ah2;\n            l = al2;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[2];\n            l = hl[2];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[2] = ah2 = (c & 0xffff) | (d << 16);\n            hl[2] = al2 = (a & 0xffff) | (b << 16);\n        \n            h = ah3;\n            l = al3;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[3];\n            l = hl[3];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[3] = ah3 = (c & 0xffff) | (d << 16);\n            hl[3] = al3 = (a & 0xffff) | (b << 16);\n        \n            h = ah4;\n            l = al4;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[4];\n            l = hl[4];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[4] = ah4 = (c & 0xffff) | (d << 16);\n            hl[4] = al4 = (a & 0xffff) | (b << 16);\n        \n            h = ah5;\n            l = al5;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[5];\n            l = hl[5];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[5] = ah5 = (c & 0xffff) | (d << 16);\n            hl[5] = al5 = (a & 0xffff) | (b << 16);\n        \n            h = ah6;\n            l = al6;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[6];\n            l = hl[6];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[6] = ah6 = (c & 0xffff) | (d << 16);\n            hl[6] = al6 = (a & 0xffff) | (b << 16);\n        \n            h = ah7;\n            l = al7;\n        \n            a = l & 0xffff; b = l >>> 16;\n            c = h & 0xffff; d = h >>> 16;\n        \n            h = hh[7];\n            l = hl[7];\n        \n            a += l & 0xffff; b += l >>> 16;\n            c += h & 0xffff; d += h >>> 16;\n        \n            b += a >>> 16;\n            c += b >>> 16;\n            d += c >>> 16;\n        \n            hh[7] = ah7 = (c & 0xffff) | (d << 16);\n            hl[7] = al7 = (a & 0xffff) | (b << 16);\n        \n            pos += 128;\n            n -= 128;\n          }\n        \n          return n;\n        }\n        \n        function crypto_hash(out, m, n) {\n          var hh = new Int32Array(8),\n              hl = new Int32Array(8),\n              x = new Uint8Array(256),\n              i, b = n;\n        \n          hh[0] = 0x6a09e667;\n          hh[1] = 0xbb67ae85;\n          hh[2] = 0x3c6ef372;\n          hh[3] = 0xa54ff53a;\n          hh[4] = 0x510e527f;\n          hh[5] = 0x9b05688c;\n          hh[6] = 0x1f83d9ab;\n          hh[7] = 0x5be0cd19;\n        \n          hl[0] = 0xf3bcc908;\n          hl[1] = 0x84caa73b;\n          hl[2] = 0xfe94f82b;\n          hl[3] = 0x5f1d36f1;\n          hl[4] = 0xade682d1;\n          hl[5] = 0x2b3e6c1f;\n          hl[6] = 0xfb41bd6b;\n          hl[7] = 0x137e2179;\n        \n          crypto_hashblocks_hl(hh, hl, m, n);\n          n %= 128;\n        \n          for (i = 0; i < n; i++) x[i] = m[b-n+i];\n          x[n] = 128;\n        \n          n = 256-128*(n<112?1:0);\n          x[n-9] = 0;\n          ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n          crypto_hashblocks_hl(hh, hl, x, n);\n        \n          for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n        \n          return 0;\n        }\n        \n        function add(p, q) {\n          var a = gf(), b = gf(), c = gf(),\n              d = gf(), e = gf(), f = gf(),\n              g = gf(), h = gf(), t = gf();\n        \n          Z(a, p[1], p[0]);\n          Z(t, q[1], q[0]);\n          M(a, a, t);\n          A(b, p[0], p[1]);\n          A(t, q[0], q[1]);\n          M(b, b, t);\n          M(c, p[3], q[3]);\n          M(c, c, D2);\n          M(d, p[2], q[2]);\n          A(d, d, d);\n          Z(e, b, a);\n          Z(f, d, c);\n          A(g, d, c);\n          A(h, b, a);\n        \n          M(p[0], e, f);\n          M(p[1], h, g);\n          M(p[2], g, f);\n          M(p[3], e, h);\n        }\n        \n        function cswap(p, q, b) {\n          var i;\n          for (i = 0; i < 4; i++) {\n            sel25519(p[i], q[i], b);\n          }\n        }\n        \n        function pack(r, p) {\n          var tx = gf(), ty = gf(), zi = gf();\n          inv25519(zi, p[2]);\n          M(tx, p[0], zi);\n          M(ty, p[1], zi);\n          pack25519(r, ty);\n          r[31] ^= par25519(tx) << 7;\n        }\n        \n        function scalarmult(p, q, s) {\n          var b, i;\n          set25519(p[0], gf0);\n          set25519(p[1], gf1);\n          set25519(p[2], gf1);\n          set25519(p[3], gf0);\n          for (i = 255; i >= 0; --i) {\n            b = (s[(i/8)|0] >> (i&7)) & 1;\n            cswap(p, q, b);\n            add(q, p);\n            add(p, p);\n            cswap(p, q, b);\n          }\n        }\n        \n        function scalarbase(p, s) {\n          var q = [gf(), gf(), gf(), gf()];\n          set25519(q[0], X);\n          set25519(q[1], Y);\n          set25519(q[2], gf1);\n          M(q[3], X, Y);\n          scalarmult(p, q, s);\n        }\n        \n        function crypto_sign_keypair(pk, sk, seeded) {\n          var d = new Uint8Array(64);\n          var p = [gf(), gf(), gf(), gf()];\n          var i;\n        \n          if (!seeded) randombytes(sk, 32);\n          crypto_hash(d, sk, 32);\n          d[0] &= 248;\n          d[31] &= 127;\n          d[31] |= 64;\n        \n          scalarbase(p, d);\n          pack(pk, p);\n        \n          for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n          return 0;\n        }\n        \n        var L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n        \n        function modL(r, x) {\n          var carry, i, j, k;\n          for (i = 63; i >= 32; --i) {\n            carry = 0;\n            for (j = i - 32, k = i - 12; j < k; ++j) {\n              x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n              carry = Math.floor((x[j] + 128) / 256);\n              x[j] -= carry * 256;\n            }\n            x[j] += carry;\n            x[i] = 0;\n          }\n          carry = 0;\n          for (j = 0; j < 32; j++) {\n            x[j] += carry - (x[31] >> 4) * L[j];\n            carry = x[j] >> 8;\n            x[j] &= 255;\n          }\n          for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n          for (i = 0; i < 32; i++) {\n            x[i+1] += x[i] >> 8;\n            r[i] = x[i] & 255;\n          }\n        }\n        \n        function reduce(r) {\n          var x = new Float64Array(64), i;\n          for (i = 0; i < 64; i++) x[i] = r[i];\n          for (i = 0; i < 64; i++) r[i] = 0;\n          modL(r, x);\n        }\n        \n        // Note: difference from C - smlen returned, not passed as argument.\n        function crypto_sign(sm, m, n, sk) {\n          var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n          var i, j, x = new Float64Array(64);\n          var p = [gf(), gf(), gf(), gf()];\n        \n          crypto_hash(d, sk, 32);\n          d[0] &= 248;\n          d[31] &= 127;\n          d[31] |= 64;\n        \n          var smlen = n + 64;\n          for (i = 0; i < n; i++) sm[64 + i] = m[i];\n          for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n        \n          crypto_hash(r, sm.subarray(32), n+32);\n          reduce(r);\n          scalarbase(p, r);\n          pack(sm, p);\n        \n          for (i = 32; i < 64; i++) sm[i] = sk[i];\n          crypto_hash(h, sm, n + 64);\n          reduce(h);\n        \n          for (i = 0; i < 64; i++) x[i] = 0;\n          for (i = 0; i < 32; i++) x[i] = r[i];\n          for (i = 0; i < 32; i++) {\n            for (j = 0; j < 32; j++) {\n              x[i+j] += h[i] * d[j];\n            }\n          }\n        \n          modL(sm.subarray(32), x);\n          return smlen;\n        }\n        \n        function unpackneg(r, p) {\n          var t = gf(), chk = gf(), num = gf(),\n              den = gf(), den2 = gf(), den4 = gf(),\n              den6 = gf();\n        \n          set25519(r[2], gf1);\n          unpack25519(r[1], p);\n          S(num, r[1]);\n          M(den, num, D);\n          Z(num, num, r[2]);\n          A(den, r[2], den);\n        \n          S(den2, den);\n          S(den4, den2);\n          M(den6, den4, den2);\n          M(t, den6, num);\n          M(t, t, den);\n        \n          pow2523(t, t);\n          M(t, t, num);\n          M(t, t, den);\n          M(t, t, den);\n          M(r[0], t, den);\n        \n          S(chk, r[0]);\n          M(chk, chk, den);\n          if (neq25519(chk, num)) M(r[0], r[0], I);\n        \n          S(chk, r[0]);\n          M(chk, chk, den);\n          if (neq25519(chk, num)) return -1;\n        \n          if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n        \n          M(r[3], r[0], r[1]);\n          return 0;\n        }\n        \n        function crypto_sign_open(m, sm, n, pk) {\n          var i;\n          var t = new Uint8Array(32), h = new Uint8Array(64);\n          var p = [gf(), gf(), gf(), gf()],\n              q = [gf(), gf(), gf(), gf()];\n        \n          if (n < 64) return -1;\n        \n          if (unpackneg(q, pk)) return -1;\n        \n          for (i = 0; i < n; i++) m[i] = sm[i];\n          for (i = 0; i < 32; i++) m[i+32] = pk[i];\n          crypto_hash(h, m, n);\n          reduce(h);\n          scalarmult(p, q, h);\n        \n          scalarbase(q, sm.subarray(32));\n          add(p, q);\n          pack(t, p);\n        \n          n -= 64;\n          if (crypto_verify_32(sm, 0, t, 0)) {\n            for (i = 0; i < n; i++) m[i] = 0;\n            return -1;\n          }\n        \n          for (i = 0; i < n; i++) m[i] = sm[i + 64];\n          return n;\n        }\n        \n        var crypto_secretbox_KEYBYTES = 32,\n            crypto_secretbox_NONCEBYTES = 24,\n            crypto_secretbox_ZEROBYTES = 32,\n            crypto_secretbox_BOXZEROBYTES = 16,\n            crypto_scalarmult_BYTES = 32,\n            crypto_scalarmult_SCALARBYTES = 32,\n            crypto_box_PUBLICKEYBYTES = 32,\n            crypto_box_SECRETKEYBYTES = 32,\n            crypto_box_BEFORENMBYTES = 32,\n            crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n            crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n            crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n            crypto_sign_BYTES = 64,\n            crypto_sign_PUBLICKEYBYTES = 32,\n            crypto_sign_SECRETKEYBYTES = 64,\n            crypto_sign_SEEDBYTES = 32,\n            crypto_hash_BYTES = 64;\n        \n        nacl.lowlevel = {\n          crypto_core_hsalsa20: crypto_core_hsalsa20,\n          crypto_stream_xor: crypto_stream_xor,\n          crypto_stream: crypto_stream,\n          crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n          crypto_stream_salsa20: crypto_stream_salsa20,\n          crypto_onetimeauth: crypto_onetimeauth,\n          crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n          crypto_verify_16: crypto_verify_16,\n          crypto_verify_32: crypto_verify_32,\n          crypto_secretbox: crypto_secretbox,\n          crypto_secretbox_open: crypto_secretbox_open,\n          crypto_scalarmult: crypto_scalarmult,\n          crypto_scalarmult_base: crypto_scalarmult_base,\n          crypto_box_beforenm: crypto_box_beforenm,\n          crypto_box_afternm: crypto_box_afternm,\n          crypto_box: crypto_box,\n          crypto_box_open: crypto_box_open,\n          crypto_box_keypair: crypto_box_keypair,\n          crypto_hash: crypto_hash,\n          crypto_sign: crypto_sign,\n          crypto_sign_keypair: crypto_sign_keypair,\n          crypto_sign_open: crypto_sign_open,\n        \n          crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n          crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n          crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n          crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n          crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n          crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n          crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n          crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n          crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n          crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n          crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n          crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n          crypto_sign_BYTES: crypto_sign_BYTES,\n          crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n          crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n          crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n          crypto_hash_BYTES: crypto_hash_BYTES,\n        \n          gf: gf,\n          D: D,\n          L: L,\n          pack25519: pack25519,\n          unpack25519: unpack25519,\n          M: M,\n          A: A,\n          S: S,\n          Z: Z,\n          pow2523: pow2523,\n          add: add,\n          set25519: set25519,\n          modL: modL,\n          scalarmult: scalarmult,\n          scalarbase: scalarbase,\n        };\n        \n        /* High-level API */\n        \n        function checkLengths(k, n) {\n          if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n          if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n        }\n        \n        function checkBoxLengths(pk, sk) {\n          if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n          if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n        }\n        \n        function checkArrayTypes() {\n          for (var i = 0; i < arguments.length; i++) {\n            if (!(arguments[i] instanceof Uint8Array))\n              throw new TypeError('unexpected type, use Uint8Array');\n          }\n        }\n        \n        function cleanup(arr) {\n          for (var i = 0; i < arr.length; i++) arr[i] = 0;\n        }\n        \n        nacl.randomBytes = function(n) {\n          var b = new Uint8Array(n);\n          randombytes(b, n);\n          return b;\n        };\n        \n        nacl.secretbox = function(msg, nonce, key) {\n          checkArrayTypes(msg, nonce, key);\n          checkLengths(key, nonce);\n          var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n          var c = new Uint8Array(m.length);\n          for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n          crypto_secretbox(c, m, m.length, nonce, key);\n          return c.subarray(crypto_secretbox_BOXZEROBYTES);\n        };\n        \n        nacl.secretbox.open = function(box, nonce, key) {\n          checkArrayTypes(box, nonce, key);\n          checkLengths(key, nonce);\n          var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n          var m = new Uint8Array(c.length);\n          for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n          if (c.length < 32) return null;\n          if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n          return m.subarray(crypto_secretbox_ZEROBYTES);\n        };\n        \n        nacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\n        nacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\n        nacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n        \n        nacl.scalarMult = function(n, p) {\n          checkArrayTypes(n, p);\n          if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n          if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n          var q = new Uint8Array(crypto_scalarmult_BYTES);\n          crypto_scalarmult(q, n, p);\n          return q;\n        };\n        \n        nacl.scalarMult.base = function(n) {\n          checkArrayTypes(n);\n          if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n          var q = new Uint8Array(crypto_scalarmult_BYTES);\n          crypto_scalarmult_base(q, n);\n          return q;\n        };\n        \n        nacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\n        nacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n        \n        nacl.box = function(msg, nonce, publicKey, secretKey) {\n          var k = nacl.box.before(publicKey, secretKey);\n          return nacl.secretbox(msg, nonce, k);\n        };\n        \n        nacl.box.before = function(publicKey, secretKey) {\n          checkArrayTypes(publicKey, secretKey);\n          checkBoxLengths(publicKey, secretKey);\n          var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n          crypto_box_beforenm(k, publicKey, secretKey);\n          return k;\n        };\n        \n        nacl.box.after = nacl.secretbox;\n        \n        nacl.box.open = function(msg, nonce, publicKey, secretKey) {\n          var k = nacl.box.before(publicKey, secretKey);\n          return nacl.secretbox.open(msg, nonce, k);\n        };\n        \n        nacl.box.open.after = nacl.secretbox.open;\n        \n        nacl.box.keyPair = function() {\n          var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n          var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n          crypto_box_keypair(pk, sk);\n          return {publicKey: pk, secretKey: sk};\n        };\n        \n        nacl.box.keyPair.fromSecretKey = function(secretKey) {\n          checkArrayTypes(secretKey);\n          if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n            throw new Error('bad secret key size');\n          var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n          crypto_scalarmult_base(pk, secretKey);\n          return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n        };\n        \n        nacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\n        nacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\n        nacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\n        nacl.box.nonceLength = crypto_box_NONCEBYTES;\n        nacl.box.overheadLength = nacl.secretbox.overheadLength;\n        \n        nacl.sign = function(msg, secretKey) {\n          checkArrayTypes(msg, secretKey);\n          if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n            throw new Error('bad secret key size');\n          var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n          crypto_sign(signedMsg, msg, msg.length, secretKey);\n          return signedMsg;\n        };\n        \n        nacl.sign.open = function(signedMsg, publicKey) {\n          checkArrayTypes(signedMsg, publicKey);\n          if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n            throw new Error('bad public key size');\n          var tmp = new Uint8Array(signedMsg.length);\n          var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n          if (mlen < 0) return null;\n          var m = new Uint8Array(mlen);\n          for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n          return m;\n        };\n        \n        nacl.sign.detached = function(msg, secretKey) {\n          var signedMsg = nacl.sign(msg, secretKey);\n          var sig = new Uint8Array(crypto_sign_BYTES);\n          for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n          return sig;\n        };\n        \n        nacl.sign.detached.verify = function(msg, sig, publicKey) {\n          checkArrayTypes(msg, sig, publicKey);\n          if (sig.length !== crypto_sign_BYTES)\n            throw new Error('bad signature size');\n          if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n            throw new Error('bad public key size');\n          var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n          var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n          var i;\n          for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n          for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n          return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n        };\n        \n        nacl.sign.keyPair = function() {\n          var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n          var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n          crypto_sign_keypair(pk, sk);\n          return {publicKey: pk, secretKey: sk};\n        };\n        \n        nacl.sign.keyPair.fromSecretKey = function(secretKey) {\n          checkArrayTypes(secretKey);\n          if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n            throw new Error('bad secret key size');\n          var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n          for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n          return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n        };\n        \n        nacl.sign.keyPair.fromSeed = function(seed) {\n          checkArrayTypes(seed);\n          if (seed.length !== crypto_sign_SEEDBYTES)\n            throw new Error('bad seed size');\n          var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n          var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n          for (var i = 0; i < 32; i++) sk[i] = seed[i];\n          crypto_sign_keypair(pk, sk, true);\n          return {publicKey: pk, secretKey: sk};\n        };\n        \n        nacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\n        nacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\n        nacl.sign.seedLength = crypto_sign_SEEDBYTES;\n        nacl.sign.signatureLength = crypto_sign_BYTES;\n        \n        nacl.hash = function(msg) {\n          checkArrayTypes(msg);\n          var h = new Uint8Array(crypto_hash_BYTES);\n          crypto_hash(h, msg, msg.length);\n          return h;\n        };\n        \n        nacl.hash.hashLength = crypto_hash_BYTES;\n        \n        nacl.verify = function(x, y) {\n          checkArrayTypes(x, y);\n          // Zero length arguments are considered not equal.\n          if (x.length === 0 || y.length === 0) return false;\n          if (x.length !== y.length) return false;\n          return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n        };\n        \n        nacl.setPRNG = function(fn) {\n          randombytes = fn;\n        };\n        \n        (function() {\n          // Initialize PRNG if environment provides CSPRNG.\n          // If not, methods calling randombytes will throw.\n          var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n          if (crypto && crypto.getRandomValues) {\n            // Browsers.\n            var QUOTA = 65536;\n            nacl.setPRNG(function(x, n) {\n              var i, v = new Uint8Array(n);\n              for (i = 0; i < n; i += QUOTA) {\n                crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n              }\n              for (i = 0; i < n; i++) x[i] = v[i];\n              cleanup(v);\n            });\n          } else if (typeof require !== 'undefined') {\n            // Node.js.\n            crypto = require('crypto');\n            if (crypto && crypto.randomBytes) {\n              nacl.setPRNG(function(x, n) {\n                var i, v = crypto.randomBytes(n);\n                for (i = 0; i < n; i++) x[i] = v[i];\n                cleanup(v);\n              });\n            }\n          }\n        })();\n        \n        })(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n}\n\ntweetnacl();"},"buildInfo":{"for":"1390","version":1390,"when":1755547941394,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"795a47a7d6779aa55ea870dc72b49606089f596d6c16144b8b25a3ab6dc757acb1e9a074d52f7520957e6fb7ace4b2f57f4c21f25f9fafdba180da9c3d265d0c"}},"50-xterm.fs":{"backend":{"files":{"boot":{"03-xterm.js":"3a18eaa3d2cbddc761233168c726098c26579c055280058b92d2b80141a70068b521ac699896d3090c684ad166bf158c10b51259f9309beb38245f3f4ce5fa8b"}},"permissions":{"boot/03-xterm.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"3a18eaa3d2cbddc761233168c726098c26579c055280058b92d2b80141a70068b521ac699896d3090c684ad166bf158c10b51259f9309beb38245f3f4ce5fa8b":"function xterm_export() {\n    if (globalThis.xterm_loaded) return;\n   // xterm, version 5.5.0\n   // @pcos-app-mode native\n   let xterm_style = document.createElement(\"style\");\n   xterm_style.innerHTML = `/**\n   * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n   * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n   * https://github.com/chjj/term.js\n   * @license MIT\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in\n   * all copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n   * THE SOFTWARE.\n   *\n   * Originally forked from (with the author's permission):\n   *   Fabrice Bellard's javascript vt100 for jslinux:\n   *   http://bellard.org/jslinux/\n   *   Copyright (c) 2011 Fabrice Bellard\n   *   The original design remains. The terminal itself\n   *   has been extended to include xterm CSI codes, among\n   *   other features.\n   */\n  \n  /**\n   *  Default styles for xterm.js\n   */\n  \n  .xterm {\n      cursor: text;\n      position: relative;\n      user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n  }\n  \n  .xterm.focus,\n  .xterm:focus {\n      outline: none;\n  }\n  \n  .xterm .xterm-helpers {\n      position: absolute;\n      top: 0;\n      /**\n       * The z-index of the helpers must be higher than the canvases in order for\n       * IMEs to appear on top.\n       */\n      z-index: 5;\n  }\n  \n  .xterm .xterm-helper-textarea {\n      padding: 0;\n      border: 0;\n      margin: 0;\n      /* Move textarea out of the screen to the far left, so that the cursor is not visible */\n      position: absolute;\n      opacity: 0;\n      left: -9999em;\n      top: 0;\n      width: 0;\n      height: 0;\n      z-index: -5;\n      /** Prevent wrapping so the IME appears against the textarea at the correct position */\n      white-space: nowrap;\n      overflow: hidden;\n      resize: none;\n  }\n  \n  .xterm .composition-view {\n      /* TODO: Composition position got messed up somewhere */\n      background: #000;\n      color: #FFF;\n      display: none;\n      position: absolute;\n      white-space: nowrap;\n      z-index: 1;\n  }\n  \n  .xterm .composition-view.active {\n      display: block;\n  }\n  \n  .xterm .xterm-viewport {\n      /* On OS X this is required in order for the scroll bar to appear fully opaque */\n      background-color: #000;\n      overflow-y: scroll;\n      cursor: default;\n      position: absolute;\n      right: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n  }\n  \n  .xterm .xterm-screen {\n      position: relative;\n  }\n  \n  .xterm .xterm-screen canvas {\n      position: absolute;\n      left: 0;\n      top: 0;\n  }\n  \n  .xterm .xterm-scroll-area {\n      visibility: hidden;\n  }\n  \n  .xterm-char-measure-element {\n      display: inline-block;\n      visibility: hidden;\n      position: absolute;\n      top: 0;\n      left: -9999em;\n      line-height: normal;\n  }\n  \n  .xterm.enable-mouse-events {\n      /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n      cursor: default;\n  }\n  \n  .xterm.xterm-cursor-pointer,\n  .xterm .xterm-cursor-pointer {\n      cursor: pointer;\n  }\n  \n  .xterm.column-select.focus {\n      /* Column selection mode */\n      cursor: crosshair;\n  }\n  \n  .xterm .xterm-accessibility:not(.debug),\n  .xterm .xterm-message {\n      position: absolute;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      z-index: 10;\n      color: transparent;\n      pointer-events: none;\n  }\n  \n  .xterm .xterm-accessibility-tree:not(.debug) *::selection {\n    color: transparent;\n  }\n  \n  .xterm .xterm-accessibility-tree {\n    user-select: text;\n    white-space: pre;\n  }\n  \n  .xterm .live-region {\n      position: absolute;\n      left: -9999px;\n      width: 1px;\n      height: 1px;\n      overflow: hidden;\n  }\n  \n  .xterm-dim {\n      /* Dim should not apply to background, so the opacity of the foreground color is applied\n       * explicitly in the generated class and reset to 1 here */\n      opacity: 1 !important;\n  }\n  \n  .xterm-underline-1 { text-decoration: underline; }\n  .xterm-underline-2 { text-decoration: double underline; }\n  .xterm-underline-3 { text-decoration: wavy underline; }\n  .xterm-underline-4 { text-decoration: dotted underline; }\n  .xterm-underline-5 { text-decoration: dashed underline; }\n  \n  .xterm-overline {\n      text-decoration: overline;\n  }\n  \n  .xterm-overline.xterm-underline-1 { text-decoration: overline underline; }\n  .xterm-overline.xterm-underline-2 { text-decoration: overline double underline; }\n  .xterm-overline.xterm-underline-3 { text-decoration: overline wavy underline; }\n  .xterm-overline.xterm-underline-4 { text-decoration: overline dotted underline; }\n  .xterm-overline.xterm-underline-5 { text-decoration: overline dashed underline; }\n  \n  .xterm-strikethrough {\n      text-decoration: line-through;\n  }\n  \n  .xterm-screen .xterm-decoration-container .xterm-decoration {\n      z-index: 6;\n      position: absolute;\n  }\n  \n  .xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer {\n      z-index: 7;\n  }\n  \n  .xterm-decoration-overview-ruler {\n      z-index: 8;\n      position: absolute;\n      top: 0;\n      right: 0;\n      pointer-events: none;\n  }\n  \n  .xterm-decoration-top {\n      z-index: 2;\n      position: relative;\n  }  \n  `;\n   document.head.appendChild(xterm_style);\n   !function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)(\"object\"==typeof exports?exports:e)[s]=i[s]}}(globalThis,(()=>(()=>{\"use strict\";var e={4567:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.AccessibilityManager=void 0;const n=i(9042),o=i(9924),a=i(844),h=i(4725),c=i(2585),l=i(3656);let d=t.AccessibilityManager=class extends a.Disposable{constructor(e,t,i,s){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce=\"\",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement(\"div\"),this._accessibilityContainer.classList.add(\"xterm-accessibility\"),this._rowContainer=this._coreBrowserService.mainDocument.createElement(\"div\"),this._rowContainer.setAttribute(\"role\",\"list\"),this._rowContainer.classList.add(\"xterm-accessibility-tree\"),this._rowElements=[];for(let e=0;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener(\"focus\",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement(\"div\"),this._liveRegion.classList.add(\"live-region\"),this._liveRegion.setAttribute(\"aria-live\",\"assertive\"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new o.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error(\"Cannot enable accessibility before Terminal.open\");this._terminal.element.insertAdjacentElement(\"afterbegin\",this._accessibilityContainer),this.register(this._terminal.onResize((e=>this._handleResize(e.rows)))),this.register(this._terminal.onRender((e=>this._refreshRows(e.start,e.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((e=>this._handleChar(e)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(\"\\n\")))),this.register(this._terminal.onA11yTab((e=>this._handleTab(e)))),this.register(this._terminal.onKey((e=>this._handleKey(e.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,l.addDisposableDomListener)(document,\"selectionchange\",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,a.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(\" \")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,\"\\n\"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent=\"\",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,s=i.lines.length.toString();for(let r=e;r<=t;r++){const e=i.lines.get(i.ydisp+r),t=[],n=e?.translateToString(!0,void 0,void 0,t)||\"\",o=(i.ydisp+r+1).toString(),a=this._rowElements[r];a&&(0===n.length?(a.innerText=\" \",this._rowColumns.set(a,[0,1])):(a.textContent=n,this._rowColumns.set(a,t)),a.setAttribute(\"aria-posinset\",o),a.setAttribute(\"aria-setsize\",s))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce=\"\")}_handleBoundaryFocus(e,t){const i=e.target,s=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute(\"aria-posinset\")===(0===t?\"1\":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==s)return;let r,n;if(0===t?(r=i,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(r=this._rowElements.shift(),n=i,this._rowContainer.removeChild(r)),r.removeEventListener(\"focus\",this._topBoundaryFocusListener),n.removeEventListener(\"focus\",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement(\"afterbegin\",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener(\"focus\",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(0===this._rowElements.length)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error(\"anchorNode and/or focusNode are null\");let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;const s=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(i.node))return;const r=({node:e,offset:t})=>{const i=e instanceof Text?e.parentNode:e;let s=parseInt(i?.getAttribute(\"aria-posinset\"),10)-1;if(isNaN(s))return console.warn(\"row is invalid. Race condition?\"),null;const r=this._rowColumns.get(i);if(!r)return console.warn(\"columns is null. Race condition?\"),null;let n=t<r.length?r[t]:r.slice(-1)[0]+1;return n>=this._terminal.cols&&(++s,n=0),{row:s,column:n}},n=r(t),o=r(i);if(n&&o){if(n.row>o.row||n.row===o.row&&n.column>=o.column)throw new Error(\"invalid range\");this._terminal.select(n.column,n.row,(o.row-n.row)*this._terminal.cols-n.column+o.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener(\"focus\",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement(\"div\");return e.setAttribute(\"role\",\"listitem\"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=d=s([r(1,c.IInstantiationService),r(2,h.ICoreBrowserService),r(3,h.IRenderService)],d)},3614:(e,t)=>{function i(e){return e.replace(/\\r?\\n/g,\"\\r\")}function s(e,t){return t?\"\u001b[200~\"+e+\"\u001b[201~\":e}function r(e,t,r,n){e=s(e=i(e),r.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),r.triggerDataEvent(e,!0),t.value=\"\"}function n(e,t,i){const s=i.getBoundingClientRect(),r=e.clientX-s.left-10,n=e.clientY-s.top-10;t.style.width=\"20px\",t.style.height=\"20px\",t.style.left=`${r}px`,t.style.top=`${n}px`,t.style.zIndex=\"1000\",t.focus()}Object.defineProperty(t,\"__esModule\",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=s,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData(\"text/plain\",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,s){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData(\"text/plain\"),t,i,s)},t.paste=r,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,i,s,r){n(e,t,i),r&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ColorContrastCache=void 0;const s=i(1505);t.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,s){e.addEventListener(t,i,s);let r=!1;return{dispose:()=>{r||(r=!0,e.removeEventListener(t,i,s))}}}},3551:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Linkifier=void 0;const n=i(3656),o=i(8460),a=i(844),h=i(2585),c=i(4725);let l=t.Linkifier=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e,t,i,s,r){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,n.addDisposableDomListener)(this._element,\"mouseleave\",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,n.addDisposableDomListener)(this._element,\"mousemove\",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,\"mousedown\",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,\"mouseup\",this._handleMouseUp.bind(this)))}_handleMouseMove(e){this._lastMouseEvent=e;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let e=0;e<i.length;e++){const t=i[e];if(t.classList.contains(\"xterm\"))break;if(t.classList.contains(\"xterm-hover\"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){this._activeProviderReplies&&t||(this._activeProviderReplies?.forEach((e=>{e?.forEach((e=>{e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(const[s,r]of this._linkProviderService.linkProviders.entries())if(t){const t=this._activeProviderReplies?.get(s);t&&(i=this._checkLinkProviderResult(s,e,i))}else r.provideLinks(e.y,(t=>{if(this._isMouseOut)return;const r=t?.map((e=>({link:e})));this._activeProviderReplies?.set(s,r),i=this._checkLinkProviderResult(s,e,i),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)}))}_removeIntersectingLinks(e,t){const i=new Set;for(let s=0;s<t.size;s++){const r=t.get(s);if(r)for(let t=0;t<r.length;t++){const s=r[t],n=s.link.range.start.y<e?0:s.link.range.start.x,o=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x;for(let e=n;e<=o;e++){if(i.has(e)){r.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){if(!this._activeProviderReplies)return i;const s=this._activeProviderReplies.get(e);let r=!1;for(let t=0;t<e;t++)this._activeProviderReplies.has(t)&&!this._activeProviderReplies.get(t)||(r=!0);if(!r&&s){const e=s.find((e=>this._linkAtPosition(e.link,t)));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let e=0;e<this._activeProviderReplies.size;e++){const s=this._activeProviderReplies.get(e)?.find((e=>this._linkAtPosition(e.link,t)));if(s){i=!0,this._handleNewLink(s);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:e=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&this._element.classList.toggle(\"xterm-cursor-pointer\",e))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:t=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}}))))}_linkHover(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add(\"xterm-cursor-pointer\")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove(\"xterm-cursor-pointer\")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,r=t.y*this._bufferService.cols+t.x;return i<=r&&r<=s}_positionFromMouseEvent(e,t,i){const s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,r){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:r}}};t.Linkifier=l=s([r(1,c.IMouseService),r(2,c.IRenderService),r(3,h.IBufferService),r(4,c.ILinkProviderService)],l)},9042:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel=\"Terminal input\",t.tooMuchOutput=\"Too much output to announce, navigate to rows manually to read\"},3730:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscLinkProvider=void 0;const n=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){const i=this._bufferService.buffer.lines.get(e-1);if(!i)return void t(void 0);const s=[],r=this._optionsService.rawOptions.linkHandler,o=new n.CellData,a=i.getTrimmedLength();let c=-1,l=-1,d=!1;for(let t=0;t<a;t++)if(-1!==l||i.hasContent(t)){if(i.loadCell(t,o),o.hasExtendedAttrs()&&o.extended.urlId){if(-1===l){l=t,c=o.extended.urlId;continue}d=o.extended.urlId!==c}else-1!==l&&(d=!0);if(d||-1!==l&&t===a-1){const i=this._oscLinkService.getLinkData(c)?.uri;if(i){const n={start:{x:l+1,y:e},end:{x:t+(d||t!==a-1?0:1),y:e}};let o=!1;if(!r?.allowNonHttpProtocols)try{const e=new URL(i);[\"http:\",\"https:\"].includes(e.protocol)||(o=!0)}catch(e){o=!0}o||s.push({text:i,range:n,activate:(e,t)=>r?r.activate(e,t,n):h(0,t),hover:(e,t)=>r?.hover?.(e,t,n),leave:(e,t)=>r?.leave?.(e,t,n)})}d=!1,o.hasExtendedAttrs()&&o.extended.urlId?(l=t,c=o.extended.urlId):(l=-1,c=-1)}}t(s)}};function h(e,t){if(confirm(`Do you want to navigate to ${t}?\\n\\nWARNING: This link could potentially be dangerous`)){const e=window.open();if(e){try{e.opener=null}catch{}e.location.href=t}else console.warn(\"Opening link blocked as opener could not be cleared\")}}t.OscLinkProvider=a=s([r(0,o.IBufferService),r(1,o.IOptionsService),r(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},3236:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Terminal=void 0;const s=i(3614),r=i(3656),n=i(3551),o=i(9042),a=i(3730),h=i(1680),c=i(3107),l=i(5744),d=i(2950),_=i(1296),u=i(428),f=i(4269),v=i(5114),p=i(8934),g=i(3230),m=i(9312),S=i(4725),C=i(6731),b=i(8055),w=i(8969),y=i(8460),E=i(844),k=i(6114),L=i(8437),D=i(2584),R=i(7399),x=i(5941),A=i(9074),B=i(2585),T=i(5435),M=i(4567),O=i(779);class P extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new E.MutableDisposable),this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new y.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new y.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new y.EventEmitter),this._onBlur=this.register(new y.EventEmitter),this._onA11yCharEmitter=this.register(new y.EventEmitter),this._onA11yTabEmitter=this.register(new y.EventEmitter),this._onWillOpen=this.register(new y.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(O.LinkProviderService),this._instantiationService.setService(S.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((e,t)=>this.refresh(e,t)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((e=>this._reportWindowsOptions(e)))),this.register(this._inputHandler.onColor((e=>this._handleColorEvent(e)))),this.register((0,y.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,y.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((e=>this._afterResize(e.cols,e.rows)))),this.register((0,E.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i=\"\";switch(t.index){case 256:e=\"foreground\",i=\"10\";break;case 257:e=\"background\",i=\"11\";break;case 258:e=\"cursor\",i=\"12\";break;default:e=\"ansi\",i=\"4;\"+t.index}switch(t.type){case 0:const s=b.color.toColorRGB(\"ansi\"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${D.C0.ESC}]${i};${(0,x.toRgbString)(s)}${D.C1_ESCAPED.ST}`);break;case 1:if(\"ansi\"===e)this._themeService.modifyColors((e=>e.ansi[t.index]=b.channels.toColor(...t.color)));else{const i=e;this._themeService.modifyColors((e=>e[i]=b.channels.toColor(...t.color)))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+\"[I\"),this.element.classList.add(\"focus\"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value=\"\",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+\"[O\"),this.element.classList.remove(\"focus\"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+\"px\",this.textarea.style.top=o+\"px\",this.textarea.style.width=n+\"px\",this.textarea.style.height=s+\"px\",this.textarea.style.lineHeight=s+\"px\",this.textarea.style.zIndex=\"-5\"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,\"copy\",(e=>{this.hasSelection()&&(0,s.copyHandler)(e,this._selectionService)})));const e=e=>(0,s.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,r.addDisposableDomListener)(this.textarea,\"paste\",e)),this.register((0,r.addDisposableDomListener)(this.element,\"paste\",e)),k.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,\"mousedown\",(e=>{2===e.button&&(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,r.addDisposableDomListener)(this.element,\"contextmenu\",(e=>{(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),k.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,\"auxclick\",(e=>{1===e.button&&(0,s.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,\"keyup\",(e=>this._keyUp(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"keydown\",(e=>this._keyDown(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"keypress\",(e=>this._keyPress(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionstart\",(()=>this._compositionHelper.compositionstart()))),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionupdate\",(e=>this._compositionHelper.compositionupdate(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionend\",(()=>this._compositionHelper.compositionend()))),this.register((0,r.addDisposableDomListener)(this.textarea,\"input\",(e=>this._inputEvent(e)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(e){if(!e)throw new Error(\"Terminal requires a parent element.\");if(e.isConnected||this._logService.debug(\"Terminal.open was called on an element that was not attached to the DOM\"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement(\"div\"),this.element.dir=\"ltr\",this.element.classList.add(\"terminal\"),this.element.classList.add(\"xterm\"),e.appendChild(this.element);const t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement(\"div\"),this._viewportElement.classList.add(\"xterm-viewport\"),t.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement(\"div\"),this._viewportScrollArea.classList.add(\"xterm-scroll-area\"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement(\"div\"),this.screenElement.classList.add(\"xterm-screen\"),this.register((0,r.addDisposableDomListener)(this.screenElement,\"mousemove\",(e=>this.updateCursorStyle(e)))),this._helperContainer=this._document.createElement(\"div\"),this._helperContainer.classList.add(\"xterm-helpers\"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement),this.textarea=this._document.createElement(\"textarea\"),this.textarea.classList.add(\"xterm-helper-textarea\"),this.textarea.setAttribute(\"aria-label\",o.promptLabel),k.isChromeOS||this.textarea.setAttribute(\"aria-multiline\",\"false\"),this.textarea.setAttribute(\"autocorrect\",\"off\"),this.textarea.setAttribute(\"autocapitalize\",\"off\"),this.textarea.setAttribute(\"spellcheck\",\"false\"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(v.CoreBrowserService,this.textarea,e.ownerDocument.defaultView??window,this._document??\"undefined\"!=typeof window?window.document:null)),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,\"focus\",(e=>this._handleTextAreaFocus(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,\"blur\",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(C.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(g.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((e=>this._onRender.fire(e)))),this.onResize((e=>this._renderService.resize(e.cols,e.rows))),this._compositionView=this._document.createElement(\"div\"),this._compositionView.classList.add(\"composition-view\"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(p.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(n.Linkifier,this.screenElement)),this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,r.addDisposableDomListener)(this._viewportElement,\"scroll\",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,\"mousedown\",(e=>this._selectionService.handleMouseDown(e)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add(\"enable-mouse-events\")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange(\"screenReaderMode\",(e=>this._handleScreenReaderModeOptionChange(e)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange(\"overviewRulerWidth\",(e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let s,r;switch(t.overrideType||t.type){case\"mousemove\":r=32,void 0===t.buttons?(s=3,void 0!==t.button&&(s=t.button<3?t.button:3)):s=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case\"mouseup\":r=0,s=t.button<3?t.button:3;break;case\"mousedown\":r=1,s=t.button<3?t.button:3;break;case\"wheel\":if(e._customWheelEventHandler&&!1===e._customWheelEventHandler(t))return!1;if(0===e.viewport.getLinesScrolled(t))return!1;r=t.deltaY<0?0:1,s=4;break;default:return!1}return!(void 0===r||void 0===s||s>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:s,action:r,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener(\"mouseup\",s.mouseup),s.mousedrag&&this._document.removeEventListener(\"mousemove\",s.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange((e=>{e?(\"debug\"===this.optionsService.rawOptions.logLevel&&this._logService.debug(\"Binding to mouse events:\",this.coreMouseService.explainEvents(e)),this.element.classList.add(\"enable-mouse-events\"),this._selectionService.disable()):(this._logService.debug(\"Unbinding from mouse events.\"),this.element.classList.remove(\"enable-mouse-events\"),this._selectionService.enable()),8&e?s.mousemove||(t.addEventListener(\"mousemove\",n.mousemove),s.mousemove=n.mousemove):(t.removeEventListener(\"mousemove\",s.mousemove),s.mousemove=null),16&e?s.wheel||(t.addEventListener(\"wheel\",n.wheel,{passive:!1}),s.wheel=n.wheel):(t.removeEventListener(\"wheel\",s.wheel),s.wheel=null),2&e?s.mouseup||(s.mouseup=n.mouseup):(this._document.removeEventListener(\"mouseup\",s.mouseup),s.mouseup=null),4&e?s.mousedrag||(s.mousedrag=n.mousedrag):(this._document.removeEventListener(\"mousemove\",s.mousedrag),s.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(t,\"mousedown\",(e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),s.mouseup&&this._document.addEventListener(\"mouseup\",s.mouseup),s.mousedrag&&this._document.addEventListener(\"mousemove\",s.mousedrag),this.cancel(e)}))),this.register((0,r.addDisposableDomListener)(t,\"wheel\",(e=>{if(!s.wheel){if(this._customWheelEventHandler&&!1===this._customWheelEventHandler(e))return!1;if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=D.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?\"O\":\"[\")+(e.deltaY<0?\"A\":\"B\");let s=\"\";for(let e=0;e<Math.abs(t);e++)s+=i;return this.coreService.triggerDataEvent(s,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}}),{passive:!1})),this.register((0,r.addDisposableDomListener)(t,\"touchstart\",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)}),{passive:!0})),this.register((0,r.addDisposableDomListener)(t,\"touchmove\",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)}),{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add(\"column-select\"):this.element.classList.remove(\"column-select\")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(e)}paste(e){(0,s.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error(\"Terminal must be opened first\");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error(\"Terminal must be opened first\");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:\"\"}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||\"Dead\"!==e.key&&\"AltGraph\"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,R.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==D.C0.ETX&&i.key!==D.C0.CR||(this.textarea.value=\"\"),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState(\"AltGraph\");return\"keypress\"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&\"insertText\"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains(\"focus\")?this.coreService.triggerDataEvent(D.C0.ESC+\"[I\"):this.coreService.triggerDataEvent(D.C0.ESC+\"[O\")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),s=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[6;${s};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=P},9924:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const s=Date.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=s-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Viewport=void 0;const n=i(3656),o=i(4725),a=i(8460),h=i(844),c=i(2585);let l=t.Viewport=class extends h.Disposable{constructor(e,t,i,s,r,o,h,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=s,this._charSizeService=r,this._renderService=o,this._coreBrowserService=h,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,\"scroll\",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((e=>this._renderDimensions=e))),this._handleThemeChange(c.colors),this.register(c.onChangeColors((e=>this._handleThemeChange(e)))),this.register(this._optionsService.onSpecificOptionChange(\"scrollback\",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+\"px\")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){let i,s=\"\";const r=[],n=t??this._bufferService.buffer.lines.length,o=this._bufferService.buffer.lines;for(let t=e;t<n;t++){const e=o.get(t);if(!e)continue;const n=o.get(t+1)?.isWrapped;if(s+=e.translateToString(!n),!n||t===o.length-1){const e=document.createElement(\"div\");e.textContent=s,r.push(e),s.length>0&&(i=e),s=\"\"}}return{bufferElements:r,cursorElement:i}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return\"alt\"===i&&t.altKey||\"ctrl\"===i&&t.ctrlKey||\"shift\"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=l=s([r(2,c.IBufferService),r(3,c.IOptionsService),r(4,o.ICharSizeService),r(5,o.IRenderService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],l)},3107:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferDecorationRenderer=void 0;const n=i(4725),o=i(844),a=i(2585);let h=t.BufferDecorationRenderer=class extends o.Disposable{constructor(e,t,i,s,r){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement(\"div\"),this._container.classList.add(\"xterm-decoration-container\"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((e=>this._removeDecoration(e)))),this.register((0,o.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){const t=this._coreBrowserService.mainDocument.createElement(\"div\");t.classList.add(\"xterm-decoration\"),t.classList.toggle(\"xterm-decoration-top-layer\",\"top\"===e?.options?.layer),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+\"px\",t.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+\"px\",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display=\"none\"),this._refreshXPosition(e,t),t}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display=\"none\",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose((()=>{this._decorationElements.delete(e),i.remove()}))),i.style.top=t*this._renderService.dimensions.css.cell.height+\"px\",i.style.display=this._altBufferIsActive?\"none\":\"block\",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;const i=e.options.x??0;\"right\"===(e.options.anchor||\"left\")?t.style.right=i?i*this._renderService.dimensions.css.cell.width+\"px\":\"\":t.style.left=i?i*this._renderService.dimensions.css.cell.width+\"px\":\"\"}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=h=s([r(1,a.IBufferService),r(2,n.ICoreBrowserService),r(3,a.IDecorationService),r(4,n.IRenderService)],h)},5871:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||\"full\"]&&t<=e.endBufferLine+this._linePadding[i||\"full\"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OverviewRulerRenderer=void 0;const n=i(5871),o=i(4725),a=i(844),h=i(2585),c={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let _=t.OverviewRulerRenderer=class extends a.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,s,r,o,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=r,this._optionsService=o,this._coreBrowserService=h,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement(\"canvas\"),this._canvas.classList.add(\"xterm-decoration-overview-ruler\"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const c=this._canvas.getContext(\"2d\");if(!c)throw new Error(\"Ctx cannot be null\");this._ctx=c,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,a.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?\"none\":\"block\"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange(\"overviewRulerWidth\",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=e,l.center=t,l.right=e,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=l.left,d.right=l.left+l.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowserService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);c.left=t,c.center=t,c.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)\"full\"!==t.position&&this._renderColorZone(t);for(const t of e)\"full\"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(d[e.position||\"full\"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-c[e.position||\"full\"]/2),l[e.position||\"full\"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[e.position||\"full\"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};t.OverviewRulerRenderer=_=s([r(2,h.IBufferService),r(3,h.IDecorationService),r(4,o.IRenderService),r(5,h.IOptionsService),r(6,o.ICoreBrowserService)],_)},2950:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CompositionHelper=void 0;const n=i(4725),o=i(2585),a=i(2584);let h=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,s,r,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=\"\"}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent=\"\",this._dataAlreadySent=\"\",this._compositionView.classList.add(\"active\")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove(\"active\"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}}),0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,\"\");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}}),0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+\"px\",this._compositionView.style.top=i+\"px\",this._compositionView.style.height=t+\"px\",this._compositionView.style.lineHeight=t+\"px\",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+\"px\";const r=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+\"px\",this._textarea.style.top=i+\"px\",this._textarea.style.width=Math.max(r.width,1)+\"px\",this._textarea.style.height=Math.max(r.height,1)+\"px\",this._textarea.style.lineHeight=r.height+\"px\"}e||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};t.CompositionHelper=h=s([r(2,o.IBufferService),r(3,o.IOptionsService),r(4,o.ICoreService),r(5,n.IRenderService)],h)},9806:(e,t)=>{function i(e,t,i){const s=i.getBoundingClientRect(),r=e.getComputedStyle(i),n=parseInt(r.getPropertyValue(\"padding-left\")),o=parseInt(r.getPropertyValue(\"padding-top\"));return[t.clientX-s.left-n,t.clientY-s.top-o]}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,s,r,n,o,a,h,c){if(!o)return;const l=i(e,t,s);return l?(l[0]=Math.ceil((l[0]+(c?a/2:0))/a),l[1]=Math.ceil(l[1]/h),l[0]=Math.min(Math.max(l[0],1),r+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),n),l):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.moveToCellSequence=void 0;const s=i(2584);function r(e,t,i,s){const r=e-n(e,i),a=t-n(t,i),l=Math.abs(r-a)-function(e,t,i){let s=0;const r=e-n(e,i),a=t-n(t,i);for(let n=0;n<Math.abs(r-a);n++){const a=\"A\"===o(e,t)?-1:1,h=i.buffer.lines.get(r+a*n);h?.isWrapped&&s++}return s}(e,t,i);return c(l,h(o(e,t),s))}function n(e,t){let i=0,s=t.buffer.lines.get(e),r=s?.isWrapped;for(;r&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),r=s?.isWrapped;return i}function o(e,t){return e>t?\"A\":\"B\"}function a(e,t,i,s,r,n){let o=e,a=t,h=\"\";for(;o!==i||a!==s;)o+=r?1:-1,r&&o>n.cols-1?(h+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!r&&o<0&&(h+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return h+n.buffer.translateBufferLineToString(a,!1,e,o)}function h(e,t){const i=t?\"O\":\"[\";return s.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i=\"\";for(let s=0;s<e;s++)i+=t;return i}t.moveToCellSequence=function(e,t,i,s){const o=i.buffer.x,l=i.buffer.y;if(!i.buffer.hasScrollback)return function(e,t,i,s,o,l){return 0===r(t,s,o,l).length?\"\":c(a(e,t,e,t-n(t,o),!1,o).length,h(\"D\",l))}(o,l,0,t,i,s)+r(l,t,i,s)+function(e,t,i,s,o,l){let d;d=r(t,s,o,l).length>0?s-n(s,o):t;const _=s,u=function(e,t,i,s,o,a){let h;return h=r(i,s,o,a).length>0?s-n(s,o):t,e<i&&h<=s||e>=i&&h<s?\"C\":\"D\"}(e,t,i,s,o,l);return c(a(e,d,i,_,\"C\"===u,o).length,h(u,l))}(o,l,e,t,i,s);let d;if(l===t)return d=o>e?\"D\":\"C\",c(Math.abs(o-e),h(d,s));d=l>t?\"D\":\"C\";const _=Math.abs(l-t);return c(function(e,t){return t.cols-e}(l>t?e:o,i)+(_-1)*i.cols+1+((l>t?o:e)-1),h(d,s))}},1296:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.DomRenderer=void 0;const n=i(3787),o=i(2550),a=i(2223),h=i(6171),c=i(6052),l=i(4725),d=i(8055),_=i(8460),u=i(844),f=i(2585),v=\"xterm-dom-renderer-owner-\",p=\"xterm-rows\",g=\"xterm-fg-\",m=\"xterm-bg-\",S=\"xterm-focus\",C=\"xterm-selection\";let b=1,w=t.DomRenderer=class extends u.Disposable{constructor(e,t,i,s,r,a,l,d,f,g,m,S,w){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=s,this._viewportElement=r,this._helperContainer=a,this._linkifier2=l,this._charSizeService=f,this._optionsService=g,this._bufferService=m,this._coreBrowserService=S,this._themeService=w,this._terminalClass=b++,this._rowElements=[],this._selectionRenderModel=(0,c.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=this._document.createElement(\"div\"),this._rowContainer.classList.add(p),this._rowContainer.style.lineHeight=\"normal\",this._rowContainer.setAttribute(\"aria-hidden\",\"true\"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement(\"div\"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute(\"aria-hidden\",\"true\"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((e=>this._injectCss(e)))),this._injectCss(this._themeService.colors),this._rowFactory=d.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((e=>this._handleLinkHover(e)))),this.register(this._linkifier2.onHideLinkUnderline((e=>this._handleLinkLeave(e)))),this.register((0,u.toDisposable)((()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new o.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const e of this._rowElements)e.style.width=`${this.dimensions.css.canvas.width}px`,e.style.height=`${this.dimensions.css.cell.height}px`,e.style.lineHeight=`${this.dimensions.css.cell.height}px`,e.style.overflow=\"hidden\";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement(\"style\"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${p} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement(\"style\"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${p} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${p} .xterm-dim { color: ${d.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const i=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${r} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,s]of e.ansi.entries())t+=`${this._terminalSelector} .${g}${i} { color: ${s.css}; }${this._terminalSelector} .${g}${i}.xterm-dim { color: ${d.color.multiplyOpacity(s,.5).css}; }${this._terminalSelector} .${m}${i} { background-color: ${s.css}; }`;t+=`${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(e.background).css}; }${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get(\"W\",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let e=this._rowElements.length;e<=t;e++){const e=this._document.createElement(\"div\");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;this._selectionRenderModel.update(this._terminal,e,t,i);const s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,n=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow;if(n>=this._bufferService.rows||o<0)return;const a=this._document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(n,i?t[0]:e[0],i?e[0]:t[0],o-n+1))}else{const i=s===n?e[0]:0,h=n===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,i,h));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=r===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,s=1){const r=this._document.createElement(\"div\"),n=t*this.dimensions.css.cell.width;let o=this.dimensions.css.cell.width*(i-t);return n+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-n),r.style.height=s*this.dimensions.css.cell.height+\"px\",r.style.top=e*this.dimensions.css.cell.height+\"px\",r.style.left=`${n}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,s=i.ybase+i.y,r=Math.min(i.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let h=e;h<=t;h++){const e=h+i.ydisp,t=this._rowElements[h],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===s,o,a,r,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,r,n){i<0&&(e=0),s<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);const a=this._bufferService.buffer,h=a.ybase+a.y,c=Math.min(a.x,r-1),l=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let o=i;o<=s;++o){const u=o+a.ydisp,f=this._rowElements[o],v=a.lines.get(u);if(!f||!v)break;f.replaceChildren(...this._rowFactory.createRow(v,u,u===h,d,_,c,l,this.dimensions.css.cell.width,this._widthCache,n?o===i?e:0:-1,n?(o===s?t:r)-1:-1))}}};t.DomRenderer=w=s([r(7,f.IInstantiationService),r(8,l.ICharSizeService),r(9,f.IOptionsService),r(10,f.IBufferService),r(11,l.ICoreBrowserService),r(12,l.IThemeService)],w)},3787:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.DomRendererRowFactory=void 0;const n=i(2223),o=i(643),a=i(511),h=i(2585),c=i(8055),l=i(4725),d=i(4269),_=i(6171),u=i(3734);let f=t.DomRendererRowFactory=class{constructor(e,t,i,s,r,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=r,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,r,a,h,l,_,f,p){const g=[],m=this._characterJoinerService.getJoinedCharacters(t),S=this._themeService.colors;let C,b=e.getNoBgTrimmedLength();i&&b<a+1&&(b=a+1);let w=0,y=\"\",E=0,k=0,L=0,D=!1,R=0,x=!1,A=0;const B=[],T=-1!==f&&-1!==p;for(let M=0;M<b;M++){e.loadCell(M,this._workCell);let b=this._workCell.getWidth();if(0===b)continue;let O=!1,P=M,I=this._workCell;if(m.length>0&&M===m[0][0]){O=!0;const t=m.shift();I=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),P=t[1]-1,b=I.getWidth()}const H=this._isCellInSelection(M,t),F=i&&M===a,W=T&&M>=f&&M<=p;let U=!1;this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{U=!0}));let N=I.getChars()||o.WHITESPACE_CELL_CHAR;if(\" \"===N&&(I.isUnderline()||I.isOverline())&&(N=\" \"),A=b*l-_.get(N,I.isBold(),I.isItalic()),C){if(w&&(H&&x||!H&&!x&&I.bg===E)&&(H&&x&&S.selectionForeground||I.fg===k)&&I.extended.ext===L&&W===D&&A===R&&!F&&!O&&!U){I.isInvisible()?y+=o.WHITESPACE_CELL_CHAR:y+=N,w++;continue}w&&(C.textContent=y),C=this._document.createElement(\"span\"),w=0,y=\"\"}else C=this._document.createElement(\"span\");if(E=I.bg,k=I.fg,L=I.extended.ext,D=W,R=A,x=H,O&&a>=M&&a<=P&&(a=M),!this._coreService.isCursorHidden&&F&&this._coreService.isCursorInitialized)if(B.push(\"xterm-cursor\"),this._coreBrowserService.isFocused)h&&B.push(\"xterm-cursor-blink\"),B.push(\"bar\"===s?\"xterm-cursor-bar\":\"underline\"===s?\"xterm-cursor-underline\":\"xterm-cursor-block\");else if(r)switch(r){case\"outline\":B.push(\"xterm-cursor-outline\");break;case\"block\":B.push(\"xterm-cursor-block\");break;case\"bar\":B.push(\"xterm-cursor-bar\");break;case\"underline\":B.push(\"xterm-cursor-underline\")}if(I.isBold()&&B.push(\"xterm-bold\"),I.isItalic()&&B.push(\"xterm-italic\"),I.isDim()&&B.push(\"xterm-dim\"),y=I.isInvisible()?o.WHITESPACE_CELL_CHAR:I.getChars()||o.WHITESPACE_CELL_CHAR,I.isUnderline()&&(B.push(`xterm-underline-${I.extended.underlineStyle}`),\" \"===y&&(y=\" \"),!I.isUnderlineColorDefault()))if(I.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(I.getUnderlineColor()).join(\",\")})`;else{let e=I.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&I.isBold()&&e<8&&(e+=8),C.style.textDecorationColor=S.ansi[e].css}I.isOverline()&&(B.push(\"xterm-overline\"),\" \"===y&&(y=\" \")),I.isStrikethrough()&&B.push(\"xterm-strikethrough\"),W&&(C.style.textDecoration=\"underline\");let $=I.getFgColor(),j=I.getFgColorMode(),z=I.getBgColor(),K=I.getBgColorMode();const q=!!I.isInverse();if(q){const e=$;$=z,z=e;const t=j;j=K,K=t}let V,G,X,J=!1;switch(this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{\"top\"!==e.options.layer&&J||(e.backgroundColorRGB&&(K=50331648,z=e.backgroundColorRGB.rgba>>8&16777215,V=e.backgroundColorRGB),e.foregroundColorRGB&&(j=50331648,$=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),J=\"top\"===e.options.layer)})),!J&&H&&(V=this._coreBrowserService.isFocused?S.selectionBackgroundOpaque:S.selectionInactiveBackgroundOpaque,z=V.rgba>>8&16777215,K=50331648,J=!0,S.selectionForeground&&(j=50331648,$=S.selectionForeground.rgba>>8&16777215,G=S.selectionForeground)),J&&B.push(\"xterm-decoration-top\"),K){case 16777216:case 33554432:X=S.ansi[z],B.push(`xterm-bg-${z}`);break;case 50331648:X=c.channels.toColor(z>>16,z>>8&255,255&z),this._addStyle(C,`background-color:#${v((z>>>0).toString(16),\"0\",6)}`);break;default:q?(X=S.foreground,B.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):X=S.background}switch(V||I.isDim()&&(V=c.color.multiplyOpacity(X,.5)),j){case 16777216:case 33554432:I.isBold()&&$<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($+=8),this._applyMinimumContrast(C,X,S.ansi[$],I,V,void 0)||B.push(`xterm-fg-${$}`);break;case 50331648:const e=c.channels.toColor($>>16&255,$>>8&255,255&$);this._applyMinimumContrast(C,X,e,I,V,G)||this._addStyle(C,`color:#${v($.toString(16),\"0\",6)}`);break;default:this._applyMinimumContrast(C,X,S.foreground,I,V,G)||q&&B.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}B.length&&(C.className=B.join(\" \"),B.length=0),F||O||U?C.textContent=y:w++,A!==this.defaultSpacing&&(C.style.letterSpacing=`${A}px`),g.push(C),M=P}return C&&w&&(C.textContent=y),g}_applyMinimumContrast(e,t,i,s,r,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,_.treatGlyphAsBackgroundColor)(s.getCode()))return!1;const o=this._getContrastCache(s);let a;if(r||n||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);a=c.color.ensureContrastRatio(r||t,n||i,e),o.setColor((r||t).rgba,(n||i).rgba,a??null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute(\"style\",`${e.getAttribute(\"style\")||\"\"}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,s=this._selectionEnd;return!(!i||!s)&&(this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0])}};function v(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=f=s([r(1,l.ICharacterJoinerService),r(2,h.IOptionsService),r(3,l.ICoreBrowserService),r(4,h.ICoreService),r(5,h.IDecorationService),r(6,l.IThemeService)],f)},2550:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e,t){this._flat=new Float32Array(256),this._font=\"\",this._fontSize=0,this._weight=\"normal\",this._weightBold=\"bold\",this._measureElements=[],this._container=e.createElement(\"div\"),this._container.classList.add(\"xterm-width-cache-measure-container\"),this._container.setAttribute(\"aria-hidden\",\"true\"),this._container.style.whiteSpace=\"pre\",this._container.style.fontKerning=\"none\";const i=e.createElement(\"span\");i.classList.add(\"xterm-char-measure-element\");const s=e.createElement(\"span\");s.classList.add(\"xterm-char-measure-element\"),s.style.fontWeight=\"bold\";const r=e.createElement(\"span\");r.classList.add(\"xterm-char-measure-element\"),r.style.fontStyle=\"italic\";const n=e.createElement(\"span\");n.classList.add(\"xterm-char-measure-element\"),n.style.fontWeight=\"bold\",n.style.fontStyle=\"italic\",this._measureElements=[i,s,r,n],this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(n),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&1===e.length&&(s=e.charCodeAt(0))<256){if(-9999!==this._flat[s])return this._flat[s];const t=this._measure(e,0);return t>0&&(this._flat[s]=t),t}let r=e;t&&(r+=\"B\"),i&&(r+=\"I\");let n=this._holey.get(r);if(void 0===n){let s=0;t&&(s|=1),i&&(s|=2),n=this._measure(e,s),n>0&&this._holey.set(r,n)}return n}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const s=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?\"bottom\":\"ideographic\"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}function s(e){return e>=128512&&e<=128591||e>=127744&&e<=128511||e>=128640&&e<=128767||e>=9728&&e<=9983||e>=9984&&e<=10175||e>=65024&&e<=65039||e>=129280&&e<=129535||e>=127462&&e<=127487}Object.defineProperty(t,\"__esModule\",{value:!0}),t.computeNextVariantOffset=t.createRenderDimensions=t.treatGlyphAsBackgroundColor=t.allowRescaling=t.isEmoji=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error(\"value must not be falsy\");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.isEmoji=s,t.allowRescaling=function(e,t,r,n){return 1===t&&r>Math.ceil(1.5*n)&&void 0!==e&&e>255&&!s(e)&&!i(e)&&!function(e){return 57344<=e&&e<=63743}(e)},t.treatGlyphAsBackgroundColor=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},t.computeNextVariantOffset=function(e,t,i=0){return(e-(2*Math.round(t)-i))%(2*Math.round(t))}},6052:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,s=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const r=e.buffers.active.ydisp,n=t[1]-r,o=i[1]-r,a=Math.max(n,0),h=Math.min(o,e.rows-1);a>=e.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=h,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},456:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharSizeService=void 0;const n=i(2585),o=i(8460),a=i(844);let h=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new d(this._optionsService))}catch{this._measureStrategy=this.register(new l(e,t,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange([\"fontFamily\",\"fontSize\"],(()=>this.measure())))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=h=s([r(2,n.IOptionsService)],h);class c extends a.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){void 0!==e&&e>0&&void 0!==t&&t>0&&(this._result.width=e,this._result.height=t)}}class l extends c{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement(\"span\"),this._measureElement.classList.add(\"xterm-char-measure-element\"),this._measureElement.textContent=\"W\".repeat(32),this._measureElement.setAttribute(\"aria-hidden\",\"true\"),this._measureElement.style.whiteSpace=\"pre\",this._measureElement.style.fontKerning=\"none\",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class d extends c{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext(\"2d\");const t=this._ctx.measureText(\"W\");if(!(\"width\"in t&&\"fontBoundingBoxAscent\"in t&&\"fontBoundingBoxDescent\"in t))throw new Error(\"Required font metrics not supported\")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const e=this._ctx.measureText(\"W\");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}}},4269:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(3734),o=i(643),a=i(511),h=i(2585);class c extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData=\"\",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error(\"not implemented\")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let l=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],s=t.translateToString(!0);let r=0,n=0,a=0,h=t.getFg(0),c=t.getBg(0);for(let e=0;e<t.getTrimmedLength();e++)if(t.loadCell(e,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==h||this._workCell.bg!==c){if(e-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}r=e,a=n,h=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,s,r,n){const o=t.substring(i,s);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let t=1;t<this._characterJoiners.length;t++)try{const i=this._characterJoiners[t].handler(o);for(let t=0;t<i.length;t++)e._mergeRanges(a,i[t])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,r,n),a}_stringRangesToCellRanges(e,t,i){let s=0,r=!1,n=0,a=e[s];if(a){for(let h=i;h<this._bufferService.cols;h++){const i=t.getWidth(h),c=t.getString(h).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!r&&a[0]<=n&&(a[0]=h,r=!0),a[1]<=n){if(a[1]=h,a=e[++s],!a)break;a[0]<=n?(a[0]=h,r=!0):r=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(i){if(t[1]<=r[0])return e[s-1][1]=t[1],e;if(t[1]<=r[1])return e[s-1][1]=Math.max(t[1],r[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=r[0])return e.splice(s,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=l=s([r(0,h.IBufferService)],l)},5114:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreBrowserService=void 0;const s=i(844),r=i(8460),n=i(3656);class o extends s.Disposable{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new a(this._window),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new r.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((e=>this._screenDprMonitor.setWindow(e)))),this.register((0,r.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener(\"focus\",(()=>this._isFocused=!0)),this._textarea.addEventListener(\"blur\",(()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}t.CoreBrowserService=o;class a extends s.Disposable{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this.register(new s.MutableDisposable),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,s.toDisposable)((()=>this.clearListener())))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,n.addDisposableDomListener)(this._parentWindow,\"resize\",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.LinkProviderService=void 0;const s=i(844);class r extends s.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,s.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{const t=this.linkProviders.indexOf(e);-1!==t&&this.linkProviders.splice(t,1)}}}}t.LinkProviderService=r},8934:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.MouseService=void 0;const n=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,r){return(0,o.getCoords)(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=s([r(0,n.IRenderService),r(1,n.ICharSizeService)],a)},3230:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.RenderService=void 0;const n=i(6193),o=i(4725),a=i(8460),h=i(844),c=i(7226),l=i(2585);let d=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,s,r,o,l,d){super(),this._rowCount=e,this._charSizeService=s,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._observerDisposable=this.register(new h.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new a.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new a.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new a.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new a.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new n.RenderDebouncer(((e,t)=>this._renderRows(e,t)),l),this.register(this._renderDebouncer),this.register(l.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(o.onResize((()=>this._fullRefresh()))),this.register(o.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(i.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(r.onDecorationRegistered((()=>this._fullRefresh()))),this.register(r.onDecorationRemoved((()=>this._fullRefresh()))),this.register(i.onMultipleOptionChange([\"customGlyphs\",\"drawBoldTextInBrightColors\",\"letterSpacing\",\"lineHeight\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontWeightBold\",\"minimumContrastRatio\",\"rescaleOverlappingGlyphs\"],(()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()}))),this.register(i.onMultipleOptionChange([\"cursorBlink\",\"cursorStyle\"],(()=>this.refreshRows(o.buffer.y,o.buffer.y,!0)))),this.register(d.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(l.window,t),this.register(l.onWindowChange((e=>this._registerIntersectionObserver(e,t))))}_registerIntersectionObserver(e,t){if(\"IntersectionObserver\"in e){const i=new e.IntersectionObserver((e=>this._handleIntersectionChange(e[e.length-1])),{threshold:0});i.observe(t),this._observerDisposable.value=(0,h.toDisposable)((()=>i.disconnect()))}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw((e=>this.refreshRows(e.start,e.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(e,t))):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,i){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,this._renderer.value?.handleSelectionChanged(e,t,i)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};t.RenderService=d=s([r(2,l.IOptionsService),r(3,o.ICharSizeService),r(4,l.IDecorationService),r(5,l.IBufferService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],d)},9312:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.SelectionService=void 0;const n=i(9806),o=i(9504),a=i(456),h=i(4725),c=i(8460),l=i(844),d=i(6114),_=i(4841),u=i(511),f=i(2585),v=String.fromCharCode(160),p=new RegExp(v,\"g\");let g=t.SelectionService=class extends l.Disposable{constructor(e,t,i,s,r,n,o,h,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=r,this._mouseService=n,this._optionsService=o,this._renderService=h,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((e=>this._handleTrim(e))),this.register(this._bufferService.buffers.onBufferActivate((e=>this._handleBufferActivate(e)))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return\"\";const i=this._bufferService.buffer,s=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return\"\";const r=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,r,n);s.push(e)}}else{const r=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],r));for(let r=e[1]+1;r<=t[1]-1;r++){const e=i.lines.get(r),t=i.translateBufferLineToString(r,!0);e?.isWrapped?s[s.length-1]+=t:s.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),r=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?s[s.length-1]+=r:s.push(r)}}return s.map((e=>e.replace(p,\" \"))).join(d.isWindows?\"\\r\\n\":\"\\n\")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!!(i&&s&&t)&&this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!(!i||!s)&&this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){const i=this._linkifier.currentLink?.link?.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const s=this._getMouseBufferCoords(e);return!!s&&(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener(\"mouseup\",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener(\"mouseup\",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((e=>this._handleTrim(e)))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){const r=e.loadCell(s,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:r>1&&t!==s&&(i+=r-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;const r=this._bufferService.buffer,n=r.lines.get(e[1]);if(!n)return;const o=r.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),h=a;const c=e[0]-a;let l=0,d=0,_=0,u=0;if(\" \"===o.charAt(a)){for(;a>0&&\" \"===o.charAt(a-1);)a--;for(;h<o.length&&\" \"===o.charAt(h+1);)h++}else{let t=e[0],i=e[0];0===n.getWidth(t)&&(l++,t--),2===n.getWidth(i)&&(d++,i++);const s=n.getString(i).length;for(s>1&&(u+=s-1,h+=s-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(l++,t--):e>1&&(_+=e-1,a-=e-1),a--,t--}for(;i<n.length&&h+1<o.length&&!this._isCharWordSeparator(n.loadCell(i+1,this._workCell));){n.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(u+=e-1,h+=e-1),h++,i++}}h++;let f=a+c-l+_,v=Math.min(this._bufferService.cols,h-a+l+d-_-u);if(t||\"\"!==o.slice(a,h).trim()){if(i&&0===f&&32!==n.getCodePoint(0)){const t=r.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;f-=e,v+=e}}}if(s&&f+v===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=r.lines.get(e[1]+1);if(t?.isWrapped&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(v+=t.length)}}return{start:f,length:v}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=g=s([r(3,f.IBufferService),r(4,f.ICoreService),r(5,h.IMouseService),r(6,f.IOptionsService),r(7,h.IRenderService),r(8,h.ICoreBrowserService)],g)},4725:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ILinkProviderService=t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const s=i(8343);t.ICharSizeService=(0,s.createDecorator)(\"CharSizeService\"),t.ICoreBrowserService=(0,s.createDecorator)(\"CoreBrowserService\"),t.IMouseService=(0,s.createDecorator)(\"MouseService\"),t.IRenderService=(0,s.createDecorator)(\"RenderService\"),t.ISelectionService=(0,s.createDecorator)(\"SelectionService\"),t.ICharacterJoinerService=(0,s.createDecorator)(\"CharacterJoinerService\"),t.IThemeService=(0,s.createDecorator)(\"ThemeService\"),t.ILinkProviderService=(0,s.createDecorator)(\"LinkProviderService\")},6731:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=i(7239),o=i(8055),a=i(8460),h=i(844),c=i(2585),l=o.css.toColor(\"#ffffff\"),d=o.css.toColor(\"#000000\"),_=o.css.toColor(\"#ffffff\"),u=o.css.toColor(\"#000000\"),f={css:\"rgba(255, 255, 255, 0.3)\",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor(\"#2e3436\"),o.css.toColor(\"#cc0000\"),o.css.toColor(\"#4e9a06\"),o.css.toColor(\"#c4a000\"),o.css.toColor(\"#3465a4\"),o.css.toColor(\"#75507b\"),o.css.toColor(\"#06989a\"),o.css.toColor(\"#d3d7cf\"),o.css.toColor(\"#555753\"),o.css.toColor(\"#ef2929\"),o.css.toColor(\"#8ae234\"),o.css.toColor(\"#fce94f\"),o.css.toColor(\"#729fcf\"),o.css.toColor(\"#ad7fa8\"),o.css.toColor(\"#34e2e2\"),o.css.toColor(\"#eeeeec\")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const s=t[i/36%6|0],r=t[i/6%6|0],n=t[i%6];e.push({css:o.channels.toCss(s,r,n),rgba:o.channels.toRgba(s,r,n)})}for(let t=0;t<24;t++){const i=8+10*t;e.push({css:o.channels.toCss(i,i,i),rgba:o.channels.toRgba(i,i,i)})}return e})());let v=t.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:d,cursor:_,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:o.color.blend(d,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:o.color.blend(d,f),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange(\"minimumContrastRatio\",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange(\"theme\",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(e={}){const i=this._colors;if(i.foreground=p(e.foreground,l),i.background=p(e.background,d),i.cursor=p(e.cursor,_),i.cursorAccent=p(e.cursorAccent,u),i.selectionBackgroundTransparent=p(e.selectionBackground,f),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=p(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?p(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=p(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=p(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=p(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=p(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=p(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=p(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=p(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=p(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=p(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=p(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=p(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=p(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=p(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=p(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=p(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=p(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const s=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let r=0;r<s;r++)i.ansi[r+16]=p(e.extendedAnsi[r],t.DEFAULT_ANSI_COLORS[r+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function p(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch{}return t}t.ThemeService=v=s([r(0,c.IOptionsService)],v)},6349:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CircularList=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error(\"Can only recycle when the buffer is full\");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let t=this._length-1;t>=e;t--)this._array[this._getCyclicIndex(t+i.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<i.length;t++)this._array[this._getCyclicIndex(e+t)]=i[t];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error(\"start argument out of range\");if(e+i<0)throw new Error(\"Cannot shift elements in list beyond index 0\");if(i>0){for(let s=t-1;s>=0;s--)this.set(e+s+i,this.get(e+s));const s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if(\"object\"!=typeof t)return t;const s=Array.isArray(t)?[]:{};for(const r in t)s[r]=i<=1?t[r]:t[r]&&e(t[r],i-1);return s}},8055:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let i=0,s=0,r=0,n=0;var o,a,h,c,l;function d(e){const t=e.toString(16);return t.length<2?\"0\"+t:t}function _(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:\"#00000000\",rgba:0},function(e){e.toCss=function(e,t,i,s){return void 0!==s?`#${d(e)}${d(t)}${d(i)}${d(s)}`:`#${d(e)}${d(t)}${d(i)}`},e.toRgba=function(e,t,i,s=255){return(e<<24|t<<16|i<<8|s)>>>0},e.toColor=function(t,i,s,r){return{css:e.toCss(t,i,s,r),rgba:e.toRgba(t,i,s,r)}}}(o||(t.channels=o={})),function(e){function t(e,t){return n=Math.round(255*t),[i,s,r]=l.toChannels(e.rgba),{css:o.toCss(i,s,r,n),rgba:o.toRgba(i,s,r,n)}}e.blend=function(e,t){if(n=(255&t.rgba)/255,1===n)return{css:t.css,rgba:t.rgba};const a=t.rgba>>24&255,h=t.rgba>>16&255,c=t.rgba>>8&255,l=e.rgba>>24&255,d=e.rgba>>16&255,_=e.rgba>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),{css:o.toCss(i,s,r),rgba:o.toRgba(i,s,r)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){const s=l.ensureContrastRatio(e.rgba,t.rgba,i);if(s)return o.toColor(s>>24&255,s>>16&255,s>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[i,s,r]=l.toChannels(t),{css:o.toCss(i,s,r),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return n=255&e.rgba,t(e,n*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(a||(t.color=a={})),function(e){let t,a;try{const e=document.createElement(\"canvas\");e.width=1,e.height=1;const i=e.getContext(\"2d\",{willReadFrequently:!0});i&&(t=i,t.globalCompositeOperation=\"copy\",a=t.createLinearGradient(0,0,1,1))}catch{}e.toColor=function(e){if(e.match(/#[\\da-f]{3,8}/i))switch(e.length){case 4:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),o.toColor(i,s,r);case 5:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),n=parseInt(e.slice(4,5).repeat(2),16),o.toColor(i,s,r,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const h=e.match(/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(,\\s*(0|1|\\d?\\.(\\d+))\\s*)?\\)/);if(h)return i=parseInt(h[1]),s=parseInt(h[2]),r=parseInt(h[3]),n=Math.round(255*(void 0===h[5]?1:parseFloat(h[5]))),o.toColor(i,s,r,n);if(!t||!a)throw new Error(\"css.toColor: Unsupported css format\");if(t.fillStyle=a,t.fillStyle=e,\"string\"!=typeof t.fillStyle)throw new Error(\"css.toColor: Unsupported css format\");if(t.fillRect(0,0,1,1),[i,s,r,n]=t.getImageData(0,0,1,1).data,255!==n)throw new Error(\"css.toColor: Unsupported css format\");return{rgba:o.toRgba(i,s,r,n),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const s=e/255,r=t/255,n=i/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(c||(t.rgb=c={})),function(e){function t(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o>0||a>0||h>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),h-=Math.max(0,Math.ceil(.1*h)),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}function a(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o<255||a<255||h<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),h=Math.min(255,h+Math.ceil(.1*(255-h))),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}e.blend=function(e,t){if(n=(255&t)/255,1===n)return t;const a=t>>24&255,h=t>>16&255,c=t>>8&255,l=e>>24&255,d=e>>16&255,_=e>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),o.toRgba(i,s,r)},e.ensureContrastRatio=function(e,i,s){const r=c.relativeLuminance(e>>8),n=c.relativeLuminance(i>>8);if(_(r,n)<s){if(n<r){const n=t(e,i,s),o=_(r,c.relativeLuminance(n>>8));if(o<s){const t=a(e,i,s);return o>_(r,c.relativeLuminance(t>>8))?n:t}return n}const o=a(e,i,s),h=_(r,c.relativeLuminance(o>>8));if(h<s){const n=t(e,i,s);return h>_(r,c.relativeLuminance(n>>8))?o:n}return o}},e.reduceLuminance=t,e.increaseLuminance=a,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}}(l||(t.rgba=l={})),t.toPaddedHex=d,t.contrastRatio=_},8969:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreTerminal=void 0;const s=i(844),r=i(2585),n=i(4348),o=i(7866),a=i(744),h=i(7302),c=i(6975),l=i(8460),d=i(1753),_=i(1480),u=i(7994),f=i(9282),v=i(5435),p=i(5981),g=i(2660);let m=!1;class S extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((e=>{this._onScrollApi?.fire(e.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new h.OptionsService(e)),this._instantiationService.setService(r.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(r.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(r.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(r.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(r.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(r.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(r.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(g.OscLinkService),this._instantiationService.setService(r.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new v.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange([\"windowsMode\",\"windowsPty\"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new p.WriteBuffer(((e,t)=>this._inputHandler.parse(e,t)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=r.LogLevelEnum.WARN&&!m&&(this._logService.warn(\"writeSync is unreliable and will be removed soon.\"),m=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!(\"conpty\"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:\"H\"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)((()=>{for(const t of e)t.dispose()}))}}}t.CoreTerminal=S},8460:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.runAndSubscribe=t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let e=0;e<this._listeners.length;e++)i.push(this._listeners[e]);for(let s=0;s<i.length;s++)i[s].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))},t.runAndSubscribe=function(e,t){return t(void 0),e((e=>t(e)))}},5435:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=i(2584),o=i(7116),a=i(2015),h=i(844),c=i(482),l=i(8437),d=i(8460),_=i(643),u=i(511),f=i(3734),v=i(2585),p=i(1480),g=i(6242),m=i(6351),S=i(5941),C={\"(\":0,\")\":1,\"*\":2,\"+\":3,\"-\":1,\".\":2},b=131072;function w(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var y;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]=\"GET_WIN_SIZE_PIXELS\",e[e.GET_CELL_SIZE_PIXELS=1]=\"GET_CELL_SIZE_PIXELS\"}(y||(t.WindowsOptionsReportType=y={}));let E=0;class k extends h.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,s,r,h,_,f,v=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=r,this._oscLinkService=h,this._coreMouseService=_,this._unicodeService=f,this._parser=v,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle=\"\",this._iconName=\"\",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new L(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._parser.setCsiHandlerFallback(((e,t)=>{this._logService.debug(\"Unknown CSI code: \",{identifier:this._parser.identToString(e),params:t.toArray()})})),this._parser.setEscHandlerFallback((e=>{this._logService.debug(\"Unknown ESC code: \",{identifier:this._parser.identToString(e)})})),this._parser.setExecuteHandlerFallback((e=>{this._logService.debug(\"Unknown EXECUTE code: \",{code:e})})),this._parser.setOscHandlerFallback(((e,t,i)=>{this._logService.debug(\"Unknown OSC code: \",{identifier:e,action:t,data:i})})),this._parser.setDcsHandlerFallback(((e,t,i)=>{\"HOOK\"===t&&(i=i.toArray()),this._logService.debug(\"Unknown DCS code: \",{identifier:this._parser.identToString(e),action:t,payload:i})})),this._parser.setPrintHandler(((e,t,i)=>this.print(e,t,i))),this._parser.registerCsiHandler({final:\"@\"},(e=>this.insertChars(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"@\"},(e=>this.scrollLeft(e))),this._parser.registerCsiHandler({final:\"A\"},(e=>this.cursorUp(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"A\"},(e=>this.scrollRight(e))),this._parser.registerCsiHandler({final:\"B\"},(e=>this.cursorDown(e))),this._parser.registerCsiHandler({final:\"C\"},(e=>this.cursorForward(e))),this._parser.registerCsiHandler({final:\"D\"},(e=>this.cursorBackward(e))),this._parser.registerCsiHandler({final:\"E\"},(e=>this.cursorNextLine(e))),this._parser.registerCsiHandler({final:\"F\"},(e=>this.cursorPrecedingLine(e))),this._parser.registerCsiHandler({final:\"G\"},(e=>this.cursorCharAbsolute(e))),this._parser.registerCsiHandler({final:\"H\"},(e=>this.cursorPosition(e))),this._parser.registerCsiHandler({final:\"I\"},(e=>this.cursorForwardTab(e))),this._parser.registerCsiHandler({final:\"J\"},(e=>this.eraseInDisplay(e,!1))),this._parser.registerCsiHandler({prefix:\"?\",final:\"J\"},(e=>this.eraseInDisplay(e,!0))),this._parser.registerCsiHandler({final:\"K\"},(e=>this.eraseInLine(e,!1))),this._parser.registerCsiHandler({prefix:\"?\",final:\"K\"},(e=>this.eraseInLine(e,!0))),this._parser.registerCsiHandler({final:\"L\"},(e=>this.insertLines(e))),this._parser.registerCsiHandler({final:\"M\"},(e=>this.deleteLines(e))),this._parser.registerCsiHandler({final:\"P\"},(e=>this.deleteChars(e))),this._parser.registerCsiHandler({final:\"S\"},(e=>this.scrollUp(e))),this._parser.registerCsiHandler({final:\"T\"},(e=>this.scrollDown(e))),this._parser.registerCsiHandler({final:\"X\"},(e=>this.eraseChars(e))),this._parser.registerCsiHandler({final:\"Z\"},(e=>this.cursorBackwardTab(e))),this._parser.registerCsiHandler({final:\"`\"},(e=>this.charPosAbsolute(e))),this._parser.registerCsiHandler({final:\"a\"},(e=>this.hPositionRelative(e))),this._parser.registerCsiHandler({final:\"b\"},(e=>this.repeatPrecedingCharacter(e))),this._parser.registerCsiHandler({final:\"c\"},(e=>this.sendDeviceAttributesPrimary(e))),this._parser.registerCsiHandler({prefix:\">\",final:\"c\"},(e=>this.sendDeviceAttributesSecondary(e))),this._parser.registerCsiHandler({final:\"d\"},(e=>this.linePosAbsolute(e))),this._parser.registerCsiHandler({final:\"e\"},(e=>this.vPositionRelative(e))),this._parser.registerCsiHandler({final:\"f\"},(e=>this.hVPosition(e))),this._parser.registerCsiHandler({final:\"g\"},(e=>this.tabClear(e))),this._parser.registerCsiHandler({final:\"h\"},(e=>this.setMode(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"h\"},(e=>this.setModePrivate(e))),this._parser.registerCsiHandler({final:\"l\"},(e=>this.resetMode(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"l\"},(e=>this.resetModePrivate(e))),this._parser.registerCsiHandler({final:\"m\"},(e=>this.charAttributes(e))),this._parser.registerCsiHandler({final:\"n\"},(e=>this.deviceStatus(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"n\"},(e=>this.deviceStatusPrivate(e))),this._parser.registerCsiHandler({intermediates:\"!\",final:\"p\"},(e=>this.softReset(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"q\"},(e=>this.setCursorStyle(e))),this._parser.registerCsiHandler({final:\"r\"},(e=>this.setScrollRegion(e))),this._parser.registerCsiHandler({final:\"s\"},(e=>this.saveCursor(e))),this._parser.registerCsiHandler({final:\"t\"},(e=>this.windowOptions(e))),this._parser.registerCsiHandler({final:\"u\"},(e=>this.restoreCursor(e))),this._parser.registerCsiHandler({intermediates:\"'\",final:\"}\"},(e=>this.insertColumns(e))),this._parser.registerCsiHandler({intermediates:\"'\",final:\"~\"},(e=>this.deleteColumns(e))),this._parser.registerCsiHandler({intermediates:'\"',final:\"q\"},(e=>this.selectProtected(e))),this._parser.registerCsiHandler({intermediates:\"$\",final:\"p\"},(e=>this.requestMode(e,!0))),this._parser.registerCsiHandler({prefix:\"?\",intermediates:\"$\",final:\"p\"},(e=>this.requestMode(e,!1))),this._parser.setExecuteHandler(n.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(n.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(n.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(n.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(n.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(n.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(n.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(n.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(n.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new g.OscHandler((e=>(this.setTitle(e),this.setIconName(e),!0)))),this._parser.registerOscHandler(1,new g.OscHandler((e=>this.setIconName(e)))),this._parser.registerOscHandler(2,new g.OscHandler((e=>this.setTitle(e)))),this._parser.registerOscHandler(4,new g.OscHandler((e=>this.setOrReportIndexedColor(e)))),this._parser.registerOscHandler(8,new g.OscHandler((e=>this.setHyperlink(e)))),this._parser.registerOscHandler(10,new g.OscHandler((e=>this.setOrReportFgColor(e)))),this._parser.registerOscHandler(11,new g.OscHandler((e=>this.setOrReportBgColor(e)))),this._parser.registerOscHandler(12,new g.OscHandler((e=>this.setOrReportCursorColor(e)))),this._parser.registerOscHandler(104,new g.OscHandler((e=>this.restoreIndexedColor(e)))),this._parser.registerOscHandler(110,new g.OscHandler((e=>this.restoreFgColor(e)))),this._parser.registerOscHandler(111,new g.OscHandler((e=>this.restoreBgColor(e)))),this._parser.registerOscHandler(112,new g.OscHandler((e=>this.restoreCursorColor(e)))),this._parser.registerEscHandler({final:\"7\"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:\"8\"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:\"D\"},(()=>this.index())),this._parser.registerEscHandler({final:\"E\"},(()=>this.nextLine())),this._parser.registerEscHandler({final:\"H\"},(()=>this.tabSet())),this._parser.registerEscHandler({final:\"M\"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:\"=\"},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:\">\"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:\"c\"},(()=>this.fullReset())),this._parser.registerEscHandler({final:\"n\"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:\"o\"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:\"|\"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:\"}\"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:\"~\"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:\"%\",final:\"@\"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:\"%\",final:\"G\"},(()=>this.selectDefaultCharset()));for(const e in o.CHARSETS)this._parser.registerEscHandler({intermediates:\"(\",final:e},(()=>this.selectCharset(\"(\"+e))),this._parser.registerEscHandler({intermediates:\")\",final:e},(()=>this.selectCharset(\")\"+e))),this._parser.registerEscHandler({intermediates:\"*\",final:e},(()=>this.selectCharset(\"*\"+e))),this._parser.registerEscHandler({intermediates:\"+\",final:e},(()=>this.selectCharset(\"+\"+e))),this._parser.registerEscHandler({intermediates:\"-\",final:e},(()=>this.selectCharset(\"-\"+e))),this._parser.registerEscHandler({intermediates:\".\",final:e},(()=>this.selectCharset(\".\"+e))),this._parser.registerEscHandler({intermediates:\"/\",final:e},(()=>this.selectCharset(\"/\"+e)));this._parser.registerEscHandler({intermediates:\"#\",final:\"8\"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((e=>(this._logService.error(\"Parsing error: \",e),e))),this._parser.registerDcsHandler({intermediates:\"$\",final:\"q\"},new m.DcsHandler(((e,t)=>this.requestStatusString(e,t))))}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([e,new Promise(((e,t)=>setTimeout((()=>t(\"#SLOW_TIMEOUT\")),5e3)))]).catch((e=>{if(\"#SLOW_TIMEOUT\"!==e)throw e;console.warn(\"async parser handler taking longer than 5000 ms\")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,r=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>b&&(n=this._parseStack.position+b)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug(\"parsing data\"+(\"string\"==typeof e?` \"${e}\"`:` \"${Array.prototype.map.call(e,(e=>String.fromCharCode(e))).join(\"\")}\"`),\"string\"==typeof e?e.split(\"\").map((e=>e.charCodeAt(0))):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(e.length,b))),o||this._dirtyRowTracker.clearRange(),e.length>b)for(let t=n;t<e.length;t+=b){const n=t+b<e.length?t+b:e.length,o=\"string\"==typeof e?this._stringDecoder.decode(e.substring(t,n),this._parseBuffer):this._utf8Decoder.decode(e.subarray(t,n),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,o))return this._preserveStack(s,r,o,t),this._logSlowResolvingAsync(i),i}else if(!o){const t=\"string\"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(s,r,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===s&&this._activeBuffer.y===r||this._onCursorMove.fire();const a=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),h=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);h<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(h,this._bufferService.rows-1),Math.min(a,this._bufferService.rows-1))}print(e,t,i){let s,r;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,h=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,u=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodepoint(this._activeBuffer.x-1,0,1,u);let v=this._parser.precedingJoinState;for(let g=t;g<i;++g){if(s=e[g],s<127&&n){const e=n[String.fromCharCode(s)];e&&(s=e.charCodeAt(0))}const t=this._unicodeService.charProperties(s,v);r=p.UnicodeService.extractWidth(t);const i=p.UnicodeService.extractShouldJoin(t),m=i?p.UnicodeService.extractWidth(v):0;if(v=t,o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-m>a)if(h){const e=f;let t=this._activeBuffer.x-m;for(this._activeBuffer.x=m,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),m>0&&f instanceof l.BufferLine&&f.copyCellsFrom(e,t,0,m,!1);t<a;)e.setCellFromCodepoint(t++,0,1,u)}else if(this._activeBuffer.x=a-1,2===r)continue;if(i&&this._activeBuffer.x){const e=f.getWidth(this._activeBuffer.x-1)?1:2;f.addCodepointToCell(this._activeBuffer.x-e,s,r);for(let e=r-m;--e>=0;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}else if(d&&(f.insertCells(this._activeBuffer.x,r-m,this._activeBuffer.getNullCell(u)),2===f.getWidth(a-1)&&f.setCellFromCodepoint(a-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,u)),f.setCellFromCodepoint(this._activeBuffer.x++,s,r,u),r>0)for(;--r;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}this._parser.precedingJoinState=v,this._activeBuffer.x<a&&i-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodepoint(this._activeBuffer.x,0,1,u),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return\"t\"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,(e=>!w(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e)))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new m.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new g.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,r=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){const t=this._parser.precedingJoinState;if(!t)return!0;const i=e.params[0]||1,s=p.UnicodeService.extractWidth(t),r=this._activeBuffer.x-s,n=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(n.length*i);let a=0;for(let e=0;e<n.length;){const t=n.codePointAt(e)||0;o[a++]=t,e+=t>65535?2:1}let h=a;for(let e=1;e<i;++e)o.copyWithin(h,0,a),h+=a;return this.print(o,0,h),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is(\"xterm\")||this._is(\"rxvt-unicode\")||this._is(\"screen\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[?1;2c\"):this._is(\"linux\")&&this._coreService.triggerDataEvent(n.C0.ESC+\"[?6c\")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is(\"xterm\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[>0;276;0c\"):this._is(\"rxvt-unicode\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[>85;95;0c\"):this._is(\"linux\")?this._coreService.triggerDataEvent(e.params[0]+\"c\"):this._is(\"screen\")&&this._coreService.triggerDataEvent(n.C0.ESC+\"[>83;40003;0c\")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+\"\").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug(\"Serial port requested application keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol=\"X10\";break;case 1e3:this._coreMouseService.activeProtocol=\"VT200\";break;case 1002:this._coreMouseService.activeProtocol=\"DRAG\";break;case 1003:this._coreMouseService.activeProtocol=\"ANY\";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug(\"DECSET 1005 not supported (see #2507)\");break;case 1006:this._coreMouseService.activeEncoding=\"SGR\";break;case 1015:this._logService.debug(\"DECSET 1015 not supported (see #2507)\");break;case 1016:this._coreMouseService.activeEncoding=\"SGR_PIXELS\";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug(\"Switching back to normal keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol=\"NONE\";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug(\"DECRST 1005 not supported (see #2507)\");break;case 1006:case 1016:this._coreMouseService.activeEncoding=\"DEFAULT\";break;case 1015:this._logService.debug(\"DECRST 1015 not supported (see #2507)\");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:s,activeEncoding:r}=this._coreMouseService,o=this._coreService,{buffers:a,cols:h}=this._bufferService,{active:c,alt:l}=a,d=this._optionsService.rawOptions,_=e=>e?1:2,u=e.params[0];return f=u,v=t?2===u?4:4===u?_(o.modes.insertMode):12===u?3:20===u?_(d.convertEol):0:1===u?_(i.applicationCursorKeys):3===u?d.windowOptions.setWinLines?80===h?2:132===h?1:0:0:6===u?_(i.origin):7===u?_(i.wraparound):8===u?3:9===u?_(\"X10\"===s):12===u?_(d.cursorBlink):25===u?_(!o.isCursorHidden):45===u?_(i.reverseWraparound):66===u?_(i.applicationKeypad):67===u?4:1e3===u?_(\"VT200\"===s):1002===u?_(\"DRAG\"===s):1003===u?_(\"ANY\"===s):1004===u?_(i.sendFocus):1005===u?4:1006===u?_(\"SGR\"===r):1015===u?4:1016===u?_(\"SGR_PIXELS\"===r):1048===u?1:47===u||1047===u||1049===u?_(c===l):2004===u?_(i.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?\"\":\"?\"}${f};${v}$y`),!0;var f,v}_updateAttrColor(e,t,i,s,r){return 2===t?(e|=50331648,e&=-16777216,e|=f.AttributeData.fromColorRGB([i,s,r])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const s=[0,0,-1,0,0,0];let r=0,n=0;do{if(s[n+r]=e.params[t+n],e.hasSubParams(t+n)){const i=e.getSubParams(t+n);let o=0;do{5===s[1]&&(r=1),s[n+o+1+r]=i[o]}while(++o<i.length&&o+n+1+r<s.length);break}if(5===s[1]&&n+r>=2||2===s[1]&&n+r>=5)break;s[1]&&(r=1)}while(++n+t<e.length&&n+r<s.length);for(let e=2;e<s.length;++e)-1===s[e]&&(s[e]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=l.DEFAULT_ATTR_DATA.fg,e.bg=l.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const s=this._curAttrData;for(let r=0;r<t;r++)i=e.params[r],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?this._processSGR0(s):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:9===i?s.fg|=2147483648:2===i?s.bg|=134217728:21===i?this._processUnderline(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?(s.fg&=-268435457,this._processUnderline(0,s)):25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:29===i?s.fg&=2147483647:39===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?r+=this._extractColor(e,r,s):53===i?s.bg|=1073741824:55===i?s.bg&=-1073741825:59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug(\"Unknown SGR attribute: %d.\",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle=\"block\";break;case 3:case 4:this._optionsService.options.cursorStyle=\"underline\";break;case 5:case 6:this._optionsService.options.cursorStyle=\"bar\"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!w(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(y.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(y.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(\";\");for(;i.length>1;){const e=i.shift(),s=i.shift();if(/^\\d+$/.exec(e)){const i=parseInt(e);if(D(i))if(\"?\"===s)t.push({type:0,index:i});else{const e=(0,S.parseColor)(s);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(\";\");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(\":\");let s;const r=i.findIndex((e=>e.startsWith(\"id=\")));return-1!==r&&(s=i[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(\";\");for(let e=0;e<i.length&&!(t>=this._specialColors.length);++e,++t)if(\"?\"===i[e])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const s=(0,S.parseColor)(i[e]);s&&this._onColor.fire([{type:1,index:this._specialColors[t],color:s}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(\";\");for(let e=0;e<i.length;++e)if(/^\\d+$/.exec(i[e])){const s=parseInt(i[e]);D(s)&&t.push({type:2,index:s})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug(\"Serial port requested application keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug(\"Switching back to normal keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):(\"/\"===e[0]||this._charsetService.setgCharset(C[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new u.CellData;e.content=1<<22|\"E\".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,s=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\\\`),!0))('\"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}\"q`:'\"p'===e?'P1$r61;1\"p':\"r\"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:\"m\"===e?\"P1$r0m\":\" q\"===e?`P1$r${{block:2,underline:4,bar:6}[s.cursorStyle]-(s.cursorBlink?1:0)} q`:\"P0$r\")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let L=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(E=e,e=t,t=E),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function D(e){return 0<=e&&e<256}L=s([r(0,v.IBufferService)],L)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,s,r,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(s,r,n)}get(e,t,i,s){return this._data.get(e,t)?.get(i,s)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=\"undefined\"!=typeof process&&\"title\"in process;const i=t.isNode?\"node\":navigator.userAgent,s=t.isNode?\"node\":navigator.platform;t.isFirefox=i.includes(\"Firefox\"),t.isLegacyEdge=i.includes(\"Edge\"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\\/(\\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=[\"Macintosh\",\"MacIntel\",\"MacPPC\",\"Mac68K\"].includes(s),t.isIpad=\"iPad\"===s,t.isIphone=\"iPhone\"===s,t.isWindows=[\"Windows\",\"Win16\",\"Win32\",\"WinCE\"].includes(s),t.isLinux=s.indexOf(\"Linux\")>=0,t.isChromeOS=/\\bCrOS\\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1;const r=this._getKey(this._array[s]);if(r>e)i=s-1;else{if(!(r<e)){for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}t=s+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const s=i(6114);class r{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),r=e.timeRemaining(),1.5*i>r)return s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),void this._start();s=r}this.clear()}}class n extends r{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!s.isNode&&\"requestIdleCallback\"in window?class extends r{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.updateWindowsModeWrappedState=void 0;const s=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=t?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&i&&(r.isWrapped=i[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&i[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}t.AttributeData=i;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){const e=(3758096384&this._ext)>>29;return e<0?4294967288^e:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new s(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=s},9092:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const s=i(6349),r=i(7226),n=i(3734),o=i(8437),a=i(4634),h=i(511),c=i(643),l=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new r.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=0;const r=this._getCorrectBufferLength(t);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);let n=0;if(this._rows<t)for(let s=this._rows;s<t;s++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){const e=this.lines.length-r;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=r}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&\"conpty\"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const s=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,s.layout),this._reflowLargerAdjustViewport(e,t,s.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const s=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=i;for(;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=[];let r=0;for(let n=this.lines.length-1;n>=0;n--){let h=this.lines.get(n);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;const c=[h];for(;h.isWrapped&&n>0;)h=this.lines.get(--n),c.unshift(h);const l=this.ybase+this.y;if(l>=n&&l<n+c.length)continue;const d=c[c.length-1].getTrimmedLength(),_=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),u=_.length-c.length;let f;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+u):Math.max(0,this.lines.length-this.lines.maxLength+u);const v=[];for(let e=0;e<u;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);v.push(e)}v.length>0&&(s.push({start:n+c.length+r,newLines:v}),r+=v.length),c.push(...v);let p=_.length-1,g=_[p];0===g&&(p--,g=_[p]);let m=c.length-u-1,S=d;for(;m>=0;){const e=Math.min(S,g);if(void 0===c[p])break;if(c[p].copyCellsFrom(c[m],S-e,g-e,e,!0),g-=e,0===g&&(p--,g=_[p]),S-=e,0===S){m--;const e=Math.max(m,0);S=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)_[t]<e&&c[t].setCell(_[t],i);let C=u-f;for(;C-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+u,this.ybase+t-1)}if(s.length>0){const e=[],t=[];for(let e=0;e<this.lines.length;e++)t.push(this.lines.get(e));const i=this.lines.length;let n=i-1,o=0,a=s[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);let h=0;for(let c=Math.min(this.lines.maxLength-1,i+r-1);c>=0;c--)if(a&&a.start>n+h){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(c--,a.newLines[e]);c++,e.push({index:n+1,amount:a.newLines.length}),h+=a.newLines.length,a=s[++o]}else this.lines.set(c,t[n--]);let c=0;for(let t=e.length-1;t>=0;t--)e[t].index+=c,this.lines.onInsertEmitter.fire(e[t]),c+=e[t].amount;const l=Math.max(0,i+r-this.lines.maxLength);l>0&&this.lines.onTrimEmitter.fire(l)}}translateBufferLineToString(e,t,i=0,s){const r=this.lines.get(e);return r?r.translateToString(t,i,s):\"\"}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new l.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim((e=>{t.line-=e,t.line<0&&t.dispose()}))),t.register(this.lines.onInsert((e=>{t.line>=e.index&&(t.line+=e.amount)}))),t.register(this.lines.onDelete((e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)}))),t.register(t.onDispose((()=>this._removeMarker(t)))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const s=i(3734),r=i(511),n=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let a=0;class h{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const s=t||r.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let t=0;t<e;++t)this.setCell(t,s);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):\"\",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):\"\"}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodepoint(e,t,i,s){268435456&s.bg&&(this._extendedAttrs[e]=s.extended),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=s.fg,this._data[3*e+2]=s.bg}addCodepointToCell(e,t,i){let s=this._data[3*e+0];2097152&s?this._combined[e]+=(0,o.stringFromCodePoint)(t):2097151&s?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&s)+(0,o.stringFromCodePoint)(t),s&=-2097152,s|=2097152):s=t|1<<22,i&&(s&=-12582913,s|=i<<22),this._data[3*e+0]=s}insertCells(e,t,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length-e){const s=new r.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,s));for(let s=0;s<t;++s)this.setCell(e+s,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);2===this.getWidth(this.length-1)&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(e,t,i){if(e%=this.length,t<this.length-e){const s=new r.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,s));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodepoint(e,0,1,i)}replaceCells(e,t,i,s=!1){if(s)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const s=parseInt(t[i],10);s>=e&&delete this._combined[s]}const s=Object.keys(this._extendedAttrs);for(let t=0;t<s.length;t++){const i=parseInt(s[t],10);i>=e&&delete this._extendedAttrs[i]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new h(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,s,r){const n=e._data;if(r)for(let r=s-1;r>=0;r--){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}else for(let r=0;r<s;r++){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}const o=Object.keys(e._combined);for(let s=0;s<o.length;s++){const r=parseInt(o[s],10);r>=t&&(this._combined[r-t+i]=e._combined[r])}}translateToString(e,t,i,s){t=t??0,i=i??this.length,e&&(i=Math.min(i,this.getTrimmedLength())),s&&(s.length=0);let r=\"\";for(;t<i;){const e=this._data[3*t+0],i=2097151&e,a=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):n.WHITESPACE_CELL_CHAR;if(r+=a,s)for(let e=0;e<a.length;++e)s.push(t);t+=e>>22||1}return s&&s.push(t),r}}t.BufferLine=h},4841:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const s=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),r=2===e[t+1].getWidth(0);return s&&r?i-1:i}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,s,r,n){const o=[];for(let a=0;a<e.length-1;a++){let h=a,c=e.get(++h);if(!c.isWrapped)continue;const l=[e.get(a)];for(;h<e.length&&c.isWrapped;)l.push(c),c=e.get(++h);if(r>=a&&r<h){a+=l.length-1;continue}let d=0,_=i(l,d,t),u=1,f=0;for(;u<l.length;){const e=i(l,u,t),r=e-f,o=s-_,a=Math.min(r,o);l[d].copyCellsFrom(l[u],f,_,a,!1),_+=a,_===s&&(d++,_=0),f+=a,f===e&&(u++,f=0),0===_&&0!==d&&2===l[d-1].getWidth(s-1)&&(l[d].copyCellsFrom(l[d-1],s-1,_++,1,!1),l[d-1].setCell(s-1,n))}l[d].replaceCells(_,s,n);let v=0;for(let e=l.length-1;e>0&&(e>d||0===l[e].getTrimmedLength());e--)v++;v>0&&(o.push(a+l.length-v),o.push(v)),a+=l.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let s=0,r=t[s],n=0;for(let o=0;o<e.length;o++)if(r===o){const i=t[++s];e.onDeleteEmitter.fire({index:o-n,amount:i}),o+=i-1,n+=i,r=t[++s]}else i.push(o);return{layout:i,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let t=0;t<i.length;t++)e.set(t,i[t]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,s){const r=[],n=e.map(((s,r)=>i(e,r,t))).reduce(((e,t)=>e+t));let o=0,a=0,h=0;for(;h<n;){if(n-h<s){r.push(n-h);break}o+=s;const c=i(e,a,t);o>c&&(o-=c,a++);const l=2===e[a].getWidth(o-1);l&&o--;const d=l?s-1:s;r.push(d),h+=d}return r},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferSet=void 0;const s=i(8460),r=i(844),n=i(9092);class o extends r.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange(\"scrollback\",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange(\"tabStopWidth\",(()=>this.setupTabStops())))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CellData=void 0;const s=i(482),r=i(643),n=i(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=\"\"}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):\"\"}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[r.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[r.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[r.CHAR_DATA_CHAR_INDEX].length){const i=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const s=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(i-55296)+s-56320+65536|e[r.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[r.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[r.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[r.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR=\"\",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=\" \",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Marker=void 0;const s=i(8460),r=i(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,r.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={\"`\":\"◆\",a:\"▒\",b:\"␉\",c:\"␌\",d:\"␍\",e:\"␊\",f:\"°\",g:\"±\",h:\"␤\",i:\"␋\",j:\"┘\",k:\"┐\",l:\"┌\",m:\"└\",n:\"┼\",o:\"⎺\",p:\"⎻\",q:\"─\",r:\"⎼\",s:\"⎽\",t:\"├\",u:\"┤\",v:\"┴\",w:\"┬\",x:\"│\",y:\"≤\",z:\"≥\",\"{\":\"π\",\"|\":\"≠\",\"}\":\"£\",\"~\":\"·\"},t.CHARSETS.A={\"#\":\"£\"},t.CHARSETS.B=void 0,t.CHARSETS[4]={\"#\":\"£\",\"@\":\"¾\",\"[\":\"ij\",\"\\\\\":\"½\",\"]\":\"|\",\"{\":\"¨\",\"|\":\"f\",\"}\":\"¼\",\"~\":\"´\"},t.CHARSETS.C=t.CHARSETS[5]={\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.R={\"#\":\"£\",\"@\":\"à\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"§\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"¨\"},t.CHARSETS.Q={\"@\":\"à\",\"[\":\"â\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",\"`\":\"ô\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"û\"},t.CHARSETS.K={\"@\":\"§\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Ü\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"ß\"},t.CHARSETS.Y={\"#\":\"£\",\"@\":\"§\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"é\",\"`\":\"ù\",\"{\":\"à\",\"|\":\"ò\",\"}\":\"è\",\"~\":\"ì\"},t.CHARSETS.E=t.CHARSETS[6]={\"@\":\"Ä\",\"[\":\"Æ\",\"\\\\\":\"Ø\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"ä\",\"{\":\"æ\",\"|\":\"ø\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.Z={\"#\":\"£\",\"@\":\"§\",\"[\":\"¡\",\"\\\\\":\"Ñ\",\"]\":\"¿\",\"{\":\"°\",\"|\":\"ñ\",\"}\":\"ç\"},t.CHARSETS.H=t.CHARSETS[7]={\"@\":\"É\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS[\"=\"]={\"#\":\"ù\",\"@\":\"à\",\"[\":\"é\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",_:\"è\",\"`\":\"ô\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"û\"}},2584:(e,t)=>{var i,s,r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL=\"\\0\",e.SOH=\"\u0001\",e.STX=\"\u0002\",e.ETX=\"\u0003\",e.EOT=\"\u0004\",e.ENQ=\"\u0005\",e.ACK=\"\u0006\",e.BEL=\"\u0007\",e.BS=\"\\b\",e.HT=\"\\t\",e.LF=\"\\n\",e.VT=\"\\v\",e.FF=\"\\f\",e.CR=\"\\r\",e.SO=\"\u000e\",e.SI=\"\u000f\",e.DLE=\"\u0010\",e.DC1=\"\u0011\",e.DC2=\"\u0012\",e.DC3=\"\u0013\",e.DC4=\"\u0014\",e.NAK=\"\u0015\",e.SYN=\"\u0016\",e.ETB=\"\u0017\",e.CAN=\"\u0018\",e.EM=\"\u0019\",e.SUB=\"\u001a\",e.ESC=\"\u001b\",e.FS=\"\u001c\",e.GS=\"\u001d\",e.RS=\"\u001e\",e.US=\"\u001f\",e.SP=\" \",e.DEL=\"\"}(i||(t.C0=i={})),function(e){e.PAD=\"\",e.HOP=\"\",e.BPH=\"\",e.NBH=\"\",e.IND=\"\",e.NEL=\"\",e.SSA=\"\",e.ESA=\"\",e.HTS=\"\",e.HTJ=\"\",e.VTS=\"\",e.PLD=\"\",e.PLU=\"\",e.RI=\"\",e.SS2=\"\",e.SS3=\"\",e.DCS=\"\",e.PU1=\"\",e.PU2=\"\",e.STS=\"\",e.CCH=\"\",e.MW=\"\",e.SPA=\"\",e.EPA=\"\",e.SOS=\"\",e.SGCI=\"\",e.SCI=\"\",e.CSI=\"\",e.ST=\"\",e.OSC=\"\",e.PM=\"\",e.APC=\"\"}(s||(t.C1=s={})),function(e){e.ST=`${i.ESC}\\\\`}(r||(t.C1_ESCAPED=r={}))},7399:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.evaluateKeyboardEvent=void 0;const s=i(2584),r={48:[\"0\",\")\"],49:[\"1\",\"!\"],50:[\"2\",\"@\"],51:[\"3\",\"#\"],52:[\"4\",\"$\"],53:[\"5\",\"%\"],54:[\"6\",\"^\"],55:[\"7\",\"&\"],56:[\"8\",\"*\"],57:[\"9\",\"(\"],186:[\";\",\":\"],187:[\"=\",\"+\"],188:[\",\",\"<\"],189:[\"-\",\"_\"],190:[\".\",\">\"],191:[\"/\",\"?\"],192:[\"`\",\"~\"],219:[\"[\",\"{\"],220:[\"\\\\\",\"|\"],221:[\"]\",\"}\"],222:[\"'\",'\"']};t.evaluateKeyboardEvent=function(e,t,i,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:\"UIKeyInputUpArrow\"===e.key?o.key=t?s.C0.ESC+\"OA\":s.C0.ESC+\"[A\":\"UIKeyInputLeftArrow\"===e.key?o.key=t?s.C0.ESC+\"OD\":s.C0.ESC+\"[D\":\"UIKeyInputRightArrow\"===e.key?o.key=t?s.C0.ESC+\"OC\":s.C0.ESC+\"[C\":\"UIKeyInputDownArrow\"===e.key&&(o.key=t?s.C0.ESC+\"OB\":s.C0.ESC+\"[B\");break;case 8:o.key=e.ctrlKey?\"\\b\":s.C0.DEL,e.altKey&&(o.key=s.C0.ESC+o.key);break;case 9:if(e.shiftKey){o.key=s.C0.ESC+\"[Z\";break}o.key=s.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,o.cancel=!0;break;case 27:o.key=s.C0.ESC,e.altKey&&(o.key=s.C0.ESC+s.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"D\",o.key===s.C0.ESC+\"[1;3D\"&&(o.key=s.C0.ESC+(i?\"b\":\"[1;5D\"))):o.key=t?s.C0.ESC+\"OD\":s.C0.ESC+\"[D\";break;case 39:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"C\",o.key===s.C0.ESC+\"[1;3C\"&&(o.key=s.C0.ESC+(i?\"f\":\"[1;5C\"))):o.key=t?s.C0.ESC+\"OC\":s.C0.ESC+\"[C\";break;case 38:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"A\",i||o.key!==s.C0.ESC+\"[1;3A\"||(o.key=s.C0.ESC+\"[1;5A\")):o.key=t?s.C0.ESC+\"OA\":s.C0.ESC+\"[A\";break;case 40:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"B\",i||o.key!==s.C0.ESC+\"[1;3B\"||(o.key=s.C0.ESC+\"[1;5B\")):o.key=t?s.C0.ESC+\"OB\":s.C0.ESC+\"[B\";break;case 45:e.shiftKey||e.ctrlKey||(o.key=s.C0.ESC+\"[2~\");break;case 46:o.key=a?s.C0.ESC+\"[3;\"+(a+1)+\"~\":s.C0.ESC+\"[3~\";break;case 36:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"H\":t?s.C0.ESC+\"OH\":s.C0.ESC+\"[H\";break;case 35:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"F\":t?s.C0.ESC+\"OF\":s.C0.ESC+\"[F\";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=s.C0.ESC+\"[5;\"+(a+1)+\"~\":o.key=s.C0.ESC+\"[5~\";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=s.C0.ESC+\"[6;\"+(a+1)+\"~\":o.key=s.C0.ESC+\"[6~\";break;case 112:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"P\":s.C0.ESC+\"OP\";break;case 113:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"Q\":s.C0.ESC+\"OQ\";break;case 114:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"R\":s.C0.ESC+\"OR\";break;case 115:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"S\":s.C0.ESC+\"OS\";break;case 116:o.key=a?s.C0.ESC+\"[15;\"+(a+1)+\"~\":s.C0.ESC+\"[15~\";break;case 117:o.key=a?s.C0.ESC+\"[17;\"+(a+1)+\"~\":s.C0.ESC+\"[17~\";break;case 118:o.key=a?s.C0.ESC+\"[18;\"+(a+1)+\"~\":s.C0.ESC+\"[18~\";break;case 119:o.key=a?s.C0.ESC+\"[19;\"+(a+1)+\"~\":s.C0.ESC+\"[19~\";break;case 120:o.key=a?s.C0.ESC+\"[20;\"+(a+1)+\"~\":s.C0.ESC+\"[20~\";break;case 121:o.key=a?s.C0.ESC+\"[21;\"+(a+1)+\"~\":s.C0.ESC+\"[21~\";break;case 122:o.key=a?s.C0.ESC+\"[23;\"+(a+1)+\"~\":s.C0.ESC+\"[23~\";break;case 123:o.key=a?s.C0.ESC+\"[24;\"+(a+1)+\"~\":s.C0.ESC+\"[24~\";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!n||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&(\"_\"===e.key&&(o.key=s.C0.US),\"@\"===e.key&&(o.key=s.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=r[e.keyCode],i=t?.[e.shiftKey?1:0];if(i)o.key=s.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=s.C0.ESC+i}else if(32===e.keyCode)o.key=s.C0.ESC+(e.ctrlKey?s.C0.NUL:\" \");else if(\"Dead\"===e.key&&e.code.startsWith(\"Key\")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=s.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=s.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=s.C0.DEL:219===e.keyCode?o.key=s.C0.ESC:220===e.keyCode?o.key=s.C0.FS:221===e.keyCode&&(o.key=s.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let s=\"\";for(let r=t;r<i;++r){let t=e[r];t>65535?(t-=65536,s+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):s+=String.fromCharCode(t)}return s},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let s=0,r=0;if(this._interim){const i=e.charCodeAt(r++);56320<=i&&i<=57343?t[s++]=1024*(this._interim-55296)+i-56320+65536:(t[s++]=this._interim,t[s++]=i),this._interim=0}for(let n=r;n<i;++n){const r=e.charCodeAt(n);if(55296<=r&&r<=56319){if(++n>=i)return this._interim=r,s;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[s++]=1024*(r-55296)+o-56320+65536:(t[s++]=r,t[s++]=o)}else 65279!==r&&(t[s++]=r)}return s}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let s,r,n,o,a=0,h=0,c=0;if(this.interim[0]){let s=!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)r<<=6,r|=n;const h=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,l=h-o;for(;c<l;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,s=!0;break}this.interim[o++]=n,r<<=6,r|=63&n}s||(2===h?r<128?c--:t[a++]=r:3===h?r<2048||r>=55296&&r<=57343||65279===r||(t[a++]=r):r<65536||r>1114111||(t[a++]=r)),this.interim.fill(0)}const l=i-4;let d=c;for(;d<i;){for(;!(!(d<l)||128&(s=e[d])||128&(r=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=s,t[a++]=r,t[a++]=n,t[a++]=o,d+=4;if(s=e[d++],s<128)t[a++]=s;else if(192==(224&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(h=(31&s)<<6|63&r,h<128){d--;continue}t[a++]=h}else if(224==(240&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(h=(15&s)<<12|(63&r)<<6|63&n,h<2048||h>=55296&&h<=57343||65279===h)continue;t[a++]=h}else if(240==(248&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(h=(7&s)<<18|(63&r)<<12|(63&n)<<6|63&o,h<65536||h>1114111)continue;t[a++]=h}}return a}}},225:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeV6=void 0;const s=i(1480),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let o;t.UnicodeV6=class{constructor(){if(this.version=\"6\",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160),o.fill(2,4352,4448),o[9001]=2,o[9002]=2,o.fill(2,11904,42192),o[12351]=1,o.fill(2,44032,55204),o.fill(2,63744,64256),o.fill(2,65040,65050),o.fill(2,65072,65136),o.fill(2,65280,65377),o.fill(2,65504,65511);for(let e=0;e<r.length;++e)o.fill(0,r[e][0],r[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?o[e]:function(e,t){let i,s=0,r=t.length-1;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=s;)if(i=s+r>>1,e>t[i][1])s=i+1;else{if(!(e<t[i][0]))return!0;r=i-1}return!1}(e,n)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),r=0===i&&0!==t;if(r){const e=s.UnicodeService.extractWidth(t);0===e?r=!1:e>i&&(i=e)}return s.UnicodeService.createPropertyValue(0,i,r)}}},5981:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WriteBuffer=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error(\"write data discarded, use flow control to avoid losing data\");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],s=this._action(e,t);if(s){const e=e=>Date.now()-i>=12?setTimeout((()=>this._innerWrite(0,e))):this._innerWrite(i,e);return void s.catch((e=>(queueMicrotask((()=>{throw e})),Promise.resolve(!1)))).then(e)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\\da-f])\\/([\\da-f])\\/([\\da-f])$|^([\\da-f]{2})\\/([\\da-f]{2})\\/([\\da-f]{2})$|^([\\da-f]{3})\\/([\\da-f]{3})\\/([\\da-f]{3})$|^([\\da-f]{4})\\/([\\da-f]{4})\\/([\\da-f]{4})$/,s=/^[\\da-f]+$/;function r(e,t){const i=e.toString(16),s=i.length<2?\"0\"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf(\"rgb:\")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf(\"#\")&&(t=t.slice(1),s.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let s=0;s<3;++s){const r=parseInt(t.slice(e*s,e*s+e),16);i[s]=1===e?r<<4:2===e?r:3===e?r>>4:r>>8}return i}},t.toRgbString=function(e,t=16){const[i,s,n]=e;return`rgb:${r(i,t)}/${r(s,t)}/${r(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const s=i(482),r=i(8742),n=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(t);else this._handlerFb(this._ident,\"HOOK\",t)}put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._ident,\"PUT\",(0,s.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].unhook(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,\"UNHOOK\",e);this._active=o,this._ident=0}};const a=new r.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data=\"\",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data=\"\",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then((e=>(this._params=a,this._data=\"\",this._hitLimit=!1,e)));return this._params=a,this._data=\"\",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const s=i(844),r=i(8742),n=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|s}}t.TransitionTable=a;const h=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map(((e,t)=>t)),i=(e,i)=>t.slice(e,i),s=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));const n=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(s,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(h,0,2,0),e.add(h,8,5,8),e.add(h,6,0,6),e.add(h,11,0,11),e.add(h,13,13,13),e}();class c extends s.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new r.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:\"\\\\\"},(()=>!0))}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error(\"only one byte as prefix supported\");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error(\"prefix must be in range 0x3c .. 0x3f\")}if(e.intermediates){if(e.intermediates.length>2)throw new Error(\"only two bytes as intermediates are supported\");for(let t=0;t<e.intermediates.length;++t){const s=e.intermediates.charCodeAt(t);if(32>s||s>47)throw new Error(\"intermediate must be in range 0x20 .. 0x2f\");i<<=8,i|=s}}if(1!==e.final.length)throw new Error(\"final must be a single byte\");const s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join(\"\")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const s=this._escHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const s=this._csiHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(e,t,i){let s,r=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error(\"improper continuation due to previous async handler, giving up parsing\");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](this._params),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 4:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],s=this._dcsParser.unhook(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],s=this._oscParser.end(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let i=o;i<t;++i){switch(r=e[i],n=this._transitions.table[this.currentState<<8|(r<160?r:h)],n>>4){case 2:for(let s=i+1;;++s){if(s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:i,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const o=this._csiHandlers[this._collect<<8|r];let a=o?o.length-1:-1;for(;a>=0&&(s=o[a](this._params),!0!==s);a--)if(s instanceof Promise)return this._preserveStack(3,o,a,n,i),s;a<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingJoinState=0;break;case 8:do{switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}}while(++i<t&&(r=e[i])>47&&r<60);i--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:const c=this._escHandlers[this._collect<<8|r];let l=c?c.length-1:-1;for(;l>=0&&(s=c[l](),!0!==s);l--)if(s instanceof Promise)return this._preserveStack(4,c,l,n,i),s;l<0&&this._escHandlerFb(this._collect<<8|r),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(let s=i+1;;++s)if(s>=t||24===(r=e[s])||26===r||27===r||r>127&&r<h){this._dcsParser.put(e,i,s),i=s-1;break}break;case 14:if(s=this._dcsParser.unhook(24!==r&&26!==r),s)return this._preserveStack(6,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let s=i+1;;s++)if(s>=t||(r=e[s])<32||r>127&&r<h){this._oscParser.put(e,i,s),i=s-1;break}break;case 6:if(s=this._oscParser.end(24!==r&&26!==r),s)return this._preserveStack(5,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscHandler=t.OscParser=void 0;const s=i(5770),r=i(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,\"START\")}_put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._id,\"PUT\",(0,r.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].end(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,\"END\",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data=\"\",this._hitLimit=!1}start(){this._data=\"\",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>s.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then((e=>(this._data=\"\",this._hitLimit=!1,e)));return this._data=\"\",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Params=void 0;const i=2147483647;class s{static fromArray(e){const t=new s;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const s=e[i];if(Array.isArray(s))for(let e=0;e<s.length;++e)t.addSubParam(s[e]);else t.addParam(s)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error(\"maxSubParamsLength must not be greater than 256\");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new s(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,s))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error(\"values lesser than -1 are not allowed\");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error(\"values lesser than -1 are not allowed\");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&(e[t]=this._subParams.slice(i,s))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const s=this._digitIsSub?this._subParams:this.params,r=s[t-1];s[t-1]=~r?Math.min(10*r+e,i):e}}t.Params=s},5741:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error(\"Could not dispose an addon that has not been loaded\");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferApiView=void 0;const s=i(3785),r=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new s.BufferLineApiView(t)}getNullCell(){return new r.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferLineApiView=void 0;const s=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new s.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferNamespaceApi=void 0;const s=i(8771),r=i(8460),n=i(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new r.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,\"normal\"),this._alternate=new s.BufferApiView(this._core.buffers.alt,\"alternate\"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error(\"Active buffer is neither normal nor alternate\")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,(e=>t(e.toArray())))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,((e,i)=>t(e,i.toArray())))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=i(8460),o=i(844),a=i(5295),h=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;const r=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;n===i.lines.length-1?e?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(n+1,0,s.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=n-r+1;i.lines.shiftElements(r+1,e-1,-1),i.lines.set(n,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const s=this.buffer;if(e<0){if(0===s.ydisp)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const r=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),r!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};t.BufferService=c=s([r(0,h.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreMouseService=void 0;const n=i(2585),o=i(8460),a=i(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const l=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?\"\":`\u001b[M${l(t[0])}${l(t[1])}${l(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?\"m\":\"M\";return`\u001b[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?\"m\":\"M\";return`\u001b[<${c(e,!0)};${e.x};${e.y}${t}`}};let _=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol=\"\",this._activeEncoding=\"\",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const e of Object.keys(h))this.addProtocol(e,h[e]);for(const e of Object.keys(d))this.addEncoding(e,d[e]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol \"${e}\"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding \"${e}\"`);this._activeEncoding=e}reset(){this.activeProtocol=\"NONE\",this.activeEncoding=\"DEFAULT\",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,\"SGR_PIXELS\"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&(\"DEFAULT\"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=_=s([r(0,n.IBufferService),r(1,n.ICoreService)],_)},6975:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreService=void 0;const n=i(1439),o=i(8460),a=i(844),h=i(2585),c=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data \"${e}\"`,(()=>e.split(\"\").map((e=>e.charCodeAt(0))))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary \"${e}\"`,(()=>e.split(\"\").map((e=>e.charCodeAt(0))))),this._onBinary.fire(e))}};t.CoreService=d=s([r(0,h.IBufferService),r(1,h.ILogService),r(2,h.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DecorationService=void 0;const s=i(8055),r=i(8460),n=i(844),o=i(6106);let a=0,h=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList((e=>e?.marker.line)),this._onDecorationRegistered=this.register(new r.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new r.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)((()=>this.reset())))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new l(e);if(t){const e=t.marker.onDispose((()=>t.dispose()));t.onDispose((()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())})),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let s=0,r=0;for(const n of this._decorations.getKeyIterator(t))s=n.options.x??0,r=s+(n.options.width??1),e>=s&&e<r&&(!i||(n.options.layer??\"bottom\")===i)&&(yield n)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,(t=>{a=t.options.x??0,h=a+(t.options.width??1),e>=a&&e<h&&(!i||(t.options.layer??\"bottom\")===i)&&s(t)}))}}t.DecorationService=c;class l extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new r.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position=\"full\")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const s=i(2585),r=i(8343);class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(s.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,r.getServiceDependencies)(e).sort(((e,t)=>e.index-t.index)),s=[];for(const t of i){const i=this._services.get(t.id);if(!i)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);s.push(i)}const n=i.length>0?i[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...s])}}},7866:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let h,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange(\"logLevel\",(()=>this._updateLogLevel()))),h=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)\"function\"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?\"\":\"xterm.js: \")+t,...i)}trace(e,...t){this._logLevel<=o.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=o.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=o.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=o.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};t.LogService=c=s([r(0,o.IOptionsService)],c),t.setTraceLogger=function(e){h=e},t.traceCall=function(e,t,i){if(\"function\"!=typeof i.value)throw new Error(\"not supported\");const s=i.value;i.value=function(...e){if(h.logLevel!==o.LogLevelEnum.TRACE)return s.apply(this,e);h.trace(`GlyphRenderer#${s.name}(${e.map((e=>JSON.stringify(e))).join(\", \")})`);const t=s.apply(this,e);return h.trace(`GlyphRenderer#${s.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const s=i(8460),r=i(844),n=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:\"block\",cursorWidth:1,cursorInactiveStyle:\"outline\",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:\"alt\",fastScrollSensitivity:5,fontFamily:\"courier-new, courier, monospace\",fontSize:15,fontWeight:\"normal\",fontWeightBold:\"bold\",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:\"info\",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:\" ()[]{}',\\\"`\",altClickMovesCursor:!0,convertEol:!1,termName:\"xterm\",cancelEvents:!1,overviewRulerWidth:0};const o=[\"normal\",\"bold\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\",\"700\",\"800\",\"900\"];class a extends r.Disposable{constructor(e){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i={...t.DEFAULT_OPTIONS};for(const t in e)if(t in i)try{const s=e[t];i[t]=this._sanitizeAndValidateOption(t,s)}catch(e){console.error(e)}this.rawOptions=i,this.options={...i},this._setupOptions(),this.register((0,r.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(e,t){return this.onOptionChange((i=>{i===e&&t(this.rawOptions[e])}))}onMultipleOptionChange(e,t){return this.onOptionChange((i=>{-1!==e.indexOf(i)&&t()}))}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key \"${e}\"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key \"${e}\"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const s={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,s)}}_sanitizeAndValidateOption(e,i){switch(e){case\"cursorStyle\":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return\"block\"===e||\"underline\"===e||\"bar\"===e}(i))throw new Error(`\"${i}\" is not a valid value for ${e}`);break;case\"wordSeparator\":i||(i=t.DEFAULT_OPTIONS[e]);break;case\"fontWeight\":case\"fontWeightBold\":if(\"number\"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case\"cursorWidth\":i=Math.floor(i);case\"lineHeight\":case\"tabStopWidth\":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case\"minimumContrastRatio\":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case\"scrollback\":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case\"fastScrollSensitivity\":case\"scrollSensitivity\":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case\"rows\":case\"cols\":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case\"windowsPty\":i=i??{}}return i}}t.OptionsService=a},2660:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscLinkService=void 0;const n=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),s={data:e,id:this._nextId++,lines:[i]};return i.onDispose((()=>this._removeMarkerFromLink(s,i))),this._dataByLinkId.set(s.id,s),s.id}const i=e,s=this._getEntryIdKey(i),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,t.ybase+t.y),r.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(o,n))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every((e=>e.line!==t))){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose((()=>this._removeMarkerFromLink(i,e)))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=s([r(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i=\"di$target\",s=\"di$dependencies\";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[s]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const r=function(e,t,n){if(3!==arguments.length)throw new Error(\"@IServiceName-decorator can only be used to decorate a parameter\");!function(e,t,r){t[i]===t?t[s].push({id:e,index:r}):(t[s]=[{id:e,index:r}],t[i]=t)}(r,e,n)};return r.toString=()=>e,t.serviceRegistry.set(e,r),r}},2585:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const s=i(8343);var r;t.IBufferService=(0,s.createDecorator)(\"BufferService\"),t.ICoreMouseService=(0,s.createDecorator)(\"CoreMouseService\"),t.ICoreService=(0,s.createDecorator)(\"CoreService\"),t.ICharsetService=(0,s.createDecorator)(\"CharsetService\"),t.IInstantiationService=(0,s.createDecorator)(\"InstantiationService\"),function(e){e[e.TRACE=0]=\"TRACE\",e[e.DEBUG=1]=\"DEBUG\",e[e.INFO=2]=\"INFO\",e[e.WARN=3]=\"WARN\",e[e.ERROR=4]=\"ERROR\",e[e.OFF=5]=\"OFF\"}(r||(t.LogLevelEnum=r={})),t.ILogService=(0,s.createDecorator)(\"LogService\"),t.IOptionsService=(0,s.createDecorator)(\"OptionsService\"),t.IOscLinkService=(0,s.createDecorator)(\"OscLinkService\"),t.IUnicodeService=(0,s.createDecorator)(\"UnicodeService\"),t.IDecorationService=(0,s.createDecorator)(\"DecorationService\")},1480:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeService=void 0;const s=i(8460),r=i(225);class n{static extractShouldJoin(e){return 0!=(1&e)}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,t,i=!1){return(16777215&e)<<3|(3&t)<<1|(i?1:0)}constructor(){this._providers=Object.create(null),this._active=\"\",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;const e=new r.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version \"${e}\"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0,i=0;const s=e.length;for(let r=0;r<s;++r){let o=e.charCodeAt(r);if(55296<=o&&o<=56319){if(++r>=s)return t+this.wcwidth(o);const i=e.charCodeAt(r);56320<=i&&i<=57343?o=1024*(o-55296)+i-56320+65536:t+=this.wcwidth(i)}const a=this.charProperties(o,i);let h=n.extractWidth(a);n.extractShouldJoin(a)&&(h-=n.extractWidth(i)),t+=h,i=a}return t}charProperties(e,t){return this._activeProvider.charProperties(e,t)}}t.UnicodeService=n}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}var s={};return(()=>{var e=s;Object.defineProperty(e,\"__esModule\",{value:!0}),e.Terminal=void 0;const t=i(9042),r=i(3236),n=i(844),o=i(5741),a=i(8285),h=i(7975),c=i(7090),l=[\"cols\",\"rows\"];class d extends n.Disposable{constructor(e){super(),this._core=this.register(new r.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions={...this._core.options};const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const e in this._core.options){const s={get:t.bind(this,e),set:i.bind(this,e)};Object.defineProperty(this._publicOptions,e,s)}}_checkReadonlyOptions(e){if(l.includes(e))throw new Error(`Option \"${e}\" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error(\"You must set the allowProposedApi option to true to use proposed API\")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t=\"none\";switch(this._core.coreMouseService.activeProtocol){case\"X10\":t=\"x10\";break;case\"VT200\":t=\"vt200\";break;case\"DRAG\":t=\"drag\";break;case\"ANY\":t=\"any\"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(\"\\r\\n\",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error(\"This API only accepts integers\")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error(\"This API only accepts positive integers\")}}e.Terminal=d})(),s})()));\n\n   // xterm fit addon, version 0.10.0\n   !function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.FitAddon=t():e.FitAddon=t()}(self,(()=>(()=>{\"use strict\";var e={};return(()=>{var t=e;Object.defineProperty(t,\"__esModule\",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const r=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue(\"height\")),s=Math.max(0,parseInt(i.getPropertyValue(\"width\"))),n=window.getComputedStyle(this._terminal.element),l=o-(parseInt(n.getPropertyValue(\"padding-top\"))+parseInt(n.getPropertyValue(\"padding-bottom\"))),a=s-(parseInt(n.getPropertyValue(\"padding-right\"))+parseInt(n.getPropertyValue(\"padding-left\")))-r;return{cols:Math.max(2,Math.floor(a/t.css.cell.width)),rows:Math.max(1,Math.floor(l/t.css.cell.height))}}}})(),e})()));\n\n   globalThis.xterm_loaded = true;\n}\n\nxterm_export();"},"buildInfo":{"for":"1390","version":1390,"when":1755547941397,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"fc55c1b44556c6cf1f26147d9f996b91f5b2d147c32182f1f9699b4591b0d6a815342682524685248bc46173e9b61832792728c4e4368003f91cb25f44ad1e0c"}},"50-installer.fs":{"backend":{"files":{"apps":{"installer.js":"25b14b9b884c519aa5bf5044327dde1b1bd3152da576557a399a02aa51c0aacbf8882611ccd381992a8853da11d99beaca99fc4361a32b6416c406ff050eadbf"},"etc":{"unattended.json.example":"6f0f802a3588a4a85bde347714f80ce257800572663797dbeea2571122e6136099ebec811cea562b727a872a1c102b3d16f1551e75a1f5586016c0fb9a65a370"}},"permissions":{"apps/installer.js":{"world":"rx"},"apps/":{"world":"rx"},"etc/unattended.json.example":{"world":"rx"},"etc/":{"world":"rx"},"":{"world":"rx"}}},"files":{"25b14b9b884c519aa5bf5044327dde1b1bd3152da576557a399a02aa51c0aacbf8882611ccd381992a8853da11d99beaca99fc4361a32b6416c406ff050eadbf":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_THEME, GET_BUILD, RUN_KLVL_CODE, LLDISK_WRITE, LLDISK_READ, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, FS_REMOVE, FS_LIST_PARTITIONS, SYSTEM_SHUTDOWN, FS_CHANGE_PERMISSION, LLDISK_LIST_PARTITIONS, FS_MOUNT, CSP_OPERATIONS, LLDISK_INIT_PARTITIONS, IPC_SEND_PIPE, GET_SERVER_URL, SET_USER_INFO, SET_DEFAULT_SYSTEM, RESOLVE_NAME, CONNFUL_CONNECT, CONNFUL_DISCONNECT, CONNFUL_WRITE, CONNFUL_READ, CONNFUL_ADDRESS_GET, CONNFUL_IDENTITY_GET\n// signature: ae4a02a62f44a76203ac489ecc5c80c6e7f48b9a52ac8bb82f351b5824973b261dec3e47ec5f65688be7aeb246989e50cb48d531cf794d0d92cf219c403d7707\n// =====END MANIFEST=====\nlet onClose = () => availableAPIs.terminate();\n(async function() {\n\t// @pcos-app-mode isolatable\n\tlet networkDefaultURL = new URL(await availableAPIs.runningServer());\n\tnetworkDefaultURL.protocol = \"ws\" + (networkDefaultURL.protocol == \"https:\" ? \"s\" : \"\") + \":\";\n\tnetworkDefaultURL.pathname = \"\";\n\tconst networkSymbols = \"abcdefghijklmnopqrstuvwxyz0123456789_-\";\n\tlet automatic_configuration = {\n\t\t/* startInstall: true,\n\t\tacceptEULA: true,\n\t\tpartitioning: {\n\t\t\tdata: \"data\",\n\t\t\tboot: \"boot\",\n\t\t\tformat: true,\n\t\t\tautoInitNewInstalls: true\n\t\t},\n\t\tautoRestart: \"kexec\",\n\t\tdefaultLocale: \"en\",\n\t\textraModules: [ \"50-arcadeBreakout.fs\" ], */\n\t\tsecondstage: {\n\t\t\tcreateAccount: {\n\t\t\t\t/*password: \"password\",\n\t\t\t\tdarkMode: true,\n\t\t\t\tcreate: true,*/\n\t\t\t\tusername: \"root\",\n\t\t\t\tlockUsername: true,\n\t\t\t\tonlyOnNewInstall: true\n\t\t\t},\n\t\t\tappHarden: {\n\t\t\t\trequireSignature: true,\n\t\t\t\trequireAllowlist: true\n\t\t\t},\n\t\t\tnetwork: {\n\t\t\t\turl: networkDefaultURL.toString(),\n\t\t\t\tucBits: 1,\n\t\t\t\thostname: new Array(16).fill(0).map(a => networkSymbols[Math.floor(Math.random() * networkSymbols.length)]).join(\"\"),\n\t\t\t\tupdates: \"pcosserver.pc\"\n\t\t\t}\n\t\t}\n\t};\n\ttry {\n\t\tautomatic_configuration = JSON.parse(await availableAPIs.fs_read({ path: (await availableAPIs.getSystemMount()) + \"/etc/unattended.json\" }));\n\t} catch {}\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"INSTALL_PCOS\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"GET_BUILD\", \"RUN_KLVL_CODE\", \"LLDISK_WRITE\", \"LLDISK_READ\", \"FS_READ\", \"FS_WRITE\", \"FS_BYPASS_PERMISSIONS\", \"FS_REMOVE\", \"FS_LIST_PARTITIONS\", \"SYSTEM_SHUTDOWN\", \"FS_CHANGE_PERMISSION\", \"LLDISK_LIST_PARTITIONS\", \"FS_MOUNT\", \"CSP_OPERATIONS\", \"LLDISK_INIT_PARTITIONS\", \"GET_SERVER_URL\" ];\n\tif (!checklist.every(p => privileges.includes(p))) return availableAPIs.terminate();\n\tlet installed_modules = [\n\t\t\"50-bootable.fs\", \"50-core.fs\", \"50-diff.fs\", \"00-keys.fs\", \"50-pcos-icons.fs\", \"50-pcos-sounds.fs\", \"50-pcos-wallpapers.fs\", \"50-sysadmin.fs\",\n\t\t\"50-terminal-disks.fs\", \"50-terminal-network.fs\", \"50-terminal-users.fs\", \"50-terminal.fs\", \"50-tweetnacl.fs\", \"50-xterm.fs\", \"50-blogBrowser.fs\",\n\t\t\"50-calculator.fs\", \"50-crypto-tools.fs\", \"50-multimedia.fs\"\n\t];\n\tif (automatic_configuration.extraModules) installed_modules.push(...automatic_configuration.extraModules);\n\tlet downloadFromBdpOnMissing = new URL(\"bdp://localhost\");\n\tdownloadFromBdpOnMissing.hostname = automatic_configuration.secondstage.network.updates;\n\tawait availableAPIs.closeability(false);\n\tawait new Promise(async function(resolve) {\n\t\tlet locales = await availableAPIs.installedLocales();\n\t\tlet localeSelect = document.createElement(\"select\");\n\t\tlet localeZero = document.createElement(\"option\");\n\t\tlocaleZero.value = \"\";\n\t\tlocaleZero.innerText = \" 🌐 Language 🌐 \";\n\t\tlocaleZero.selected = true;\n\t\tlocaleZero.disabled = true;\n\t\tlocaleZero.hidden = true;\n\t\tlocaleSelect.appendChild(localeZero);\n\t\tfor (let locale of locales) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = locale;\n\t\t\toption.innerText = await availableAPIs.lookupOtherLocale({ key: \"LOCALE_NAME\", locale });\n\t\t\tlocaleSelect.appendChild(option);\n\t\t}\n\t\tlocaleSelect.addEventListener(\"change\", async function() {\n\t\t\tawait availableAPIs.runKlvlCode(\"modules.locales.defaultLocale = \" + JSON.stringify(localeSelect.value));\n\t\t\tinstalled_modules.push(\"50-locale-\" + localeSelect.value + \".fs\");\n\t\t\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"INSTALL_PCOS\"));\n\t\t\tlocaleSelect.remove();\n\t\t\tawait availableAPIs.closeability(true);\n\t\t\tresolve();\n\t\t});\n\t\tif (automatic_configuration.defaultLocale) {\n\t\t\tlocaleSelect.value = automatic_configuration.defaultLocale;\n\t\t\tlocaleSelect.dispatchEvent(new Event(\"change\"));\n\t\t}\n\t\tdocument.body.appendChild(localeSelect);\n\t});\n\tif (exec_args[0]) onClose = async function() {\n\t\tmainInstallerContent.hidden = true;\n\t\tcloseContent.hidden = false;\n\t\tawait availableAPIs.closeability(false);\n\t}\n\tconst licenseText = `Copyright (c) 2024 PCsoft\nOriginal Source Code Repository: https://github.com/PC-trollbox/pcos3\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n---\nUsed libraries:\n\txterm.js:\n\t\tCopyright (c) 2017-2022, The xterm.js authors (https://github.com/xtermjs/xterm.js/graphs/contributors) (MIT License)\n\t\tCopyright (c) 2014-2017, SourceLair, Private Company (www.sourcelair.com) (MIT License)\n\t\tCopyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n\ttweetnacl.js:\n\t\tPublic domain, https://github.com/dchest/tweetnacl-js\n\tfast-myers-diff (minified and modified):\n\t\tCopyright 2021 Logan R. Kearsley (https://github.com/gliese1337/fast-myers-diff)`;\n\tlet mainInstallerContent = document.createElement(\"div\");\n\tlet closeContent = document.createElement(\"div\");\n\tlet header = document.createElement(\"b\");\n\tlet postHeader = document.createElement(\"br\");\n\tlet description = document.createElement(\"span\");\n\tlet content = document.createElement(\"div\");\n\tlet button = document.createElement(\"button\");\n\tlet liveButton = document.createElement(\"button\");\n\tlet confirmDescription = document.createElement(\"p\");\n\tlet buttonYes = document.createElement(\"button\");\n\tlet buttonNo = document.createElement(\"button\");\n\n\tcloseContent.hidden = true;\n\n\tmainInstallerContent.style = \"position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 8px; box-sizing: border-box;\";\n\tcloseContent.style = \"position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 8px; box-sizing: border-box;\";\n\n\tconfirmDescription.innerText = await availableAPIs.lookupLocale(\"CLOSE_INSTALLER_CONFIRMATION\");\n\tbuttonYes.innerText = await availableAPIs.lookupLocale(\"YES\");\n\tbuttonNo.innerText = await availableAPIs.lookupLocale(\"NO\");\n\theader.innerText = await availableAPIs.lookupLocale(\"INSTALLER_TITLE\");\n\tdescription.innerText = (await availableAPIs.lookupLocale(\"INSTALLER_INVITATION\")).replace(\"%s\", await availableAPIs.getVersion());\n\tbutton.innerText = await availableAPIs.lookupLocale(\"INSTALL_BUTTON\");\n\tliveButton.innerText = await availableAPIs.lookupLocale(\"LIVE_BUTTON\");\n\n\tmainInstallerContent.appendChild(header);\n\tmainInstallerContent.appendChild(postHeader);\n\tmainInstallerContent.appendChild(description);\n\tmainInstallerContent.appendChild(content);\n\tmainInstallerContent.appendChild(button);\n\tmainInstallerContent.appendChild(document.createElement(\"br\"));\n\tif (exec_args[0]) mainInstallerContent.appendChild(liveButton);\n\n\tcloseContent.appendChild(confirmDescription);\n\tcloseContent.appendChild(buttonYes);\n\tcloseContent.insertAdjacentText(\"beforeend\", \" \");\n\tcloseContent.appendChild(buttonNo);\n\n\tdocument.body.appendChild(mainInstallerContent);\n\tdocument.body.appendChild(closeContent);\n\n\tbuttonNo.onclick = async function() {\n\t\tmainInstallerContent.hidden = false;\n\t\tcloseContent.hidden = true;\n\t\tawait availableAPIs.closeability(true);\n\t}\n\tbuttonYes.onclick = function() {\n\t\tonClose = () => availableAPIs.terminate();\n\t\tavailableAPIs.shutdown({\n\t\t\tisReboot: true\n\t\t});\n\t}\n\n\tbutton.onclick = async function() {\n\t\theader.remove();\n\t\tpostHeader.remove();\n\t\tliveButton.remove();\n\t\tcontent.innerHTML = \"\";\n\t\tdescription.innerText = await availableAPIs.lookupLocale(\"RIGHT_REVIEW\");\n\t\tlet textareaLicense = document.createElement(\"textarea\");\n\t\ttextareaLicense.readOnly = true;\n\t\ttextareaLicense.style.width = \"100%\";\n\t\ttextareaLicense.style.height = \"100%\";\n\t\tcontent.style.height = \"100%\";\n\t\ttextareaLicense.value = licenseText;\n\t\tcontent.appendChild(textareaLicense);\n\t\tbutton.innerText = await availableAPIs.lookupLocale(\"RIGHT_REVIEW_BTN\");\n\t\tbutton.onclick = async function() {\n\t\t\tcontent.innerHTML = \"\";\n\t\t\tcontent.style.height = \"\";\n\t\t\tdescription.innerText = await availableAPIs.lookupLocale(\"INSTALLER_PARTITIONING\");\n\t\t\tbutton.innerText = await availableAPIs.lookupLocale(\"PARTITIONING_USE\");\n\t\t\tlet partitionDataInput = document.createElement(\"input\");\n\t\t\tlet partitionDataFormat = document.createElement(\"button\");\n\t\t\tlet partitionBootInput = document.createElement(\"input\");\n\t\t\tpartitionDataInput.placeholder = await availableAPIs.lookupLocale(\"PARTITION_DATA\");\n\t\t\tpartitionDataFormat.innerText = await availableAPIs.lookupLocale(\"FORMAT_DATA\");\n\t\t\tpartitionBootInput.placeholder = await availableAPIs.lookupLocale(\"PARTITION_BOOT\");\n\t\t\tpartitionDataInput.value = \"data\";\n\t\t\tpartitionBootInput.value = \"boot\";\n\t\t\tcontent.appendChild(partitionDataInput);\n\t\t\tcontent.insertAdjacentText(\"beforeend\", \" \");\n\t\t\tcontent.appendChild(partitionDataFormat);\n\t\t\tcontent.appendChild(document.createElement(\"br\"));\n\t\t\tcontent.appendChild(partitionBootInput);\n\t\t\tlet initSyncEnd;\n\t\t\tlet initSync = new Promise(_ => initSyncEnd = _);\n\t\t\tpartitionDataFormat.onclick = async function() {\n\t\t\t\tif (!partitionDataInput.value) return await htmlAlert(await availableAPIs.lookupLocale(\"DATA_INPUT_ALERT\"));\n\t\t\t\tlet newInstall = false;\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.lldaList();\n\t\t\t\t} catch {\n\t\t\t\t\tnewInstall = true;\n\t\t\t\t\tif (!automatic_configuration?.partitioning?.autoInitNewInstalls) \n\t\t\t\t\t\tif (!(await htmlConfirm(await availableAPIs.lookupLocale(\"PROMPT_PARTITION_TABLE\")))) return;\n\t\t\t\t\tawait availableAPIs.lldaInitPartitions();\n\t\t\t\t}\n\t\t\t\tlet confirmErasePart = true;\n\t\t\t\tif (!automatic_configuration?.partitioning?.format && !(automatic_configuration?.partitioning?.autoInitNewInstalls && newInstall))\n\t\t\t\t\tconfirmErasePart = await htmlConfirm(await availableAPIs.lookupLocale(\"CONFIRM_PARTITION_ERASE\"));\n\t\t\t\tif (confirmErasePart) {\n\t\t\t\t\tlet partData = await availableAPIs.lldaRead({ partition: partitionDataInput.value });\n\t\t\t\t\tlet partId;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpartId = partData.id;\n\t\t\t\t\t} catch {}\n\t\t\t\t\tif (!partId) partId = (await availableAPIs.cspOperation({\n\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\toperation: \"random\",\n\t\t\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t\t\t})).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\")\n\t\t\t\t\tawait availableAPIs.lldaWrite({\n\t\t\t\t\t\tpartition: partitionDataInput.value,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfiles: {},\n\t\t\t\t\t\t\tpermissions: {},\n\t\t\t\t\t\t\tid: partId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tinitSyncEnd();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbutton.onclick = async function() {\n\t\t\t\tlet diskDataPartition = partitionDataInput.value;\n\t\t\t\tlet diskBootPartition = partitionBootInput.value;\n\t\t\t\tif (!diskDataPartition) return await htmlAlert(await availableAPIs.lookupLocale(\"DATA_INPUT_ALERT\"));\n\t\t\t\tif (!diskBootPartition) return await htmlAlert(await availableAPIs.lookupLocale(\"BOOT_INPUT_ALERT\"));\n\t\t\t\ttry {\n\t\t\t\t\tif (!(await availableAPIs.lldaList()).includes(diskDataPartition)) throw new Error();\n\t\t\t\t} catch {\n\t\t\t\t\treturn await htmlAlert(await availableAPIs.lookupLocale(\"CANNOT_FIND_PARTITION\"));\n\t\t\t\t}\n\n\t\t\t\tlet tempCopy = Object.keys((await availableAPIs.lldaRead({ partition: diskDataPartition })) || {});\n\t\t\t\tif (!tempCopy.includes(\"files\") || !tempCopy.includes(\"permissions\"))\n\t\t\t\t\tif (!(await htmlConfirm(await availableAPIs.lookupLocale(\"PCFS_DETECTION_ERROR\")))) return;\n\n\t\t\t\ttempCopy = null;\n\t\t\t\tcontent.innerHTML = \"\";\n\t\t\t\tbutton.hidden = true;\n\t\t\t\tlet isMigrated = false;\n\t\t\t\ttry {\n\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"MOUNTING_DATA_PARTITION\"));\n\t\t\t\t\tawait availableAPIs.fs_mount({\n\t\t\t\t\t\tmountpoint: \"target\",\n\t\t\t\t\t\tfilesystem: \"PCFSiDBMount\",\n\t\t\t\t\t\tfilesystemOptions: {\n\t\t\t\t\t\t\tpartition: diskDataPartition\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"REVIEWING_MIGRATION\"));\n\t\t\t\t\tlet targetListing = await availableAPIs.fs_ls({ path: \"target\" });\n\t\t\t\t\tif (targetListing.includes(\"apps\")) {\n\t\t\t\t\t\tlet targetListing = await availableAPIs.fs_ls({ path: \"target/apps\" });\n\t\t\t\t\t\tif (targetListing.includes(\"authui.js\")) {\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/apps\");\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/boot\");\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/etc/wallpapers\");\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/etc/icons\");\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/etc/sounds\");\n\t\t\t\t\t\t\tawait recursiveRemove(\"target/etc/keys\");\n\t\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/.migration\", data: \"This file is for migration purposes\" });\n\t\t\t\t\t\t\tisMigrated = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\tdescription.innerHTML = await availableAPIs.lookupLocale(\"INSTALLATION_FAILED\");\n\t\t\t\t\tawait availableAPIs.closeability(true);\n\t\t\t\t\tonClose = function() {\n\t\t\t\t\t\tonClose = () => availableAPIs.terminate();\n\t\t\t\t\t\tavailableAPIs.shutdown({\n\t\t\t\t\t\t\tisReboot: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t\tbutton.hidden = false;\n\t\t\t\tlet newInstall = true;\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.fs_read({ path: \"target/etc/security/users\" });\n\t\t\t\t\tnewInstall = false;\n\t\t\t\t} catch {}\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.fs_read({ path: \"target/.migration\" });\n\t\t\t\t\tisMigrated = true;\n\t\t\t\t} catch {}\n\t\t\t\tlet canSkip = (!newInstall) && automatic_configuration.secondstage.createAccount.onlyOnNewInstall;\n\t\t\t\tcontent.innerHTML = \"\";\n\t\t\t\tdescription.innerText = await availableAPIs.lookupLocale(\"LET_CREATE_ACCOUNT\");\n\t\t\t\tbutton.innerText = await availableAPIs.lookupLocale(\"CREATE\");\n\t\t\t\tlet useraccountname = document.createElement(\"input\");\n\t\t\t\tlet useraccountpassword = document.createElement(\"input\");\n\t\t\t\tlet darkmode = document.createElement(\"input\");\n\t\t\t\tlet darkmode_lb = document.createElement(\"label\");\n\t\t\t\tuseraccountname.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\t\t\tuseraccountpassword.placeholder = await availableAPIs.lookupLocale(\"PASSWORD\");\n\t\t\t\tuseraccountpassword.type = \"password\";\n\t\t\t\tdarkmode.type = \"checkbox\";\n\t\t\t\tdarkmode.id = \"darkmode\";\n\t\t\t\tdarkmode_lb.innerText = await availableAPIs.lookupLocale(\"DARK_MODE\");\n\t\t\t\tdarkmode_lb.htmlFor = \"darkmode\";\n\t\t\t\tcontent.appendChild(useraccountname);\n\t\t\t\tcontent.appendChild(document.createElement(\"br\"));\n\t\t\t\tcontent.appendChild(useraccountpassword);\n\t\t\t\tcontent.appendChild(document.createElement(\"br\"));\n\t\t\t\tcontent.appendChild(darkmode);\n\t\t\t\tcontent.appendChild(darkmode_lb);\n\t\t\t\tbutton.onclick = async function() {\n\t\t\t\t\tlet username = useraccountname.value;\n\t\t\t\t\tlet password = useraccountpassword.value;\n\t\t\t\t\tif (!username && !canSkip) return;\n\t\t\t\t\tif (username.includes(\"/\")) return;\n\t\t\t\t\tif (!password && !canSkip) return;\n\t\t\t\t\tlet homedir = username == \"root\" ? (\"target/root\") : (\"target/home/\" + username);\n\t\t\t\t\tlet darkModeChecked = darkmode.checked;\n\t\t\t\t\tcontent.innerHTML = \"\";\n\t\t\t\t\tbutton.hidden = true;\n\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"PLEASE_WAIT\"));\n\t\t\t\t\tawait availableAPIs.closeability(false);\n\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"CREATING_BOOT_PARTITION\"));\n\t\t\t\t\tawait availableAPIs.lldaWrite({\n\t\t\t\t\t\tpartition: diskBootPartition,\n\t\t\t\t\t\tdata: `\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst AsyncFunction = (async () => {}).constructor;\n\t\t\t\t\t\tlet pre_boot_part = coreExports.disk.partition(${JSON.stringify(diskDataPartition)}).getData();\n\t\t\t\t\t\tlet pre_boot_modules = pre_boot_part?.files;\n\t\t\t\t\t\tif (!pre_boot_modules) {\n\t\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"No files were found in the storage partition\");\n\t\t\t\t\t\t\tthrow new Error(\"No files were found in the storage partition\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpre_boot_modules = pre_boot_modules[coreExports.bootSection || \"boot\"];\n\t\t\t\t\t\tif (!pre_boot_modules) {\n\t\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"No boot modules were found\");\n\t\t\t\t\t\t\tthrow new Error(\"No boot modules were found\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet pre_boot_module_list = Object.keys(pre_boot_modules);\n\t\t\t\t\t\tpre_boot_module_list = pre_boot_module_list.sort((a, b) => a.localeCompare(b));\n\t\t\t\t\t\tlet pre_boot_module_script = \"\";\n\t\t\t\t\t\tfor (let module of pre_boot_module_list) {\n\t\t\t\t\t\t\tif (coreExports.bootMode == \"logboot\") pre_boot_module_script += \"coreExports.tty_bios_api.println(\" + JSON.stringify(module) + \");\\\\n\";\n\t\t\t\t\t\t\tpre_boot_module_script += await coreExports.idb.readPart(pre_boot_part.id + \"-\" + pre_boot_modules[module]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait new AsyncFunction(pre_boot_module_script)();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"Boot failed\");\n\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"Press Enter to continue and log this error locally\");\n\t\t\t\t\t\tawait coreExports.tty_bios_api.inputLine();\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t\t`});\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"CHANGING_ROOT_PERMISSIONS\"));\n\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: \"target\", newPermissions: \"rx\" });\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"COPYING_FOLDERS\"));\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\trecursiveRemove(\"target/modules\");\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/modules\" });\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tlet modules = await availableAPIs.fs_ls({ path: (await availableAPIs.getSystemMount()) + \"/modules\" });\n\t\t\t\t\t\tfor (let module of installed_modules) {\n\t\t\t\t\t\t\tif (!modules.includes(module)) {\n\t\t\t\t\t\t\t\tif (downloadFromBdpOnMissing) try {\n\t\t\t\t\t\t\t\t\tlet fetchModule = await bdpGet(new URL(\"/module_repository/\" + module, downloadFromBdpOnMissing));\n\t\t\t\t\t\t\t\t\tif (fetchModule.error) throw new Error(fetchModule.error);\n\t\t\t\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/modules/\" + module, data: fetchModule.content });\n\t\t\t\t\t\t\t\t\tmodules.push(module);\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(\"Failed to fetch module\", module, \":\", e);\n\t\t\t\t\t\t\t\t\tthrow new Error(\"Module required (\" + module + \")\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse throw new Error(\"Module required (\" + module + \")\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\t\tpath: \"target/modules/\" + module,\n\t\t\t\t\t\t\t\t\tdata: await availableAPIs.fs_read({\n\t\t\t\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + module\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"CREATING_DIRECTORY_STRUCTURE\"));\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/apps\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/apps/associations\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/apps/links\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/boot\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/wallpapers\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/icons\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/sounds\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/keys\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/keys/khrl\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/etc/security\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({\n\t\t\t\t\t\t\t\tpath: \"target/etc/security\",\n\t\t\t\t\t\t\t\tnewPermissions: \"\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/root\" });\n\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: \"target/home\" });\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"PATCHING_FS\"));\n\t\t\t\t\t\tlet systemCode = \"let localSystemMount = \\\".storage\\\";\\nlet mountOptions = {\\n\\tpartition: \" + JSON.stringify(diskDataPartition) + \"\\n};\\ntry {\\n\\tmodules.fs.mounts[localSystemMount] = await modules.mounts.PCFSiDBMount(mountOptions);\\n\\tmodules.defaultSystem = localSystemMount;\\n} catch (e) {\\n\\tawait panic(\\\"SYSTEM_PARTITION_MOUNTING_FAILED\\\", { underlyingJS: e, name: \\\"fs.mounts\\\", params: [localSystemMount, mountOptions]});\\n}\\n\";\n\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/boot/01-fsboot.js\", data: systemCode });\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"SETTING_LOCALE_PREFERENCE\"));\n\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/boot/06-localeset.js\", data: \"modules.locales.defaultLocale = \" + JSON.stringify(await availableAPIs.osLocale()) + \";\\n\" });\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"GENERATING_KERNEL\"));\n\t\t\t\t\t\tlet entireBoot = [];\n\t\t\t\t\t\tlet entireBootFiles = [];\n\t\t\t\t\t\tlet moduleConfig = { local: {} };\n\t\t\t\t\t\tlet bootFiles = await availableAPIs.fs_ls({ path: \"target/boot\" });\n\t\t\t\t\t\tif (bootFiles.includes(\"00-compiled.js\")) bootFiles.splice(bootFiles.indexOf(\"00-compiled.js\"), 1);\n\t\t\t\t\t\tif (bootFiles.includes(\"99-zzpatchfinisher.js\")) bootFiles.splice(bootFiles.indexOf(\"99-zzpatchfinisher.js\"), 1);\n\t\t\t\t\t\tfor (let bootFile of bootFiles) {\n\t\t\t\t\t\t\tentireBootFiles.push(bootFile);\n\t\t\t\t\t\t\tentireBoot.push([ bootFile, await availableAPIs.fs_read({\n\t\t\t\t\t\t\t\tpath: \"target/boot/\" + bootFile\n\t\t\t\t\t\t\t}) ]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmodules = (await availableAPIs.fs_ls({ path: \"target/modules\" })).sort((a, b) => a.localeCompare(b));\n\t\t\t\t\t\tfor (let module of modules) {\n\t\t\t\t\t\t\tlet moduleFile = JSON.parse(await availableAPIs.fs_read({ path: \"target/modules/\" + module }));\n\t\t\t\t\t\t\tmoduleConfig.local[module.split(\"-\").slice(1).join(\"-\").split(\".\").slice(0, -1).join(\".\")] = moduleFile.buildInfo;\n\t\t\t\t\t\t\tfor (let bootFile in (moduleFile.backend.files.boot || [])) {\n\t\t\t\t\t\t\t\tif (entireBootFiles.includes(bootFile)) continue;\n\t\t\t\t\t\t\t\tentireBoot.push([ bootFile, moduleFile.files[moduleFile.backend.files.boot[bootFile]] ]);\n\t\t\t\t\t\t\t\tentireBootFiles.push(bootFile);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tentireBoot = entireBoot.sort((a, b) => a[0].localeCompare(b[0]))\n\t\t\t\t\t\t\t.map(a => \"// modules/.../boot/\" + a[0] + \"\\n\" + a[1]).join(\"\\n\");\n\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/boot/00-compiled.js\", data: entireBoot + \"\\nreturn;/*\" });\n\t\t\t\t\t\tawait availableAPIs.fs_write({ path: \"target/boot/99-zzpatchfinisher.js\", data: \"*/\" });\n\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\tpath: \"target/etc/moduleConfig.json\",\n\t\t\t\t\t\t\tdata: JSON.stringify(moduleConfig)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"INSTALLING_SYSTEM_APPHARDEN\"));\n\t\t\t\t\t\tif (automatic_configuration.secondstage.appHarden) await availableAPIs.fs_write({\n\t\t\t\t\t\t\tpath: \"target/etc/appHarden\",\n\t\t\t\t\t\t\tdata: JSON.stringify(automatic_configuration.secondstage.appHarden)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"INSTALLING_NET_CONF\"));\n\t\t\t\t\t\tif (automatic_configuration.secondstage.network) await availableAPIs.fs_write({\n\t\t\t\t\t\t\tpath: \"target/etc/network.json\",\n\t\t\t\t\t\t\tdata: JSON.stringify(automatic_configuration.secondstage.network)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!canSkip) {\n\t\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"CREATING_USER\"));\n\t\t\t\t\t\t\tlet salt = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"random\",\n\t\t\t\t\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(password),\n\t\t\t\t\t\t\t\t\talgorithm: { name: \"PBKDF2\" },\n\t\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\", \"deriveKey\"]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet derived = new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\t\tsalt: salt,\n\t\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbaseKey: key,\n\t\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\tawait availableAPIs.cspOperation({ cspProvider: \"basic\", operation: \"unloadKey\", cspArgument: key });\n\t\t\t\t\t\t\tlet currentMount = await availableAPIs.getSystemMount();\n\t\t\t\t\t\t\tawait availableAPIs.setSystemMount(\"target\");\n\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\tpath: \"target/etc/security/users\",\n\t\t\t\t\t\t\t\tdata: JSON.stringify({authui: {\n\t\t\t\t\t\t\t\t\tsecurityChecks: [],\n\t\t\t\t\t\t\t\t\tgroups: [\"authui\"],\n\t\t\t\t\t\t\t\t\thomeDirectory: \"system\",\n\t\t\t\t\t\t\t\t\tblankPrivileges: true,\n\t\t\t\t\t\t\t\t\tadditionalPrivilegeSet: [ \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"GET_THEME\", \"ELEVATE_PRIVILEGES\", \"FS_READ\", \"FS_LIST_PARTITIONS\", \"CSP_OPERATIONS\" ]\n\t\t\t\t\t\t\t\t}})\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: \"target/etc/security/users\", newPermissions: \"\" });\n\t\t\t\t\t\t\tawait availableAPIs.setUserInfo({\n\t\t\t\t\t\t\t\tdesiredUser: username,\n\t\t\t\t\t\t\t\tinfo: {\n\t\t\t\t\t\t\t\t\tsecurityChecks: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: \"pbkdf2\",\n\t\t\t\t\t\t\t\t\t\t\thash: u8aToHex(derived),\n\t\t\t\t\t\t\t\t\t\t\tsalt: u8aToHex(salt)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tgroups: [ username, \"users\" ],\n\t\t\t\t\t\t\t\t\thomeDirectory: \"system\" + homedir.slice(6),\n\t\t\t\t\t\t\t\t\tblankPrivileges: false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.setSystemMount(currentMount);\n\t\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"CREATING_USER_HOME\"));\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: homedir });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: homedir, newUser: username });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: homedir, newGrp: username });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: homedir, newPermissions: \"rx\" });\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_mkdir({ path: homedir + \"/desktop\" });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: homedir + \"/desktop\", newUser: username });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: homedir + \"/desktop\", newGrp: username });\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: homedir + \"/desktop\", newPermissions: \"rx\" });\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (isMigrated) {\n\t\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"MIGRATING_USER_PROFILES\"));\n\t\t\t\t\t\t\tlet users = JSON.parse(await availableAPIs.fs_read({ path: \"target/etc/security/users\" }));\n\t\t\t\t\t\t\tfor (let user in users) \n\t\t\t\t\t\t\t\tif (users[user].homeDirectory.startsWith(\"storage\"))\n\t\t\t\t\t\t\t\t\tusers[user].homeDirectory = \"system\" + users[user].homeDirectory.slice(7);\n\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\tpath: \"target/etc/security/users\",\n\t\t\t\t\t\t\t\tdata: JSON.stringify(users)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.fs_rm({ path: \"target/.migration\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"INSTALLING_WP2U\"));\n\t\t\t\t\t\tlet wallpaperModule;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\twallpaperModule = JSON.parse(await availableAPIs.fs_read({ path: \"target/modules/50-pcos-wallpapers.fs\" }));\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\tif (wallpaperModule) {\n\t\t\t\t\t\t\tif (!canSkip) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\t\t\tpath: homedir + \"/.wallpaper\",\n\t\t\t\t\t\t\t\t\t\tdata: wallpaperModule.files[wallpaperModule.backend.files.etc.wallpapers[\"pcos\" + (darkModeChecked ? \"-dark\" : \"\") + \"-beta.pic\"]]\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: homedir + \"/.wallpaper\", newUser: username });\n\t\t\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: homedir + \"/.wallpaper\", newGrp: username });\n\t\t\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: homedir + \"/.wallpaper\", newPermissions: \"rx\" });\n\t\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"INSTALLING_WP2L\"));\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\t\tpath: \"target/etc/wallpapers/lockscreen.pic\",\n\t\t\t\t\t\t\t\t\tdata: wallpaperModule.files[wallpaperModule.backend.files.etc.wallpapers[\"pcos-lock-beta.pic\"]]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!canSkip) {\n\t\t\t\t\t\t\tdescription.innerHTML = (await availableAPIs.lookupLocale(\"INSTALLING_PCOS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"INSTALLING_DARKMODE\"));\n\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\tpath: homedir + \"/.darkmode\",\n\t\t\t\t\t\t\t\tdata: darkModeChecked.toString()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.fs_chown({ path: homedir + \"/.darkmode\", newUser: username });\n\t\t\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: homedir + \"/.darkmode\", newGrp: username });\n\t\t\t\t\t\t\tawait availableAPIs.fs_chmod({ path: homedir + \"/.darkmode\", newPermissions: \"rx\" });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdescription.innerHTML = await availableAPIs.lookupLocale(\"INSTALLATION_SUCCESSFUL\");\n\t\t\t\t\t\tif (!automatic_configuration.autoRestart) await availableAPIs.closeability(true);\n\t\t\t\t\t\tonClose = function() {\n\t\t\t\t\t\t\tonClose = () => availableAPIs.terminate();\n\t\t\t\t\t\t\tavailableAPIs.shutdown({\n\t\t\t\t\t\t\t\tisReboot: true,\n\t\t\t\t\t\t\t\tisKexec: automatic_configuration.autoRestart == \"kexec\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (automatic_configuration.autoRestart) onClose();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\tdescription.innerHTML = await availableAPIs.lookupLocale(\"INSTALLATION_FAILED\");\n\t\t\t\t\t\tawait availableAPIs.closeability(true);\n\t\t\t\t\t\tonClose = function() {\n\t\t\t\t\t\t\tonClose = () => availableAPIs.terminate();\n\t\t\t\t\t\t\tavailableAPIs.shutdown({\n\t\t\t\t\t\t\t\tisReboot: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tuseraccountname.value = automatic_configuration.secondstage.createAccount.username || useraccountname.value;\n\t\t\t\tuseraccountpassword.value = automatic_configuration.secondstage.createAccount.password || \"\";\n\t\t\t\tdarkmode.checked = automatic_configuration.secondstage.createAccount.darkMode || darkmode.checked;\n\t\t\t\tuseraccountname.disabled = automatic_configuration.secondstage.createAccount.lockUsername;\n\t\t\t\tif (automatic_configuration.secondstage.createAccount.lockUsername) useraccountname.title = await availableAPIs.lookupLocale(\"PROVISIONED_PREFERENCE\");\n\t\t\t\tif (automatic_configuration.secondstage.createAccount.create || canSkip) button.click();\n\t\t\t}\n\t\t\tif (automatic_configuration.partitioning) {\n\t\t\t\tpartitionDataInput.value = automatic_configuration.partitioning.data || \"data\";\n\t\t\t\tpartitionBootInput.value = automatic_configuration.partitioning.boot || \"boot\";\n\t\t\t\tlet newInstall = false;\n\t\t\t\ttry { await availableAPIs.lldaList(); } catch { newInstall = true; }\n\t\t\t\tif (automatic_configuration.partitioning.format || (newInstall && automatic_configuration.partitioning.autoInitNewInstalls)) {\n\t\t\t\t\tpartitionDataFormat.click();\n\t\t\t\t\tawait initSync;\n\t\t\t\t}\n\t\t\t\tbutton.click();\n\t\t\t}\n\t\t}\n\t\tif (automatic_configuration.acceptEULA) button.click();\n\t}\n\tliveButton.onclick = async function() {\n\t\theader.remove();\n\t\tpostHeader.remove();\n\t\tliveButton.remove();\n\t\tcontent.innerHTML = \"\";\n\t\tdescription.innerText = await availableAPIs.lookupLocale(\"RIGHT_REVIEW\");\n\t\tlet textareaLicense = document.createElement(\"textarea\");\n\t\ttextareaLicense.readOnly = true;\n\t\ttextareaLicense.style.width = \"100%\";\n\t\ttextareaLicense.style.height = \"100%\";\n\t\tcontent.style.height = \"100%\";\n\t\ttextareaLicense.value = licenseText;\n\t\tcontent.appendChild(textareaLicense);\n\t\tbutton.innerText = await availableAPIs.lookupLocale(\"RIGHT_REVIEW_BTN\");\n\t\tbutton.onclick = async function() {\n\t\t\tcontent.innerHTML = \"\";\n\t\t\tcontent.style.height = \"\";\n\t\t\tawait availableAPIs.sendToPipe({\n\t\t\t\tpipe: exec_args[0],\n\t\t\t\tdata: true\n\t\t\t});\n\t\t\tawait availableAPIs.terminate();\n\t\t}\n\t}\n\tif (automatic_configuration.startInstall) button.click()\n})();\n\nasync function htmlAlert(msg) {\n\tlet overlay = document.createElement(\"div\");\n\tlet overlayingMessage = document.createElement(\"div\");\n\tlet description = document.createElement(\"span\");\n\tlet buttonAccept = document.createElement(\"button\");\n\toverlay.style = \"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; opacity: 85%;\";\n\toverlayingMessage.style = \"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; padding: 8px; box-sizing: border-box; color: white;\";\n\tdescription.innerText = msg;\n\tbuttonAccept.innerText = \"Ok\";\n\toverlayingMessage.appendChild(description);\n\toverlayingMessage.appendChild(document.createElement(\"hr\"));\n\toverlayingMessage.appendChild(buttonAccept);\n\tdocument.body.appendChild(overlay);\n\tdocument.body.appendChild(overlayingMessage);\n\treturn new Promise(function(resolve) {\n\t\tbuttonAccept.onclick = function() {\n\t\t\toverlay.remove();\n\t\t\toverlayingMessage.remove();\n\t\t\tresolve();\n\t\t}\n\t});\n}\n\nasync function htmlConfirm(msg) {\n\tlet overlay = document.createElement(\"div\");\n\tlet overlayingMessage = document.createElement(\"div\");\n\tlet description = document.createElement(\"span\");\n\tlet buttonAccept = document.createElement(\"button\");\n\tlet buttonDecline = document.createElement(\"button\");\n\toverlay.style = \"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; opacity: 85%;\";\n\toverlayingMessage.style = \"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; padding: 8px; box-sizing: border-box; color: white;\";\n\tdescription.innerText = msg;\n\tbuttonAccept.innerText = await availableAPIs.lookupLocale(\"YES\");\n\tbuttonDecline.innerText = await availableAPIs.lookupLocale(\"NO\");\n\toverlayingMessage.appendChild(description);\n\toverlayingMessage.appendChild(document.createElement(\"hr\"));\n\toverlayingMessage.appendChild(buttonAccept);\n\toverlayingMessage.appendChild(buttonDecline);\n\tdocument.body.appendChild(overlay);\n\tdocument.body.appendChild(overlayingMessage);\n\treturn new Promise(function(resolve) {\n\t\tbuttonAccept.onclick = function() {\n\t\t\toverlay.remove();\n\t\t\toverlayingMessage.remove();\n\t\t\tresolve(true);\n\t\t}\n\t\tbuttonDecline.onclick = function() {\n\t\t\toverlay.remove();\n\t\t\toverlayingMessage.remove();\n\t\t\tresolve(false);\n\t\t}\n\t});\n}\n\nasync function recursiveCopy(source, destination, permissions) {\n\tfor (let sourceFile of await availableAPIs.fs_ls({ path: source })) {\n\t\tlet destinationFile = destination + \"/\" + sourceFile;\n\t\tif (await availableAPIs.fs_isDirectory({ path: source + \"/\" + sourceFile })) {\n\t\t\ttry {\n\t\t\t\tawait availableAPIs.fs_mkdir({ path: destinationFile });\n\t\t\t} catch {}\n\t\t\tawait recursiveCopy(source + \"/\" + sourceFile, destinationFile, permissions);\n\t\t} else {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: destinationFile,\n\t\t\t\tdata: await availableAPIs.fs_read({ path: source + \"/\" + sourceFile })\n\t\t\t});\n\t\t}\n\t\tif (permissions) {\n\t\t\tlet originalPermissions = await availableAPIs.fs_permissions({ path: source + \"/\" + sourceFile });\n\t\t\tawait availableAPIs.fs_chmod({ path: destinationFile, newPermissions: originalPermissions.world });\n\t\t\tawait availableAPIs.fs_chgrp({ path: destinationFile, newGrp: originalPermissions.group });\n\t\t\tawait availableAPIs.fs_chown({ path: destinationFile, newUser: originalPermissions.owner });\n\t\t}\n\t}\n}\n\nasync function recursiveRemove(target) {\n\tfor (let targetFile of await availableAPIs.fs_ls({ path: target })) {\n\t\ttargetFile = target + \"/\" + targetFile;\n\t\tif (await availableAPIs.fs_isDirectory({ path: targetFile })) await recursiveRemove(targetFile);\n\t\tawait availableAPIs.fs_rm({ path: targetFile });\n\t}\n}\n\nasync function bdpGet(path) {\n\tlet url = new URL(path);\n\tif (url.protocol != \"bdp:\") throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_PROTO\"));\n\tif (url.port) throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_GATESET\"));\n\tlet hostname = url.hostname, address;\n\tif (url.hostname.includes(\"[\")) {\n\t\thostname = IPv6Decompressor(url.hostname.slice(1, -1)).replaceAll(\":\", \"\");\n\t\taddress = hostname;\n\t} else address = await availableAPIs.resolve(hostname);\n\tif (!address) throw new Error(await availableAPIs.lookupLocale(\"HOSTNAME_RESOLUTION_FAILED\"));\n\tlet connection = await availableAPIs.connfulConnect({\n\t\tgate: url.username || \"blog\",\n\t\taddress,\n\t\tverifyByDomain: hostname\n\t});\n\tawait availableAPIs.connfulConnectionSettled(connection);\n\tawait availableAPIs.connfulWrite({\n\t\tconnectionID: connection,\n\t\tdata: url.pathname + url.search,\n\t\thost: hostname\n\t});\n\tlet data = await availableAPIs.connfulRead(connection);\n\tdata = JSON.parse(data);\n\tlet chunks = [];\n\twhile (chunks.length != data.length) {\n\t\tlet newData = await availableAPIs.connfulRead(connection);\n\t\tnewData = JSON.parse(newData);\n\t\tchunks[newData.ctr] = newData.chunk;\n\t}\n\ttry {\n\t\tawait availableAPIs.connfulClose(connection);\n\t} catch {}\n\treturn { ...data, content: chunks.join(\"\") };\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) onClose();\n}); ","6f0f802a3588a4a85bde347714f80ce257800572663797dbeea2571122e6136099ebec811cea562b727a872a1c102b3d16f1551e75a1f5586016c0fb9a65a370":"{\n\t\"startInstall\": true,\n\t\"acceptEULA\": true,\n\t\"partitioning\": {\n\t\t\"data\": \"data\",\n\t\t\"boot\": \"boot\",\n\t\t\"format\": true,\n\t\t\"autoInitNewInstalls\": true\n\t},\n\t\"autoRestart\": \"kexec\",\n\t\"defaultLocale\": \"en\",\n\t\"extraModules\": [ \"50-arcadeBreakout.fs\" ],\n\t\"secondstage\": {\n\t\t\"createAccount\": {\n\t\t\t\"password\": \"password\",\n\t\t\t\"darkMode\": true,\n\t\t\t\"create\": true,\n\t\t\t\"username\": \"root\",\n\t\t\t\"lockUsername\": true,\n\t\t\t\"onlyOnNewInstall\": true\n\t\t},\n\t\t\"appHarden\": {\n\t\t\t\"requireSignature\": true,\n\t\t\t\"requireAllowlist\": true\n\t\t},\n\t\t\"network\": {\n\t\t\t\"url\": \"wss://pcos3.pcprojects.tk\",\n\t\t\t\"ucBits\": 1,\n\t\t\t\"hostname\": \"installedsys\",\n\t\t\t\"updates\": \"pcosserver.pc\"\n\t\t}\n\t}\n}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941361,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"c57c2df04c5fe37d6f7b30675865158376b6497e35d7eeb79610007dfbeed2fa74098a1f3196c2fca0f0f839a59bbe4035f02c87f3eba571936fdb0595de8005"}},"50-sysadmin.fs":{"backend":{"files":{"apps":{"links":{"moduleManager.lnk":"e95677675250792134ccf17f15369288cfaee64c514d6e510684d197a5a1815e59bf73718742e7a83eaf30833e7f447ea1dcd96792955269844dded8978ff3cf","pcosNetwork.lnk":"a50bdcce77881a953b9c36169cd51df13c65ea403cd816a58281a2408f95e679b1292ca96e9af90682e2326400aab735a3210d96ea19356d0242002761968a76","personalSecurity.lnk":"559c14137db255a4798b48ad5cb6c13bb8430b9e76036d60cf91ce1eb699d0a85f7dca96b37766884d229a8c806eb462b6108c07bd5717080ed843aba0b33305","sysAdmin.lnk":"ec3f70f4bbc2efebdd0db07d7782525ef466103ab17fb76603a6468ad4adff3470def96bdb5acfef27f779a625c8220e540117e27485910dc584bafc07265dbf","systemSecurity.lnk":"20a5e676527290e396c2992284160597590d2dbdc782421640bbcaae486e6497640a927333cbf81a34e942c1b7cbb57382865e9aedb69614bb2b5d0845cc4c46","taskManager.lnk":"219d62803babf56fe2dd35e5040a4d67e39d4f9fcf70146e3a681f08668d601125beed817d5502bd624a7ebc128d9d2721c99c78d48a68617f1c38a2e8ef9a3a"},"moduleManager.js":"84d6fe9180c8d2e53a991d501bd6edabc4948c0f4d6f8a8ef55447b04e22db947c620f37bf9a6e9f576bce380262d191bb6b909970620c41296c56e3953f284b","pcosNetwork.js":"a4c23ba8deedc45fc931e8ff321d8c0edb52ce26ebedad9681b1af53b0891ebc6d5742e53ebf40c175e79138fa88dd9bbe0c9fe03e915318a01732882b57d77f","personalSecurity.js":"2b7b6bb1fc10a22ade2336809713f412af26cf4bde97afe4db7a365b70a43b22252f0f081ca73701ac8e0d78f5d41262c6f8796d5c99d72a11a55dc01b678a3d","sysAdmin.js":"8d05751885d04b740272dccec0ee79bddd0da8b1a684deb3acfef4a56d9369ad97f3f3b5b21a7c80240a5e9001ddfaee0cc5a2be0725b398b836ff60c4b6a9a1","systemSecurity.js":"84af0b85faff424736bf82e7b9597098715af596fd3cf0c7c8c0e4468d44175990058c09078a8e0beb1454ba6ba90f44b259916da57616627153f2279277505d","taskManager.js":"4412d6b9defc900f7bcc894cd406077f5a0b888c002b97dba547ccf6d7af5a913123e05b6d37d63ea03e0bdbdd8d825870dc2076624b7d4c0b0673fe77e18665"}},"permissions":{"apps/links/moduleManager.lnk":{"world":"rx"},"apps/links/pcosNetwork.lnk":{"world":"rx"},"apps/links/personalSecurity.lnk":{"world":"rx"},"apps/links/sysAdmin.lnk":{"world":"rx"},"apps/links/systemSecurity.lnk":{"world":"rx"},"apps/links/taskManager.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/moduleManager.js":{"world":"rx"},"apps/pcosNetwork.js":{"world":"rx"},"apps/personalSecurity.js":{"world":"rx"},"apps/sysAdmin.js":{"world":"rx"},"apps/systemSecurity.js":{"world":"rx"},"apps/taskManager.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"e95677675250792134ccf17f15369288cfaee64c514d6e510684d197a5a1815e59bf73718742e7a83eaf30833e7f447ea1dcd96792955269844dded8978ff3cf":"{\"path\":\"system/apps/moduleManager.js\",\"localeReferenceName\":\"MODMGR_TITLE\"}","a50bdcce77881a953b9c36169cd51df13c65ea403cd816a58281a2408f95e679b1292ca96e9af90682e2326400aab735a3210d96ea19356d0242002761968a76":"{\"path\":\"system/apps/pcosNetwork.js\",\"localeReferenceName\":\"NETCONFIG_TITLE\"}","559c14137db255a4798b48ad5cb6c13bb8430b9e76036d60cf91ce1eb699d0a85f7dca96b37766884d229a8c806eb462b6108c07bd5717080ed843aba0b33305":"{\"path\":\"system/apps/personalSecurity.js\",\"localeReferenceName\":\"PERSONAL_SECURITY_TITLE\"}","ec3f70f4bbc2efebdd0db07d7782525ef466103ab17fb76603a6468ad4adff3470def96bdb5acfef27f779a625c8220e540117e27485910dc584bafc07265dbf":"{\"path\":\"system/apps/sysAdmin.js\",\"localeReferenceName\":\"SYSADMIN_TOOLS_TITLE\"}","20a5e676527290e396c2992284160597590d2dbdc782421640bbcaae486e6497640a927333cbf81a34e942c1b7cbb57382865e9aedb69614bb2b5d0845cc4c46":"{\"path\":\"system/apps/systemSecurity.js\",\"localeReferenceName\":\"SYSTEM_SECURITY_TITLE\"}","219d62803babf56fe2dd35e5040a4d67e39d4f9fcf70146e3a681f08668d601125beed817d5502bd624a7ebc128d9d2721c99c78d48a68617f1c38a2e8ef9a3a":"{\"path\":\"system/apps/taskManager.js\",\"localeReferenceName\":\"TASK_MANAGER\"}","84d6fe9180c8d2e53a991d501bd6edabc4948c0f4d6f8a8ef55447b04e22db947c620f37bf9a6e9f576bce380262d191bb6b909970620c41296c56e3953f284b":"// =====BEGIN MANIFEST=====\n// allow: FS_UNMOUNT, FS_MOUNT, CSP_OPERATIONS, GET_THEME, GET_LOCALE, FS_REMOVE, FS_READ, FS_WRITE, FS_LIST_PARTITIONS, FS_BYPASS_PERMISSIONS, RESOLVE_NAME, CONNFUL_CONNECT, CONNFUL_READ, CONNFUL_WRITE, CONNFUL_DISCONNECT, GET_UPDATE_SERVICE, SYSTEM_SHUTDOWN, MANAGE_TOKENS, ELEVATE_PRIVILEGES\n// signer: automaticSigner\n// signature: 00f42d83ef910572de1aed5d7c798c154f13952a12c25070dc77da28bfd38c3ce54d43900e311b8af01d6be14a0deae8d9dba1804a71e9265d0fd525ef91920b\n// =====END MANIFEST=====\nlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"MODMGR_TITLE\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet checklist = [ \"FS_UNMOUNT\", \"FS_MOUNT\", \"CSP_OPERATIONS\", \"FS_REMOVE\", \"FS_READ\", \"FS_WRITE\", \"FS_LIST_PARTITIONS\", \"FS_BYPASS_PERMISSIONS\", \"RESOLVE_NAME\", \"CONNFUL_CONNECT\", \"CONNFUL_READ\", \"CONNFUL_WRITE\", \"CONNFUL_DISCONNECT\", \"GET_UPDATE_SERVICE\", \"SYSTEM_SHUTDOWN\", \"MANAGE_TOKENS\", \"ELEVATE_PRIVILEGES\" ];\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"MODMGR_PRIVFAIL\");\n\t\tlet currentToken = await availableAPIs.getProcessToken();\n\t\tlet newToken = await availableAPIs.consentGetToken({\n\t\t\tintent: await availableAPIs.lookupLocale(\"MODMGR_INTENT\"),\n\t\t\tname: await availableAPIs.lookupLocale(\"MODMGR_TITLE\")\n\t\t});\n\t\tif (!newToken) return;\n\t\tawait availableAPIs.setProcessToken(newToken);\n\t\tawait availableAPIs.revokeToken(currentToken);\n\t\tprivileges = await availableAPIs.getPrivileges();\n\t\tif (!checklist.every(p => privileges.includes(p))) return;\n\t}\n\tdocument.body.innerText = \"\";\n\n\tlet styleElement = document.createElement(\"style\");\n\tstyleElement.innerText = `th, td { border: 1px solid black; }\n\ttable { overflow: scroll; min-width: 100%; width: max-content; }`;\n\tdocument.head.appendChild(styleElement);\n\tlet container = document.createElement(\"div\");\n\tlet activityNote = document.createElement(\"div\");\n\tlet updateModCfgBtn = document.createElement(\"button\");\n\tlet installOnlineModuleBtn = document.createElement(\"button\");\n\tlet removeModuleBtn = document.createElement(\"button\");\n\tlet updateSystemButton = document.createElement(\"button\");\n\tlet regenerateKernelBtn = document.createElement(\"button\");\n\n\tupdateModCfgBtn.innerText = await availableAPIs.lookupLocale(\"UPDATE_MODCFG\");\n\tinstallOnlineModuleBtn.innerText = await availableAPIs.lookupLocale(\"INSTALL_ONLINE_MODULE\");\n\tremoveModuleBtn.innerText = await availableAPIs.lookupLocale(\"REMOVE_MODULES\");\n\tupdateSystemButton.innerText = await availableAPIs.lookupLocale(\"UPDATE_BUTTON\");\n\tregenerateKernelBtn.innerText = await availableAPIs.lookupLocale(\"REGENERATE_KERNEL\");\n\n\tupdateModCfgBtn.addEventListener(\"click\", async function() {\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"UPDATING_MODCFG\");\n\t\ttry {\n\t\t\tlet updateService = new URL(\"bdp://localhost\");\n\t\t\tupdateService.hostname = await availableAPIs.getUpdateService();\n\t\t\tlet moduleConfig = JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\"\n\t\t\t}));\n\t\t\tmoduleConfig.remote = JSON.parse((await bdpGet(new URL(\"/module_repository/moduleConfig.json\", updateService))).content);\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\",\n\t\t\t\tdata: JSON.stringify(moduleConfig)\n\t\t\t});\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"UPDATE_COUNTING\");\n\t\t\tlet forUpdate = [];\n\t\t\tfor (let module in moduleConfig.local) if (moduleConfig.remote.hasOwnProperty(module))\n\t\t\t\tif (moduleConfig.remote[module].version > moduleConfig.local[module].version) \n\t\t\t\t\tforUpdate.push(module);\n\t\t\tactivityNote.innerText = (await availableAPIs.lookupLocale(\"UPDATE_COUNT\")).replace(\"%s\", forUpdate.length);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"FAILED_TO_UPDATE\");\n\t\t}\n\t\tcontainer.hidden = false;\n\t\tawait availableAPIs.closeability(true);\n\t});\n\n\tinstallOnlineModuleBtn.addEventListener(\"click\", async function() {\n\t\tcontainer.hidden = true;\n\t\tawait availableAPIs.closeability(false);\n\t\tactivityNote.innerText = \"\";\n\t\ttry {\n\t\t\tlet updateService = new URL(\"bdp://localhost\");\n\t\t\tupdateService.hostname = await availableAPIs.getUpdateService();\n\t\t\tlet moduleConfig = JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\"\n\t\t\t}));\n\t\t\tlet table = document.createElement(\"table\");\n\t\t\tlet tableHead = document.createElement(\"thead\");\n\t\t\tlet tableHeadRow = document.createElement(\"tr\");\n\t\t\tlet tableCellInstalled = document.createElement(\"th\");\n\t\t\tlet tableCellModName = document.createElement(\"th\");\n\t\t\tlet tableCellModVersion = document.createElement(\"th\");\n\t\t\tlet tableCellTargeting = document.createElement(\"th\");\n\t\t\tlet tableBody = document.createElement(\"tbody\");\n\t\t\tlet applyChangesBtn = document.createElement(\"button\");\n\t\t\tlet discardChangesBtn = document.createElement(\"button\");\n\t\t\ttableCellModName.innerText = await availableAPIs.lookupLocale(\"MODNAME_CELL\");\n\t\t\ttableCellModVersion.innerText = await availableAPIs.lookupLocale(\"MODVER_CELL\");\n\t\t\ttableCellTargeting.innerText = await availableAPIs.lookupLocale(\"MODTGT_CELL\");\n\t\t\tapplyChangesBtn.innerText = await availableAPIs.lookupLocale(\"APPLY_CHANGES\");\n\t\t\tdiscardChangesBtn.innerText = await availableAPIs.lookupLocale(\"DISCARD_CHANGES\");\n\t\t\tlet lostModules = Object.keys(moduleConfig.local).filter(a => !(moduleConfig.remote || {})[a]).sort((a, b) => a.localeCompare(b));\n\t\t\tlet remoteModules = Object.keys(moduleConfig.remote || {}).sort((a, b) => a.localeCompare(b));\n\t\t\tlet toInstall = [];\n\t\t\tlet isRegenNeeded = false;\n\t\t\tfor (let module of lostModules) {\n\t\t\t\tlet tableRow = document.createElement(\"tr\");\n\t\t\t\tlet tableCellInstalled = document.createElement(\"td\");\n\t\t\t\tlet tableCellModName = document.createElement(\"td\");\n\t\t\t\tlet tableCellModVersion = document.createElement(\"td\");\n\t\t\t\tlet tableCellTargeting = document.createElement(\"td\");\n\t\t\t\tlet checkboxInstalled = document.createElement(\"input\");\n\t\t\t\tcheckboxInstalled.type = \"checkbox\";\n\t\t\t\tcheckboxInstalled.checked = true;\n\t\t\t\tcheckboxInstalled.disabled = true;\n\t\t\t\ttableCellModName.innerText = module;\n\t\t\t\ttableCellModVersion.innerText = moduleConfig.local[module].version;\n\t\t\t\ttableCellTargeting.innerText = moduleConfig.local[module].for;\n\t\t\t\ttableCellInstalled.appendChild(checkboxInstalled);\n\t\t\t\ttableRow.appendChild(tableCellInstalled);\n\t\t\t\ttableRow.appendChild(tableCellModName);\n\t\t\t\ttableRow.appendChild(tableCellModVersion);\n\t\t\t\ttableRow.appendChild(tableCellTargeting);\n\t\t\t\ttableBody.appendChild(tableRow);\n\t\t\t}\n\t\t\tfor (let module of remoteModules) {\n\t\t\t\tlet tableRow = document.createElement(\"tr\");\n\t\t\t\tlet tableCellInstalled = document.createElement(\"td\");\n\t\t\t\tlet tableCellModName = document.createElement(\"td\");\n\t\t\t\tlet tableCellModVersion = document.createElement(\"td\");\n\t\t\t\tlet tableCellTargeting = document.createElement(\"td\");\n\t\t\t\tlet checkboxInstalled = document.createElement(\"input\");\n\t\t\t\tcheckboxInstalled.type = \"checkbox\";\n\t\t\t\tlet isInstalled = false, isUpdatable = false;\n\t\t\t\tcheckboxInstalled.checked = checkboxInstalled.disabled = moduleConfig.local[module];\n\t\t\t\tif (checkboxInstalled.checked) isInstalled = true;\n\t\t\t\tif (checkboxInstalled.checked && moduleConfig.remote[module].version > moduleConfig.local[module].version) {\n\t\t\t\t\tcheckboxInstalled.checked = checkboxInstalled.disabled = false;\n\t\t\t\t\tcheckboxInstalled.indeterminate = true;\n\t\t\t\t\tisUpdatable = true;\n\t\t\t\t}\n\n\t\t\t\tcheckboxInstalled.onchange = function() {\n\t\t\t\t\tif (!checkboxInstalled.checked && isUpdatable) checkboxInstalled.indeterminate = true;\n\t\t\t\t\tif (toInstall.includes(module)) toInstall.splice(toInstall.indexOf(module), 1);\n\t\t\t\t\telse toInstall.push(module);\n\t\t\t\t};\n\n\t\t\t\ttableCellModName.innerText = module;\n\t\t\t\ttableCellModVersion.innerText = moduleConfig.remote[module].version;\n\t\t\t\tif (isInstalled && moduleConfig.remote[module].version > moduleConfig.local[module].version)\n\t\t\t\t\ttableCellModVersion.innerText = moduleConfig.local[module].version + \" -> \" + tableCellModVersion.innerText;\n\t\t\t\telse if (isInstalled && moduleConfig.remote[module].version < moduleConfig.local[module].version)\n\t\t\t\t\ttableCellModVersion.innerText = moduleConfig.local[module].version + \" <- \" + tableCellModVersion.innerText;\n\t\t\t\ttableCellTargeting.innerText = moduleConfig.remote[module].for;\n\t\t\t\tif (isInstalled && moduleConfig.remote[module].for != moduleConfig.local[module].for)\n\t\t\t\t\ttableCellTargeting.innerText = moduleConfig.local[module].version + \" -> \" + tableCellTargeting.innerText;\n\n\t\t\t\ttableCellInstalled.appendChild(checkboxInstalled);\n\t\t\t\ttableRow.appendChild(tableCellInstalled);\n\t\t\t\ttableRow.appendChild(tableCellModName);\n\t\t\t\ttableRow.appendChild(tableCellModVersion);\n\t\t\t\ttableRow.appendChild(tableCellTargeting);\n\t\t\t\ttableBody.appendChild(tableRow);\n\t\t\t}\n\t\t\ttableHeadRow.appendChild(tableCellInstalled);\n\t\t\ttableHeadRow.appendChild(tableCellModName);\n\t\t\ttableHeadRow.appendChild(tableCellModVersion);\n\t\t\ttableHeadRow.appendChild(tableCellTargeting);\n\t\t\ttableHead.appendChild(tableHeadRow);\n\t\t\ttable.appendChild(tableHead);\n\t\t\ttable.appendChild(tableBody);\n\t\t\tactivityNote.appendChild(table);\n\t\t\tactivityNote.appendChild(applyChangesBtn);\n\t\t\tactivityNote.appendChild(discardChangesBtn);\n\t\t\tawait new Promise(async function(resolve, reject) {\n\t\t\t\tdiscardChangesBtn.onclick = _ => reject();\n\t\t\t\tapplyChangesBtn.onclick = async function() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet modNum = 0;\n\t\t\t\t\t\tfor (let module of toInstall) {\n\t\t\t\t\t\t\tactivityNote.innerText = (await availableAPIs.lookupLocale(\"INSTALLING_MODULE\")).replace(\"%s\", module).replace(\"%s\", modNum + 1).replace(\"%s\", toInstall.length).replace(\"%s\", (modNum / toInstall.length * 100).toFixed(2));\n\t\t\t\t\t\t\tif (moduleConfig.local[module] && moduleConfig.remote[module].bootOrder != moduleConfig.local[module].bootOrder)\n\t\t\t\t\t\t\t\tawait availableAPIs.fs_rm({\n\t\t\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.local[module].bootOrder + \"-\" + module + \".fs\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet moduleContent = (await bdpGet(new URL(\"/module_repository/\" + moduleConfig.remote[module].bootOrder + \"-\" + module + \".fs\", updateService))).content;\n\t\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.remote[module].bootOrder + \"-\" + module + \".fs\",\n\t\t\t\t\t\t\t\tdata: moduleContent\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (JSON.parse(moduleContent).backend?.files?.boot) isRegenNeeded = true;\n\t\t\t\t\t\t\tmoduleConfig.local[module] = JSON.parse(moduleContent).buildInfo;\n\t\t\t\t\t\t\tmodNum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\",\n\t\t\t\t\t\t\tdata: JSON.stringify(moduleConfig)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"RELOADING_MODULES\");\n\t\t\t\t\t\tawait reloadModules(await availableAPIs.getSystemMount());\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (isRegenNeeded) await regenerateKernel();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"REGENERATING_KERNEL_FAILED\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\");\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (e) { reject(e); }\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"FAILED_OP\");\n\t\t}\n\t\tcontainer.hidden = false;\n\t\tawait availableAPIs.closeability(true);\n\t});\n\n\tremoveModuleBtn.addEventListener(\"click\", async function() {\n\t\tcontainer.hidden = true;\n\t\tawait availableAPIs.closeability(false);\n\t\tactivityNote.innerText = \"\";\n\t\ttry {\n\t\t\tlet updateService = new URL(\"bdp://localhost\");\n\t\t\tupdateService.hostname = await availableAPIs.getUpdateService();\n\t\t\tlet moduleConfig = JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\"\n\t\t\t}));\n\t\t\tlet table = document.createElement(\"table\");\n\t\t\tlet tableHead = document.createElement(\"thead\");\n\t\t\tlet tableHeadRow = document.createElement(\"tr\");\n\t\t\tlet tableCellInstalled = document.createElement(\"th\");\n\t\t\tlet tableCellModName = document.createElement(\"th\");\n\t\t\tlet tableCellModVersion = document.createElement(\"th\");\n\t\t\tlet tableCellTargeting = document.createElement(\"th\");\n\t\t\tlet tableBody = document.createElement(\"tbody\");\n\t\t\tlet applyChangesBtn = document.createElement(\"button\");\n\t\t\tlet discardChangesBtn = document.createElement(\"button\");\n\t\t\ttableCellModName.innerText = await availableAPIs.lookupLocale(\"MODNAME_CELL\");\n\t\t\ttableCellModVersion.innerText = await availableAPIs.lookupLocale(\"MODVER_CELL\");\n\t\t\ttableCellTargeting.innerText = await availableAPIs.lookupLocale(\"MODTGT_CELL\");\n\t\t\tapplyChangesBtn.innerText = await availableAPIs.lookupLocale(\"APPLY_CHANGES\");\n\t\t\tdiscardChangesBtn.innerText = await availableAPIs.lookupLocale(\"DISCARD_CHANGES\");\n\t\t\tlet toRemove = [];\n\t\t\tlet unremovable = [ \"bootable\", \"core\", \"keys\" ];\n\t\t\tlet isRegenNeeded = false;\n\t\t\tlet localModules = Object.keys(moduleConfig.local).sort((a, b) => a.localeCompare(b));\n\t\t\tfor (let module of localModules) {\n\t\t\t\tlet tableRow = document.createElement(\"tr\");\n\t\t\t\tlet tableCellInstalled = document.createElement(\"td\");\n\t\t\t\tlet tableCellModName = document.createElement(\"td\");\n\t\t\t\tlet tableCellModVersion = document.createElement(\"td\");\n\t\t\t\tlet tableCellTargeting = document.createElement(\"td\");\n\t\t\t\tlet checkboxInstalled = document.createElement(\"input\");\n\t\t\t\tcheckboxInstalled.type = \"checkbox\";\n\t\t\t\tcheckboxInstalled.checked = true;\n\t\t\t\tcheckboxInstalled.disabled = unremovable.includes(module);\n\n\t\t\t\tcheckboxInstalled.onchange = function() {\n\t\t\t\t\tif (toRemove.includes(module)) toRemove.splice(toRemove.indexOf(module), 1);\n\t\t\t\t\telse toRemove.push(module);\n\t\t\t\t};\n\n\t\t\t\ttableCellModName.innerText = module;\n\t\t\t\ttableCellModVersion.innerText = moduleConfig.local[module].version;\n\t\t\t\ttableCellTargeting.innerText = moduleConfig.local[module].for;\n\n\t\t\t\ttableCellInstalled.appendChild(checkboxInstalled);\n\t\t\t\ttableRow.appendChild(tableCellInstalled);\n\t\t\t\ttableRow.appendChild(tableCellModName);\n\t\t\t\ttableRow.appendChild(tableCellModVersion);\n\t\t\t\ttableRow.appendChild(tableCellTargeting);\n\t\t\t\ttableBody.appendChild(tableRow);\n\t\t\t}\n\t\t\ttableHeadRow.appendChild(tableCellInstalled);\n\t\t\ttableHeadRow.appendChild(tableCellModName);\n\t\t\ttableHeadRow.appendChild(tableCellModVersion);\n\t\t\ttableHeadRow.appendChild(tableCellTargeting);\n\t\t\ttableHead.appendChild(tableHeadRow);\n\t\t\ttable.appendChild(tableHead);\n\t\t\ttable.appendChild(tableBody);\n\t\t\tactivityNote.appendChild(table);\n\t\t\tactivityNote.appendChild(applyChangesBtn);\n\t\t\tactivityNote.appendChild(discardChangesBtn);\n\t\t\tawait new Promise(async function(resolve, reject) {\n\t\t\t\tdiscardChangesBtn.onclick = _ => reject();\n\t\t\t\tapplyChangesBtn.onclick = async function() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet modNum = 0;\n\t\t\t\t\t\tfor (let module of toRemove) {\n\t\t\t\t\t\t\tactivityNote.innerText = (await availableAPIs.lookupLocale(\"REMOVING_MODULE\")).replace(\"%s\", module).replace(\"%s\", modNum + 1).replace(\"%s\", toRemove.length).replace(\"%s\", (modNum / toRemove.length * 100).toFixed(2));\n\t\t\t\t\t\t\tisRegenNeeded = isRegenNeeded || !!(JSON.parse(await availableAPIs.fs_read({\n\t\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.local[module].bootOrder + \"-\" + module + \".fs\"\n\t\t\t\t\t\t\t})).backend?.files?.boot);\n\t\t\t\t\t\t\tawait availableAPIs.fs_rm({\n\t\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.local[module].bootOrder + \"-\" + module + \".fs\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdelete moduleConfig.local[module];\n\t\t\t\t\t\t\tmodNum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\",\n\t\t\t\t\t\t\tdata: JSON.stringify(moduleConfig)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"RELOADING_MODULES\");\n\t\t\t\t\t\tawait reloadModules(await availableAPIs.getSystemMount());\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (isRegenNeeded) await regenerateKernel();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"REGENERATING_KERNEL_FAILED\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\");\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} catch (e) { reject(e); }\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"FAILED_OP\");\n\t\t}\n\t\tcontainer.hidden = false;\n\t\tawait availableAPIs.closeability(true);\n\t});\n\n\tupdateSystemButton.addEventListener(\"click\", async function() {\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"UPDATING_MODULES\");\n\t\ttry {\n\t\t\tlet updateService = new URL(\"bdp://localhost\");\n\t\t\tupdateService.hostname = await availableAPIs.getUpdateService();\n\t\t\tlet moduleConfig = JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\"\n\t\t\t}));\n\t\t\tlet forUpdate = [];\n\t\t\tfor (let module in moduleConfig.local) if (moduleConfig.remote.hasOwnProperty(module))\n\t\t\t\tif (moduleConfig.remote[module].version > moduleConfig.local[module].version) \n\t\t\t\t\tforUpdate.push(module);\n\t\t\tlet modNum = 0;\n\t\t\tfor (let module of forUpdate) {\n\t\t\t\tactivityNote.innerText = (await availableAPIs.lookupLocale(\"INSTALLING_MODULE\")).replace(\"%s\", module).replace(\"%s\", modNum + 1).replace(\"%s\", forUpdate.length).replace(\"%s\", (modNum / forUpdate.length * 100).toFixed(2));\n\t\t\t\tif (moduleConfig.remote[module].bootOrder != moduleConfig.local[module].bootOrder)\n\t\t\t\t\tawait availableAPIs.fs_rm({\n\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.local[module].bootOrder + \"-\" + module + \".fs\"\n\t\t\t\t\t});\n\t\t\t\tlet moduleContent = (await bdpGet(new URL(\"/module_repository/\" + moduleConfig.remote[module].bootOrder + \"-\" + module + \".fs\", updateService))).content;\n\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/modules/\" + moduleConfig.remote[module].bootOrder + \"-\" + module + \".fs\",\n\t\t\t\t\tdata: moduleContent\n\t\t\t\t});\n\t\t\t\tmoduleConfig.local[module] = JSON.parse(moduleContent).buildInfo;\n\t\t\t\tmodNum++;\n\t\t\t}\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/moduleConfig.json\",\n\t\t\t\tdata: JSON.stringify(moduleConfig)\n\t\t\t});\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"RELOADING_MODULES\");\n\t\t\tawait reloadModules(await availableAPIs.getSystemMount());\n\t\t\ttry {\n\t\t\t\tawait regenerateKernel();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"REGENERATING_KERNEL_FAILED\");\n\t\t\t}\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"RESTARTING\");\n\t\t\tif (forUpdate.length) await availableAPIs.shutdown({ isReboot: true, isKexec: true });\n\t\t\telse activityNote.innerText = await availableAPIs.lookupLocale(\"SYSTEM_UP_TO_DATE\");\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"FAILED_TO_UPDATE\");\n\t\t}\n\t\tcontainer.hidden = false;\n\t\tawait availableAPIs.closeability(true);\n\t});\n\n\tasync function regenerateKernel() {\n\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"GENERATING_KERNEL\");\n\t\tlet entireBoot = [];\n\t\tlet bootFiles = await availableAPIs.fs_ls({ path: (await availableAPIs.getSystemMount()) + \"/boot\" });\n\t\tif (bootFiles.includes(\"00-compiled.js\")) bootFiles.splice(bootFiles.indexOf(\"00-compiled.js\"), 1);\n\t\tif (bootFiles.includes(\"99-zzpatchfinisher.js\")) bootFiles.splice(bootFiles.indexOf(\"99-zzpatchfinisher.js\"), 1);\n\t\tfor (let bootFile of bootFiles) {\n\t\t\tentireBoot.push([ bootFile, await availableAPIs.fs_read({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/\" + bootFile\n\t\t\t}) ]);\n\t\t}\n\t\tentireBoot = entireBoot.sort((a, b) => a[0].localeCompare(b[0]))\n\t\t\t.map(a => \"// modules/.../boot/\" + a[0] + \"\\n\" + a[1]).join(\"\\n\");\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/00-compiled.js\",\n\t\t\tdata: entireBoot + \"\\nreturn;/*\"\n\t\t});\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/99-zzpatchfinisher.js\",\n\t\t\tdata: \"*/\"\n\t\t});\n\t}\n\n\tregenerateKernelBtn.addEventListener(\"click\", async function() {\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\ttry {\n\t\t\tawait regenerateKernel();\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"REGENERATING_KERNEL_FAILED\");\n\t\t}\n\t\tawait availableAPIs.closeability(true);\n\t\tcontainer.hidden = false;\n\t\tactivityNote.innerText = await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\");\n\t});\n\n\tcontainer.appendChild(updateModCfgBtn);\n\tcontainer.appendChild(installOnlineModuleBtn);\n\tcontainer.appendChild(removeModuleBtn);\n\tcontainer.appendChild(updateSystemButton);\n\tcontainer.appendChild(regenerateKernelBtn);\n\tdocument.body.appendChild(container);\n\tdocument.body.appendChild(activityNote);\n})();\nasync function reloadModules(mnt) {\n\tlet modSys = JSON.parse(await availableAPIs.fs_read({ path: \"ram/run/moduleSystem.json\" }));\n\tlet prevMnt = modSys[mnt][0];\n\tlet moduleFiles = await availableAPIs.fs_ls({ path: mnt + \"/modules\" });\n\tlet mntList = [];\n\tfor (let moduleName of moduleFiles) {\n\t\ttry {\n\t\t\tlet fullModuleFile = {};\n\t\t\ttry {\n\t\t\t\tfullModuleFile = JSON.parse(await availableAPIs.fs_read({ path: mnt + \"/modules/\" + moduleName }));\n\t\t\t} catch {}\n\t\t\tif (!fullModuleFile.buildInfo) continue;\n\t\t\tlet fullModuleSignature = fullModuleFile.buildInfo.signature;\n\t\t\tdelete fullModuleFile.buildInfo.signature;\n\t\t\tif (moduleName != \"00-keys.fs\") {\n\t\t\t\tlet critical = fullModuleFile.buildInfo.critical;\n\t\t\t\ttry {\n\t\t\t\t\tlet signingKey = JSON.parse(await availableAPIs.fs_read({ path: mnt + \"/etc/keys/\" + fullModuleFile.buildInfo.signer }));\n\t\t\t\t\tif (!signingKey.keyInfo.usages.includes(\"moduleTrust\")) throw new Error(\"NOT_MODULE_SIGNING_KEY\");\n\t\t\t\t\tlet importSigningKey = await availableAPIs.cspOperation({\n\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\tformat: \"jwk\",\n\t\t\t\t\t\t\tkeyData: signingKey.keyInfo.key,\n\t\t\t\t\t\t\talgorithm: { name: \"Ed25519\" },\n\t\t\t\t\t\t\textractable: true,\n\t\t\t\t\t\t\tkeyUsages: [ \"verify\" ]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfullModuleFile = JSON.stringify(fullModuleFile);\n\t\t\t\t\tif (!await availableAPIs.cspOperation({\n\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\toperation: \"verify\",\n\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\talgorithm: { name: \"Ed25519\" },\n\t\t\t\t\t\t\tkey: importSigningKey,\n\t\t\t\t\t\t\tsignature: hexToU8A(fullModuleSignature),\n\t\t\t\t\t\t\tdata: new TextEncoder().encode(fullModuleFile)\n\t\t\t\t\t\t}\n\t\t\t\t\t})) throw new Error(\"MODULE_SIGNATURE_VERIFICATION_FAILED\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (critical) throw e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet randomMntName = \".\" + (await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(8)\n\t\t\t})).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\tawait availableAPIs.fs_mount({\n\t\t\t\tmountpoint: randomMntName,\n\t\t\t\tfilesystem: \"fileMount\",\n\t\t\t\tfilesystemOptions: {\n\t\t\t\t\tsrcFile: mnt + \"/modules/\" + moduleName,\n\t\t\t\t\tread_only: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tmntList.push(randomMntName);\n\t\t} catch (e) {\n\t\t\tfor (let mount of mntList)\n\t\t\t\tawait availableAPIs.fs_unmount({ mount });\n\t\t\tthrow e;\n\t\t}\n\t}\n\tawait availableAPIs.fs_unmount({ mount: mnt });\n\tfor (let mount of modSys[mnt].slice(1))\n\t\tawait availableAPIs.fs_unmount({ mount });\n\tmodSys[mnt] = [ prevMnt, ...mntList ];\n\tawait availableAPIs.fs_mount({\n\t\tmountpoint: mnt,\n\t\tfilesystem: \"overlayMount\",\n\t\tfilesystemOptions: {\n\t\t\tmounts: modSys[mnt]\n\t\t}\n\t});\n\tawait availableAPIs.fs_write({\n\t\tpath: \"ram/run/moduleSystem.json\",\n\t\tdata: JSON.stringify(modSys)\n\t});\n}\nasync function bdpGet(path) {\n\tlet url = new URL(path);\n\tif (url.protocol != \"bdp:\") throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_PROTO\"));\n\tif (url.port) throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_GATESET\"));\n\tlet hostname = url.hostname, address;\n\tif (url.hostname.includes(\"[\")) {\n\t\thostname = IPv6Decompressor(url.hostname.slice(1, -1)).replaceAll(\":\", \"\");\n\t\taddress = hostname;\n\t} else address = await availableAPIs.resolve(hostname);\n\tif (!address) throw new Error(await availableAPIs.lookupLocale(\"HOSTNAME_RESOLUTION_FAILED\"));\n\tlet connection = await availableAPIs.connfulConnect({\n\t\tgate: url.username || \"blog\",\n\t\taddress,\n\t\tverifyByDomain: hostname\n\t});\n\tawait availableAPIs.connfulConnectionSettled(connection);\n\tawait availableAPIs.connfulWrite({\n\t\tconnectionID: connection,\n\t\tdata: url.pathname + url.search,\n\t\thost: hostname\n\t});\n\tlet data = await availableAPIs.connfulRead(connection);\n\tdata = JSON.parse(data);\n\tlet chunks = [];\n\twhile (chunks.length != data.length) {\n\t\tlet newData = await availableAPIs.connfulRead(connection);\n\t\tnewData = JSON.parse(newData);\n\t\tchunks[newData.ctr] = newData.chunk;\n\t}\n\ttry {\n\t\tawait availableAPIs.connfulClose(connection);\n\t} catch {}\n\treturn { ...data, content: chunks.join(\"\") };\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","a4c23ba8deedc45fc931e8ff321d8c0edb52ce26ebedad9681b1af53b0891ebc6d5742e53ebf40c175e79138fa88dd9bbe0c9fe03e915318a01732882b57d77f":"// =====BEGIN MANIFEST=====\n// link: lrn:NETCONFIG_TITLE\n// signer: automaticSigner\n// fnName: networkInstaller\n// allow: RELOAD_NETWORK_CONFIG, IDENTIFY_SYSTEM, CSP_OPERATIONS, FS_READ, FS_WRITE, FS_REMOVE, FS_LIST_PARTITIONS, GET_LOCALE, GET_SERVER_URL, LIST_TASKS, GET_THEME, FS_BYPASS_PERMISSIONS\n// signature: 40e99fe854a9a23d939473764be794d2e044c1bc8805d55e479bdfbf04926e22c567c2db396c95c35f4ae137a4ff5a3fd5bf70683584b122c5acb263e8e0ae0a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"NETCONFIG_TITLE\") || \"PCOS Network configurator\");\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"IDENTIFY_SYSTEM\", \"CSP_OPERATIONS\", \"FS_READ\", \"FS_WRITE\", \"FS_LIST_PARTITIONS\", \"GET_LOCALE\", \"GET_SERVER_URL\", \"LIST_TASKS\" ];\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\ttry {\n\t\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\t} catch {}\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_DENY\") || \"Insufficient privileges.\";\n\t\treturn;\n\t}\n\tlet existingConfig = {};\n\ttry {\n\t\texistingConfig = JSON.parse(await availableAPIs.fs_read({\n\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/network.json\"\n\t\t}));\n\t} catch {}\n\tlet descriptionNetworkURL = document.createElement(\"span\");\n\tlet descriptionUCBits = document.createElement(\"span\");\n\tlet descriptionHostname = document.createElement(\"span\");\n\tlet descriptionUpdates = document.createElement(\"span\");\n\tlet paramNetworkURL = document.createElement(\"input\");\n\tlet ucBits = document.createElement(\"input\");\n\tlet paramHostname = document.createElement(\"input\");\n\tlet paramUpdates = document.createElement(\"input\");\n\tlet saveBtn = document.createElement(\"button\");\n\tlet updatePredictBtn = document.createElement(\"button\");\n\tlet addressPrediction = document.createElement(\"span\");\n\tlet form = document.createElement(\"form\");\n\tlet originUrl = new URL(await availableAPIs.runningServer());\n\toriginUrl.protocol = \"ws\" + (originUrl.protocol == \"https:\" ? \"s\" : \"\") + \":\";\n\tdescriptionNetworkURL.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_URLF\");\n\tdescriptionUCBits.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_UC\");\n\tdescriptionHostname.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_HOSTNAME\");\n\tdescriptionUpdates.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_UPDATES\");\n\tparamNetworkURL.value = existingConfig.url || originUrl.origin;\n\tucBits.type = \"number\";\n\tucBits.min = 0;\n\tucBits.max = 4294967295;\n\tucBits.value = existingConfig.ucBits;\n\tparamHostname.value = existingConfig.hostname || \"\";\n\tparamUpdates.value = existingConfig.updates || \"pcosserver.pc\";\n\tsaveBtn.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_SAVE\");\n\tupdatePredictBtn.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_PREDICT\");\n\tform.appendChild(descriptionNetworkURL);\n\tform.appendChild(paramNetworkURL);\n\tform.appendChild(document.createElement(\"br\"));\n\tform.appendChild(descriptionUCBits);\n\tform.appendChild(ucBits);\n\tform.appendChild(document.createElement(\"br\"));\n\tform.appendChild(descriptionHostname);\n\tform.appendChild(paramHostname);\n\tform.appendChild(document.createElement(\"br\"));\n\tform.appendChild(descriptionUpdates);\n\tform.appendChild(paramUpdates);\n\tform.appendChild(document.createElement(\"br\"));\n\tform.appendChild(saveBtn);\n\tform.appendChild(updatePredictBtn);\n\taddressPrediction.innerText = await availableAPIs.lookupLocale(\"EMPTY_STATUSBAR\");\n\tdocument.body.appendChild(form);\n\tdocument.body.appendChild(document.createElement(\"hr\"));\n\tdocument.body.appendChild(addressPrediction);\n\tsaveBtn.addEventListener(\"click\", async function(e) {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/etc/network.json\",\n\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\turl: paramNetworkURL.value,\n\t\t\t\t\tucBits: Math.round(Math.abs(Number(ucBits.value))),\n\t\t\t\t\thostname: paramHostname.value,\n\t\t\t\t\tupdates: paramUpdates.value\n\t\t\t\t}, null, \"\\t\")\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tawait availableAPIs.fs_rm({\n\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/apps/services/networkd.lnk\"\n\t\t\t\t});\n\t\t\t} catch {}\n\t\t\ttry {\n\t\t\t\tawait availableAPIs.reloadNetworkConfig();\n\t\t\t} catch {}\n\t\t\taddressPrediction.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_SAVE_OK\");\n\t\t} catch {\n\t\t\taddressPrediction.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_SAVE_FAIL\");\n\t\t}\n\t});\n\tupdatePredictBtn.addEventListener(\"click\", function(e) {\n\t\te.preventDefault();\n\t\tupdatePrediction({ addressPrediction, ucBits });\n\t});\n})();\nfunction findInputNumberString(output, chars) {\n\tlet inputNum = 0n;\n\tfor (let i = 0n; i < output.length; i++) {\n\t\tconst charIndex = chars.indexOf(output[i]);\n\t\tif (charIndex === -1) throw new Error(`Invalid character '${output[i]}' in output string`);\n\t\tinputNum = inputNum * BigInt(chars.length) + BigInt(charIndex);\n\t}\n\treturn inputNum;\n}\nfunction generateString(num, chars) {\n\tlet base = BigInt(chars.length), result = '';\n\twhile (num > 0n) result = chars[Number(num % base)] + result, num /= base;\n\treturn result;\n}\n\nasync function updatePrediction(elementInterface) {\n\tlet publicSystemID = await availableAPIs.getPublicSystemID();\n\tif (!publicSystemID) return elementInterface.addressPrediction.innerText = await availableAPIs.lookupLocale(\"NETCONFIG_SYSIDM\");\n\tlet sysIDx = u8aToHex(new Uint8Array(await availableAPIs.cspOperation({\n\t\tcspProvider: \"basic\",\n\t\toperation: \"digest\",\n\t\tcspArgument: {\n\t\t\talgorithm: \"SHA-256\",\n\t\t\tdata: hexToU8A(generateString(findInputNumberString(publicSystemID.x, base64Charset), hexCharset))\n\t\t}\n\t}))).padStart(16, \"0\").slice(0, 16);\n\tlet ucPredict = Math.round(Math.abs(Number(elementInterface.ucBits.value))).toString(16).padStart(8, \"0\").slice(0, 8);\n\treturn elementInterface.addressPrediction.innerText = (\"xxxxxxxx\" + sysIDx + ucPredict).match(/.{1,4}/g).join(\":\");\n}\nlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\nlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\nlet base64Charset = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\nlet hexCharset = \"0123456789abcdef\";\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","2b7b6bb1fc10a22ade2336809713f412af26cf4bde97afe4db7a365b70a43b22252f0f081ca73701ac8e0d78f5d41262c6f8796d5c99d72a11a55dc01b678a3d":"// =====BEGIN MANIFEST=====\n// link: lrn:PERSONAL_SECURITY_TITLE\n// signer: automaticSigner\n// allow: SET_SECURITY_CHECKS, GET_USER_INFO, CSP_OPERATIONS, GET_LOCALE, GET_THEME\n// signature: 14abc95ac974897136d2a4280f446972ed7c06e1be999d0aaa00c03b1e8bad658dc68bc9f4853a0d373458d9bd849ffbfd3cd9807996eca89c23d729b9f7b800\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"PERSONAL_SECURITY_TITLE\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"SET_SECURITY_CHECKS\", \"GET_USER_INFO\", \"CSP_OPERATIONS\" ];\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"PERSONAL_SECURITY_DENY\");\n\t\tlet currentToken = await availableAPIs.getProcessToken();\n\t\tlet newToken = await availableAPIs.consentGetToken({\n\t\t\tintent: await availableAPIs.lookupLocale(\"PERSONAL_SECURITY_INTENT\"),\n\t\t\tname: await availableAPIs.lookupLocale(\"PERSONAL_SECURITY_TITLE\"),\n\t\t\tdesiredUser: await availableAPIs.getUser()\n\t\t});\n\t\tif (!newToken) return;\n\t\tawait availableAPIs.setProcessToken(newToken);\n\t\tawait availableAPIs.revokeToken(currentToken);\n\t\tprivileges = await availableAPIs.getPrivileges();\n\t\tif (!checklist.every(p => privileges.includes(p))) return;\n\t}\n\tlet toolbar = document.createElement(\"div\");\n\tlet saveBtn = document.createElement(\"button\");\n\tlet loadBtn = document.createElement(\"button\");\n\tlet addBtn = document.createElement(\"button\");\n\ttoolbar.appendChild(saveBtn);\n\ttoolbar.appendChild(loadBtn);\n\ttoolbar.appendChild(addBtn);\n\tsaveBtn.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\tloadBtn.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\taddBtn.innerText = await availableAPIs.lookupLocale(\"ADD_BTN\");\n\tsaveBtn.onclick = async function() {\n\t\tawait availableAPIs.setOwnSecurityChecks({ checks });\n\t\tchecks = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser(), sensitive: true })).securityChecks;\n\t\treparse();\n\t};\n\tloadBtn.onclick = async function() {\n\t\tchecks = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser(), sensitive: true })).securityChecks;\n\t\treparse();\n\t};\n\taddBtn.onclick = function() {\n\t\tadd();\n\t}\n\tdocument.body.appendChild(toolbar);\n\tdocument.body.appendChild(document.createElement(\"hr\"));\n\tlet secCheck = document.createElement(\"div\");\n\tlet types = [\n\t\t\"pbkdf2\",\n\t\t\"informative\",\n\t\t\"informative_deny\",\n\t\t\"timeout\",\n\t\t\"timeout_deny\",\n\t\t\"serverReport\",\n\t\t\"pc-totp\",\n\t\t\"totp\",\n\t\t\"workingHours\",\n\t\t\"zkpp\"\n\t];\n\tlet checks = (await availableAPIs.getUserInfo({ desiredUser: await availableAPIs.getUser(), sensitive: true })).securityChecks;\n\n\tlet checkLocales = {\n\t\t\"pbkdf2\": \"PBKDF2_OPTION\",\n\t\t\"informative\": \"INFORMATIVE_MESSAGE_OPTION\",\n\t\t\"informative_deny\": \"INFORMATIVE_MESSAGE_DENY_OPTION\",\n\t\t\"timeout\": \"TIMEOUT_OPTION\",\n\t\t\"timeout_deny\": \"TIMEOUT_DENY_OPTION\",\n\t\t\"serverReport\": \"SERVER_REPORT_OPTION\",\n\t\t\"pc-totp\": \"PCTOTP_OPTION\",\n\t\t\"totp\": \"RFCTOTP_OPTION\",\n\t\t\"workingHours\": \"WORKING_HOURS_OPTION\",\n\t\t\"zkpp\": \"ZKPP_OPTION\"\n\t};\n\n\tasync function reparse() {\n\t\tsecCheck.remove();\n\t\tsecCheck = document.createElement(\"div\");\n\n\t\tfor (let check in checks) {\n\t\t\tlet checkInfo = checks[check];\n\t\t\tlet checkDiv = document.createElement(\"div\");\n\t\t\tcheckDiv.style.display = \"flex\";\n\t\t\tlet checkTitle = document.createElement(\"div\");\n\t\t\tcheckTitle.style.flex = 100;\n\t\t\tlet checkBtns = document.createElement(\"div\");\n\t\t\tcheckTitle.innerText = await availableAPIs.lookupLocale(checkLocales[checkInfo.type]);\n\t\t\tlet btnConfig = document.createElement(\"button\");\n\t\t\tlet btnUp = document.createElement(\"button\");\n\t\t\tlet btnDown = document.createElement(\"button\");\n\t\t\tlet btnDelete = document.createElement(\"button\");\n\t\t\tbtnConfig.innerText = \"*\";\n\t\t\tbtnUp.innerText = \"/\\\\\";\n\t\t\tbtnUp.disabled = check == 0;\n\t\t\tbtnDown.disabled = check == checks.length - 1;\n\t\t\tbtnDown.innerText = \"\\\\/\";\n\t\t\tbtnDelete.innerText = \"x\";\n\t\t\tcheckBtns.appendChild(btnConfig);\n\t\t\tcheckBtns.appendChild(btnUp);\n\t\t\tcheckBtns.appendChild(btnDown);\n\t\t\tcheckBtns.appendChild(btnDelete);\n\t\t\tcheckDiv.appendChild(checkTitle);\n\t\t\tcheckDiv.appendChild(checkBtns);\n\t\t\tbtnDelete.addEventListener(\"click\", function() {\n\t\t\t\tchecks.splice(check, 1);\n\t\t\t\treparse();\n\t\t\t});\n\t\t\tsecCheck.appendChild(checkDiv);\n\t\t\tbtnUp.addEventListener(\"click\", function() {\n\t\t\t\tchecks.splice(check, 1);\n\t\t\t\tchecks.splice(check - 1, 0, checkInfo);\n\t\t\t\treparse();\n\t\t\t});\n\t\t\tbtnDown.addEventListener(\"click\", function() {\n\t\t\t\tchecks.splice(check, 1);\n\t\t\t\tchecks.splice(check - 1 + 2, 0, checkInfo);\n\t\t\t\treparse();\n\t\t\t});\n\t\t\tbtnConfig.addEventListener(\"click\", function() {\n\t\t\t\tcheckConfig(check);\n\t\t\t});\n\t\t}\n\t\tdocument.body.appendChild(secCheck);\n\t}\n\n\tasync function checkConfig(check) {\n\t\tsecCheck.remove();\n\t\tsecCheck = document.createElement(\"div\");\n\t\tlet checkInfo = checks[check];\n\t\tlet checkBack = document.createElement(\"button\");\n\t\tlet checkName = document.createElement(\"b\");\n\t\tcheckBack.innerText = \"<-\";\n\t\tcheckName.innerText = await availableAPIs.lookupLocale(checkLocales[checkInfo.type]);\n\t\tsecCheck.appendChild(checkBack);\n\t\tsecCheck.appendChild(checkName);\n\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\tcheckBack.addEventListener(\"click\", function() {\n\t\t\treparse();\n\t\t});\n\t\tif (checkInfo.type == \"pbkdf2\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = await availableAPIs.lookupLocale(\"PASSWORD\") + \": \";\n\t\t\tinputBox.type = \"password\";\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tinputAccept.addEventListener(\"click\", async function() {\n\t\t\t\tlet salt = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"random\",\n\t\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t\t});\n\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\tkeyData: new TextEncoder().encode(inputBox.value),\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: \"PBKDF2\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\tkeyUsages: [\"deriveBits\", \"deriveKey\"]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet derived = new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\tsalt: salt,\n\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbaseKey: key,\n\t\t\t\t\t\tlength: 256\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\tcspArgument: key\n\t\t\t\t});\n\t\t\t\tchecks[check] = {\n\t\t\t\t\ttype: \"pbkdf2\",\n\t\t\t\t\thash: u8aToHex(derived),\n\t\t\t\t\tsalt: u8aToHex(salt)\n\t\t\t\t};\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"informative\" || checkInfo.type == \"informative_deny\") {\n\t\t\tlet textarea = document.createElement(\"textarea\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\ttextarea.placeholder = await availableAPIs.lookupLocale(\"MESSAGE_ENTER\");\n\t\t\ttextarea.value = checkInfo.message;\n\t\t\tsecCheck.appendChild(textarea);\n\t\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].message = textarea.value;\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"timeout\" || checkInfo.type == \"timeout_deny\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = await availableAPIs.lookupLocale(\"TIMEOUT_FIELD\") + \": \";\n\t\t\tinputBox.type = \"number\";\n\t\t\tinputBox.value = checkInfo.timeout;\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].timeout = inputBox.value;\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"serverReport\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = \"URL: \";\n\t\t\tinputBox.type = \"text\";\n\t\t\tinputBox.placeholder = \"https://example.org/report\";\n\t\t\tinputBox.value = checkInfo.url;\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].url = inputBox.value;\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"pc-totp\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet regen = document.createElement(\"button\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = await availableAPIs.lookupLocale(\"SECRET_FIELD_TXT\") + \": \";\n\t\t\tinputBox.type = \"text\";\n\t\t\tinputBox.value = checkInfo.secret;\n\t\t\tregen.innerText = await availableAPIs.lookupLocale(\"REGENERATE\");\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\t\tsecCheck.appendChild(regen);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tregen.addEventListener(\"click\", async function() {\n\t\t\t\tlet randomValues = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"random\",\n\t\t\t\t\tcspArgument: new Uint8Array(32)\n\t\t\t\t});\n\t\t\t\tinputBox.value = Array.from(randomValues).map(x => x.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t});\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].secret = inputBox.value;\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"totp\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet regen = document.createElement(\"button\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = await availableAPIs.lookupLocale(\"SECRET_FIELD_HEX\") + \": \";\n\t\t\tinputBox.type = \"text\";\n\t\t\tinputBox.value = checkInfo.secret;\n\t\t\tregen.innerText = await availableAPIs.lookupLocale(\"REGENERATE\");\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\t\tsecCheck.appendChild(regen);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tregen.addEventListener(\"click\", async function() {\n\t\t\t\tlet randomValues = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"random\",\n\t\t\t\t\tcspArgument: new Uint8Array(10)\n\t\t\t\t});\n\t\t\t\tinputBox.value = Array.from(randomValues).map(x => x.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t});\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].secret = inputBox.value;\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"workingHours\") {\n\t\t\tlet inputStartDescribe = document.createElement(\"span\");\n\t\t\tlet inputEndDescribe = document.createElement(\"span\");\n\t\t\tlet inputBoxStart = document.createElement(\"input\");\n\t\t\tlet inputBoxEnd = document.createElement(\"input\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputStartDescribe.innerText = await availableAPIs.lookupLocale(\"START_TIME_FIELD\") + \": \";\n\t\t\tinputBoxStart.type = \"time\";\n\t\t\tinputBoxStart.step = 1;\n\t\t\tif (checkInfo.start) inputBoxStart.value = String(checkInfo.start.hours).padStart(2, \"0\") + \":\" + String(checkInfo.start.minutes).padStart(2, \"0\") + \":\" + String(checkInfo.start.seconds).padStart(2, \"0\");\n\t\t\tinputEndDescribe.innerText = await availableAPIs.lookupLocale(\"END_TIME_FIELD\") + \": \";\n\t\t\tinputBoxEnd.type = \"time\";\n\t\t\tinputBoxEnd.step = 1;\n\t\t\tif (checkInfo.end) inputBoxEnd.value = String(checkInfo.end.hours).padStart(2, \"0\") + \":\" + String(checkInfo.end.minutes).padStart(2, \"0\") + \":\" + String(checkInfo.end.seconds).padStart(2, \"0\");\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tsecCheck.appendChild(inputStartDescribe);\n\t\t\tsecCheck.appendChild(inputBoxStart);\n\t\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\t\tsecCheck.appendChild(inputEndDescribe);\n\t\t\tsecCheck.appendChild(inputBoxEnd);\n\t\t\tsecCheck.appendChild(document.createElement(\"br\"));\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.addEventListener(\"click\", function() {\n\t\t\t\tchecks[check].start = {\n\t\t\t\t\thours: Number(inputBoxStart.value.split(\":\")[0]),\n\t\t\t\t\tminutes: Number(inputBoxStart.value.split(\":\")[1]),\n\t\t\t\t\tseconds: Number(inputBoxStart.value.split(\":\")[2])\n\t\t\t\t};\n\t\t\t\tchecks[check].end = {\n\t\t\t\t\thours: Number(inputBoxEnd.value.split(\":\")[0]),\n\t\t\t\t\tminutes: Number(inputBoxEnd.value.split(\":\")[1]),\n\t\t\t\t\tseconds: Number(inputBoxEnd.value.split(\":\")[2])\n\t\t\t\t};\n\t\t\t\treparse();\n\t\t\t});\n\t\t} else if (checkInfo.type == \"zkpp\") {\n\t\t\tlet inputDescribe = document.createElement(\"span\");\n\t\t\tlet inputBox = document.createElement(\"input\");\n\t\t\tlet inputAccept = document.createElement(\"button\");\n\t\t\tinputDescribe.innerText = await availableAPIs.lookupLocale(\"PASSWORD\") + \": \";\n\t\t\tinputBox.type = \"password\";\n\t\t\tsecCheck.appendChild(inputDescribe);\n\t\t\tsecCheck.appendChild(inputBox);\n\t\t\tsecCheck.appendChild(inputAccept);\n\t\t\tinputAccept.innerText = await availableAPIs.lookupLocale(\"CONFIRM\");\n\t\t\tinputAccept.addEventListener(\"click\", async function() {\n\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\tkeyData: new TextEncoder().encode(inputBox.value),\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: \"PBKDF2\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\tkeyUsages: [\"deriveBits\", \"deriveKey\"]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet derived = new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\tsalt: new Uint8Array(32),\n\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbaseKey: key,\n\t\t\t\t\t\tlength: 256\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\tcspArgument: key\n\t\t\t\t});\n\t\t\t\tlet publicKey = (await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\toperation: \"deriveKey\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\ttype: \"sign\",\n\t\t\t\t\t\tseed: derived\n\t\t\t\t\t}\n\t\t\t\t})).publicKey;\n\t\t\t\tchecks[check] = {\n\t\t\t\t\ttype: \"zkpp\",\n\t\t\t\t\tpublicKey: u8aToHex(publicKey)\n\t\t\t\t};\n\t\t\t\treparse();\n\t\t\t});\n\t\t}\n\t\tdocument.body.appendChild(secCheck);\n\t}\n\n\tasync function add() {\n\t\tsecCheck.remove();\n\t\tsecCheck = document.createElement(\"div\");\n\t\tlet backBtn = document.createElement(\"button\");\n\t\tbackBtn.innerText = \"<-\";\n\t\tbackBtn.addEventListener(\"click\", function() {\n\t\t\treparse();\n\t\t});\n\t\tsecCheck.appendChild(backBtn);\n\t\tfor (let type of types) {\n\t\t\tlet btn = document.createElement(\"button\");\n\t\t\tbtn.innerText = await availableAPIs.lookupLocale(checkLocales[type]);\n\t\t\tbtn.addEventListener(\"click\", function() {\n\t\t\t\tchecks.push({ type });\n\t\t\t\treparse();\n\t\t\t});\n\t\t\tsecCheck.appendChild(btn);\n\t\t}\n\t\tdocument.body.appendChild(secCheck);\n\t}\n\treparse();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","8d05751885d04b740272dccec0ee79bddd0da8b1a684deb3acfef4a56d9369ad97f3f3b5b21a7c80240a5e9001ddfaee0cc5a2be0725b398b836ff60c4b6a9a1":"// =====BEGIN MANIFEST=====\n// link: lrn:SYSADMIN_TOOLS_TITLE\n// signer: automaticSigner\n// fnName: sysadminInstaller\n// allow: SYSTEM_SHUTDOWN, FETCH_SEND, LLDISK_WRITE, RUN_KLVL_CODE, FS_READ, FS_WRITE, FS_LIST_PARTITIONS, GET_LOCALE, GET_THEME, IPC_CREATE_PIPE, IPC_LISTEN_PIPE, FS_BYPASS_PERMISSIONS, LLDISK_READ, LLDISK_LIST_PARTITIONS, LLDISK_INIT_PARTITIONS, LLDISK_REMOVE, LLDISK_IDB_READ, LLDISK_IDB_WRITE, LLDISK_IDB_REMOVE, LLDISK_IDB_LIST, LLDISK_IDB_SYNC, IPC_SEND_PIPE, START_TASK, FS_REMOVE, FS_MOUNT, SET_FIRMWARE, GET_USER_INFO\n// signature: 94dbc2335fba220812b7a26fd0ff5c95b251900c9a49901f40604c7232348b4c354db07a84fcda8a784928b4c4fd8bdc701e2cfc5c16e149964804afe220b901\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_TITLE\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tlet container = document.createElement(\"div\");\n\tlet extraActivities = document.createElement(\"div\");\n\tlet fsckOrderButton = document.createElement(\"button\");\n\tlet fsckDiscardButton = document.createElement(\"button\");\n\tlet wipeSystemButton = document.createElement(\"button\");\n\tlet updateFirmwareButton = document.createElement(\"button\");\n\tlet imagingButton = document.createElement(\"button\");\n\tlet changeLocale = document.createElement(\"button\");\n\tfsckOrderButton.innerText = await availableAPIs.lookupLocale(\"FSCK_BUTTON\");\n\tfsckDiscardButton.innerText = await availableAPIs.lookupLocale(\"DISCARD_BUTTON\");\n\twipeSystemButton.innerText = await availableAPIs.lookupLocale(\"SWIPE_BUTTON\");\n\tupdateFirmwareButton.innerText = await availableAPIs.lookupLocale(\"UPDATEFW_BUTTON\");\n\timagingButton.innerText = await availableAPIs.lookupLocale(\"SYSTEM_IMAGING\");\n\tchangeLocale.innerText = await availableAPIs.lookupLocale(\"CHANGE_LOCALE\");\n\tfsckOrderButton.addEventListener(\"click\", async function() {\n\t\tlet checklist = [ \"SYSTEM_SHUTDOWN\", \"FS_WRITE\", \"FS_BYPASS_PERMISSIONS\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SETTING_FSCK_FLAG\");\n\t\ttry {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/.fsck\",\n\t\t\t\tdata: \"recover\"\n\t\t\t});\n\t\t} catch {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SETTING_FSCK_FLAG_FAILED\");\n\t\t\tcontainer.hidden = false;\n\t\t\treturn;\n\t\t}\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"RESTARTING\");\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: true\n\t\t});\n\t});\n\tfsckDiscardButton.addEventListener(\"click\", async function() {\n\t\tlet checklist = [ \"SYSTEM_SHUTDOWN\", \"FS_WRITE\", \"FS_BYPASS_PERMISSIONS\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SETTING_FSCK_FLAG\");\n\t\ttry {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/.fsck\",\n\t\t\t\tdata: \"discard\"\n\t\t\t});\n\t\t} catch {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SETTING_FSCK_FLAG_FAILED\");\n\t\t\tcontainer.hidden = false;\n\t\t\treturn;\n\t\t}\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"RESTARTING\");\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: true\n\t\t});\n\t});\n\twipeSystemButton.addEventListener(\"click\", async function() {\n\t\tcontainer.hidden = true;\n\t\tlet promptMessage = document.createElement(\"span\");\n\t\tlet inputBox = document.createElement(\"input\");\n\t\tlet randomString = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n\t\tpromptMessage.innerText = \"Copy-paste \" + randomString + \" to confirm: \";\n\t\textraActivities.innerText = \"\";\n\t\textraActivities.appendChild(promptMessage);\n\t\textraActivities.appendChild(inputBox);\n\t\tawait new Promise(function(resolve, reject) {\n\t\t\tinputBox.oninput = async function() {\n\t\t\t\tif (inputBox.value.trim() == randomString) resolve();\n\t\t\t\telse {\n\t\t\t\t\tcontainer.hidden = false;\n\t\t\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\t\t\treject(\"Invalid confirmation\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet checklist = [ \"FS_REMOVE\", \"FS_MOUNT\", \"FS_READ\", \"LLDISK_IDB_READ\", \"LLDISK_IDB_WRITE\", \"LLDISK_IDB_REMOVE\", \"LLDISK_IDB_LIST\", \"LLDISK_IDB_SYNC\", \"SYSTEM_SHUTDOWN\", \"FS_BYPASS_PERMISSIONS\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\tcontainer.hidden = false;\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tawait availableAPIs.closeability(false);\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"WIPING_SYSTEM\");\n\t\ttry {\n\t\t\tawait availableAPIs.fs_mount({\n\t\t\t\tmountpoint: \"pref\",\n\t\t\t\tfilesystem: \"preferenceMount\",\n\t\t\t\tfilesystemOptions: {}\n\t\t\t});\n\t\t\tlet prefOpts = await availableAPIs.fs_ls({ path: \"pref\" });\n\t\t\tfor (let prefOpt of prefOpts) await availableAPIs.fs_rm({ path: \"pref/\" + prefOpt });\n\t\t\tlet idb_keys = await availableAPIs.lldaIDBList();\n\t\t\tfor (let key of idb_keys) {\n\t\t\t\tlet partLen = (await availableAPIs.lldaIDBRead({ key })).length;\n\t\t\t\tlet randomness = \"\";\n\t\t\t\twhile (randomness.length < partLen) {\n\t\t\t\t\tlet remainingBytes = Math.round((partLen - randomness.length) / 2);\n\t\t\t\t\tif (remainingBytes > 65536) remainingBytes = 65536;\n\t\t\t\t\trandomness += crypto.getRandomValues(new Uint8Array(remainingBytes)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\t}\n\t\t\t\tawait availableAPIs.lldaIDBWrite({ key, value: randomness });\n\t\t\t\tawait availableAPIs.lldaIDBSync();\n\t\t\t\tawait availableAPIs.lldaIDBRemove({ key });\n\t\t\t\tawait availableAPIs.lldaIDBSync();\n\t\t\t}\n\t\t\t\n\t\t\tawait availableAPIs.shutdown({});\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.closeability(true);\n\t\t\tconsole.error(e);\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"WIPING_SYSTEM_FAILED\");\n\t\t\tcontainer.hidden = false;\n\t\t\treturn;\n\t\t}\n\t});\n\t\n\tupdateFirmwareButton.addEventListener(\"click\", async function() {\n\t\tlet checklist = [ \"FETCH_SEND\", \"SYSTEM_SHUTDOWN\", \"SET_FIRMWARE\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tawait availableAPIs.closeability(false);\n\t\tcontainer.hidden = true;\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"UPDATEFW_DOWNLOADING\");\n\t\tlet fwArchive;\n\t\ttry {\n\t\t\tfwArchive = await availableAPIs.fetchSend({\n\t\t\t\turl: \"/init.js\",\n\t\t\t\tinit: {}\n\t\t\t});\n\t\t\tif (!fwArchive.ok) throw new Error(\"Download failed\");\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.closeability(true);\n\t\t\tconsole.error(e);\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"UPDATEFW_DOWNLOAD_FAILED\");\n\t\t\tcontainer.hidden = false;\n\t\t\treturn;\n\t\t}\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"UPDATEFW_DECODING\");\n\t\tfwArchive = fwArchive.arrayBuffer;\n\t\tfwArchive = new TextDecoder().decode(fwArchive);\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"UPDATEFW_SETTING\");\n\t\tawait availableAPIs.setFirmware(fwArchive);\n\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"RESTARTING\");\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: true\n\t\t});\n\t});\n\timagingButton.addEventListener(\"click\", async function() {\n\t\tlet checklist = [ \"GET_THEME\", \"LLDISK_READ\", \"LLDISK_WRITE\", \"LLDISK_LIST_PARTITIONS\", \"LLDISK_INIT_PARTITIONS\", \"LLDISK_REMOVE\", \"LLDISK_IDB_READ\", \"LLDISK_IDB_WRITE\", \"LLDISK_IDB_REMOVE\", \"LLDISK_IDB_LIST\", \"LLDISK_IDB_SYNC\", \"FS_READ\", \"FS_WRITE\", \"FS_BYPASS_PERMISSIONS\", \"SYSTEM_SHUTDOWN\", \"FS_LIST_PARTITIONS\", \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"IPC_CREATE_PIPE\", \"IPC_LISTEN_PIPE\", \"START_TASK\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"SYSTEM_IMAGING\"));\n\t\timaging();\n\t});\n\tchangeLocale.addEventListener(\"click\", async function() {\n\t\tlet checklist = [ \"GET_THEME\", \"GET_LOCALE\", \"FS_WRITE\", \"FS_BYPASS_PERMISSIONS\", \"RUN_KLVL_CODE\", \"FS_LIST_PARTITIONS\" ];\n\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SYSADMIN_TOOLS_PRIVFAIL\");\n\t\t\treturn;\n\t\t}\n\t\tcontainer.hidden = true;\n\t\textraActivities.innerText = \"\";\n\t\tlet locales = await availableAPIs.installedLocales();\n\t\tlet localeSelect = document.createElement(\"select\");\n\t\tlet localeZero = document.createElement(\"option\");\n\t\tlocaleZero.value = \"\";\n\t\tlocaleZero.innerText = \" 🌐 Language 🌐 \";\n\t\tlocaleZero.selected = true;\n\t\tlocaleZero.disabled = true;\n\t\tlocaleZero.hidden = true;\n\t\tlocaleSelect.appendChild(localeZero);\n\t\tfor (let locale of locales) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = locale;\n\t\t\toption.innerText = await availableAPIs.lookupOtherLocale({ key: \"LOCALE_NAME\", locale });\n\t\t\tlocaleSelect.appendChild(option);\n\t\t}\n\t\tlocaleSelect.addEventListener(\"change\", async function() {\n\t\t\tawait availableAPIs.runKlvlCode(\"modules.locales.defaultLocale = \" + JSON.stringify(localeSelect.value));\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/06-localeset.js\", \n\t\t\t\tdata: \"modules.locales.defaultLocale = \" + JSON.stringify(await availableAPIs.osLocale()) + \";\\n\"\n\t\t\t});\n\t\t\ttry {\n\t\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"GENERATING_KERNEL\");\n\t\t\t\tlet entireBoot = [];\n\t\t\t\tlet bootFiles = await availableAPIs.fs_ls({ path: (await availableAPIs.getSystemMount()) + \"/boot\" });\n\t\t\t\tif (bootFiles.includes(\"00-compiled.js\")) bootFiles.splice(bootFiles.indexOf(\"00-compiled.js\"), 1);\n\t\t\t\tif (bootFiles.includes(\"99-zzpatchfinisher.js\")) bootFiles.splice(bootFiles.indexOf(\"99-zzpatchfinisher.js\"), 1);\n\t\t\t\tfor (let bootFile of bootFiles) {\n\t\t\t\t\tentireBoot.push([ bootFile, await availableAPIs.fs_read({\n\t\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/\" + bootFile\n\t\t\t\t\t}) ]);\n\t\t\t\t}\n\t\t\t\tentireBoot = entireBoot.sort((a, b) => a[0].localeCompare(b[0]))\n\t\t\t\t\t.map(a => \"// modules/.../boot/\" + a[0] + \"\\n\" + a[1]).join(\"\\n\");\n\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/00-compiled.js\",\n\t\t\t\t\tdata: entireBoot + \"\\nreturn;/*\"\n\t\t\t\t});\n\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\tpath: (await availableAPIs.getSystemMount()) + \"/boot/99-zzpatchfinisher.js\",\n\t\t\t\t\tdata: \"*/\"\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"REGENERATING_KERNEL_FAILED\");\n\t\t\t}\n\t\t\tlocaleSelect.remove();\n\t\t\tcontainer.hidden = false;\n\t\t\textraActivities.innerText = await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\");\n\t\t});\n\t\textraActivities.appendChild(localeSelect);\n\t});\n\tcontainer.appendChild(fsckOrderButton);\n\tcontainer.appendChild(fsckDiscardButton);\n\tcontainer.appendChild(wipeSystemButton);\n\tcontainer.appendChild(updateFirmwareButton);\n\tcontainer.appendChild(imagingButton);\n\tcontainer.appendChild(changeLocale);\n\tdocument.body.appendChild(container);\n\tdocument.body.appendChild(extraActivities);\n})();\nfunction imaging() {\n\tasync function mainPage() {\n\t\tdocument.body.innerText = \"\";\n\t\tlet create = document.createElement(\"button\");\n\t\tlet restore = document.createElement(\"button\");\n\t\tcreate.innerText = await availableAPIs.lookupLocale(\"CREATE_IMAGE\");\n\t\trestore.innerText = await availableAPIs.lookupLocale(\"RESTORE_IMAGE\");\n\t\tcreate.onclick = createPage;\n\t\trestore.onclick = restorePage;\n\t\tdocument.body.appendChild(create);\n\t\tdocument.body.appendChild(restore);\n\t}\n\n\tasync function createPage() {\n\t\tdocument.body.innerText = \"\";\n\t\tlet backBtn = document.createElement(\"button\");\n\t\tlet pageTitle = document.createElement(\"span\");\n\t\tlet selectedFileLabel = document.createElement(\"label\");\n\t\tlet selectedFile = document.createElement(\"input\");\n\t\tlet selectedFileButton = document.createElement(\"button\");\n\t\tlet createBtn = document.createElement(\"button\");\n\t\tlet progressBar = document.createElement(\"progress\");\n\t\tlet outcome = document.createElement(\"span\");\n\t\tbackBtn.innerText = \"<-\";\n\t\tpageTitle.innerText = await availableAPIs.lookupLocale(\"CREATE_IMAGE\");\n\t\tselectedFileLabel.innerText = await availableAPIs.lookupLocale(\"SELECT_FILE_PROMPT\");\n\t\tselectedFileButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\t\tcreateBtn.innerText = await availableAPIs.lookupLocale(\"CREATE_IMAGE\");\n\t\toutcome.innerText = await availableAPIs.lookupLocale(\"EMPTY_STATUSBAR\");\n\t\tprogressBar.hidden = true;\n\t\tdocument.body.appendChild(backBtn);\n\t\tdocument.body.appendChild(pageTitle);\n\t\tdocument.body.appendChild(document.createElement(\"hr\"));\n\t\tdocument.body.appendChild(selectedFileLabel);\n\t\tdocument.body.appendChild(selectedFile);\n\t\tdocument.body.appendChild(selectedFileButton);\n\t\tdocument.body.appendChild(document.createElement(\"hr\"));\n\t\tdocument.body.appendChild(createBtn);\n\t\tdocument.body.appendChild(progressBar);\n\t\tdocument.body.appendChild(outcome);\n\n\t\tbackBtn.onclick = mainPage;\n\t\tselectedFileButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) selectedFile.value = result.selected;\n\t\t}\n\n\t\tcreateBtn.onclick = async function() {\n\t\t\tbackBtn.disabled = true;\n\t\t\tselectedFile.disabled = true;\n\t\t\tselectedFileButton.disabled = true;\n\t\t\tcreateBtn.disabled = true;\n\t\t\tprogressBar.hidden = false;\n\t\t\toutcome.hidden = true;\n\t\t\tprogressBar.max = 0;\n\t\t\tprogressBar.value = 0;\n\t\t\tawait availableAPIs.closeability(false);\n\n\t\t\tasync function stopProduction(oc) {\n\t\t\t\tbackBtn.disabled = false;\n\t\t\t\tselectedFile.disabled = false;\n\t\t\t\tselectedFileButton.disabled = false;\n\t\t\t\tcreateBtn.disabled = false;\n\t\t\t\tprogressBar.hidden = true;\n\t\t\t\toutcome.hidden = false;\n\t\t\t\toutcome.innerText = oc;\n\t\t\t\tawait availableAPIs.closeability(true);\n\t\t\t}\n\n\t\t\tif (selectedFile.value == \"\") return stopProduction(await availableAPIs.lookupLocale(\"FILE_NOT_SPECIFIED\"));\n\t\t\tlet image = { metadata: {}, data: {} };\n\t\t\tlet subImage = [];\n\t\t\ttry { subImage = await availableAPIs.lldaList(); progressBar.max = subImage.length;\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"LISTING_PARTITIONS_FAILED\")); }\n\t\t\tfor (let partition of subImage) try { image.metadata[partition] = await availableAPIs.lldaRead({ partition }); progressBar.value++;\n\t\t\t\t} catch { return stopProduction((await availableAPIs.lookupLocale(\"READING_PARTITION_FAILED\")).replace(\"%s\", partition)); }\n\t\t\ttry { subImage = await availableAPIs.lldaIDBList(); progressBar.max += subImage.length;\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"LISTING_DATA_FAILED\")); } \n\t\t\tfor (let dataPart of subImage) try { image.data[dataPart] = await availableAPIs.lldaIDBRead({ key: dataPart }); progressBar.value++;\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"READING_DATA_FAILED\")); }\n\t\t\tsubImage = [];\n\t\t\ttry { await availableAPIs.fs_write({ path: selectedFile.value, data: JSON.stringify(image) });\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"WRITING_IMAGE_FAILED\")); }\n\t\t\tstopProduction(await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\"));\n\t\t}\n\t}\n\n\tasync function restorePage() {\n\t\tdocument.body.innerText = \"\";\n\t\tlet backBtn = document.createElement(\"button\");\n\t\tlet pageTitle = document.createElement(\"span\");\n\t\tlet selectedFileLabel = document.createElement(\"label\");\n\t\tlet selectedFile = document.createElement(\"input\");\n\t\tlet selectedFileButton = document.createElement(\"button\");\n\t\tlet rebootOnRestore = document.createElement(\"input\");\n\t\tlet rebootOnRestoreLabel = document.createElement(\"label\");\n\t\tlet mergeFlag = document.createElement(\"input\");\n\t\tlet mergeFlagLabel = document.createElement(\"label\");\n\t\tlet restoreBtn = document.createElement(\"button\");\n\t\tlet progressBar = document.createElement(\"progress\");\n\t\tlet outcome = document.createElement(\"span\");\n\t\tbackBtn.innerText = \"<-\";\n\t\tpageTitle.innerText = await availableAPIs.lookupLocale(\"RESTORE_IMAGE\");\n\t\tselectedFileLabel.innerText = await availableAPIs.lookupLocale(\"SELECT_FILE_PROMPT\");\n\t\tselectedFileButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\trestoreBtn.innerText = await availableAPIs.lookupLocale(\"RESTORE_IMAGE\");\n\t\trebootOnRestoreLabel.innerText = await availableAPIs.lookupLocale(\"REBOOT_ON_RESTORE\");\n\t\tmergeFlagLabel.innerText = await availableAPIs.lookupLocale(\"MERGE_STATES\");\n\t\toutcome.innerText = await availableAPIs.lookupLocale(\"EMPTY_STATUSBAR\");\n\t\trebootOnRestore.type = \"checkbox\";\n\t\tmergeFlag.type = \"checkbox\";\n\t\trebootOnRestore.id = \"rebootOnRestore\";\n\t\tmergeFlag.id = \"mergeFlag\";\n\t\trebootOnRestoreLabel.htmlFor = \"rebootOnRestore\";\n\t\tmergeFlagLabel.htmlFor = \"mergeFlag\";\n\t\tprogressBar.hidden = true;\n\t\tdocument.body.appendChild(backBtn);\n\t\tdocument.body.appendChild(pageTitle);\n\t\tdocument.body.appendChild(document.createElement(\"hr\"));\n\t\tdocument.body.appendChild(selectedFileLabel);\n\t\tdocument.body.appendChild(selectedFile);\n\t\tdocument.body.appendChild(selectedFileButton);\n\t\tdocument.body.appendChild(document.createElement(\"br\"));\n\t\tdocument.body.appendChild(rebootOnRestore);\n\t\tdocument.body.appendChild(rebootOnRestoreLabel);\n\t\tdocument.body.appendChild(document.createElement(\"br\"));\n\t\tdocument.body.appendChild(mergeFlag);\n\t\tdocument.body.appendChild(mergeFlagLabel);\n\t\tdocument.body.appendChild(document.createElement(\"hr\"));\n\t\tdocument.body.appendChild(restoreBtn);\n\t\tdocument.body.appendChild(progressBar);\n\t\tdocument.body.appendChild(outcome);\n\n\t\tbackBtn.onclick = mainPage;\n\t\tselectedFileButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) selectedFile.value = result.selected;\n\t\t}\n\n\t\trestoreBtn.onclick = async function() {\n\t\t\tbackBtn.disabled = true;\n\t\t\tselectedFile.disabled = true;\n\t\t\tselectedFileButton.disabled = true;\n\t\t\trestoreBtn.disabled = true;\n\t\t\trebootOnRestore.disabled = true;\n\t\t\tmergeFlag.disabled = true;\n\t\t\toutcome.hidden = true;\n\t\t\tprogressBar.hidden = false;\n\t\t\tprogressBar.max = 0;\n\t\t\tprogressBar.value = 0;\n\t\t\tawait availableAPIs.closeability(false);\n\n\t\t\tasync function stopProduction(oc) {\n\t\t\t\tbackBtn.disabled = false;\n\t\t\t\tselectedFile.disabled = false;\n\t\t\t\tselectedFileButton.disabled = false;\n\t\t\t\trestoreBtn.disabled = false;\n\t\t\t\trebootOnRestore.disabled = false;\n\t\t\t\tmergeFlag.disabled = false;\n\t\t\t\toutcome.hidden = false;\n\t\t\t\tprogressBar.hidden = true;\n\t\t\t\toutcome.innerText = oc;\n\t\t\t\tawait availableAPIs.closeability(true);\n\t\t\t}\n\n\t\t\tif (selectedFile.value == \"\") return stopProduction(await availableAPIs.lookupLocale(\"FILE_NOT_SPECIFIED\"));\n\t\t\ttry { await availableAPIs.lldaList();\n\t\t\t\t} catch { await availableAPIs.lldaInitPartitions(); }\n\n\t\t\tlet image;\n\t\t\ttry { image = JSON.parse(await availableAPIs.fs_read({ path: selectedFile.value }));\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"READING_IMAGE_FAILED\")); }\n\n\t\t\tprogressBar.max += Object.keys(image.metadata).length + Object.keys(image.data).length;\n\t\t\tfor (let partition in image.metadata) try { await availableAPIs.lldaWrite({ partition, data: image.metadata[partition] }); progressBar.value++;\n\t\t\t\t} catch { return stopProduction((await availableAPIs.lookupLocale(\"WRITING_PARTITION_FAILED\")).replace(\"%s\", partition)); }\n\t\t\tfor (let dataPart in image.data) try { await availableAPIs.lldaIDBWrite({ key: dataPart, value: image.data[dataPart] }); progressBar.value++;\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"WRITING_DATA_FAILED\")); }\n\t\t\t\n\t\t\tif (!mergeFlag.checked) {\n\t\t\t\tlet currentSubImage = [];\n\t\t\t\ttry { currentSubImage = (await availableAPIs.lldaList()).filter(a => !Object.keys(image.metadata).includes(a)); progressBar.max += currentSubImage.length;\n\t\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"LISTING_PARTITIONS_FAILED\")); }\n\t\t\t\tfor (let partition of currentSubImage) try { await availableAPIs.lldaRemove({ partition }); progressBar.value++;\n\t\t\t\t\t} catch { return stopProduction((await availableAPIs.lookupLocale(\"DELETING_PARTITION_FAILED\")).replace(\"%s\", partition)); }\n\t\t\t\t\n\t\t\t\ttry { currentSubImage = (await availableAPIs.lldaIDBList()).filter(a => !Object.keys(image.data).includes(a)); progressBar.max += currentSubImage.length;\n\t\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"LISTING_DATA_FAILED\")); }\n\t\t\t\tfor (let dataPart of currentSubImage) try { await availableAPIs.lldaIDBRemove({ key: dataPart }); progressBar.value++;\n\t\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"DELETING_DATA_FAILED\")); }\n\t\t\t\tcurrentSubImage = [];\n\t\t\t}\n\n\t\t\ttry { await availableAPIs.lldaIDBSync();\n\t\t\t} catch {}\n\n\t\t\tif (rebootOnRestore.checked) try { await availableAPIs.shutdown({ isReboot: true });\n\t\t\t\t} catch { return stopProduction(await availableAPIs.lookupLocale(\"SHUTTING_DOWN_FAILED\")); }\n\t\t\tstopProduction(await availableAPIs.lookupLocale(\"SUCCESSFUL_OP\"));\n\t\t}\n\t}\n\tmainPage();\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","84af0b85faff424736bf82e7b9597098715af596fd3cf0c7c8c0e4468d44175990058c09078a8e0beb1454ba6ba90f44b259916da57616627153f2279277505d":"// =====BEGIN MANIFEST=====\n// link: lrn:SYSTEM_SECURITY_TITLE\n// signer: automaticSigner\n// allow: GET_USER_INFO, USER_INFO_OTHERS, SENSITIVE_USER_INFO_OTHERS, SET_USER_INFO, GET_LOCALE, GET_THEME, CSP_OPERATIONS, SET_SECURITY_CHECKS, FS_LIST_PARTITIONS, FS_READ, FS_REMOVE, FS_WRITE, FS_CHANGE_PERMISSION, START_TASK, FS_BYPASS_PERMISSIONS, MANAGE_TOKENS, SWITCH_USERS_AUTOMATICALLY, ELEVATE_PRIVILEGES, GET_USER_LIST\n// signature: b65bfd704ab78ac9ce099a8b641984359af507907348d52c59bd95b1062a180312d5b05993b67e1d806a961d986f4eeed7aca606b382f4bb073f822782a3d401\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"SYSTEM_SECURITY_TITLE\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"GET_USER_INFO\", \"USER_INFO_OTHERS\", \"SENSITIVE_USER_INFO_OTHERS\", \"SET_USER_INFO\", \"FS_LIST_PARTITIONS\", \"FS_READ\", \"FS_REMOVE\", \"FS_WRITE\", \"FS_CHANGE_PERMISSION\", \"START_TASK\", \"FS_BYPASS_PERMISSIONS\", \"MANAGE_TOKENS\", \"SWITCH_USERS_AUTOMATICALLY\", \"ELEVATE_PRIVILEGES\", \"GET_USER_LIST\" ];\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"SYSTEM_SECURITY_DENY\");\n\t\tlet currentToken = await availableAPIs.getProcessToken();\n\t\tlet newToken = await availableAPIs.consentGetToken({\n\t\t\tintent: await availableAPIs.lookupLocale(\"SYSTEM_SECURITY_INTENT\"),\n\t\t\tname: await availableAPIs.lookupLocale(\"SYSTEM_SECURITY_TITLE\"),\n\t\t});\n\t\tif (!newToken) return;\n\t\tawait availableAPIs.setProcessToken(newToken);\n\t\tawait availableAPIs.revokeToken(currentToken);\n\t\tprivileges = await availableAPIs.getPrivileges();\n\t\tif (!checklist.every(p => privileges.includes(p))) return;\n\t}\n\tdocument.body.innerText = \"\";\n\tlet pageHeader = document.createElement(\"b\");\n\tlet actionSpecificField = document.createElement(\"div\");\n\tdocument.body.appendChild(pageHeader);\n\tdocument.body.appendChild(document.createElement(\"hr\"));\n\tdocument.body.appendChild(actionSpecificField);\n\tlet username, userData;\n\tasync function main() {\n\t\tusername = null;\n\t\tuserData = null;\n\t\tactionSpecificField.innerText = \"\";\n\t\tlet usernameField = document.createElement(\"input\");\n\t\tlet editButton = document.createElement(\"button\");\n\t\tpageHeader.innerText = await availableAPIs.lookupLocale(\"USERNAME_PROMPT\");\n\t\teditButton.innerText = await availableAPIs.lookupLocale(\"EDIT\");\n\t\tusernameField.placeholder = await availableAPIs.lookupLocale(\"USERNAME\");\n\t\tactionSpecificField.appendChild(usernameField);\n\t\tactionSpecificField.appendChild(editButton);\n\t\tactionSpecificField.appendChild(document.createElement(\"hr\"));\n\t\tfor (let user of await availableAPIs.getUsers()) {\n\t\t\tlet userButton = document.createElement(\"button\");\n\t\t\tuserButton.innerText = user;\n\t\t\tuserButton.addEventListener(\"click\", async function() {\n\t\t\t\tusernameField.value = user;\n\t\t\t\teditButton.click();\n\t\t\t});\n\t\t\tactionSpecificField.appendChild(userButton);\n\t\t}\n\t\teditButton.addEventListener(\"click\", async function() {\n\t\t\tif (!usernameField.value) return;\n\t\t\tusername = usernameField.value;\n\t\t\tuserData = await availableAPIs.getUserInfo({ desiredUser: username, sensitive: true });\n\t\t\tif (!userData) {\n\t\t\t\tuserData = {\n\t\t\t\t\tgroups: [username],\n\t\t\t\t\thomeDirectory: await availableAPIs.getSystemMount() + \"/home/\" + username,\n\t\t\t\t\tsecurityChecks: [],\n\t\t\t\t\tblankPrivileges: false\n\t\t\t\t};\n\t\t\t\tawait availableAPIs.setUserInfo({ desiredUser: username, info: userData });\n\t\t\t}\n\t\t\tuserEditPage();\n\t\t});\n\t}\n\n\tasync function userEditPage() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tpageHeader.innerText = username;\n\t\tlet homeDirectoryChanger = document.createElement(\"button\");\n\t\tlet securityChecksButton = document.createElement(\"button\");\n\t\tlet groupChanger = document.createElement(\"button\");\n\t\tlet privilegeSetButton = document.createElement(\"button\");\n\t\tlet removeButton = document.createElement(\"button\");\n\t\tlet leaveButton = document.createElement(\"button\");\n\t\thomeDirectoryChanger.innerText = await availableAPIs.lookupLocale(\"USER_HOMEDIR\");\n\t\tsecurityChecksButton.innerText = await availableAPIs.lookupLocale(\"PERSONAL_SECURITY_TITLE\");\n\t\tgroupChanger.innerText = await availableAPIs.lookupLocale(\"USER_GROUPS\");\n\t\tprivilegeSetButton.innerText = await availableAPIs.lookupLocale(\"USER_EXT_PRIVILEGES\");\n\t\tremoveButton.innerText = await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\tleaveButton.innerText = await availableAPIs.lookupLocale(\"EXIT\");\n\t\thomeDirectoryChanger.addEventListener(\"click\", changeHomeDir);\n\t\tsecurityChecksButton.addEventListener(\"click\", async function() {\n\t\t\tawait availableAPIs.switchUser(username);\n\t\t\tawait availableAPIs.startTask({\n\t\t\t\tfile: await availableAPIs.getSystemMount() + \"/apps/personalSecurity.js\",\n\t\t\t\targPassed: []\n\t\t\t});\n\t\t\tawait availableAPIs.terminate();\n\t\t});\n\t\tgroupChanger.addEventListener(\"click\", changeGroups);\n\t\tprivilegeSetButton.addEventListener(\"click\", privilegeSet);\n\t\tremoveButton.addEventListener(\"click\", removeUser);\n\t\tleaveButton.addEventListener(\"click\", main);\n\t\tactionSpecificField.appendChild(homeDirectoryChanger);\n\t\tactionSpecificField.appendChild(securityChecksButton);\n\t\tactionSpecificField.appendChild(groupChanger);\n\t\tactionSpecificField.appendChild(privilegeSetButton);\n\t\tactionSpecificField.appendChild(removeButton);\n\t\tactionSpecificField.appendChild(leaveButton);\n\t}\n\n\tasync function changeHomeDir() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tpageHeader.innerText = \"[\" + username + \"] \" + await availableAPIs.lookupLocale(\"USER_HOMEDIR\");\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet homeDirectoryField = document.createElement(\"input\");\n\t\tlet changeButton = document.createElement(\"button\");\n\t\tlet createButton = document.createElement(\"button\");\n\t\tlet status = document.createElement(\"div\");\n\t\tbackButton.innerText = \"<-\";\n\t\tchangeButton.innerText = await availableAPIs.lookupLocale(\"EDIT\");\n\t\tcreateButton.innerText = await availableAPIs.lookupLocale(\"CREATE_HD\");\n\t\thomeDirectoryField.value = userData.homeDirectory;\n\t\tbackButton.addEventListener(\"click\", userEditPage);\n\t\tchangeButton.addEventListener(\"click\", async function() {\n\t\t\tif (!homeDirectoryField.value) return;\n\t\t\tuserData.homeDirectory = homeDirectoryField.value;\n\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\tuserEditPage();\n\t\t});\n\t\tcreateButton.addEventListener(\"click\", async function() {\n\t\t\ttry {\n\t\t\t\tawait mkrecursive(homeDirectoryField.value);\n\t\t\t\tawait availableAPIs.fs_chown({ path: homeDirectoryField.value, newUser: username });\n\t\t\t\tawait availableAPIs.fs_chgrp({ path: homeDirectoryField.value, newGrp: userData.groups[0] || username });\n\t\t\t\tawait availableAPIs.fs_chmod({ path: homeDirectoryField.value, newPermissions: \"rx\" });\n\t\t\t\tstatus.innerText = await availableAPIs.lookupLocale(\"CREATING_HD_OK\");\n\t\t\t} catch {\n\t\t\t\tstatus.innerText = await availableAPIs.lookupLocale(\"CREATING_HD_FAIL\");\n\t\t\t}\n\t\t});\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(homeDirectoryField);\n\t\tactionSpecificField.appendChild(changeButton);\n\t\tactionSpecificField.appendChild(createButton);\n\t\tactionSpecificField.appendChild(status);\n\t}\n\n\tasync function changeGroups() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tpageHeader.innerText = \"[\" + username + \"] \" + await availableAPIs.lookupLocale(\"USER_GROUPS\");\n\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet addGroup = document.createElement(\"button\");\n\t\tbackButton.innerText = \"<-\";\n\t\taddGroup.innerText = await availableAPIs.lookupLocale(\"ADD_BTN\");\n\n\t\tbackButton.addEventListener(\"click\", userEditPage);\n\t\taddGroup.addEventListener(\"click\", addGroupAction);\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(addGroup);\n\n\t\tfor (let group in userData.groups) {\n\t\t\tlet groupInfo = userData.groups[group];\n\t\t\tlet groupDiv = document.createElement(\"div\");\n\t\t\tgroupDiv.style.display = \"flex\";\n\t\t\tlet groupNameDiv = document.createElement(\"div\");\n\t\t\tgroupNameDiv.style.flex = 100;\n\t\t\tlet groupBtns = document.createElement(\"div\");\n\t\t\tgroupNameDiv.innerText = groupInfo;\n\t\t\tlet btnUp = document.createElement(\"button\");\n\t\t\tlet btnDown = document.createElement(\"button\");\n\t\t\tlet btnDelete = document.createElement(\"button\");\n\t\t\tbtnUp.innerText = \"/\\\\\";\n\t\t\tbtnUp.disabled = group == 0;\n\t\t\tbtnDown.disabled = group == userData.groups.length - 1;\n\t\t\tbtnDown.innerText = \"\\\\/\";\n\t\t\tbtnDelete.innerText = \"x\";\n\t\t\tgroupBtns.appendChild(btnUp);\n\t\t\tgroupBtns.appendChild(btnDown);\n\t\t\tgroupBtns.appendChild(btnDelete);\n\t\t\tgroupDiv.appendChild(groupNameDiv);\n\t\t\tgroupDiv.appendChild(groupBtns);\n\t\t\tbtnDelete.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.groups.splice(group, 1);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tchangeGroups();\n\t\t\t});\n\t\t\tactionSpecificField.appendChild(groupDiv);\n\t\t\tbtnUp.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.groups.splice(group, 1);\n\t\t\t\tuserData.groups.splice(group - 1, 0, groupInfo);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tchangeGroups();\n\t\t\t});\n\t\t\tbtnDown.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.groups.splice(group, 1);\n\t\t\t\tuserData.groups.splice(group - 1 + 2, 0, groupInfo);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tchangeGroups();\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function addGroupAction() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet groupNameField = document.createElement(\"input\");\n\t\tlet createButton = document.createElement(\"button\");\n\t\tbackButton.innerText = \"<-\";\n\t\tcreateButton.innerText = await availableAPIs.lookupLocale(\"ADD_BTN\");\n\t\tbackButton.addEventListener(\"click\", changeGroups);\n\t\tcreateButton.addEventListener(\"click\", async function() {\n\t\t\tuserData.groups.push(groupNameField.value);\n\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\tchangeGroups();\n\t\t});\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(groupNameField);\n\t\tactionSpecificField.appendChild(createButton);\n\t}\n\n\tasync function removeUser() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tpageHeader.innerText = \"[\" + username + \"] \" + await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet removeWithHomedir = document.createElement(\"button\");\n\t\tlet removeAlone = document.createElement(\"button\");\n\t\tbackButton.innerText = \"<-\";\n\t\tremoveWithHomedir.innerText = await availableAPIs.lookupLocale(\"REMOVE_USER_WITH_HD\");\n\t\tremoveAlone.innerText = await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\tbackButton.addEventListener(\"click\", userEditPage);\n\t\tremoveWithHomedir.addEventListener(\"click\", async function() {\n\t\t\trecursiveRemove(userData.homeDirectory);\n\t\t\tawait availableAPIs.setUserInfo({\n\t\t\t\tdesiredUser: username,\n\t\t\t\tinfo: undefined\n\t\t\t});\n\t\t\tmain();\n\t\t});\n\t\tremoveAlone.addEventListener(\"click\", async function() {\n\t\t\tawait availableAPIs.setUserInfo({\n\t\t\t\tdesiredUser: username,\n\t\t\t\tinfo: undefined\n\t\t\t});\n\t\t\tmain();\n\t\t});\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(removeWithHomedir);\n\t\tactionSpecificField.appendChild(removeAlone);\n\t}\n\n\tasync function privilegeSet() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tpageHeader.innerText = \"[\" + username + \"] \" + await availableAPIs.lookupLocale(\"USER_EXT_PRIVILEGES\");\n\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet addPrivilege = document.createElement(\"button\");\n\t\tlet removeAll = document.createElement(\"button\");\n\t\tlet warning = document.createElement(\"b\");\n\t\tlet blankPrivsCheck = document.createElement(\"input\");\n\t\tlet blankPrivsCheckLabel = document.createElement(\"label\");\n\t\tbackButton.innerText = \"<-\";\n\t\taddPrivilege.innerText = await availableAPIs.lookupLocale(\"ADD_BTN\");\n\t\tremoveAll.innerText = await availableAPIs.lookupLocale(\"REMOVE_BTN\");\n\t\tblankPrivsCheck.type = \"checkbox\";\n\t\tblankPrivsCheck.id = \"blankPrivCheck\";\n\t\tblankPrivsCheckLabel.innerText = await availableAPIs.lookupLocale(\"BLANK_PRIVILEGE_FLAG\");\n\t\tblankPrivsCheckLabel.htmlFor = \"blankPrivCheck\";\n\t\tblankPrivsCheck.checked = userData.blankPrivileges;\n\t\twarning.innerText = await availableAPIs.lookupLocale(\"WARNING_PRIVILEGES\");\n\n\t\tbackButton.addEventListener(\"click\", userEditPage);\n\t\taddPrivilege.addEventListener(\"click\", addPrivilegeAction);\n\t\tremoveAll.addEventListener(\"click\", async function() {\n\t\t\tuserData.additionalPrivilegeSet = undefined;\n\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\tprivilegeSet();\n\t\t})\n\t\tblankPrivsCheck.addEventListener(\"change\", async function() {\n\t\t\tuserData.blankPrivileges = blankPrivsCheck.checked;\n\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t})\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(addPrivilege);\n\t\tactionSpecificField.appendChild(removeAll);\n\t\tactionSpecificField.appendChild(blankPrivsCheck);\n\t\tactionSpecificField.appendChild(blankPrivsCheckLabel);\n\t\tactionSpecificField.appendChild(document.createElement(\"br\"));\n\t\tactionSpecificField.appendChild(warning);\n\n\t\tif (!userData.additionalPrivilegeSet) userData.additionalPrivilegeSet = [];\n\t\tfor (let privilege in userData.additionalPrivilegeSet) {\n\t\t\tlet privilegeInfo = userData.additionalPrivilegeSet[privilege];\n\t\t\tlet privilegeDiv = document.createElement(\"div\");\n\t\t\tprivilegeDiv.style.display = \"flex\";\n\t\t\tlet privilegeNameDiv = document.createElement(\"div\");\n\t\t\tprivilegeNameDiv.style.flex = 100;\n\t\t\tlet privilegeBtns = document.createElement(\"div\");\n\t\t\tprivilegeNameDiv.innerText = privilegeInfo;\n\t\t\tlet btnUp = document.createElement(\"button\");\n\t\t\tlet btnDown = document.createElement(\"button\");\n\t\t\tlet btnDelete = document.createElement(\"button\");\n\t\t\tbtnUp.innerText = \"/\\\\\";\n\t\t\tbtnUp.disabled = privilege == 0;\n\t\t\tbtnDown.disabled = privilege == userData.additionalPrivilegeSet.length - 1;\n\t\t\tbtnDown.innerText = \"\\\\/\";\n\t\t\tbtnDelete.innerText = \"x\";\n\t\t\tprivilegeBtns.appendChild(btnUp);\n\t\t\tprivilegeBtns.appendChild(btnDown);\n\t\t\tprivilegeBtns.appendChild(btnDelete);\n\t\t\tprivilegeDiv.appendChild(privilegeNameDiv);\n\t\t\tprivilegeDiv.appendChild(privilegeBtns);\n\t\t\tbtnDelete.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.additionalPrivilegeSet.splice(privilege, 1);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tprivilegeSet();\n\t\t\t});\n\t\t\tactionSpecificField.appendChild(privilegeDiv);\n\t\t\tbtnUp.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.additionalPrivilegeSet.splice(privilege, 1);\n\t\t\t\tuserData.additionalPrivilegeSet.splice(privilege - 1, 0, privilegeInfo);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tprivilegeSet();\n\t\t\t});\n\t\t\tbtnDown.addEventListener(\"click\", async function() {\n\t\t\t\tuserData.additionalPrivilegeSet.splice(privilege, 1);\n\t\t\t\tuserData.additionalPrivilegeSet.splice(privilege - 1 + 2, 0, privilegeInfo);\n\t\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\t\tprivilegeSet();\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function addPrivilegeAction() {\n\t\tactionSpecificField.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet privilegeNameField = document.createElement(\"input\");\n\t\tlet createButton = document.createElement(\"button\");\n\t\tbackButton.innerText = \"<-\";\n\t\tcreateButton.innerText = await availableAPIs.lookupLocale(\"ADD_BTN\");\n\t\tbackButton.addEventListener(\"click\", privilegeSet);\n\t\tcreateButton.addEventListener(\"click\", async function() {\n\t\t\tif (!userData.additionalPrivilegeSet) userData.additionalPrivilegeSet = [];\n\t\t\tuserData.additionalPrivilegeSet.push(...(privilegeNameField.value.match(/[A-Z_]+/g) || []));\n\t\t\tuserData.additionalPrivilegeSet = Array.from(new Set(userData.additionalPrivilegeSet));\n\t\t\tawait availableAPIs.setUserInfo({desiredUser: username, info: userData});\n\t\t\tprivilegeSet();\n\t\t});\n\t\tactionSpecificField.appendChild(backButton);\n\t\tactionSpecificField.appendChild(privilegeNameField);\n\t\tactionSpecificField.appendChild(createButton);\n\t}\n\n\tasync function mkrecursive(dir) {\n\t\tlet slices = dir.split(\"/\");\n\t\tfor (let i = 2; i <= slices.length; i++) {\n\t\t\tlet browse = await availableAPIs.fs_ls({ path: slices.slice(0, i - 1).join(\"/\") });\n\t\t\tif (!browse.includes(slices[i - 1])) await availableAPIs.fs_mkdir({ path: slices.slice(0, i).join(\"/\") });\n\t\t}\n\t}\n\n\tasync function recursiveRemove(path) {\n\t\tlet dirList = await availableAPIs.fs_ls({ path });\n\t\tfor (let fileIndex in dirList) {\n\t\t\tlet file = dirList[fileIndex];\n\t\t\tif (await availableAPIs.fs_isDirectory({ path: path + \"/\" + file })) await recursiveRemove(path + \"/\" + file);\n\t\t\telse await availableAPIs.fs_rm({ path: path + \"/\" + file });\n\t\t}\n\t\tawait availableAPIs.fs_rm({ path });\n\t}\n\tmain();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","4412d6b9defc900f7bcc894cd406077f5a0b888c002b97dba547ccf6d7af5a913123e05b6d37d63ea03e0bdbdd8d825870dc2076624b7d4c0b0673fe77e18665":"// =====BEGIN MANIFEST=====\n// link: lrn:TASK_MANAGER\n// signer: automaticSigner\n// fnName: taskMgrInstaller\n// allow: LIST_TASKS, SIGNAL_TASK, GET_LOCALE, GET_THEME, TASK_BYPASS_PERMISSIONS\n// signature: b60c57aef334cd98ef3b8786748a1e627709e7c14679c3c0dc9a9d92e1432f3d696fbc396243ad06d9cd4c2d840ebbeda88ef2bc1631bc628fbe4072daa1a801\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"TASK_MANAGER\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"LIST_TASKS\", \"SIGNAL_TASK\" ];\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = (await availableAPIs.lookupLocale(\"TMGR_PERMISSION\")).replace(\"%s\", checklist.join(\", \"));\n\t\treturn;\n\t}\n\tlet styleElement = document.createElement(\"style\");\n\tstyleElement.innerText = `th, td { border: 1px solid black; }\n\ttable { overflow: scroll; min-width: 100%; width: max-content; }`;\n\tdocument.head.appendChild(styleElement);\n\tlet table = document.createElement(\"table\");\n\tlet thead = document.createElement(\"thead\");\n\tlet theadRow = document.createElement(\"tr\");\n\tlet thBasename = document.createElement(\"th\");\n\tlet thUser = document.createElement(\"th\");\n\tlet thTerminate = document.createElement(\"th\");\n\tlet thFP = document.createElement(\"th\");\n\tlet thArgs = document.createElement(\"th\");\n\tlet tbody = document.createElement(\"tbody\");\n\tthBasename.innerText = await availableAPIs.lookupLocale(\"BASENAME_TASK\");\n\tthUser.innerText = await availableAPIs.lookupLocale(\"USER_TASK\");\n\tthTerminate.innerText = await availableAPIs.lookupLocale(\"TERMINATE_TASK\");\n\tthFP.innerText = await availableAPIs.lookupLocale(\"FULL_PATH_TASK\");\n\tthArgs.innerText = await availableAPIs.lookupLocale(\"ARGUMENTS_TASK\");\n\ttheadRow.appendChild(thBasename);\n\ttheadRow.appendChild(thUser);\n\ttheadRow.appendChild(thTerminate);\n\ttheadRow.appendChild(thFP);\n\ttheadRow.appendChild(thArgs);\n\tthead.appendChild(theadRow);\n\ttable.appendChild(thead);\n\ttable.appendChild(tbody);\n\tdocument.body.appendChild(table);\n\tasync function refresh() {\n\t\tlet prevtb = tbody;\n\t\tlet newtb = document.createElement(\"tbody\");\n\t\tlet tasks = await availableAPIs.listTasks();\n\t\tfor (let task of tasks) {\n\t\t\tlet tr = document.createElement(\"tr\");\n\t\t\tlet tdBasename = document.createElement(\"td\");\n\t\t\tlet tdUser = document.createElement(\"td\");\n\t\t\tlet tdTerminate = document.createElement(\"td\");\n\t\t\tlet tdFP = document.createElement(\"td\");\n\t\t\tlet tdArgs = document.createElement(\"td\");\n\t\t\tlet taskInfo;\n\t\t\ttry {\n\t\t\t\ttaskInfo = await availableAPIs.taskInfo(task);\n\t\t\t} catch {}\n\t\t\tif (!taskInfo) continue;\n\t\t\tlet terminateBtn = document.createElement(\"button\");\n\t\t\ttdBasename.innerText = taskInfo.file.split(\"/\").slice(-1)[0];\n\t\t\ttdUser.innerText = taskInfo.runBy;\n\t\t\ttdFP.innerText = taskInfo.file;\n\t\t\ttdArgs.innerText = \"[\" + (taskInfo.arg || []).map(a => JSON.stringify(a)).join(\", \") + \"]\";\n\t\t\tterminateBtn.innerText = await availableAPIs.lookupLocale(\"TERMINATE_TASK\");\n\t\t\tterminateBtn.addEventListener(\"click\", async function() {\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.signalTask({ taskId: task, signal: 15 });\n\t\t\t\t} catch {}\n\t\t\t});\n\t\t\tterminateBtn.addEventListener(\"contextmenu\", async function(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\ttry {\n\t\t\t\t\tawait availableAPIs.signalTask({ taskId: task, signal: 9 });\n\t\t\t\t} catch {}\n\t\t\t});\n\t\t\ttdTerminate.appendChild(terminateBtn);\n\t\t\ttr.appendChild(tdBasename);\n\t\t\ttr.appendChild(tdUser);\n\t\t\ttr.appendChild(tdTerminate);\n\t\t\ttr.appendChild(tdFP);\n\t\t\ttr.appendChild(tdArgs);\n\t\t\tnewtb.appendChild(tr);\n\t\t}\n\t\ttable.appendChild(newtb);\n\t\tprevtb.remove();\n\t\ttbody = newtb;\n\t\tsetTimeout(refresh, 1000);\n\t}\n\tawait refresh();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;"},"buildInfo":{"for":"1390","version":1390,"when":1755547941380,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"e77ea506de4e66f65f0f7f7c4a70d694e90edd16ce3bba50fa8831d509346fb38d1dc3d14e558b540f53bec800d0e800d2b41f950564a91ff1a337d441220c0e"}},"50-terminal-disks.fs":{"backend":{"files":{"apps":{"df.js":"a7bd26a2991844f0d3ef38390c9d6eb61ca9674932f22b23d046e0a54e897b5bbbf990acd4ea21bff94ee94cda43425b419064ae4d39c118807447826772f47d","format.js":"863464c4d1fc04da684bb8d8e0d2d0e774bf9f67eec50937d846419a3ce16165ec4afc0a340cc5ede2ce0af97a105cb7af109790ff866ccac86f50dec956df47","initdisk.js":"d928cb7cdb14d69430a4897a82a2bdb85385c4b8beabc6970a8fa3385e22cad438d78c1a0c12ef7017b0a3c201d4228c96e64da86d98ebfc56a39f3440e4c965","llda_tool.js":"46d453095b4ae57929fa83fb0b056d7a710d0b4e6b4d947e815cf8fe0d76bd79b28cc1fe7ace838afc4db46e15e9817fc9d75a01d8bb8faabda428bbe119f2a4","mount.js":"116acd2ebf826f86b93c38eaa9becbe08c5e46d93d070c93914d16ec3755dc1b051ff2cdd071c171a7f7b93b40286598606673c0e977b53b5b8df38a323e41c3","mountinfo.js":"58ce1bd9597ab7bfabf8855951bf1ed280e563fb25f44823d6da40e1375d1086358705e7eb65620e7817981d2b015fe2273376142c1f4f4853e4cb59774a5ed3","pivot_root.js":"299d93284ee9f014082bf61d9167d292cf66641825c0dcf903d5ea2e75b0fe668d4e1725f9d47d17e07f6b72bb093f4b6babf43be00fcb8ae2b83746678bbdeb","umount.js":"57eb6e070560812810fadbc58d717d5ec286e934d42f7914384fbdb1c8dc53a1fb14500875dd9a95098283274b99ce59c7d5a274ae7e407730c24cb2be13a482"}},"permissions":{"apps/df.js":{"world":"rx"},"apps/format.js":{"world":"rx"},"apps/initdisk.js":{"world":"rx"},"apps/llda_tool.js":{"world":"rx"},"apps/mount.js":{"world":"rx"},"apps/mountinfo.js":{"world":"rx"},"apps/pivot_root.js":{"world":"rx"},"apps/umount.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"a7bd26a2991844f0d3ef38390c9d6eb61ca9674932f22b23d046e0a54e897b5bbbf990acd4ea21bff94ee94cda43425b419064ae4d39c118807447826772f47d":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_LIST_PARTITIONS\n// signature: 270e3ff5f552cddebd10b1e2e6bc5b2d406acb7e5acafaa5b11de8d63820070541a257c38d37821da87870840207955cbf860246852f88ad6deafef8da488f02\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"df: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tlet human = exec_args.includes(\"-h\") || exec_args.includes(\"--human-readable\");\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DF_HEADER\") + \"\\r\\n\");\n\tlet estimateStorage = await availableAPIs.estimateStorage();\n\tfor (let medium in estimateStorage) {\n\t\tlet displayedSize = estimateStorage[medium].total;\n\t\tif (human) displayedSize = await availableAPIs.ufInfoUnits([estimateStorage[medium].total, true]);\n\t\tlet displayedUsed = estimateStorage[medium].used;\n\t\tif (human) displayedUsed = await availableAPIs.ufInfoUnits([estimateStorage[medium].used, true]);\n\t\tlet displayedFree = estimateStorage[medium].free;\n\t\tif (human) displayedFree = await availableAPIs.ufInfoUnits([estimateStorage[medium].free, true]);\n\t\tawait availableAPIs.toMyCLI(medium + \"\\t\" + displayedSize + \"\\t\" + displayedUsed + \"\\t\" + displayedFree + \"\\t\" + Math.floor(estimateStorage[medium].used / estimateStorage[medium].total * 100) + \"%\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","863464c4d1fc04da684bb8d8e0d2d0e774bf9f67eec50937d846419a3ce16165ec4afc0a340cc5ede2ce0af97a105cb7af109790ff866ccac86f50dec956df47":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, LLDISK_LIST_PARTITIONS, LLDISK_WRITE, LLDISK_REMOVE, LLDISK_READ, CSP_OPERATIONS\n// signer: automaticSigner\n// signature: 51ed74a9856cd40758c801d6d7cd2c99684fef58a8ce126f0dcffcd6f0a3450d8286e18915c618daeae7c7e80c8b9ba2a9f950a541b064d7c66b78e01cee3c0e\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"format: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"FORMAT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"FORMAT_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"FORMAT_FSTYPE\") + \"\\r\\n\")\n\t\tawait availableAPIs.toMyCLI(\"format: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length < 2 || exec_args.length > 3) {\n\t\tawait availableAPIs.toMyCLI(\"format: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\t\n\tlet knownNames;\n\ttry {\n\t\tknownNames = await availableAPIs.lldaList();\n\t\tif (knownNames.includes(exec_args[1]) && exec_args[2] != \"overwrite\") {\n\t\t\tawait availableAPIs.toMyCLI(\"format: \" + await availableAPIs.lookupLocale(\"FORMAT_OVERWRITE_WARN\") + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\n\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\tif (exec_args[0] == \"pcfs\") {\n\t\t\tlet prevId = (await availableAPIs.lldaRead({ partition: exec_args[1] }))?.id || u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t}));\n\t\t\tawait availableAPIs.lldaWrite({\n\t\t\t\tpartition: exec_args[1],\n\t\t\t\tdata: {\n\t\t\t\t\tfiles: {},\n\t\t\t\t\tpermissions: {},\n\t\t\t\t\tid: prevId\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (exec_args[0].startsWith(\"pcfs_crypt\")) {\n\t\t\tlet monokey = exec_args[0].endsWith(\"_monokey\");\n\t\t\tlet prevId = (await availableAPIs.lldaRead({ partition: exec_args[1] }))?.id || u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t}));\n\t\t\tlet salt = u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(32)\n\t\t\t}));\n\t\t\tawait availableAPIs.lldaWrite({\n\t\t\t\tpartition: exec_args[1],\n\t\t\t\tdata: {\n\t\t\t\t\tfiles: {},\n\t\t\t\t\tpermissions: {},\n\t\t\t\t\tid: prevId,\n\t\t\t\t\tcryptodata: {\n\t\t\t\t\t\tpasswordLockingInitial: monokey,\n\t\t\t\t\t\tsalt: salt\n\t\t\t\t\t},\n\t\t\t\t\tencryptedFileTable: exec_args[0].endsWith(\"_filetable_monokey\")\n\t\t\t\t}\n\t\t\t})\n\t\t} else if (exec_args[0].startsWith(\"pcbm:\")) {\n\t\t\tlet diskDataPartition = exec_args[0].split(\":\").slice(1).join(\":\");\n\t\t\tawait availableAPIs.lldaWrite({\n\t\t\t\tpartition: exec_args[1],\n\t\t\t\tdata: `try {\n\t\t\t\t\tconst AsyncFunction = (async () => {}).constructor;\n\t\t\t\t\tlet pre_boot_part = coreExports.disk.partition(${JSON.stringify(diskDataPartition)}).getData();\n\t\t\t\t\tlet pre_boot_modules = pre_boot_part?.files;\n\t\t\t\t\tif (!pre_boot_modules) {\n\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"No files were found in the storage partition\");\n\t\t\t\t\t\tthrow new Error(\"No files were found in the storage partition\");\n\t\t\t\t\t}\n\t\t\t\t\tpre_boot_modules = pre_boot_modules[coreExports.bootSection || \"boot\"];\n\t\t\t\t\tif (!pre_boot_modules) {\n\t\t\t\t\t\tcoreExports.tty_bios_api.println(\"No boot modules were found\");\n\t\t\t\t\t\tthrow new Error(\"No boot modules were found\");\n\t\t\t\t\t}\n\t\t\t\t\tlet pre_boot_module_list = Object.keys(pre_boot_modules);\n\t\t\t\t\tpre_boot_module_list = pre_boot_module_list.sort((a, b) => a.localeCompare(b));\n\t\t\t\t\tlet pre_boot_module_script = \"\";\n\t\t\t\t\tfor (let module of pre_boot_module_list) {\n\t\t\t\t\t\tif (coreExports.bootMode == \"logboot\") pre_boot_module_script += \"coreExports.tty_bios_api.println(\" + JSON.stringify(module) + \");\\\\n\";\n\t\t\t\t\t\tpre_boot_module_script += await coreExports.idb.readPart(pre_boot_part.id + \"-\" + pre_boot_modules[module]);\n\t\t\t\t\t}\n\t\t\t\t\tawait new AsyncFunction(pre_boot_module_script)();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcoreExports.tty_bios_api.println(\"Boot failed\");\n\t\t\t\t\tcoreExports.tty_bios_api.println(\"Press Enter to continue and log this error locally\");\n\t\t\t\t\tawait coreExports.tty_bios_api.inputLine();\n\t\t\t\t\tthrow e;\n\t\t\t\t}`\n\t\t\t});\n\t\t} else if (exec_args[0] == \"null\") {\n\t\t\tawait availableAPIs.lldaRemove({\n\t\t\t\tpartition: exec_args[1]\n\t\t\t});\n\t\t} else {\n\t\t\tawait availableAPIs.toMyCLI(\"format: \" + await availableAPIs.lookupLocale(\"FORMAT_UNKNOWN_FSTYPE\") + \"\\r\\n\");\n\t\t}\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"format: \" + e.name + \": \" + await availableAPIs.lookupLocale(e.message) + \" (\" + e.message + \")\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\t\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","d928cb7cdb14d69430a4897a82a2bdb85385c4b8beabc6970a8fa3385e22cad438d78c1a0c12ef7017b0a3c201d4228c96e64da86d98ebfc56a39f3440e4c965":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, LLDISK_LIST_PARTITIONS, LLDISK_INIT_PARTITIONS\n// signer: automaticSigner\n// signature: 353a98f62dd474c05c23d7fe3afaf044166bad6a7868c893ab653a473a70c54ebf2d8bfbbbca517d2e9d328884bd3a7de313ac7dc11a30fb56e6d1f68796200e\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"initdisk: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"INITDISK_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"INITDISK_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"initdisk: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length > 2) {\n\t\tawait availableAPIs.toMyCLI(\"initdisk: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\t\n\ttry {\n\t\tawait availableAPIs.lldaList();\n\t\tif (exec_args[1] != \"overwrite\") {\n\t\t\tawait availableAPIs.toMyCLI(\"initdisk: \" + await availableAPIs.lookupLocale(\"INITDISK_OVERWRITE_WARN\") + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\t} catch {}\n\t\n\ttry {\n\t\tawait availableAPIs.lldaInitPartitions();\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"initdisk: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","46d453095b4ae57929fa83fb0b056d7a710d0b4e6b4d947e815cf8fe0d76bd79b28cc1fe7ace838afc4db46e15e9817fc9d75a01d8bb8faabda428bbe119f2a4":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, LLDISK_WRITE, LLDISK_READ, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, LLDISK_LIST_PARTITIONS, LLDISK_REMOVE\n// signer: automaticSigner\n// signature: 6e7ff39dde3e86a5643b710b215cd050165e2ce79cee6b9033a1efd349515684d52aced7f4caaa56ac48059a98503843ab42794066aefe6b82fc52fa246d3c03\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"llda_tool: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_EXPORT\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_IMPORT\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_IMPORTSTRING\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_COPY\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_REMOVE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_ACTION_LIST\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LLDA_DISCLAIMER\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"llda_tool: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\n\ttry {\n\t\tif (exec_args[0] == \"export\") {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: exec_args[2],\n\t\t\t\tdata: JSON.stringify(await availableAPIs.lldaRead({ partition: exec_args[1] }))\n\t\t\t});\n\t\t} else if (exec_args[0] == \"import\") {\n\t\t\tawait availableAPIs.lldaWrite({ partition: exec_args[2], data: JSON.parse(await availableAPIs.fs_read({ path: exec_args[1] })) });\n\t\t} else if (exec_args[0] == \"importstring\") {\n\t\t\tawait availableAPIs.lldaWrite({ partition: exec_args[2], data: await availableAPIs.fs_read({ path: exec_args[1] }) });\n\t\t} else if (exec_args[0] == \"copy\") {\n\t\t\tawait availableAPIs.lldaWrite({ partition: exec_args[2], data: await availableAPIs.lldaRead({ partition: exec_args[1] }) });\n\t\t} else if (exec_args[0] == \"remove\") {\n\t\t\tawait availableAPIs.lldaRemove({ partition: exec_args[1] });\n\t\t} else if (exec_args[0] == \"list\") {\n\t\t\tawait availableAPIs.toMyCLI(JSON.stringify(await availableAPIs.lldaList()) + \"\\r\\n\");\n\t\t} else {\n\t\t\tawait availableAPIs.toMyCLI(\"llda_tool: \" + await availableAPIs.lookupLocale(\"LLDA_UNKNOWN_ACTION\") + \"\\r\\n\");\n\t\t}\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"llda_tool: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\t\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","116acd2ebf826f86b93c38eaa9becbe08c5e46d93d070c93914d16ec3755dc1b051ff2cdd071c171a7f7b93b40286598606673c0e977b53b5b8df38a323e41c3":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_MOUNT, GET_FILESYSTEMS\n// signature: b66db823eadcb66c4f185a70b79c00f95d5f7e0df4607965409947ecc93f96f078d0e2c5a42b1a65cb84bb4be77a833412e7554bb3a92b3299001b94e1be2c0b\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"mount: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (ppos.length < 2) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MOUNT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MOUNT_DESCRIPTION\") + \"\\r\\n\");\n\t\ttry {\n\t\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"MOUNT_KNOWN_FS\")).replace(\"%s\", (await availableAPIs.supportedFilesystems()).join(\", \")) + \"\\r\\n\");\n\t\t} catch {\n\t\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"MOUNT_KNOWN_FS\")).replace(\"%s\", await availableAPIs.lookupLocale(\"UNKNOWN_PLACEHOLDER\")) + \"\\r\\n\");\n\t\t}\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PPART\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PINPA\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PPASS\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PKEY\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PTYPE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PURL\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_PINPI\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"MOUNT_KNOWN_POUPI\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"mount: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\n\ttry {\n\t\tawait availableAPIs.fs_mount({\n\t\t\tmountpoint: ppos[1],\n\t\t\tfilesystem: ppos[0],\n\t\t\tfilesystemOptions: pargs\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"mount: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); ","58ce1bd9597ab7bfabf8855951bf1ed280e563fb25f44823d6da40e1375d1086358705e7eb65620e7817981d2b015fe2273376142c1f4f4853e4cb59774a5ed3":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_LIST_PARTITIONS, GET_FILESYSTEMS\n// signature: 94ae29ad3355acb5baf4dcc5747c12d3a13c38718cc8d642c1e14bcec66edb2c23c67223a2617888a9be9413a5b3df0c22310a19ba4de2a10fc1d8b9aba8830c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"mountinfo: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (ppos.length < 1) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MOUNTINFO_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MOUNTINFO_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"mountinfo: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\n\ttry {\n\t\tawait availableAPIs.toMyCLI(JSON.stringify(await availableAPIs.fs_mountInfo(ppos[0]), null, \"\\t\").replaceAll(\"\\n\", \"\\r\\n\") + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"mountinfo: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); ","299d93284ee9f014082bf61d9167d292cf66641825c0dcf903d5ea2e75b0fe668d4e1725f9d47d17e07f6b72bb093f4b6babf43be00fcb8ae2b83746678bbdeb":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SET_DEFAULT_SYSTEM\n// signature: dc13ef321b4c31c930b291d610a5cbc3f6fe4f3529735908ed4b3b9613a2823d16ff3164707ce5b1ce57ffe3afc5118363628f45c0daac61aaa8fa43a102e803\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"pivot_root: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PIVOT_ROOT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PIVOT_ROOT_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"pivot_root: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tawait availableAPIs.setSystemMount(exec_args[0]);\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","57eb6e070560812810fadbc58d717d5ec286e934d42f7914384fbdb1c8dc53a1fb14500875dd9a95098283274b99ce59c7d5a274ae7e407730c24cb2be13a482":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_UNMOUNT, GET_FILESYSTEMS\n// signature: db8cf0242ae539d5fb9249020281174539f65e5b50cf01e3647966a5e5be60241b1208f35c2436b78c2c459c33c2d6127785e29f0b68e87993d91a8cd656e00f\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"umount: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (ppos.length < 1) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UMOUNT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UMOUNT_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"UMOUNT_OPT_SYNCONLY\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"UMOUNT_OPT_FORCE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"umount: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\n\ttry {\n\t\tawait availableAPIs[\"fs_\" + (pargs[\"sync-only\"] == true ? \"sync\" : \"unmount\")]({\n\t\t\tmount: ppos[0],\n\t\t\tforce: pargs.force\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"umount: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); "},"buildInfo":{"for":"1390","version":1390,"when":1755547941385,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"e685af9234e4b779742856373d84574e87a976059a023f04ab9c7c662e1f96fb4c0e62a3c47366e6a487f9b6efe64933affdf2d791c3a834682e3338d1b5520a"}},"50-terminal-network.fs":{"backend":{"files":{"apps":{"basiccurl.js":"c2e4f0766da84696c8397123bc83bab2e409d06ec5c54378a3576fa9549e858a49cd641c36c654d83015636ab121992987ad152174d6038eb38849714025500e","netinfo.js":"ab049fc08a9adb9c796ed3418484305412ec585b010dae27fc4555c536b21092cc6f367c684f08826383d8468a637baed11ad874d29156dfbb4cca5063924b75","networkfs.js":"67fea71bfa82a25af816408fbc9ff73de0e04673964ed0ba3d921b7e0f4a6570250ff8d05d7f7ca1d5ead82d9edb00c04a5e90b1459af9657a336fd96346ec61","ping.js":"51277391227b820c981af9ad4002eda253ab3f9ce799b6c3eb43a9aacce5dbab1aa9ddf368dcc8b4907e2c6b75320190c82aed1652f18cbe00c051643bbb280d","renetworkd.js":"181a363b7ada2e90c594959e2c61464d05eb2fade4e2e60eef75d6e2a8fc96d6c270542be53227ac1273951d38b74af4bc746541470c788a52dc9be5762ff973","updatefw.js":"fe4cbe9b1136cb86ddb7679bc03832bd8b6e6d6a9f1f01ac7a1a20a275f54f2c59adf6fb1a9829d4df72aeb22f59f17bc3bf54daa1d659ad3d3cbf6a3a23d271"}},"permissions":{"apps/basiccurl.js":{"world":"rx"},"apps/netinfo.js":{"world":"rx"},"apps/networkfs.js":{"world":"rx"},"apps/ping.js":{"world":"rx"},"apps/renetworkd.js":{"world":"rx"},"apps/updatefw.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"c2e4f0766da84696c8397123bc83bab2e409d06ec5c54378a3576fa9549e858a49cd641c36c654d83015636ab121992987ad152174d6038eb38849714025500e":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FETCH_SEND, FS_BYPASS_PERMISSIONS, FS_CHANGE_PERMISSION\n// signature: 2a6b804d2a63dc3c1eea087cd06e845b0d1dbbed7ea506316d7f006b6dff10f7235a9243f2eaa06a782ede9f2a0f967b149489e92bfa9e9d96a237a406c5e207\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"basiccurl: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"BASIC_CURL_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"BASIC_CURL_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"basiccurl: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tlet downloadedFile = await availableAPIs.fetchSend({\n\t\t\turl: exec_args[0],\n\t\t\tinit: {}\n\t\t});\n\t\tdownloadedFile = downloadedFile.arrayBuffer;\n\t\tdownloadedFile = new TextDecoder().decode(downloadedFile);\n\t\tawait availableAPIs.fs_write({ path: exec_args[1], data: downloadedFile });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"basiccurl: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","ab049fc08a9adb9c796ed3418484305412ec585b010dae27fc4555c536b21092cc6f367c684f08826383d8468a637baed11ad874d29156dfbb4cca5063924b75":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_NETWORK_ADDRESS, GET_HOSTNAME, GET_UPDATE_SERVICE\n// signature: 8279530c75ac0d8091b7719ead5f12a74146c27964a2eb7896a9d56721a64ee5c9c17463b5cb79c452e9e95c275fefdb7d7bcae2df4b5fd49a2abd035725fc0b\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"netinfo: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\t\n\ttry {\n\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"NETWORK_ADDRESS_FIELD\")).replace(\"%s\", (await availableAPIs.getNetworkAddress())?.match(/.{1,4}/g)?.join(\":\") || await availableAPIs.lookupLocale(\"UNKNOWN_PLACEHOLDER\")) + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"NETWORK_AUTOHOST_FIELD\")).replace(\"%s\", (await availableAPIs.getHostname() || await availableAPIs.lookupLocale(\"UNKNOWN_PLACEHOLDER\"))) + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"NETWORK_UPDATES_FIELD\")).replace(\"%s\", (await availableAPIs.getUpdateService() || await availableAPIs.lookupLocale(\"UNKNOWN_PLACEHOLDER\"))) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"netinfo: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); ","67fea71bfa82a25af816408fbc9ff73de0e04673964ed0ba3d921b7e0f4a6570250ff8d05d7f7ca1d5ead82d9edb00c04a5e90b1459af9657a336fd96346ec61":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, RESOLVE_NAME, CONNFUL_CONNECT, IPC_CREATE_PIPE, FS_MOUNT, IPC_LISTEN_PIPE, CONNFUL_WRITE, CONNFUL_READ, IPC_SEND_PIPE, FS_READ\n// signer: automaticSigner\n// signature: 5af575b711babce7e229a818282457a0deaf83da5577e47e9cf5399cdf282d1bb9833d5c3182820294add0ec51a62a952982db907c22808ee56ff847a07c510a\n// =====END MANIFEST=====\nfunction IPv6Decompressor(ip) {\n\tlet array = ip.split(\":\");\n\tarray = array.slice(0, 8);\n\tlet foundTwoOrMoreZeroes = array.indexOf(\"\");\n\twhile (array.length != 8 && foundTwoOrMoreZeroes !== null) array.splice(foundTwoOrMoreZeroes, 0, \"0000\");\n\tarray = array.map(a => parseInt(a || \"0\", 16).toString(16).padStart(4, \"0\"));\n\treturn array.join(\":\");\n}\n(async function() {\n\t// @pcos-app-mode isolatable\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"networkfs: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tawait availableAPIs.attachCLI();\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (ppos.length < 2) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"NETWORKFS_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"NETWORKFS_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"NETWORKFS_NOVERIFY\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"NETWORKFS_KEY\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"networkfs: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\tawait availableAPIs.terminate();\n\t}\n\tlet inPipe, outPipe, conn;\n\ttry {\n\t\tlet url = new URL(ppos[0]);\n\t\tif (url.protocol != \"netfs:\") throw new Error(await availableAPIs.lookupLocale(\"NETWORKFS_PROTO\"));\n\t\tif (url.port) throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_GATESET\"));\n\t\tlet hostname = url.hostname, address;\n\t\tif (url.hostname.includes(\"[\")) {\n\t\t\thostname = IPv6Decompressor(url.hostname.slice(1, -1)).replaceAll(\":\", \"\");\n\t\t\taddress = hostname;\n\t\t} else address = await availableAPIs.resolve(hostname);\n\t\tif (!address) throw new Error(await availableAPIs.lookupLocale(\"HOSTNAME_RESOLUTION_FAILED\"));\n\t\tconn = await availableAPIs.connfulConnect({\n\t\t\tgate: url.username || \"netfs\",\n\t\t\taddress,\n\t\t\tverifyByDomain: hostname,\n\t\t\tkey: pargs.key ? JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: pargs.key\n\t\t\t})).key : undefined,\n\t\t\tprivate: pargs.key ? JSON.parse(await availableAPIs.fs_read({\n\t\t\t\tpath: pargs.key\n\t\t\t})).private : undefined,\n\t\t\tdoNotVerifyServer: pargs[\"no-verification\"]\n\t\t});\n\t\tawait availableAPIs.connfulConnectionSettled(conn);\n\t\tinPipe = await availableAPIs.createPipe();\n\t\toutPipe = await availableAPIs.createPipe();\n\t\tlet pipe2conn = (async function() {\n\t\t\twhile (true) {\n\t\t\t\tlet listenToPipe = await availableAPIs.listenToPipe(inPipe);\n\t\t\t\tavailableAPIs.connfulWrite({\n\t\t\t\t\tconnectionID: conn,\n\t\t\t\t\tdata: JSON.stringify(listenToPipe)\n\t\t\t\t});\n\t\t\t}\n\t\t})();\n\t\tlet conn2pipe = (async function() {\n\t\t\twhile (true) {\n\t\t\t\tlet networkListen = await availableAPIs.connfulRead(conn);\n\t\t\t\tavailableAPIs.sendToPipe({\n\t\t\t\t\tpipe: outPipe,\n\t\t\t\t\tdata: JSON.parse(networkListen)\n\t\t\t\t});\n\t\t\t}\n\t\t})();\n\t\tawait availableAPIs.fs_mount({\n\t\t\tmountpoint: ppos[1],\n\t\t\tfilesystem: \"IPCMount\",\n\t\t\tfilesystemOptions: {\n\t\t\t\tinputPipeId: inPipe,\n\t\t\t\toutputPipeId: outPipe\n\t\t\t}\n\t\t});\n\t\tawait Promise.all([pipe2conn, conn2pipe]);\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"networkfs: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","51277391227b820c981af9ad4002eda253ab3f9ce799b6c3eb43a9aacce5dbab1aa9ddf368dcc8b4907e2c6b75320190c82aed1652f18cbe00c051643bbb280d":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FETCH_SEND, PCOS_NETWORK_PING, RESOLVE_NAME\n// signature: 05b1829ff443d2c863a9eb03b650d7820f2712368679a5d672b64b26ba6d31ff3ac8abfba7012cb605b3086e2c05e0ab9847eddbb5b02e6fdbe55965d5855e07\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"ping: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PING_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PING_DESCRIPTION\") + \"\\r\\n\")\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"PING_INTERNET_OPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"ping: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.includes(\"--internet\")) {\n\t\texec_args = exec_args.filter(a => a != \"--internet\");\n\t\tif (!exec_args.length) {\n\t\t\tawait availableAPIs.toMyCLI(\"ping: No URL specified\\r\\n\");\n\t\t\treturn availableAPIs.terminate();\n\t\t}\n\t\tawait availableAPIs.toMyCLI(\"Pinging \" + exec_args[0] + \" via HTTP...\\r\\n\");\n\t\tfor (let i = 1; i <= 4; i++) {\n\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(\"ping\"), 500));\n\t\t\tlet time = performance.now();\n\t\t\ttry {\n\t\t\t\tif ((await Promise.race([availableAPIs.fetchSend({\n\t\t\t\t\turl: exec_args[0],\n\t\t\t\t\tinit: {\n\t\t\t\t\t\tnoArrayBuffer: true,\n\t\t\t\t\t\tmode: \"no-cors\"\n\t\t\t\t\t}\n\t\t\t\t}), new Promise((resolve) => setTimeout(() => resolve(\"timeout\"), 30000))])) == \"timeout\") throw new Error(\"Response timed out\");\n\t\t\t\ttime = performance.now() - time;\n\t\t\t\tawait availableAPIs.toMyCLI(\"http_seq=\" + i + \" time=\" + time.toFixed(2) + \" ms\\r\\n\");\n\t\t\t} catch (e) {\n\t\t\t\ttime = performance.now() - time;\n\t\t\t\tawait availableAPIs.toMyCLI(\"http_seq=\" + i + \" time=\" + time.toFixed(2) + \" ms err=\" + e.name + \": \" + e.message + \"\\r\\n\");\n\t\t\t}\n\t\t}\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet pingedAddress;\n\tif (exec_args[0].includes(\":\")) pingedAddress = exec_args[0].replaceAll(\":\", \"\");\n\telse {\n\t\ttry {\n\t\t\tpingedAddress = await Promise.race([\n\t\t\t\tavailableAPIs.resolve(exec_args[0]),\n\t\t\t\tnew Promise((resolve) => setTimeout(() => resolve(\"timeout\"), 30000))\n\t\t\t])\n\t\t\tif (pingedAddress == \"timeout\") throw new Error(\"Resolution timed out\");\n\t\t\tif (!pingedAddress) throw new Error(\"Could not resolve hostname\");\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"ping: \" + exec_args[0] + \": \" + e.name + \": \" + e.message + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\t}\n\tawait availableAPIs.toMyCLI(\"Pinging \" + exec_args[0] + \" (\" + pingedAddress.match(/.{1,4}/g).join(\":\") + \") via PCOS Network...\\r\\n\");\n\tfor (let i = 1; i <= 4; i++) {\n\t\tawait new Promise((resolve) => setTimeout(() => resolve(\"ping\"), 500));\n\t\tlet time = performance.now();\n\t\ttry {\n\t\t\tlet race = await Promise.race([availableAPIs.networkPing(pingedAddress), new Promise((resolve) => setTimeout(() => resolve(\"timeout\"), 30000))]);\n\t\t\tif (race == \"timeout\") throw new Error(\"Response timed out\");\n\t\t\ttime = performance.now() - time;\n\t\t\tawait availableAPIs.toMyCLI(\"count=\" + i + \" time=\" + time.toFixed(2) + \" ms\\r\\n\");\n\t\t} catch (e) {\n\t\t\ttime = performance.now() - time;\n\t\t\tawait availableAPIs.toMyCLI(\"count=\" + i + \" time=\" + time.toFixed(2) + \" ms err=\" + e.name + \": \" + e.message + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","181a363b7ada2e90c594959e2c61464d05eb2fade4e2e60eef75d6e2a8fc96d6c270542be53227ac1273951d38b74af4bc746541470c788a52dc9be5762ff973":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, RELOAD_NETWORK_CONFIG\n// signature: f3349f5a264b91c9887690156c699cb05135cc932ca6daea0f2a5561715036a9315f07310fa66e443e36981a923303c0c12e3259ffb7bfb16d77042b0f01890a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"renetworkd: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\ttry {\n\t\tawait availableAPIs.reloadNetworkConfig();\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"renetworkd: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","fe4cbe9b1136cb86ddb7679bc03832bd8b6e6d6a9f1f01ac7a1a20a275f54f2c59adf6fb1a9829d4df72aeb22f59f17bc3bf54daa1d659ad3d3cbf6a3a23d271":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: FETCH_SEND, SET_FIRMWARE, SYSTEM_SHUTDOWN, GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS\n// signature: 6e8ba454ef19fc90cad8e763168fadbbaf0d7c66c5fd7fccc4cc6c096b3b384ecc152ddb5aabfddacd3225cbdc58f2a927da579e2ffb6c77a304e863e118d30d\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"updatefw: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UPDATEFW_DOWNLOADING\") + \"\\r\\n\");\n\tlet fwArchive;\n\tif (!exec_args.length) {\n\t\ttry {\n\t\t\tfwArchive = await availableAPIs.fetchSend({\n\t\t\t\turl: \"/init.js\",\n\t\t\t\tinit: {}\n\t\t\t});\n\t\t\tif (!fwArchive.ok) throw new Error(\"Non-OK response (\" + fwArchive.status + \" \" + fwArchive.statusText + \")\");\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UPDATEFW_DOWNLOAD_FAILED\") + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tfwArchive = { arrayBuffer: new TextEncoder().encode(await availableAPIs.fs_read({\n\t\t\t\tpath: exec_args[0]\n\t\t\t})) };\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UPDATEFW_DOWNLOAD_FAILED\") + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\t}\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UPDATEFW_DECODING\") + \"\\r\\n\");\n\tfwArchive = fwArchive.arrayBuffer;\n\tfwArchive = new TextDecoder().decode(fwArchive);\n\ttry {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"UPDATEFW_SETTING\") + \"\\r\\n\");\n\t\tawait availableAPIs.setFirmware(fwArchive);\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RESTARTING\") + \"\\r\\n\");\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: true\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"updatefw: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;"},"buildInfo":{"for":"1390","version":1390,"when":1755547941387,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"fd4358ad1c16f028c6c2215332bc8f0d325ebf66eb456be0cfb60b1a5458ba048a43ef2a20b0fc5ba7189ef203f00cfcf8121c99ddc4ea15ac2c2de5cae9f409"}},"50-terminal-users.fs":{"backend":{"files":{"apps":{"adduser.js":"548a0f6a28d18ce96e6b2e91c8fad93892cb7d27ea131c08027b3d9b0afa3428678296aaddfd7eb2b9d81f93419e4e6a8fb05fd82df30ce8e67cd248e76dbc10","blockuser.js":"ff398f065da9f5b877899bf238078a45c50f154d2e05d8cc9efde041e9afefa20e38ed489065ea9975658120b9585b9f415ff3ceac98e60f221ee5c1ad764108","deluser.js":"e4dbf4c066f4eed9ef65885099c43f9eb07d9b1301b0f54fbbb7aabc01bf4646708e35c454095bc1643a9fcfdf76aa2efbed39ad53e56d5ba682d67ec38e03e4","lsuser.js":"55ca00a0b59904f7c4081d31e08362a58ab79a4086c4804b27fbccc5da4156cedfa428cc2c75ffb4a1fa69f842e0b58e71cb4f888a6f96aed7259a3d6698dc8f","passwd.js":"4f20703213f108ef1fb247b84cef66f6183cfbc3a874e1564239bd00fcc35fe842883441defb21f501fc82a8c8a3be418eb053c9c91d316a33af3a02c1c7d623"}},"permissions":{"apps/adduser.js":{"world":"rx"},"apps/blockuser.js":{"world":"rx"},"apps/deluser.js":{"world":"rx"},"apps/lsuser.js":{"world":"rx"},"apps/passwd.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"548a0f6a28d18ce96e6b2e91c8fad93892cb7d27ea131c08027b3d9b0afa3428678296aaddfd7eb2b9d81f93419e4e6a8fb05fd82df30ce8e67cd248e76dbc10":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SET_SECURITY_CHECKS, CSP_OPERATIONS, SET_USER_INFO, SWITCH_USERS_AUTOMATICALLY, FS_LIST_PARTITIONS, FS_READ, FS_WRITE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS, GET_USER_INFO, USER_INFO_OTHERS\n// signature: dc7731c8ca44229f71e501e11b1b6276abbf9e3fd4fcf1984e1823d34cabd9fea6de4093c2c9c4b10717c258ef3dc0d81d8c5641a679583de1700c2d0c7c6a08\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"adduser: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (ppos.length < 1) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"ADDUSER_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"ADDUSER_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"ADDUSER_SKIP_PASSWD\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"ADDUSER_SKIP_HOME\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"ADDUSER_HOME\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"ADDUSER_GROUPS\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"adduser: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"NEW_USER_CREATION\")).replace(\"%s\", ppos[0]) + \"\\r\\n\");\n\ttry {\n\t\tlet userData = await availableAPIs.getUserInfo({ desiredUser: ppos[0] });\n\t\tif (userData) throw new Error(\"USERNAME_EXISTS\");\n\t\tlet homeDirectory = pargs[\"home\"] || await availableAPIs.getSystemMount() + \"/home/\" + ppos[0];\n\t\tawait availableAPIs.setUserInfo({\n\t\t\tdesiredUser: ppos[0],\n\t\t\tinfo: {\n\t\t\t\tgroups: [ppos[0], ...(pargs.groups ? (pargs.groups instanceof Array ? pargs.groups : [pargs.groups]) : []) ],\n\t\t\t\thomeDirectory,\n\t\t\t\tsecurityChecks: [],\n\t\t\t\tblankPrivileges: false\n\t\t\t}\n\t\t});\n\t\tif (!pargs[\"skip-home\"]) {\n\t\t\tawait mkrecursive(homeDirectory);\n\t\t\tawait availableAPIs.fs_chown({ path: homeDirectory, newUser: ppos[0] });\n\t\t\tawait availableAPIs.fs_chgrp({ path: homeDirectory, newGrp: ppos[0] });\n\t\t\tawait availableAPIs.fs_chmod({ path: homeDirectory, newPermissions: \"rx\" });\n\t\t}\n\t\tif (pargs[\"skip-passwd\"]) return await availableAPIs.terminate();\n\t\tawait availableAPIs.switchUser(ppos[0]);\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"adduser: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_NEW_PROMPT\") + \"\\r\\n\");\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_PROMPT\"));\n\tlet str = \"\";\n\tlet stage = 0;\n\tlet password = \"\";\n\tonTermData(async function(e) {\n\t\tif (e == \"\\r\") {\n\t\t\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\tif (stage == 0) {\n\t\t\t\tpassword = str;\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_CONFIRM_PROMPT\"));\n\t\t\t\tstage = 1;\n\t\t\t\tstr = \"\";\n\t\t\t} else if (stage == 1) {\n\t\t\t\tstage = 2;\n\t\t\t\tif (str == password) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet salt = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"random\",\n\t\t\t\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(password),\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\", \"deriveKey\"]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet derived = new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\tsalt: salt,\n\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbaseKey: key,\n\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\tcspArgument: key\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait availableAPIs.setOwnSecurityChecks({\n\t\t\t\t\t\t\tchecks: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"pbkdf2\",\n\t\t\t\t\t\t\t\t\thash: u8aToHex(derived),\n\t\t\t\t\t\t\t\t\tsalt: u8aToHex(salt)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"adduser: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t\t}\n\t\t\t\t\tawait availableAPIs.toMyCLI(\"adduser: \" + await availableAPIs.lookupLocale(\"PASSWD_FEEDBACK\") + \"\\r\\n\");\n\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t} else {\n\t\t\t\t\tawait availableAPIs.toMyCLI(\"adduser: \" + await availableAPIs.lookupLocale(\"PASSWD_MISMATCH\") + \"\\r\\n\");\n\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (e == '\\u007F') {\n\t\t\tif (str.length > 0) {\n\t\t\t\tstr = str.substr(0, str.length - 1);\n\t\t\t\tawait availableAPIs.toMyCLI('\\b \\b');\n\t\t\t}\n\t\t} else {\n\t\t\tif (e >= String.fromCharCode(0x20) && e <= String.fromCharCode(0x7E) || e >= '\\u00a0') {\n\t\t\t\tstr += e;\n\t\t\t\tawait availableAPIs.toMyCLI(\"*\");\n\t\t\t}\n\t\t}\n\t});\n})();\n\nasync function onTermData(listener) {\n\twhile (true) {\n\t\tlistener(await availableAPIs.fromMyCLI());\n\t}\n}\nasync function mkrecursive(dir) {\n\tlet slices = dir.split(\"/\");\n\tfor (let i = 2; i <= slices.length; i++) {\n\t\tlet browse = await availableAPIs.fs_ls({ path: slices.slice(0, i - 1).join(\"/\") });\n\t\tif (!browse.includes(slices[i - 1])) await availableAPIs.fs_mkdir({ path: slices.slice(0, i).join(\"/\") });\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","ff398f065da9f5b877899bf238078a45c50f154d2e05d8cc9efde041e9afefa20e38ed489065ea9975658120b9585b9f415ff3ceac98e60f221ee5c1ad764108":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SET_SECURITY_CHECKS, SWITCH_USERS_AUTOMATICALLY\n// signature: 9574f0a69deac620df7bb46575c561d122278f30901de1daf09a7e42e1dfc797f5e5cc2fcbcc9859eda3883ee380d0593b672f80d90dc042ef5bd6c7b0454900\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"blockuser: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\tif (pargs.help) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"BLOCKUSER_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"BLOCKUSER_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.terminate();\n\t}\n\ttry {\n\t\tif (ppos[0]) await availableAPIs.switchUser(ppos[0]);\n\t\tawait availableAPIs.setOwnSecurityChecks({ checks: [] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"blockuser: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","e4dbf4c066f4eed9ef65885099c43f9eb07d9b1301b0f54fbbb7aabc01bf4646708e35c454095bc1643a9fcfdf76aa2efbed39ad53e56d5ba682d67ec38e03e4":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SET_SECURITY_CHECKS, CSP_OPERATIONS, SET_USER_INFO, FS_LIST_PARTITIONS, FS_READ, FS_BYPASS_PERMISSIONS, FS_REMOVE, GET_USER_INFO, USER_INFO_OTHERS\n// signature: bb126bcafc3c769bfa588f89e82b9cb927dd65a708e6c3d4a8d49383b1510185ecae55b287381b8cd39c80f760c558c4fda9f8bb903bcdf9fd4f65f30b1cf000\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"deluser: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\tif (ppos.length < 1) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DELUSER_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DELUSER_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"DELUSER_HOMEDIR\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"deluser: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"OLD_USER_DELETION\")).replace(\"%s\", ppos[0]) + \"\\r\\n\");\n\ttry {\n\t\tlet userInfo = await availableAPIs.getUserInfo({ desiredUser: ppos[0] });\n\t\tif (!userInfo) throw new Error(\"ACCESS_FN_FAIL\");\n\t\tawait availableAPIs.setUserInfo({\n\t\t\tdesiredUser: ppos[0],\n\t\t\tinfo: undefined\n\t\t})\n\t\tif (pargs.homedir) await recursiveRemove(userInfo.homeDirectory);\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"deluser: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\treturn await availableAPIs.terminate();\n})();\n\nasync function recursiveRemove(path) {\n\tlet dirList = await availableAPIs.fs_ls({ path });\n\tfor (let fileIndex in dirList) {\n\t\tlet file = dirList[fileIndex];\n\t\tif (await availableAPIs.fs_isDirectory({ path: path + \"/\" + file })) await recursiveRemove(path + \"/\" + file);\n\t\telse await availableAPIs.fs_rm({ path: path + \"/\" + file });\n\t}\n\tawait availableAPIs.fs_rm({ path });\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","55ca00a0b59904f7c4081d31e08362a58ab79a4086c4804b27fbccc5da4156cedfa428cc2c75ffb4a1fa69f842e0b58e71cb4f888a6f96aed7259a3d6698dc8f":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_USER_LIST\n// signature: 7476d84f7ccaedf70e5ecd168f95e8676de996e37a0902f941bb402edf7c12093cff7c00b78282f4ba8bc73de88d5bb675424add77f199bb09a36b120d09270f\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"lsuser: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\ttry {\n\t\tfor (let user of await availableAPIs.getUsers()) await availableAPIs.toMyCLI(JSON.stringify(user) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"lsuser: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\treturn await availableAPIs.terminate();\n})();\n\nasync function onTermData(listener) {\n\twhile (true) {\n\t\tlistener(await availableAPIs.fromMyCLI());\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","4f20703213f108ef1fb247b84cef66f6183cfbc3a874e1564239bd00fcc35fe842883441defb21f501fc82a8c8a3be418eb053c9c91d316a33af3a02c1c7d623":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SET_SECURITY_CHECKS, CSP_OPERATIONS, SWITCH_USERS_AUTOMATICALLY\n// signature: dde4f06f4885da44f785980bab1f78ce9a063ce9232f3a6c64f2b66a3294a528f2ce4491f2a784690bfbfc6458d6b424e255b31d8d59f64e3be41c12911b6407\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"passwd: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (exec_args[0]) {\n\t\ttry {\n\t\t\tawait availableAPIs.switchUser(exec_args[0]);\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"passwd: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\treturn await availableAPIs.terminate();\n\t\t}\n\t}\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_NEW_PROMPT\") + \"\\r\\n\");\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_2FACTOR_LOSS_WARN\") + \"\\r\\n\");\n\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_PROMPT\"));\n\tlet str = \"\";\n\tlet stage = 0;\n\tlet password = \"\";\n\tonTermData(async function(e) {\n\t\tif (e == \"\\r\") {\n\t\t\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\tif (stage == 0) {\n\t\t\t\tpassword = str;\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PASSWD_CONFIRM_PROMPT\"));\n\t\t\t\tstage = 1;\n\t\t\t\tstr = \"\";\n\t\t\t} else if (stage == 1) {\n\t\t\t\tstage = 2;\n\t\t\t\tif (str == password) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet salt = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"random\",\n\t\t\t\t\t\t\tcspArgument: new Uint8Array(64)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(password),\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\", \"deriveKey\"]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet derived = new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\tsalt: salt,\n\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbaseKey: key,\n\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\tcspArgument: key\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait availableAPIs.setOwnSecurityChecks({\n\t\t\t\t\t\t\tchecks: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"pbkdf2\",\n\t\t\t\t\t\t\t\t\thash: u8aToHex(derived),\n\t\t\t\t\t\t\t\t\tsalt: u8aToHex(salt)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"passwd: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t\t}\n\t\t\t\t\tawait availableAPIs.toMyCLI(\"passwd: \" + await availableAPIs.lookupLocale(\"PASSWD_FEEDBACK\") + \"\\r\\n\");\n\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t} else {\n\t\t\t\t\tawait availableAPIs.toMyCLI(\"passwd: \" + await availableAPIs.lookupLocale(\"PASSWD_MISMATCH\") + \"\\r\\n\");\n\t\t\t\t\tawait availableAPIs.terminate();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (e == '\\u007F') {\n\t\t\tif (str.length > 0) {\n\t\t\t\tstr = str.substr(0, str.length - 1);\n\t\t\t\tawait availableAPIs.toMyCLI('\\b \\b');\n\t\t\t}\n\t\t} else {\n\t\t\tif (e >= String.fromCharCode(0x20) && e <= String.fromCharCode(0x7E) || e >= '\\u00a0') {\n\t\t\t\tstr += e;\n\t\t\t\tawait availableAPIs.toMyCLI(\"*\");\n\t\t\t}\n\t\t}\n\t});\n})();\n\nasync function onTermData(listener) {\n\twhile (true) {\n\t\tlistener(await availableAPIs.fromMyCLI());\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;"},"buildInfo":{"for":"1390","version":1390,"when":1755547941388,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"2e9091204acbfe1d1986b6b542bac6cdf7a6f7e3d8447a398eb75e220660bcbe0e5b7c2705a2c6486b742e3d1d29802b8bdb083ec8280960a5a36499950b0f0d"}},"50-terminal.fs":{"backend":{"files":{"apps":{"batteryinfo.js":"7298a9443557a7cb48b94e7f3b993d5e28887317b05731da1dcb53847d17a58a115eafbb3fdf3ccee494ede36e7c154ddb00bf6505c9185030904f8e87f37df6","cat.js":"fff9055e66a5678fe18665dd61c5dbecf79827dbd8680966d22ca4863e67510c97cdb18ad41ef5e35f24305c2aee3fa4e0c24b3a723668624ea7a2505b9d8904","chgrp.js":"986b3f38fede3f0e0628b46d4fd3f7d2a9e90c2a016f2ae4334f4f62afcc47c8483f338138a6d18141415061ef2b147c415e9d23caf2c297756152193e891936","chmod.js":"7a65c0f50846d917a2cd5493fa869062023c29c330e2294b4e0274cd45b681cff41d1d5707a07d3b0ea5ad239ca0ce62ee0e263a840cc3dfa1d636dede269bd7","chown.js":"d6b14c3e2696142d089a51eba5c0780f1e69c31574f75721d184cc22401644c808f3e03a2c27448a72c3fde6c2cd1d093b28ae2c499d19056d3dfa75c114976a","cp.js":"e634bb6edac01cf66e75a659d9ae820827f3130634087dac12df6a842024ff6f742b856684fc0522047eef1438f0c26503fa06c2ffa14c667a1d29de190757ff","date.js":"157c9ae329175d226cded28661cd2db09c5f518e783e51eff24cc9cb5f6238d232302709224af8736da0aa35b49e53de69101ca81578142f266cf1274eab5800","diff.js":"b2556e5a4356027a0424df7d7807ec3f66183717980b3d3a5c8d478a7bd8b5fcf7cc1f79b3cd613c361a0a3234e7358c527e0cbb4f07b6fbb1912f7968101c3c","links":{"terminal.lnk":"0eb52d0c0a329b29401452fb2c8504b738686638a68e99a760d7dbc79beaac2f20a44670319d17be80f70cf6dc695e7e7e3b94b4677d4987b2a3635063a88c8d"},"ls.js":"a0e21a7d7d3f94ffb3728b1c6623af8a6c6e8b4fa08e2fe073e323bfdf7c11db6952e50b4427a5bd258e42d44625ca7e4378bf8b6f730fca3030e0c5d00ea330","mkdir.js":"08817b24cd0ccf19262808b9bfc603e63f4198b9d2bb239b4f85c0f39866f1815195651850f2ec68775177da8b83870c0eaa94e24f82a94eeb82978b8b005ac9","patch.js":"a86fd72ef6aa5cec121388641a2f3680398f9cac16ec5d3c51d05e8411dab6bae27791ec362de7c84942ac4b6b3579e6fbf96832c2df81814dbbdb49e31409df","power.js":"813edeed62747fe60a10487a74ba1f26f0b689b3dd4f6ee0076dd988283afa677766ef224ce157cbc3abf5dc645dbba785890b9c804464fa99dc44c2fd5e8adc","rm.js":"b0dd6d74d1c75ff6b47c2106a2e90ccfb1ad45d9e56a52f2f9591a863cd7e3212c0cf9e62f23484e5bf665031a71869c17591cce72598d36189608a6479add81","runKlvlCode.js":"f18ec49fa823322d87f18601abbbcca323013fa02631b1dc89cf36ac9acda748cb8647e6ec7a132e810eb47896d9e48e1c244f65aa53329807ddacd71b835efa","terminal.js":"440db447886e2bed03b4c7a213db31a7f2e059167c801ab2add6c5c238aafad29a12d9f9b64b2d2472fe6689733debe952b73e10ee347feb63f7ea7de2dd22f9","uptime.js":"4073a1910bd93033b529992a62ed42d7e8ed4f0d2acc380a2165012de74ca4d7e3cdbb27278466c66126e3d2044dd51ac391602ed1e69da57bc10a5dee585564","write.js":"eae509f544d7645e165df0daeabc4226c5a84369a4b766d49c90387c4a53fa797853562c2fabc8eb91c81175d843562a2ba93704639a3c9355ca70eb3b7a9e30"}},"permissions":{"apps/batteryinfo.js":{"world":"rx"},"apps/cat.js":{"world":"rx"},"apps/chgrp.js":{"world":"rx"},"apps/chmod.js":{"world":"rx"},"apps/chown.js":{"world":"rx"},"apps/cp.js":{"world":"rx"},"apps/date.js":{"world":"rx"},"apps/diff.js":{"world":"rx"},"apps/links/terminal.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/ls.js":{"world":"rx"},"apps/mkdir.js":{"world":"rx"},"apps/patch.js":{"world":"rx"},"apps/power.js":{"world":"rx"},"apps/rm.js":{"world":"rx"},"apps/runKlvlCode.js":{"world":"rx"},"apps/terminal.js":{"world":"rx"},"apps/uptime.js":{"world":"rx"},"apps/write.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"7298a9443557a7cb48b94e7f3b993d5e28887317b05731da1dcb53847d17a58a115eafbb3fdf3ccee494ede36e7c154ddb00bf6505c9185030904f8e87f37df6":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_BATTERY_STATUS\n// signature: 4c6af97c48a5681f37b26fde57bc7830a8d9af4f59c201ea54f058509e85c61dd1fa9245dc53a21c73502014a3120dddf94101638309a59be3a005f4ad245e0a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"batteryinfo: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\t\n\ttry {\n\t\tlet batteryStatus = await availableAPIs.batteryStatus();\n\t\tif (exec_args[0] == \"--robot\") await availableAPIs.toMyCLI(JSON.stringify(batteryStatus, null, \"\\t\").replaceAll(\"\\n\", \"\\r\\n\") + \"\\r\\n\");\n\t\telse await availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"BATTERY_STATUS_\" + (batteryStatus.charging ? \"CHARGING\" : \"DISCHARGING\")))\n\t\t\t.replace(\"%s\", (batteryStatus.level * 100).toFixed(2))\n\t\t\t.replace(\"%s\", await availableAPIs.ufTimeInc([\n\t\t\t\t(batteryStatus.charging ? batteryStatus.chargingTime : batteryStatus.dischargingTime) * 1000\n\t\t\t])) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"batteryinfo: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); ","fff9055e66a5678fe18665dd61c5dbecf79827dbd8680966d22ca4863e67510c97cdb18ad41ef5e35f24305c2aee3fa4e0c24b3a723668624ea7a2505b9d8904":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS\n// signature: 93a17862825df07b3ed84464836c436afe6e7be720ad1bb6c1ac41203981b872968f7b6ecc3435fd32e23d9af74172b49f0fc19e7614465640d0d8d519da660e\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"cat: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CAT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CAT_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"cat: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tfor (let file of exec_args) {\n\t\ttry {\n\t\t\tlet data = await availableAPIs.fs_read({ path: file });\n\t\t\tawait availableAPIs.toMyCLI(data);\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"cat: \" + file + \": \" + await availableAPIs.lookupLocale(e.message));\n\t\t}\n\t}\n\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","986b3f38fede3f0e0628b46d4fd3f7d2a9e90c2a016f2ae4334f4f62afcc47c8483f338138a6d18141415061ef2b147c415e9d23caf2c297756152193e891936":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: a90311ed88d999da9706f4b6d5423c3ca2a64b5e737ac2712e9f144b6ecfb29670ea56a5c9ca15cbc989bb66a896762df9ef194db258ae366de4cbfb50d64c00\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chgrp: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHGRP_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHGRP_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chgrp: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chgrp({ path: exec_args[1], newGrp: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chgrp: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message)) + \"\\r\\n\";\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","7a65c0f50846d917a2cd5493fa869062023c29c330e2294b4e0274cd45b681cff41d1d5707a07d3b0ea5ad239ca0ce62ee0e263a840cc3dfa1d636dede269bd7":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: 953e1f9115b56ac0f9b140da44f8a1f7afe5a18618e4de1834cc328953759b5baab4663961ce2cd148a861c6227e3e9f448de3091fa220a760496bb1222d8308\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chmod: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHMOD_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHMOD_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CHMOD_MODE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CHMOD_MODE_CONVERT\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chmod: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chmod({ path: exec_args[1], newPermissions: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chmod: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","d6b14c3e2696142d089a51eba5c0780f1e69c31574f75721d184cc22401644c808f3e03a2c27448a72c3fde6c2cd1d093b28ae2c499d19056d3dfa75c114976a":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: b4b8095596a74ae9bd42c95402ef2e580aa85742e1f583292511e890fba7daad438ef97ef25078a080c02d218979a1c7c0fd8bd42a33f5ea0706dc44597a3303\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chown: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHOWN_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHOWN_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chown: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chown({ path: exec_args[1], newUser: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chown: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","e634bb6edac01cf66e75a659d9ae820827f3130634087dac12df6a842024ff6f742b856684fc0522047eef1438f0c26503fa06c2ffa14c667a1d29de190757ff":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, FS_CHANGE_PERMISSION\n// signature: 609e271498254f472563a2949ed2804938c89de2475d8d35c9fe1daa9b7d9c5b359aa3af5e1fc65f670c5f6675cb01c0e17bf7dfd332a8fdb87297715710db0f\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"cp: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CP_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CP_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_RECURSIVE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_FORCE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CP_PERMISSIONS_OPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet recursive = exec_args.includes(\"--recursive\");\n\tlet force = exec_args.includes(\"--force\");\n\tlet permissions = exec_args.includes(\"--permissions\");\n\tif (recursive) exec_args.splice(exec_args.indexOf(\"--recursive\"), 1);\n\tif (force) exec_args.splice(exec_args.indexOf(\"--force\"), 1);\n\tif (permissions) exec_args.splice(exec_args.indexOf(\"--permissions\"), 1);\n\tif (exec_args.length != 2) {\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\tif (recursive) await recursiveCopy(exec_args[0], exec_args[1], force, permissions);\n\telse {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: exec_args[1],\n\t\t\t\tdata: await availableAPIs.fs_read({ path: exec_args[0] })\n\t\t\t});\n\t\t\tif (permissions) {\n\t\t\t\tlet originalPermissions = await availableAPIs.fs_permissions({ path: exec_args[0] });\n\t\t\t\tawait availableAPIs.fs_chmod({ path: exec_args[1], newPermissions: originalPermissions.world });\n\t\t\t\tawait availableAPIs.fs_chgrp({ path: exec_args[1], newGrp: originalPermissions.group });\n\t\t\t\tawait availableAPIs.fs_chown({ path: exec_args[1], newUser: originalPermissions.user });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"cp: \" + exec_args[0] + \" -> \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\n\nasync function recursiveCopy(source, destination, force, permissions) {\n\ttry {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_mkdir({ path: destination });\n\t\t} catch {}\n\t\tfor (let sourceFile of await availableAPIs.fs_ls({ path: source })) {\n\t\t\tlet destinationFile = destination + \"/\" + sourceFile;\n\t\t\ttry {\n\t\t\t\tif (await availableAPIs.fs_isDirectory({ path: source + \"/\" + sourceFile }))\n\t\t\t\t\tawait recursiveCopy(source + \"/\" + sourceFile, destinationFile, force, permissions);\n\t\t\t\telse {\n\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\tpath: destinationFile,\n\t\t\t\t\t\tdata: await availableAPIs.fs_read({ path: source + \"/\" + sourceFile })\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (permissions) {\n\t\t\t\t\tlet originalPermissions = await availableAPIs.fs_permissions({ path: source + \"/\" + sourceFile });\n\t\t\t\t\tawait availableAPIs.fs_chmod({ path: destinationFile, newPermissions: originalPermissions.world });\n\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: destinationFile, newGrp: originalPermissions.group });\n\t\t\t\t\tawait availableAPIs.fs_chown({ path: destinationFile, newUser: originalPermissions.owner });\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tawait availableAPIs.toMyCLI(\"cp: \" + source + \"/\" + sourceFile + \" -> \" + destinationFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\tif (!force) return await availableAPIs.terminate();\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + source + \" -> \" + destination + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\tif (!force) return await availableAPIs.terminate();\n\t}\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","157c9ae329175d226cded28661cd2db09c5f518e783e51eff24cc9cb5f6238d232302709224af8736da0aa35b49e53de69101ca81578142f266cf1274eab5800":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: NONE\n// signature: 470edc624f0fcfe0c7bde59c8b9b98297ee8c8b96f6f4ebbbb1289e3802151baf0aff340b6ce4f18f58ffd91e1b3c12bf20bba854958e374e6cd7a91f2d30707\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tawait availableAPIs.toMyCLI(new Date().toString() + \"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","b2556e5a4356027a0424df7d7807ec3f66183717980b3d3a5c8d478a7bd8b5fcf7cc1f79b3cd613c361a0a3234e7358c527e0cbb4f07b6fbb1912f7968101c3c":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, PATCH_DIFF\n// signature: 23438e455fbeae52d2dc52acce4e7f770d9893e306d4aa3023203db69de25f0a06e610ee96c6ce297b95bd39606c79c15b81bc5d176734884a8aa2298b8bc003\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"diff: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DIFF_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DIFF_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length != 3) {\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[2],\n\t\t\tdata: JSON.stringify(await availableAPIs.patchDiff({\n\t\t\t\toperation: \"calcPatch\",\n\t\t\t\targs: [ await availableAPIs.fs_read({ path: exec_args[0] }), await availableAPIs.fs_read({ path: exec_args[1] }) ]\n\t\t\t}))\n\t\t})\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","0eb52d0c0a329b29401452fb2c8504b738686638a68e99a760d7dbc79beaac2f20a44670319d17be80f70cf6dc695e7e7e3b94b4677d4987b2a3635063a88c8d":"{\"path\":\"system/apps/terminal.js\",\"localeReferenceName\":\"REAL_TERMINAL_NAME\"}","a0e21a7d7d3f94ffb3728b1c6623af8a6c6e8b4fa08e2fe073e323bfdf7c11db6952e50b4427a5bd258e42d44625ca7e4378bf8b6f730fca3030e0c5d00ea330":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, FS_LIST_PARTITIONS\n// signature: ce09dc69235d03437089c513c08dd692e88299581c78b24acb8d66e19734e5d42f4cb5ecb9c9640345634e4b1e43eac7dfa9b37de43066add9c2b3ae83df420c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"ls: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_DESCRIPTION\") + \"\\r\\n\");\n\t\tlet sysmount = await availableAPIs.getSystemMount();\n\t\tlet systemLocale = await availableAPIs.lookupLocale(\"MOUNTPOINT_SYSTEM\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_MOUNTPOINT_LIST\") + (await availableAPIs.fs_mounts()).map(a => sysmount == a ? (a + \" [\" + systemLocale + \"]\") : a).join(\", \") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"ls: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tfor (let file of exec_args) {\n\t\ttry {\n\t\t\tlet data = await availableAPIs.fs_ls({ path: file });\n\t\t\tawait availableAPIs.toMyCLI(data.map(a => JSON.stringify(a)).join(\"\\r\\n\") + \"\\r\\n\");\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"ls: \" + file + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","08817b24cd0ccf19262808b9bfc603e63f4198b9d2bb239b4f85c0f39866f1815195651850f2ec68775177da8b83870c0eaa94e24f82a94eeb82978b8b005ac9":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_WRITE, FS_BYPASS_PERMISSIONS\n// signature: 33e930a3594065ecd3c0350017dcf3ace0a9dbe3d477f62f375b21658655fc11d43166ca56898dca14544142938dbd529919c3d7aa5fe002f49bee02d31ec40c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"mkdir: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MKDIR_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MKDIR_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"mkdir: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_mkdir({\n\t\t\tpath: exec_args[0]\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"mkdir: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","a86fd72ef6aa5cec121388641a2f3680398f9cac16ec5d3c51d05e8411dab6bae27791ec362de7c84942ac4b6b3579e6fbf96832c2df81814dbbdb49e31409df":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, PATCH_DIFF\n// signature: 913e05e38b714879354c5617a328ebc37119a5a33e5f7eb57a4acee67d9b6db210338867d28f41a79ce64370f0f63cc969cb12b70210bc8f8aa3a15ea5b6820a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"patch: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PATCH_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PATCH_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length != 3) {\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[2],\n\t\t\tdata: (await availableAPIs.patchDiff({\n\t\t\t\toperation: \"applyPatch\",\n\t\t\t\targs: [ await availableAPIs.fs_read({ path: exec_args[0] }), JSON.parse(await availableAPIs.fs_read({ path: exec_args[1] })) ]\n\t\t\t})).join(\"\")\n\t\t})\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","813edeed62747fe60a10487a74ba1f26f0b689b3dd4f6ee0076dd988283afa677766ef224ce157cbc3abf5dc645dbba785890b9c804464fa99dc44c2fd5e8adc":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SYSTEM_SHUTDOWN\n// signature: 297c6c1f8404374f48179fb5c4a670164dc2f1edf75c889d66ef91c8128a759dde7e0412320441869b1d2c84492011f9a3ebbd0952aadd3645f13a1002247008\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"power: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tawait availableAPIs.attachCLI();\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (pargs.help) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"POWER_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"POWER_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"POWER_FORCE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"POWER_KEXEC\") + \"\\r\\n\");\n\t\tawait availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: ppos[0] == \"reboot\" || ppos[0] == \"r\" || ppos[0] == \"restart\" || ppos[0] == \"kexec\" || ppos[0] == \"k\" || pargs.kexec,\n\t\t\tisKexec: pargs.kexec || ppos[0] == \"kexec\" || ppos[0] == \"k\",\n\t\t\tforce: pargs.force\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"power: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","b0dd6d74d1c75ff6b47c2106a2e90ccfb1ad45d9e56a52f2f9591a863cd7e3212c0cf9e62f23484e5bf665031a71869c17591cce72598d36189608a6479add81":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, FS_CHANGE_PERMISSION, FS_REMOVE\n// signature: 4085a7bdc7b878f01ae705f2cdd19cb7f47d138074c04d5332fd8252b3cb7e1ec14bd2e190cf5a03c8cc7a317796615c6245d436869cc57e591b5084a42b6e0c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"rm: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RM_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RM_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_RECURSIVE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_FORCE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet recursive = exec_args.includes(\"--recursive\");\n\tlet force = exec_args.includes(\"--force\");\n\tif (recursive) exec_args.splice(exec_args.indexOf(\"--recursive\"), 1);\n\tif (force) exec_args.splice(exec_args.indexOf(\"--force\"), 1);\n\tif (exec_args.length != 1) {\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\tif (recursive) await recursiveRemove(exec_args[0], force);\n\telse {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_rm({ path: exec_args[0] });\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"rm: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\n\nasync function recursiveRemove(target, force) {\n\ttry {\n\t\tfor (let targetFile of await availableAPIs.fs_ls({ path: target })) {\n\t\t\ttargetFile = target + \"/\" + targetFile;\n\t\t\ttry {\n\t\t\t\tif (await availableAPIs.fs_isDirectory({ path: targetFile })) await recursiveRemove(targetFile, force);\n\t\t\t\telse await availableAPIs.fs_rm({ path: targetFile });\n\t\t\t} catch (e) {\n\t\t\t\tawait availableAPIs.toMyCLI(\"rm: \" + targetFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\tif (!force) return await availableAPIs.terminate();\n\t\t\t}\n\t\t}\n\t\tawait availableAPIs.fs_rm({ path: target });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + target + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\tif (!force) return await availableAPIs.terminate();\n\t}\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","f18ec49fa823322d87f18601abbbcca323013fa02631b1dc89cf36ac9acda748cb8647e6ec7a132e810eb47896d9e48e1c244f65aa53329807ddacd71b835efa":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, RUN_KLVL_CODE\n// signature: 6eb40b3a93f29c95e9c15dfee6039503cf757bddeea7e7ff2cd1298530ce47ccc807d2f385c14b57ac2d769524d9a35bce03a9f2b11bcec2c2e7de9993703c00\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"runKlvlCode: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RKL_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RKL_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"runKlvlCode: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.toMyCLI(JSON.stringify(await availableAPIs.runKlvlCode(await availableAPIs.fs_read({ path: exec_args[0] }))) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"runKlvlCode: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","440db447886e2bed03b4c7a213db31a7f2e059167c801ab2add6c5c238aafad29a12d9f9b64b2d2472fe6689733debe952b73e10ee347feb63f7ea7de2dd22f9":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, FS_LIST_PARTITIONS, FS_READ, MANAGE_TOKENS, ELEVATE_PRIVILEGES, FS_BYPASS_PERMISSIONS, START_TASK, START_BACKGROUND_TASK, CLI_MODIFICATIONS, GET_BUILD, LIST_TASKS, TASK_BYPASS_PERMISSIONS, CSP_OPERATIONS\n// link: lrn:REAL_TERMINAL_NAME\n// signer: automaticSigner\n// signature: d74820316fa55a1737745c077071bf4e085f6832ab2b09333612fc52f80bddb3ac56b13d3378028a9b95ca03c2d460bdba86439f527b45689ee87b22200bc700\n// =====END MANIFEST=====\nlet user_spawn_token = null;\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"GET_LOCALE\", \"FS_LIST_PARTITIONS\", \"FS_READ\", \"MANAGE_TOKENS\", \"ELEVATE_PRIVILEGES\", \"START_TASK\", \"CLI_MODIFICATIONS\", \"GET_BUILD\", \"LIST_TASKS\", \"CSP_OPERATIONS\" ];\n\tprivileges = await availableAPIs.getPrivileges();\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\tawait availableAPIs.fromMyCLI();\n\t\treturn await availableAPIs.terminate();\n\t}\n\tawait window.availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"REAL_TERMINAL_NAME\"));\n\t\n\tfunction parse_cmdline(cmdline) {\n\t\tvar re_next_arg = /^\\s*((?:(?:\"(?:\\\\.|[^\"])*\")|(?:'[^']*')|\\\\.|\\S)+)\\s*(.*)$/;\n\t\tvar next_arg = ['', '', cmdline];\n\t\tvar args = [];\n\t\twhile (next_arg = re_next_arg.exec(next_arg[2])) {\n\t\t\tvar quoted_arg = next_arg[1];\n\t\t\tvar unquoted_arg = \"\";\n\t\t\twhile (quoted_arg.length > 0) {\n\t\t\t\tif (/^\"/.test(quoted_arg)) {\n\t\t\t\t\tvar quoted_part = /^\"((?:\\\\.|[^\"])*)\"(.*)$/.exec(quoted_arg);\n\t\t\t\t\tunquoted_arg += quoted_part[1].replace(/\\\\(.)/g, \"$1\");\n\t\t\t\t\tquoted_arg = quoted_part[2];\n\t\t\t\t} else if (/^'/.test(quoted_arg)) {\n\t\t\t\t\tvar quoted_part = /^'([^']*)'(.*)$/.exec(quoted_arg);\n\t\t\t\t\tunquoted_arg += quoted_part[1];\n\t\t\t\t\tquoted_arg = quoted_part[2];\n\t\t\t\t} else if (/^\\\\/.test(quoted_arg)) {\n\t\t\t\t\tunquoted_arg += quoted_arg[1];\n\t\t\t\t\tquoted_arg = quoted_arg.substring(2);\n\t\t\t\t} else {\n\t\t\t\t\tunquoted_arg += quoted_arg[0];\n\t\t\t\t\tquoted_arg = quoted_arg.substring(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\targs[args.length] = unquoted_arg;\n\t\t}\n\t\treturn args;\n\t}\n\n\tlet str = \"\";\n\tlet default_user = await window.availableAPIs.getUser();\n\tlet defaultPath = await availableAPIs.getSystemMount() + \"/apps\";\n\tlet pathsForBinaries = [ defaultPath ];\n\tlet otherProcessAttached = false;\n\tlet graphic = false;\n\tlet su_stage = -1;\n\tlet suSession = null;\n\tlet hideInputMask = \"\";\n\tlet hideInput = false;\n\t\n\tasync function systemVersion() {\n\t\tawait availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"TERMINAL_INVITATION\")).replace(\"%s\", (await window.availableAPIs.getVersion())) + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"SYSTEM_BUILT_AT\")).replace(\"%s\", (new Date(await window.availableAPIs.getBuildTime())).toISOString()) + \"\\r\\n\");\t\n\t}\n\n\tawait systemVersion();\n\tawait availableAPIs.toMyCLI(\"\\r\\n\" + default_user + (privileges.includes(\"FS_BYPASS_PERMISSIONS\") ? \"#\" : \"$\") + \" \");\n\t\n\tonTermData(async function self(e, why) {\n\t\tif (otherProcessAttached) return await availableAPIs.typeIntoOtherCLI({\n\t\t\ttaskId: otherProcessAttached,\n\t\t\ttext: e,\n\t\t\thuman: true\n\t\t});\n\t\tif (e == \"\\r\") {\n\t\t\tif (why != \"su\") await availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\tif (su_stage > -1) {\n\t\t\t\tif (su_stage == 0) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsuSession = await availableAPIs.automatedLogonCreate({ desiredUser: str });\n\t\t\t\t\t\tsu_stage = 1;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tsu_stage = -1;\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\t\t}\n\t\t\t\t\tstr = \"\";\n\t\t\t\t}\n\t\t\t\twhile (su_stage >= 1) {\n\t\t\t\t\totherProcessAttached = true;\n\t\t\t\t\tif (su_stage == 2) {\n\t\t\t\t\t\tlet prompt = await availableAPIs.automatedLogonGet(suSession);\n\t\t\t\t\t\tif (prompt.type == \"zkpp_password\") {\n\t\t\t\t\t\t\tlet passwordAsKey = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(str),\n\t\t\t\t\t\t\t\t\talgorithm: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\"]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlet rngSeed = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\t\tsalt: new Uint8Array(32),\n\t\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbaseKey: passwordAsKey,\n\t\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\t\tcspArgument: passwordAsKey\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: suSession, input: u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\toperation: \"sign\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\tsecretKey: (await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\t\t\toperation: \"deriveKey\",\n\t\t\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"sign\",\n\t\t\t\t\t\t\t\t\t\t\tseed: new Uint8Array(rngSeed)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})).secretKey,\n\t\t\t\t\t\t\t\t\tmessage: hexToU8A(prompt.challenge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}))});\n\t\t\t\t\t\t} else await availableAPIs.automatedLogonInput({ session: suSession, input: str });\n\t\t\t\t\t}\n\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\tstr = \"\";\n\t\t\t\t\thideInput = false;\n\t\t\t\t\thideInputMask = \"\";\n\t\t\t\t\tlet prompt = await availableAPIs.automatedLogonGet(suSession);\n\t\t\t\t\tawait availableAPIs.toMyCLI(prompt.message);\n\t\t\t\t\tsu_stage = 2;\n\t\t\t\t\tif (prompt.success != \"intermediate\") {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\t\t\t\tsu_stage = -1;\n\t\t\t\t\t\tif (prompt.success) {\n\t\t\t\t\t\t\tuser_spawn_token = prompt.token;\n\t\t\t\t\t\t\tlet processToken = await availableAPIs.getProcessToken();\n\t\t\t\t\t\t\tawait availableAPIs.setProcessToken(await availableAPIs.forkToken(user_spawn_token));\n\t\t\t\t\t\t\tprivileges = await availableAPIs.getPrivileges();\n\t\t\t\t\t\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\t\t\t\t\t\t\tawait availableAPIs.fromMyCLI();\n\t\t\t\t\t\t\t\treturn await availableAPIs.terminate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tawait availableAPIs.revokeToken(processToken);\n\t\t\t\t\t\t\tawait availableAPIs.automatedLogonDelete(suSession);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (prompt.wantsUserInput || prompt.type == \"informative\") {\n\t\t\t\t\t\tif (prompt.wantsUserInput) await availableAPIs.toMyCLI(\": \");\n\t\t\t\t\t\thideInput = prompt.type == \"password\" || prompt.type == \"informative\" || prompt.type == \"zkpp_password\";\n\t\t\t\t\t\thideInputMask = (prompt.type == \"password\" || prompt.type == \"zkpp_password\") ? \"*\" : \"\";\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (su_stage != -1) await availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet cmdline = [];\n\t\t\ttry {\n\t\t\t\tcmdline = parse_cmdline(str);\n\t\t\t} catch {\n\t\t\t\tawait availableAPIs.toMyCLI(\"> \");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstr = \"\";\n\t\t\tif (cmdline[0] == \"sugraph\") {\n\t\t\t\totherProcessAttached = true;\n\t\t\t\tlet authui = await availableAPIs.consentGetToken({\n\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"REAL_TERMINAL_INTENT\"),\n\t\t\t\t\tname: await availableAPIs.lookupLocale(\"REAL_TERMINAL_NAME\"),\n\t\t\t\t\tdesiredUser: cmdline[1]\n\t\t\t\t});\n\t\t\t\tif (authui) {\n\t\t\t\t\tuser_spawn_token = authui;\n\t\t\t\t\tlet processToken = await availableAPIs.getProcessToken();\n\t\t\t\t\tawait availableAPIs.setProcessToken(await availableAPIs.forkToken(user_spawn_token));\n\t\t\t\t\tprivileges = await availableAPIs.getPrivileges();\n\t\t\t\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\t\t\t\t\tawait availableAPIs.fromMyCLI();\n\t\t\t\t\t\treturn await availableAPIs.terminate();\n\t\t\t\t\t}\n\t\t\t\t\tawait availableAPIs.revokeToken(processToken);\n\t\t\t\t} else await availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\totherProcessAttached = false;\n\t\t\t} else if (cmdline[0] == \"su\") {\n\t\t\t\tif (!cmdline[1]) {\n\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"USERNAME\") + \": \");\n\t\t\t\t\treturn su_stage = 0;\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsuSession = await availableAPIs.automatedLogonCreate({ desiredUser: cmdline[1] });\n\t\t\t\t\t\tsu_stage = 1;\n\t\t\t\t\t\treturn self(\"\\r\", \"su\");\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (cmdline[0] == \"graphic\") {\n\t\t\t\tif (!cmdline[1]) await availableAPIs.toMyCLI(\"graphic: \" + graphic + \"\\r\\n\");\n\t\t\t\telse {\n\t\t\t\t\tgraphic = cmdline[1] == \"true\" || cmdline[1] == \"on\" || cmdline[1] == \"1\" || cmdline[1] == \"yes\" || cmdline[1] == \"enable\";\n\t\t\t\t}\n\t\t\t} else if (cmdline[0] == \"pushpath\") {\n\t\t\t\tif (cmdline[1]) pathsForBinaries.push(cmdline[1]);\n\t\t\t} else if (cmdline[0] == \"resetpath\") {\n\t\t\t\tpathsForBinaries = [ defaultPath ];\n\t\t\t} else if (cmdline[0] == \"lspath\") {\n\t\t\t\tawait availableAPIs.toMyCLI(pathsForBinaries.map(a => JSON.stringify(a)).join(\", \") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"REAL_TERMINAL_DEFAULT_PATH_FIELD\")).replace(\"%s\", JSON.stringify(defaultPath)) + \"\\r\\n\");\n\t\t\t} else if (cmdline[0] == \"clear\") await availableAPIs.clearMyCLI();\n\t\t\telse if (cmdline[0] == \"exit\") await availableAPIs.terminate();\n\t\t\telse if (cmdline[0] == \"ver\") await systemVersion();\n\t\t\telse if (cmdline[0] == \"help\") {\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_BUILTIN_LIST\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_VER_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_HELP_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_CLEAR_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_SUGRAPH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_SU_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_GRAPHIC_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_PUSHPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_RESETPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_LSPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_EXIT_USEDESC\") + \"\\r\\n\");\n\t\t\t} else if (!cmdline.length) {} else {\n\t\t\t\tlet runFile;\n\t\t\t\ttry {\n\t\t\t\t\tif (!await availableAPIs.fs_isDirectory({ path: cmdline[0] })) runFile = cmdline[0];\n\t\t\t\t} catch {}\n\t\t\t\tfor (let path of pathsForBinaries) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet ls = await availableAPIs.fs_ls({ path });\n\t\t\t\t\t\tif (ls.includes(cmdline[0]) || ls.includes(cmdline[0] + \".js\")) {\n\t\t\t\t\t\t\tlet extensioned = ls.includes(cmdline[0] + \".js\")\n\t\t\t\t\t\t\trunFile = path + \"/\" + cmdline[0] + (extensioned ? \".js\" : \"\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch {}\n\t\t\t\t}\n\t\t\t\tif (runFile) {\n\t\t\t\t\tif (user_spawn_token) {\n\t\t\t\t\t\tlet forkedToken = await availableAPIs.forkToken(user_spawn_token);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\totherProcessAttached = true;\n\t\t\t\t\t\t\tlet spawnedTask = await availableAPIs.startTask({\n\t\t\t\t\t\t\t\tfile: runFile,\n\t\t\t\t\t\t\t\targPassed: cmdline.slice(1),\n\t\t\t\t\t\t\t\trunInBackground: !graphic,\n\t\t\t\t\t\t\t\tsilent: true,\n\t\t\t\t\t\t\t\ttoken: forkedToken\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.waitForOtherCLI({ taskId: spawnedTask, bypass: forkedToken });\n\t\t\t\t\t\t\totherProcessAttached = spawnedTask;\n\t\t\t\t\t\t\t(async function() {\n\t\t\t\t\t\t\t\twhile (otherProcessAttached) {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet otherData = await availableAPIs.getOtherCLIData({ taskId: spawnedTask, bypass: forkedToken });\n\t\t\t\t\t\t\t\t\t\tif (otherData.type == \"write\") availableAPIs.toMyCLI(otherData.data);\n\t\t\t\t\t\t\t\t\t\telse if (otherData.type == \"consoleClear\") availableAPIs.clearMyCLI();\n\t\t\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t\tawait availableAPIs.waitTermination(spawnedTask);\n\t\t\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\t\t\tawait availableAPIs.toMyCLI(runFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else await availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"REAL_TERMINAL_LOGON_REQUIRED\")).replace(\"%s\", default_user) + \"\\r\\n\");\n\t\t\t\t} else await availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"TERM_COMMAND_NOT_FOUND\")).replace(\"%s\", cmdline[0]) + \"\\r\\n\");\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdefault_user = await window.availableAPIs.getUser();\n\t\t\t} catch {}\n\t\t\tawait availableAPIs.toMyCLI(default_user + (privileges.includes(\"FS_BYPASS_PERMISSIONS\") ? \"#\" : \"$\") + \" \");\n\t\t\treturn;\n\t\t} else if (e == '\\u007F') {\n\t\t\tif (str.length > 0) {\n\t\t\t\tstr = str.substr(0, str.length - 1);\n\t\t\t\tawait availableAPIs.toMyCLI('\\b \\b');\n\t\t\t}\n\t\t} else {\n\t\t\tif (e >= String.fromCharCode(0x20) && e <= String.fromCharCode(0x7E) || e >= '\\u00a0') {\n\t\t\t\tstr += e;\n\t\t\t\tawait availableAPIs.toMyCLI(hideInput ? hideInputMask : e);\n\t\t\t}\n\t\t}\n\t});\n})(); \n\nasync function onTermData(listener) {\n\twhile (true) {\n\t\tlistener(await availableAPIs.fromMyCLI());\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\ttry { await availableAPIs.revokeToken(user_spawn_token); } catch {}\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","4073a1910bd93033b529992a62ed42d7e8ed4f0d2acc380a2165012de74ca4d7e3cdbb27278466c66126e3d2044dd51ac391602ed1e69da57bc10a5dee585564":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SYSTEM_UPTIME\n// signature: 0290445e322eb1043a0c8981fec2f840ef68a4d5f20320453a44240dd9558396185eb4bf153ffe207adc5ef27dd8e255132e1af45165d69e496d5ed164a64203\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"uptime: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\ttry {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.ufTimeInc([ await availableAPIs.systemUptime() ]) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"uptime: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","eae509f544d7645e165df0daeabc4226c5a84369a4b766d49c90387c4a53fa797853562c2fabc8eb91c81175d843562a2ba93704639a3c9355ca70eb3b7a9e30":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_WRITE, FS_BYPASS_PERMISSIONS\n// signature: 68af7118360bdca4b946456cc31cd93a6ddbba842bba5faf2d4e99d5a0a638a42846fba926804349afce6fc374b96198c0619e7a9cbd8ed202a206d82f8bda07\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"write: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"WRITE_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"WRITE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"write: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[0],\n\t\t\tdata: exec_args[1]\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"write: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;"},"buildInfo":{"for":"1390","version":1390,"when":1755547941392,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"51518072387d8d3b4cc84e3bd25b9ca0096e35a5774734198cbe84ca3a9ca9997263b484394966befc9c8ed0ef453dc9f39bef9c4cbda6d547f4544020e6d10d"}},"50-blogBrowser.fs":{"backend":{"files":{"apps":{"blogBrowser.js":"13ba6a72fab3d67aca142be05f6efe745c45986644882b938044913d73be900d92fb6805f1be32682a06698882b1914914f3d3dea2f2fda076d4b8bb46cbda32","links":{"blogBrowser.lnk":"d3132f7a8a97acfa03710f9a748531eab3410d18539598a213bc8458a367b3a57865a7bf1de8b6658cc915951c116dede9c51fbb38386eca6455cfdc256f8ba3"}}},"permissions":{"apps/blogBrowser.js":{"world":"rx"},"apps/links/blogBrowser.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"13ba6a72fab3d67aca142be05f6efe745c45986644882b938044913d73be900d92fb6805f1be32682a06698882b1914914f3d3dea2f2fda076d4b8bb46cbda32":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// link: lrn:BLOG_BROWSER_NAME\n// allow: GET_LOCALE, GET_THEME, IPC_CREATE_PIPE, IPC_LISTEN_PIPE, START_TASK, FS_READ, FS_WRITE, FS_LIST_PARTITIONS, IPC_SEND_PIPE, FS_BYPASS_PERMISSIONS, RESOLVE_NAME, CONNFUL_CONNECT, CONNFUL_DISCONNECT, CONNFUL_WRITE, CONNFUL_READ, CONNFUL_ADDRESS_GET, CONNFUL_IDENTITY_GET, GET_USER_INFO, CSP_OPERATIONS\n// signature: 2e3435e754cb0643b248e4e74d8a59ec0ea9f6a3c3f5c71d6ec0e3b7239b5a08e8a96334dfd4bd1cfa313bfbb4f13b1a5fcbf5865a1e92b0580babaa3198de02\n// =====END MANIFEST=====\nfunction createREE(direction) {\n\tlet ownIframeID = undefined;\n\ttry {\n\t\townIframeID = iframeId;\n\t} catch {}\n\treturn new Promise(function(resolve) {\n\t\tlet iframe = document.createElement(\"iframe\");\n\t\tlet iframeId = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\tlet prefix = ownIframeID ? (ownIframeID + \"_\") : \"\";\n\t\tiframeId = prefix + iframeId;\n\t\tiframe.src = \"data:text/html;base64,\" + btoa(\"<!DOCTYPE HTML>\\n<script>const iframeId = \" + JSON.stringify(iframeId) + \";\\n\" + reed.toString() + \"\\nreed();</script>\");\n\t\tiframe.style.border = \"none\";\n\t\tiframe.setAttribute(\"credentialless\", \"true\");\n\t\tiframe.sandbox = \"allow-scripts\";\n\t\tdirection.appendChild(iframe);\n\t\tlet prezhn = [];\n\t\tlet prerm = [];\n\t\tiframe.addEventListener(\"load\", function s() {\n\t\t\tiframe.removeEventListener(\"load\", s);\n\t\t\treturn resolve({\n\t\t\t\tiframe,\n\t\t\t\texportAPI: function(id, fn) {\n\t\t\t\t\tiframe.contentWindow.postMessage({type: \"export_api\", id: id, iframeId}, \"*\");\n\t\t\t\t\tasync function prezhn_it(e) {\n\t\t\t\t\t\tif (e.data.iframeId != iframeId) return;\n\t\t\t\t\t\tif (e.data.id != id) return;\n\t\t\t\t\t\tif (e.data.type != \"call_api\") return;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\te.source.postMessage({\n\t\t\t\t\t\t\t\tresult: await fn({\n\t\t\t\t\t\t\t\t\tcaller: iframeId,\n\t\t\t\t\t\t\t\t\targ: e.data.arg\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\ttype: \"api_response\",\n\t\t\t\t\t\t\t\tresponseToken: e.data.responseToken,\n\t\t\t\t\t\t\t\tiframeId\n\t\t\t\t\t\t\t}, \"*\");\n\t\t\t\t\t\t} catch (er) {\n\t\t\t\t\t\t\te.source.postMessage({\n\t\t\t\t\t\t\t\tresult: {\n\t\t\t\t\t\t\t\t\tname: er.name,\n\t\t\t\t\t\t\t\t\tmessage: er.message\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: \"api_error\",\n\t\t\t\t\t\t\t\tresponseToken: e.data.responseToken,\n\t\t\t\t\t\t\t\tiframeId\n\t\t\t\t\t\t\t}, \"*\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twindow.addEventListener(\"message\", prezhn_it);\n\t\t\t\t\tprezhn.push(prezhn_it);\n\t\t\t\t},\n\t\t\t\teval: function(code) {\n\t\t\t\t\tlet responseToken = crypto.getRandomValues(new Uint8Array(64)).reduce((a, b) => a + b.toString(16).padStart(2, \"0\"), \"\");\n\t\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\t\tiframe.contentWindow.postMessage({type: \"run\", code, responseToken, iframeId}, \"*\");\n\t\t\t\t\t\tfunction sel(e) {\n\t\t\t\t\t\t\tif (e.data.iframeId != iframeId) return;\n\t\t\t\t\t\t\tif (e.data.responseToken != responseToken) return;\n\t\t\t\t\t\t\tprezhn = prezhn.filter(x => x != sel);\n\t\t\t\t\t\t\twindow.removeEventListener(\"message\", sel);\n\t\t\t\t\t\t\tif (e.data.type == \"ran_response\")\n\t\t\t\t\t\t\t\tresolve(e.data.result);\n\t\t\t\t\t\t\telse if (e.data.type == \"ran_error\")\n\t\t\t\t\t\t\t\treject(e.data.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\twindow.addEventListener(\"message\", sel);\n\t\t\t\t\t\tprezhn.push(sel);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcloseDown: async function() {\n\t\t\t\t\tfor (let i of prerm) await i(this);\n\t\t\t\t\tprerm = [];\n\t\t\t\t\tfor (let i in prezhn) window.removeEventListener(\"message\", prezhn[i]);\n\t\t\t\t\tiframe.remove();\n\t\t\t\t\tiframe = null;\n\t\t\t\t},\n\t\t\t\tbeforeCloseDown: function(fn) {\n\t\t\t\t\tprerm.push(fn);\n\t\t\t\t},\n\t\t\t\tiframeId\n\t\t\t});\n\t\t});\n\t});\n}\nfunction IPv6Decompressor(ip) {\n\tlet array = ip.split(\":\");\n\tarray = array.slice(0, 8);\n\tlet foundTwoOrMoreZeroes = array.indexOf(\"\");\n\twhile (array.length != 8 && foundTwoOrMoreZeroes !== null) array.splice(foundTwoOrMoreZeroes, 0, \"0000\");\n\tarray = array.map(a => parseInt(a || \"0\", 16).toString(16).padStart(4, \"0\"));\n\treturn array.join(\":\");\n}\n(async function() {\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"BLOG_BROWSER_NAME\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tdocument.body.innerText = \"\";\n\tdocument.documentElement.style.height = \"100%\";\n\tdocument.documentElement.style.width = \"100%\";\n\tdocument.body.style.height = \"100%\";\n\tdocument.body.style.width = \"100%\";\n\tdocument.body.style.margin = \"0\";\n\tlet browserContainer = document.createElement(\"div\");\n\tlet urlBar = document.createElement(\"form\");\n\tlet urlInput = document.createElement(\"input\");\n\tlet urlButton = document.createElement(\"button\");\n\tlet theWebsite = document.createElement(\"div\");\n\tbrowserContainer.style.display = \"flex\";\n\tbrowserContainer.style.flexDirection = \"column\";\n\tbrowserContainer.style.width = \"100%\";\n\tbrowserContainer.style.height = \"100%\";\n\turlBar.style.display = \"flex\";\n\turlBar.style.flexDirection = \"row\";\n\turlBar.style.width = \"100%\";\n\turlInput.style.flexGrow = \"1\";\n\ttheWebsite.style.flexGrow = \"1\";\n\turlBar.appendChild(urlInput);\n\turlBar.appendChild(urlButton);\n\turlButton.innerText = \"->\";\n\tbrowserContainer.appendChild(urlBar);\n\tbrowserContainer.appendChild(theWebsite);\n\tdocument.body.appendChild(browserContainer);\n\tlet ree;\n\turlButton.onclick = async function() {\n\t\turlInput.disabled = true;\n\t\turlButton.disabled = true;\n\t\tif (ree) ree.closeDown();\n\t\tree = null;\n\t\ttheWebsite.hidden = false;\n\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_LOADING\");\n\t\ttry {\n\t\t\tlet url = new URL(urlInput.value);\n\t\t\turlInput.value = url.href;\n\t\t\tif (url.protocol != \"bdp:\") throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_PROTO\"));\n\t\t\tif (url.port) throw new Error(await availableAPIs.lookupLocale(\"BLOG_BROWSER_GATESET\"));\n\t\t\tif (pargs[\"no-verification\"]) \n\t\t\t\tawait new Promise(async function(ok, ab) {\n\t\t\t\t\tlet allowNoVerify = document.createElement(\"button\");\n\t\t\t\t\tlet abort = document.createElement(\"button\");\n\t\t\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_NOVERIFY\");\n\t\t\t\t\tallowNoVerify.innerText = await availableAPIs.lookupLocale(\"YES\");\n\t\t\t\t\tabort.innerText = await availableAPIs.lookupLocale(\"NO\");\n\t\t\t\t\tallowNoVerify.onclick = async function() {\n\t\t\t\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_LOADING\");\n\t\t\t\t\t\tok();\n\t\t\t\t\t}\n\t\t\t\t\tabort.onclick = async _ => ab(new Error(await availableAPIs.lookupLocale(\"SERVER_SIGNATURE_VERIFICATION_FAILED\")));\n\t\t\t\t\ttheWebsite.appendChild(allowNoVerify);\n\t\t\t\t\ttheWebsite.appendChild(abort);\n\t\t\t\t});\n\t\t\tif (pargs[\"no-sandbox\"]) \n\t\t\t\tawait new Promise(async function(ok, ab) {\n\t\t\t\t\tlet allowNoVerify = document.createElement(\"button\");\n\t\t\t\t\tlet abort = document.createElement(\"button\");\n\t\t\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_NOSANDBOX\");\n\t\t\t\t\tallowNoVerify.innerText = await availableAPIs.lookupLocale(\"YES\");\n\t\t\t\t\tabort.innerText = await availableAPIs.lookupLocale(\"NO\");\n\t\t\t\t\tallowNoVerify.onclick = async function() {\n\t\t\t\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_LOADING\");\n\t\t\t\t\t\tok();\n\t\t\t\t\t}\n\t\t\t\t\tabort.onclick = async _ => ab(new Error(await availableAPIs.lookupLocale(\"PERMISSION_DENIED\")));\n\t\t\t\t\ttheWebsite.appendChild(allowNoVerify);\n\t\t\t\t\ttheWebsite.appendChild(abort);\n\t\t\t\t});\n\t\t\tlet hostname = url.hostname, address;\n\t\t\tif (url.hostname.includes(\"[\")) {\n\t\t\t\thostname = IPv6Decompressor(url.hostname.slice(1, -1)).replaceAll(\":\", \"\");\n\t\t\t\taddress = hostname;\n\t\t\t} else address = await availableAPIs.resolve(hostname);\n\t\t\tif (!address) throw new Error(await availableAPIs.lookupLocale(\"HOSTNAME_RESOLUTION_FAILED\"));\n\t\t\tlet connection = await availableAPIs.connfulConnect({\n\t\t\t\tgate: url.username || \"blog\",\n\t\t\t\taddress,\n\t\t\t\tverifyByDomain: hostname,\n\t\t\t\tkey: pargs.key ? JSON.parse(await availableAPIs.fs_read({\n\t\t\t\t\tpath: pargs.key\n\t\t\t\t})).key : undefined,\n\t\t\t\tprivate: pargs.key ? JSON.parse(await availableAPIs.fs_read({\n\t\t\t\t\tpath: pargs.key\n\t\t\t\t})).private : undefined,\n\t\t\t\tdoNotVerifyServer: pargs[\"no-verification\"]\n\t\t\t});\n\t\t\tawait availableAPIs.connfulConnectionSettled(connection);\n\t\t\tawait availableAPIs.connfulWrite({\n\t\t\t\tconnectionID: connection,\n\t\t\t\tdata: url.pathname + url.search,\n\t\t\t\thost: hostname\n\t\t\t});\n\t\t\tlet data = await availableAPIs.connfulRead(connection);\n\t\t\tdata = JSON.parse(data);\n\t\t\tlet chunks = [];\n\t\t\ttheWebsite.innerText = (await availableAPIs.lookupLocale(\"BLOG_BROWSER_LOADING_PROGRESS\")).replace(\"%s\", \"0\").replace(\"%s\", data.length);\n\t\t\twhile (chunks.length != data.length) {\n\t\t\t\tlet newData = await availableAPIs.connfulRead(connection);\n\t\t\t\tnewData = JSON.parse(newData);\n\t\t\t\tchunks[newData.ctr] = newData.chunk;\n\t\t\t\ttheWebsite.innerText = (await availableAPIs.lookupLocale(\"BLOG_BROWSER_LOADING_PROGRESS\")).replace(\"%s\", chunks.length).replace(\"%s\", data.length);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait availableAPIs.connfulClose(connection);\n\t\t\t} catch {}\n\t\t\tdata.content = chunks.join(\"\");\n\t\t\tif (data.type == \"script\") {\n\t\t\t\ttheWebsite.innerText = \"\";\n\t\t\t\tree = await createREE(browserContainer);\n\t\t\t\tree.iframe.style = \"flex-grow: 1; border: none; overflow: auto;\";\n\t\t\t\ttheWebsite.hidden = true;\n\t\t\t\tlet passthroughAPIs = [\n\t\t\t\t\t// UI class\n\t\t\t\t\t\"isDarkThemed\", \"locale\", \"osLocale\", \"lookupLocale\", \"installedLocales\",\n\t\t\t\t\t// cryptographic class\n\t\t\t\t\t\"cspOperation\", \"availableCsps\",\n\t\t\t\t\t// connful connections class\n\t\t\t\t\t\"connfulConnect\", \"connfulConnectionSettled\", \"connfulDisconnect\", \"connfulForceDisconnect\", \"connfulWrite\", \"connfulRead\", \"connfulAddressGet\", \"connfulIdentityGet\"\n\t\t\t\t];\n\t\t\t\tif (pargs[\"no-sandbox\"]) passthroughAPIs = Object.keys(availableAPIs);\n\t\t\t\tfor (let api of passthroughAPIs) await ree.exportAPI(api, e => availableAPIs[api](e.arg));\n\t\t\t\tawait ree.exportAPI(\"terminate\", _ => ree.closeDown());\n\t\t\t\tawait ree.exportAPI(\"navigate\", function(newUrl) {\n\t\t\t\t\turlInput.value = new URL(newUrl.arg, urlInput.value).href;\n\t\t\t\t\turlButton.click();\n\t\t\t\t\tree.closeDown();\n\t\t\t\t});\n\t\t\t\tawait ree.exportAPI(\"currentLocation\", _ => urlInput.value);\n\t\t\t\tree.beforeCloseDown(async function() {\n\t\t\t\t\ttheWebsite.hidden = false;\n\t\t\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(\"BLOG_BROWSER_POSTCLOSE\");\n\t\t\t\t});\n\t\t\t\tawait ree.eval(data.content);\n\t\t\t} else if (data.type == \"file\") {\n\t\t\t\ttheWebsite.innerHTML = await availableAPIs.lookupLocale(\"BLOG_BROWSER_FILEPOST\");\n\t\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\", data.filename || urlBar.value.split(\"/\").slice(-1)[0]] });\n\t\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\t\tif (result.success) {\n\t\t\t\t\tawait availableAPIs.fs_write({ path: result.selected, data: data.content });\n\t\t\t\t\ttheWebsite.innerHTML = await availableAPIs.lookupLocale(\"BLOG_BROWSER_DLFILEPOST\");\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (ree) ree.closeDown();\n\t\t\ttheWebsite.hidden = false;\n\t\t\ttheWebsite.innerText = await availableAPIs.lookupLocale(e.message);\n\t\t}\n\t\turlInput.disabled = false;\n\t\turlButton.disabled = false;\n\t}\n\tif (ppos[0]) {\n\t\turlInput.value = ppos[0];\n\t\turlButton.click();\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","d3132f7a8a97acfa03710f9a748531eab3410d18539598a213bc8458a367b3a57865a7bf1de8b6658cc915951c116dede9c51fbb38386eca6455cfdc256f8ba3":"{\"path\":\"system/apps/blogBrowser.js\",\"localeReferenceName\":\"BLOG_BROWSER_NAME\"}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941335,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"fc55a655619fb8409269feb5d3c3a4c449aeb5d0b71e1a4829e91bcd6beb3db062b4cb8dde247cb74fc8a5d8032e729f57a6b5ebf929adc558c4b612d0439308"}},"50-calculator.fs":{"backend":{"files":{"apps":{"calculator.js":"ac07641676bfe88ec7ce9f2d59f96351b35e9200ab4b6bbdb196acd73be7d8a54412cb6f114d0f4bb8abfeafe4104365007e13efd77911db9fed7ee2631ea308","links":{"calculator.lnk":"31cf5f178461e9173edfc9e5d669f364a4a010f11d92319cae56d3ac42fba66a184e7201768e2fa7781494f0bc10660dcc313e51416996910691bb2217003cf4"}}},"permissions":{"apps/calculator.js":{"world":"rx"},"apps/links/calculator.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"ac07641676bfe88ec7ce9f2d59f96351b35e9200ab4b6bbdb196acd73be7d8a54412cb6f114d0f4bb8abfeafe4104365007e13efd77911db9fed7ee2631ea308":"// =====BEGIN MANIFEST=====\n// link: lrn:CALC_TITLE\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_THEME\n// signature: ef582e06bcd50189e1799f55c406f454ce7a6e143c7902ad2bf42355345d72871a0f52bea2641844e780a38c265821cc91afcb86e45d7dd2f08c6d16ce836703\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"CALC_TITLE\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tdocument.body.innerText = \"\";\n\tlet pageHeader = document.createElement(\"b\");\n\tlet dividePageHeader = document.createElement(\"hr\");\n\tlet page = document.createElement(\"div\");\n\tdocument.body.appendChild(pageHeader);\n\tdocument.body.appendChild(dividePageHeader);\n\tdocument.body.appendChild(page);\n\tasync function mainPage() {\n\t\tpageHeader.innerText = await availableAPIs.lookupLocale(\"CALC_BASIC_MODE\");\n\t\tpage.innerText = \"\";\n\t\tlet advmode = document.createElement(\"button\");\n\t\tlet add = document.createElement(\"button\");\n\t\tlet subtract = document.createElement(\"button\");\n\t\tlet multiply = document.createElement(\"button\");\n\t\tlet divide = document.createElement(\"button\");\n\t\t\n\t\tadvmode.innerText = await availableAPIs.lookupLocale(\"CALC_ADVMODE_BTN\");\n\t\tadd.innerText = await availableAPIs.lookupLocale(\"CALC_ADD\");\n\t\tsubtract.innerText = await availableAPIs.lookupLocale(\"CALC_SUBTRACT\");\n\t\tmultiply.innerText = await availableAPIs.lookupLocale(\"CALC_MULTIPLY\");\n\t\tdivide.innerText = await availableAPIs.lookupLocale(\"CALC_DIVIDE\");\n\n\t\tadvmode.onclick = advPage;\n\t\tadd.onclick = basicModeActionBuilder(\"ADD\");\n\t\tsubtract.onclick = basicModeActionBuilder(\"SUBTRACT\");\n\t\tmultiply.onclick = basicModeActionBuilder(\"MULTIPLY\");\n\t\tdivide.onclick = basicModeActionBuilder(\"DIVIDE\");\n\t\t\n\t\tpage.appendChild(advmode);\n\t\tpage.appendChild(add);\n\t\tpage.appendChild(subtract);\n\t\tpage.appendChild(multiply);\n\t\tpage.appendChild(divide);\n\t}\n\n\tmainPage();\n\n\tasync function advPage() {\n\t\tpageHeader.innerText = await availableAPIs.lookupLocale(\"CALC_ADVANCED_MODE\");\n\t\tpage.innerText = \"\";\n\t\tlet basicmode = document.createElement(\"button\");\n\t\tlet add = document.createElement(\"button\");\n\t\tlet subtract = document.createElement(\"button\");\n\t\tlet multiply = document.createElement(\"button\");\n\t\tlet divide = document.createElement(\"button\");\n\t\tlet toMixed = document.createElement(\"button\");\n\t\tlet toImproper = document.createElement(\"button\");\n\t\tlet gcd = document.createElement(\"button\");\n\t\tlet factorial = document.createElement(\"button\");\n\t\t\n\t\tbasicmode.innerText = await availableAPIs.lookupLocale(\"CALC_BASICMODE_BTN\");\n\t\tadd.innerText = await availableAPIs.lookupLocale(\"CALC_ADD\");\n\t\tsubtract.innerText = await availableAPIs.lookupLocale(\"CALC_SUBTRACT\");\n\t\tmultiply.innerText = await availableAPIs.lookupLocale(\"CALC_MULTIPLY\");\n\t\tdivide.innerText = await availableAPIs.lookupLocale(\"CALC_DIVIDE\");\n\t\ttoMixed.innerText = await availableAPIs.lookupLocale(\"CALC_TOMIXED_BTN\");\n\t\ttoImproper.innerText = await availableAPIs.lookupLocale(\"CALC_TOIMPR_BTN\");\n\t\tgcd.innerText = await availableAPIs.lookupLocale(\"CALC_GCD\");\n\t\tfactorial.innerText = await availableAPIs.lookupLocale(\"CALC_FACTORIAL\");\n\n\t\tbasicmode.onclick = mainPage;\n\t\tadd.onclick = advancedModeActionBuilder(\"ADD\");\n\t\tsubtract.onclick = advancedModeActionBuilder(\"SUBTRACT\");\n\t\tmultiply.onclick = advancedModeActionBuilder(\"MULTIPLY\");\n\t\tdivide.onclick = advancedModeActionBuilder(\"DIVIDE\");\n\t\ttoMixed.onclick = toMixedPage;\n\t\ttoImproper.onclick = toImproperPage;\n\t\tgcd.onclick = gcdPage;\n\t\tfactorial.onclick = factorialPage;\n\t\t\n\t\tpage.appendChild(basicmode);\n\t\tpage.appendChild(add);\n\t\tpage.appendChild(subtract);\n\t\tpage.appendChild(multiply);\n\t\tpage.appendChild(divide);\n\t\tpage.appendChild(toMixed);\n\t\tpage.appendChild(toImproper);\n\t\tpage.appendChild(gcd);\n\t\tpage.appendChild(factorial);\n\t}\n\n\tfunction basicModeActionBuilder(sign) {\n\t\treturn async function() {\n\t\t\tpage.innerText = \"\";\n\t\t\tpageHeader.innerText = \"\";\n\n\t\t\tlet backButton = document.createElement(\"button\");\n\t\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\t\tlet operand1 = document.createElement(\"input\");\n\t\t\tlet operationSign = document.createElement(\"span\");\n\t\t\tlet operand2 = document.createElement(\"input\");\n\t\t\tlet result = document.createElement(\"input\");\n\t\t\tlet compute = document.createElement(\"button\");\n\t\t\tpageHeader.appendChild(backButton);\n\t\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_\" + sign);\n\t\t\tif (sign == \"ADD\") operationSign.innerText = \"+\";\n\t\t\tif (sign == \"SUBTRACT\") operationSign.innerText = \"-\";\n\t\t\tif (sign == \"MULTIPLY\") operationSign.innerText = \"*\";\n\t\t\tif (sign == \"DIVIDE\") operationSign.innerText = \"/\";\n\t\t\tcompute.innerText = \"=\";\n\t\t\toperand1.value = 0;\n\t\t\toperand2.value = 0;\n\t\t\toperand1.placeholder = (await availableAPIs.lookupLocale(\"CALC_OPERAND\")).replace(\"%s\", 1);\n\t\t\toperand2.placeholder = (await availableAPIs.lookupLocale(\"CALC_OPERAND\")).replace(\"%s\", 2);\n\t\t\toperand1.type = \"number\";\n\t\t\toperand2.type = \"number\";\n\t\t\tresult.type = \"number\";\n\t\t\tresult.readOnly = true;\n\n\t\t\tbackButton.innerText = \"<-\";\n\t\t\tbackButton.onclick = mainPage;\n\n\t\t\tpage.appendChild(operand1);\n\t\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\t\tpage.appendChild(operationSign);\n\t\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\t\tpage.appendChild(operand2);\n\t\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\t\tpage.appendChild(compute);\n\t\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\t\tpage.appendChild(result);\n\n\t\t\tcompute.onclick = function() {\n\t\t\t\tif (sign == \"ADD\") result.value = parseInt(operand1.value) + parseInt(operand2.value);\n\t\t\t\tif (sign == \"SUBTRACT\") result.value = parseInt(operand1.value) - parseInt(operand2.value);\n\t\t\t\tif (sign == \"MULTIPLY\") result.value = parseInt(operand1.value) * parseInt(operand2.value);\n\t\t\t\tif (sign == \"DIVIDE\") result.value = parseInt(operand1.value) / parseInt(operand2.value);\n\t\t\t}\n\t\t}\n\t}\n\tfunction advancedModeActionBuilder(sign) {\n\t\treturn async function() {\n\t\t\tpage.innerText = \"\";\n\t\t\tpageHeader.innerText = \"\";\n\n\t\t\tlet backButton = document.createElement(\"button\");\n\t\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\t\tlet container = document.createElement(\"div\");\n\t\t\tlet operand1 = document.createElement(\"div\");\n\t\t\tlet operationSignContainer = document.createElement(\"div\");\n\t\t\tlet operationSign = document.createElement(\"p\");\n\t\t\tlet operand2 = document.createElement(\"div\");\n\t\t\tlet result = document.createElement(\"div\");\n\t\t\tlet compute = document.createElement(\"button\");\n\t\t\tlet operand1Numerator = document.createElement(\"input\");\n\t\t\tlet operand1Denominator = document.createElement(\"input\");\n\t\t\tlet operand2Numerator = document.createElement(\"input\");\n\t\t\tlet operand2Denominator = document.createElement(\"input\");\n\t\t\tlet resultNumerator = document.createElement(\"input\");\n\t\t\tlet resultDenominator = document.createElement(\"input\");\n\t\t\tlet hr1 = document.createElement(\"hr\");\n\t\t\tlet hr2 = document.createElement(\"hr\");\n\t\t\tlet hr3 = document.createElement(\"hr\");\n\t\t\tpageHeader.appendChild(backButton);\n\t\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\t\tcontainer.style = \"display: flex; width: fit-content;\";\n\t\t\toperand1.style = \"display: flex; flex-direction: column;\";\n\t\t\toperationSignContainer.style = \"display: flex; flex-direction: column; padding: 0 4px;\";\n\t\t\toperand2.style = \"display: flex; flex-direction: column;\";\n\t\t\tresult.style = \"display: flex; flex-direction: column;\";\n\t\t\t[hr1, hr2, hr3].map(a => a.style = \"width: 100%;\");\n\n\t\t\toperand1.appendChild(operand1Numerator);\n\t\t\toperand1.appendChild(hr1);\n\t\t\toperand1.appendChild(operand1Denominator);\n\t\t\toperationSignContainer.appendChild(document.createElement(\"div\"));\n\t\t\toperationSignContainer.appendChild(operationSign);\n\t\t\toperand2.appendChild(operand2Numerator);\n\t\t\toperand2.appendChild(hr2);\n\t\t\toperand2.appendChild(operand2Denominator);\n\t\t\tresult.appendChild(resultNumerator);\n\t\t\tresult.appendChild(hr3);\n\t\t\tresult.appendChild(resultDenominator);\n\t\t\tcontainer.appendChild(operand1);\n\t\t\tcontainer.appendChild(operationSignContainer);\n\t\t\tcontainer.appendChild(operand2);\n\t\t\tcontainer.appendChild(compute);\n\t\t\tcontainer.appendChild(result);\n\n\t\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_\" + sign);\n\t\t\tif (sign == \"ADD\") operationSign.innerText = \"+\";\n\t\t\tif (sign == \"SUBTRACT\") operationSign.innerText = \"-\";\n\t\t\tif (sign == \"MULTIPLY\") operationSign.innerText = \"*\";\n\t\t\tif (sign == \"DIVIDE\") operationSign.innerText = \"/\";\n\t\t\tcompute.innerText = \"=\";\n\t\t\tresultNumerator.readOnly = true;\n\t\t\tresultDenominator.readOnly = true;\n\n\t\t\tbackButton.innerText = \"<-\";\n\t\t\tbackButton.onclick = advPage;\n\n\t\t\tpage.appendChild(container);\n\n\t\t\tcompute.onclick = function() {\n\t\t\t\tlet fraction1 = fraction(BigInt(operand1Numerator.value), BigInt(operand1Denominator.value)).simplify();\n\t\t\t\tlet fraction2 = fraction(BigInt(operand2Numerator.value), BigInt(operand2Denominator.value)).simplify();\n\t\t\t\tlet result = fraction1[sign.toLowerCase()](fraction2);\n\t\t\t\tresultNumerator.value = result.numerator;\n\t\t\t\tresultDenominator.value = result.denominator;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function toMixedPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tlet container = document.createElement(\"div\");\n\t\tlet operand1 = document.createElement(\"div\");\n\t\tlet result = document.createElement(\"div\");\n\t\tlet compute = document.createElement(\"button\");\n\t\tlet operandNumerator = document.createElement(\"input\");\n\t\tlet operandDenominator = document.createElement(\"input\");\n\t\tlet resultWholes = document.createElement(\"input\");\n\t\tlet resultNumerator = document.createElement(\"input\");\n\t\tlet resultDenominator = document.createElement(\"input\");\n\t\tlet hr1 = document.createElement(\"hr\");\n\t\tlet hr2 = document.createElement(\"hr\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\tcontainer.style = \"display: flex; width: fit-content;\";\n\t\toperand1.style = \"display: flex; flex-direction: column;\";\n\t\tresult.style = \"display: flex; flex-direction: column;\";\n\t\t[hr1, hr2].map(a => a.style = \"width: 100%;\");\n\n\t\toperand1.appendChild(operandNumerator);\n\t\toperand1.appendChild(hr1);\n\t\toperand1.appendChild(operandDenominator);\n\t\tresult.appendChild(resultNumerator);\n\t\tresult.appendChild(hr2);\n\t\tresult.appendChild(resultDenominator);\n\t\tcontainer.appendChild(operand1);\n\t\tcontainer.appendChild(compute);\n\t\tcontainer.appendChild(resultWholes);\n\t\tcontainer.appendChild(result);\n\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_TOMIXED_BTN\");\n\t\tcompute.innerText = \"=\";\n\t\tresultWholes.readOnly = true;\n\t\tresultNumerator.readOnly = true;\n\t\tresultDenominator.readOnly = true;\n\n\t\tbackButton.innerText = \"<-\";\n\t\tbackButton.onclick = advPage;\n\n\t\tpage.appendChild(container);\n\n\t\tcompute.onclick = function() {\n\t\t\tlet fraction1 = fraction(BigInt(operandNumerator.value), BigInt(operandDenominator.value)).simplify();\n\t\t\tlet cleanNum = abs(fraction1.cleanNumerator());\n\t\t\tlet wholes = fraction1.getWholes();\n\t\t\tresultWholes.value = wholes || (fraction1.numerator < 0 ? \"-\" : \"\");\n\t\t\tresultNumerator.value = cleanNum;\n\t\t\tresultDenominator.value = fraction1.denominator;\n\t\t}\n\t}\n\n\tasync function toImproperPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tlet container = document.createElement(\"div\");\n\t\tlet operand1 = document.createElement(\"div\");\n\t\tlet result = document.createElement(\"div\");\n\t\tlet compute = document.createElement(\"button\");\n\t\tlet operandWholes = document.createElement(\"input\");\n\t\tlet operandNumerator = document.createElement(\"input\");\n\t\tlet operandDenominator = document.createElement(\"input\");\n\t\tlet resultNumerator = document.createElement(\"input\");\n\t\tlet resultDenominator = document.createElement(\"input\");\n\t\tlet hr1 = document.createElement(\"hr\");\n\t\tlet hr2 = document.createElement(\"hr\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\tcontainer.style = \"display: flex; width: fit-content;\";\n\t\toperand1.style = \"display: flex; flex-direction: column;\";\n\t\tresult.style = \"display: flex; flex-direction: column;\";\n\t\t[hr1, hr2].map(a => a.style = \"width: 100%;\");\n\n\t\toperand1.appendChild(operandNumerator);\n\t\toperand1.appendChild(hr1);\n\t\toperand1.appendChild(operandDenominator);\n\t\tresult.appendChild(resultNumerator);\n\t\tresult.appendChild(hr2);\n\t\tresult.appendChild(resultDenominator);\n\t\tcontainer.appendChild(operandWholes);\n\t\tcontainer.appendChild(operand1);\n\t\tcontainer.appendChild(compute);\n\t\tcontainer.appendChild(result);\n\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_TOIMPR_BTN\");\n\t\tcompute.innerText = \"=\";\n\t\tresultNumerator.readOnly = true;\n\t\tresultDenominator.readOnly = true;\n\n\t\tbackButton.innerText = \"<-\";\n\t\tbackButton.onclick = advPage;\n\n\t\tpage.appendChild(container);\n\n\t\tcompute.onclick = function() {\n\t\t\tlet sign = operandWholes.value < 0 ? -1 : 1;\n\t\t\tlet fraction1;\n\t\t\tif (operandWholes.value == \"-\") fraction1 = fraction(-BigInt(operandNumerator.value), BigInt(operandDenominator.value)).simplify();\n\t\t\telse fraction1 = fraction(BigInt(operandDenominator.value) * BigInt(operandWholes.value) + BigInt(operandNumerator.value * sign), BigInt(operandDenominator.value)).simplify();\n\t\t\tresultNumerator.value = fraction1.numerator;\n\t\t\tresultDenominator.value = fraction1.denominator;\n\t\t}\n\t}\n\n\tasync function gcdPage() {\n\t\tpageHeader.innerText = \"\";\n\t\tpage.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tlet operand1 = document.createElement(\"input\");\n\t\tlet operand2 = document.createElement(\"input\");\n\t\tlet result = document.createElement(\"input\");\n\t\tlet compute = document.createElement(\"button\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_GCD_PAGE\");\n\t\tcompute.innerText = \"=\";\n\n\t\toperand1.value = 0;\n\t\toperand2.value = 0;\n\t\toperand1.placeholder = (await availableAPIs.lookupLocale(\"CALC_OPERAND\")).replace(\"%s\", 1);\n\t\toperand2.placeholder = (await availableAPIs.lookupLocale(\"CALC_OPERAND\")).replace(\"%s\", 2);\n\t\tresult.readOnly = true;\n\n\t\tpage.insertAdjacentText(\"beforeend\", \"gcd(\");\n\t\tpage.appendChild(operand1);\n\t\tpage.insertAdjacentText(\"beforeend\", \", \");\n\t\tpage.appendChild(operand2);\n\t\tpage.insertAdjacentText(\"beforeend\", \") \");\n\t\tpage.appendChild(compute);\n\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\tpage.appendChild(result);\n\n\t\tbackButton.onclick = advPage;\n\t\tcompute.onclick = function() {\n\t\t\tresult.value = gcd(BigInt(operand1.value), BigInt(operand2.value));\n\t\t}\n\t}\n\n\tasync function factorialPage() {\n\t\tpageHeader.innerText = \"\";\n\t\tpage.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tlet operand = document.createElement(\"input\");\n\t\tlet result = document.createElement(\"input\");\n\t\tlet compute = document.createElement(\"button\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CALC_FACTORIAL\");\n\t\tcompute.innerText = \"=\";\n\n\t\toperand.value = 0;\n\t\toperand.placeholder = (await availableAPIs.lookupLocale(\"CALC_OPERAND\")).replace(\"%s\", \"\");\n\t\tresult.readOnly = true;\n\n\t\tpage.appendChild(operand);\n\t\tpage.insertAdjacentText(\"beforeend\", \"! \");\n\t\tpage.appendChild(compute);\n\t\tpage.insertAdjacentText(\"beforeend\", \" \");\n\t\tpage.appendChild(result);\n\n\t\tbackButton.onclick = advPage;\n\t\tcompute.onclick = function() {\n\t\t\tlet resultValue = 1n;\n\t\t\tfor (let i = 1n; i <= BigInt(operand.value); i++) resultValue *= i;\n\t\t\tresult.value = resultValue;\n\t\t}\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;\n\n// Fractions\nlet gcd = (a, b) => !abs(b) ? abs(a) : gcd(abs(b), abs(a % b));\nlet abs = (a) => a < 0n ? (a * (-1n)) : a;\n\nfunction fraction(a, b) {\n\tif (typeof a !== \"bigint\") throw new Error(\"Failed to construct fraction\");\n\tif (typeof b !== \"bigint\") throw new Error(\"Failed to construct fraction\");\n\tif (!b) throw new Error(\"Failed to construct fraction\");\n\treturn {\n\t\tnumerator: a,\n\t\tdenominator: b,\n\t\tgetWholes: function() {\n\t\t\treturn a / b;\n\t\t},\n\t\tcleanNumerator: function() {\n\t\t\treturn a % b;\n\t\t},\n\t\tmultiply: function(otherFraction) {\n\t\t\treturn fraction(otherFraction.numerator * a, otherFraction.denominator * b).simplify();\n\t\t},\n\t\tdivide: function(otherFraction) {\n\t\t\treturn fraction(otherFraction.denominator * a, otherFraction.numerator * b).simplify();\n\t\t},\n\t\tadd: function(otherFraction) {\n\t\t\tlet cleanOtherFraction = otherFraction.simplify();\n\t\t\tlet lcm = (cleanOtherFraction.denominator * b) / gcd(cleanOtherFraction.denominator, b);\n\t\t\tlet adaptedNumerator1 = a * (lcm / b);\n\t\t\tlet adaptedNumerator2 = cleanOtherFraction.numerator * (lcm / cleanOtherFraction.denominator);\n\t\t\treturn fraction(adaptedNumerator1 + adaptedNumerator2, lcm).simplify();\n\t\t},\n\t\tsubtract: function(otherFraction) {\n\t\t\tlet cleanOtherFraction = otherFraction.simplify();\n\t\t\tlet lcm = (cleanOtherFraction.denominator * b) / gcd(cleanOtherFraction.denominator, b);\n\t\t\tlet adaptedNumerator1 = a * (lcm / b);\n\t\t\tlet adaptedNumerator2 = cleanOtherFraction.numerator * (lcm / cleanOtherFraction.denominator);\n\t\t\treturn fraction(adaptedNumerator1 - adaptedNumerator2, lcm).simplify();\n\t\t},\n\t\tsimplify: function() {\n\t\t\tlet commonDiv = gcd(a, b);\n\t\t\tif ((a < 0 && b < 0) || (b < 0 && a > 0)) {\n\t\t\t\ta = a * (-1);\n\t\t\t\tb = b * (-1);\n\t\t\t}\n\t\t\treturn fraction(a / commonDiv, b / commonDiv);\n\t\t}\n\t}\n}","31cf5f178461e9173edfc9e5d669f364a4a010f11d92319cae56d3ac42fba66a184e7201768e2fa7781494f0bc10660dcc313e51416996910691bb2217003cf4":"{\"path\":\"system/apps/calculator.js\",\"localeReferenceName\":\"CALC_TITLE\"}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941350,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"9b59e445782c074f1cf1edf2f63ac58a657084f0de3234b782eaf658ed93e636aaedd959a72e8b42bbe0ca25881abb37a66cd91b3e34b23f63d324c2842e4507"}},"50-crypto-tools.fs":{"backend":{"files":{"apps":{"crypto.js":"54363b64684fc22e95aaf6b41064ccc02edd7b5ee037699a6c6fc1593f7b73091eb1239194886945566ed34f33ca93866f00594f7837118140fdc1cdb638457b","links":{"crypto.lnk":"5de63f5ea654384ecad2cac4c320bd21833606b0ebabf037992fa8a6d748dce94e1526f631f8e8fe331a5db1d62bba1e672647f2a55b3b8a4ba31f72d43776ab"}}},"permissions":{"apps/crypto.js":{"world":"rx"},"apps/links/crypto.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"54363b64684fc22e95aaf6b41064ccc02edd7b5ee037699a6c6fc1593f7b73091eb1239194886945566ed34f33ca93866f00594f7837118140fdc1cdb638457b":"// =====BEGIN MANIFEST=====\n// link: lrn:CRYPTO_TOOLS_TITLE\n// signer: automaticSigner\n// allow: FS_WRITE, IPC_CREATE_PIPE, IPC_LISTEN_PIPE, FS_READ, FS_LIST_PARTITIONS, IPC_SEND_PIPE, GET_LOCALE, GET_THEME, FS_BYPASS_PERMISSIONS, START_TASK, GET_LOCALE, CSP_OPERATIONS, GET_USER_INFO\n// signature: 46967af3ecd146853a5da995d9d059d76e8e320adc30596d33cf7d81dd68ba249d8be5850eb7bc3ffa5de769acf068d954de4a6dee0fea638f6e04916206cc06\n// =====END MANIFEST=====\nlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\nlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"CRYPTO_TOOLS_TITLE\"));\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"FS_WRITE\", \"IPC_CREATE_PIPE\", \"IPC_LISTEN_PIPE\", \"FS_READ\", \"FS_LIST_PARTITIONS\", \"IPC_SEND_PIPE\", \"START_TASK\", \"GET_LOCALE\", \"CSP_OPERATIONS\" ];\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tdocument.body.innerText = await availableAPIs.lookupLocale(\"CRYPTO_TOOLS_NOPERM\");\n\t\tlet currentToken = await availableAPIs.getProcessToken();\n\t\tlet newToken = await availableAPIs.consentGetToken({\n\t\t\tintent: await availableAPIs.lookupLocale(\"CRYPTO_TOOLS_INTENT\"),\n\t\t\tname: await availableAPIs.lookupLocale(\"CRYPTO_TOOLS_TITLE\"),\n\t\t\tdesiredUser: await availableAPIs.getUser()\n\t\t});\n\t\tif (!newToken) return;\n\t\tawait availableAPIs.setProcessToken(newToken);\n\t\tawait availableAPIs.revokeToken(currentToken);\n\t\tprivileges = await availableAPIs.getPrivileges();\n\t\tif (!checklist.every(p => privileges.includes(p))) return;\n\t}\n\tdocument.body.innerText = \"\";\n\tlet pageHeader = document.createElement(\"b\");\n\tlet dividePageHeader = document.createElement(\"hr\");\n\tlet page = document.createElement(\"div\");\n\tdocument.body.appendChild(pageHeader);\n\tdocument.body.appendChild(dividePageHeader);\n\tdocument.body.appendChild(page);\n\tasync function mainPage() {\n\t\tpageHeader.innerText = await availableAPIs.lookupLocale(\"CRYPTO_TOOLS_TITLE\");\n\t\tpage.innerText = \"\";\n\t\tlet rng = document.createElement(\"button\");\n\t\tlet hash = document.createElement(\"button\");\n\t\tlet keyGeneration = document.createElement(\"button\");\n\t\tlet encrypt = document.createElement(\"button\");\n\t\tlet decrypt = document.createElement(\"button\");\n\t\tlet sign = document.createElement(\"button\");\n\t\tlet verify = document.createElement(\"button\");\n\t\tlet deriveBits = document.createElement(\"button\");\n\t\t\n\t\trng.innerText = await availableAPIs.lookupLocale(\"CRYPTO_RNG\");\n\t\thash.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH\");\n\t\tkeyGeneration.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN\");\n\t\tencrypt.innerText = await availableAPIs.lookupLocale(\"CRYPTO_ENCRYPT\");\n\t\tdecrypt.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DECRYPT\");\n\t\tsign.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SIGN\");\n\t\tverify.innerText = await availableAPIs.lookupLocale(\"CRYPTO_VERIFY\");\n\t\tderiveBits.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DERIVEBITS\");\n\n\t\trng.onclick = rngPage;\n\t\thash.onclick = hashPage;\n\t\tkeyGeneration.onclick = keyGenPage;\n\t\tencrypt.onclick = encryptPage;\n\t\tdecrypt.onclick = decryptPage;\n\t\tsign.onclick = signPage;\n\t\tverify.onclick = verifyPage;\n\t\tderiveBits.onclick = deriveBitsPage;\n\n\t\tpage.appendChild(rng);\n\t\tpage.appendChild(hash);\n\t\tpage.appendChild(keyGeneration);\n\t\tpage.appendChild(encrypt);\n\t\tpage.appendChild(decrypt);\n\t\tpage.appendChild(sign);\n\t\tpage.appendChild(verify);\n\t\tpage.appendChild(deriveBits);\n\t}\n\n\tmainPage();\n\n\tasync function rngPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet rngButton = document.createElement(\"button\");\n\t\tlet rngLabel = document.createElement(\"label\");\n\t\tlet rngField = document.createElement(\"textarea\");\n\t\tlet rngSaveButton = document.createElement(\"button\");\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_RNG\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\trngButton.innerText = await availableAPIs.lookupLocale(\"GENERATE\");\n\t\trngLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_RNGOUT_FIELD\");\n\t\trngSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(rngButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(rngLabel);\n\t\tpage.appendChild(rngSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(rngField);\n\n\t\tlengthInput.type = \"number\";\n\t\tlengthInput.value = 256;\n\t\trngField.readOnly = true;\n\n\t\tbackButton.onclick = mainPage;\n\t\trngSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: rngField.value });\n\t\t}\n\t\trngButton.onclick = async function() {\n\t\t\trngField.value = u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(Math.floor(parseInt(lengthInput.value)))\n\t\t\t}));\n\t\t}\n\t}\n\tasync function hashPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet plaintextLabel = document.createElement(\"label\");\n\t\tlet plaintextLoadButton = document.createElement(\"button\");\n\t\tlet plaintextField = document.createElement(\"textarea\");\n\t\tlet plaintextFormatLabel = document.createElement(\"label\");\n\t\tlet plaintextFormatOption = document.createElement(\"select\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet hashButton = document.createElement(\"button\");\n\t\tlet digestLabel = document.createElement(\"label\");\n\t\tlet digestField = document.createElement(\"textarea\");\n\t\tlet digestSaveButton = document.createElement(\"button\");\n\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet textAs = {\n\t\t\tunicode: \"UTF-8\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t}\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH\");\n\t\tplaintextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXT_FIELD\");\n\t\tplaintextLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tplaintextFormatLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXTAS_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\thashButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_ACTION\");\n\t\tdigestLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASHOUT_FIELD\");\n\t\tdigestSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(plaintextLabel);\n\t\tpage.appendChild(plaintextLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextFormatLabel);\n\t\tpage.appendChild(plaintextFormatOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(hashButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(digestLabel);\n\t\tpage.appendChild(digestSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(digestField);\n\n\t\tdigestField.readOnly = true;\n\n\t\tfor (let plaintextFormat in textAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = plaintextFormat;\n\t\t\toption.innerText = textAs[plaintextFormat];\n\t\t\tplaintextFormatOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tplaintextLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) plaintextField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tdigestSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: digestField.value });\n\t\t}\n\t\thashButton.onclick = async function() {\n\t\t\tlet data;\n\t\t\tif (plaintextFormatOption.value == \"raw\") data = hexToU8A(plaintextField.value);\n\t\t\tif (plaintextFormatOption.value == \"unicode\") data = new TextEncoder().encode(plaintextField.value);\n\t\t\tlet digest = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"digest\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: hashOption.value,\n\t\t\t\t\tdata\n\t\t\t\t}\n\t\t\t});\n\t\t\tdigestField.value = u8aToHex(new Uint8Array(digest));\n\t\t}\n\t}\n\tasync function keyGenPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet modLenLabel = document.createElement(\"label\");\n\t\tlet modLen = document.createElement(\"input\");\n\t\tlet publicExponentLabel = document.createElement(\"label\");\n\t\tlet publicExponent = document.createElement(\"input\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet exportAsLabel = document.createElement(\"label\");\n\t\tlet exportAsOption = document.createElement(\"select\");\n\t\tlet keyUsagesLabel = document.createElement(\"label\");\n\t\tlet generateButton = document.createElement(\"button\");\n\t\tlet publicKeyLabel = document.createElement(\"label\");\n\t\tlet publicKeySave = document.createElement(\"button\");\n\t\tlet publicKeyField = document.createElement(\"textarea\");\n\t\tlet privateKeyLabel = document.createElement(\"label\");\n\t\tlet privateKeySave = document.createElement(\"button\");\n\t\tlet privateKeyField = document.createElement(\"textarea\");\n\t\t\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\tmodLenLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_MODLEN_FIELD\");\n\t\tpublicExponentLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PUBEXP_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\texportAsLabel.innerText = await availableAPIs.lookupLocale(\"EXPORT_AS_FIELD\");\n\t\tkeyUsagesLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEYUSE_FIELD\");\n\t\tgenerateButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_ACTION\");\n\t\tpublicKeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PUBKEY_FIELD\");\n\t\tpublicKeySave.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\t\tprivateKeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PRIVKEY_FIELD\");\n\t\tprivateKeySave.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tlet algorithms = [ \"RSASSA-PKCS1-v1_5\", \"RSA-PSS\", \"RSA-OAEP\", \"ECDSA\", \"ECDH\", \"HMAC\", \"AES-CBC\", \"AES-CTR\", \"AES-GCM\", \"Ed25519\", \"X25519\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet keyUsages = [ \"encrypt\", \"decrypt\", \"sign\", \"verify\", \"deriveKey\", \"deriveBits\", \"wrapKey\", \"unwrapKey\" ];\n\t\tlet exportAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\t\tlet setKeyUsages = Object.fromEntries(keyUsages.map(a => [a, false]));\n\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(modLenLabel);\n\t\tpage.appendChild(modLen);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(publicExponentLabel);\n\t\tpage.appendChild(publicExponent);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(exportAsLabel);\n\t\tpage.appendChild(exportAsOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(keyUsagesLabel);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let usage of keyUsages) {\n\t\t\tlet inputCheckBox = document.createElement(\"input\");\n\t\t\tlet label = document.createElement(\"label\");\n\n\t\t\tinputCheckBox.type = \"checkbox\";\n\t\t\tinputCheckBox.id = usage;\n\t\t\tinputCheckBox.onchange = function() {\n\t\t\t\tsetKeyUsages[usage] = inputCheckBox.checked;\n\t\t\t};\n\n\t\t\tlabel.innerText = usage;\n\t\t\tlabel.htmlFor = usage;\n\n\t\t\tpage.appendChild(inputCheckBox);\n\t\t\tpage.appendChild(label);\n\t\t\tpage.appendChild(document.createElement(\"br\"));\n\t\t}\n\n\t\tfor (let exportType in exportAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = exportType;\n\t\t\toption.innerText = exportAs[exportType];\n\t\t\texportAsOption.appendChild(option);\n\t\t}\n\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(generateButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(publicKeyLabel);\n\t\tpage.appendChild(publicKeySave);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(publicKeyField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(privateKeyLabel);\n\t\tpage.appendChild(privateKeySave);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(privateKeyField);\n\n\t\tbackButton.onclick = mainPage;\n\t\tasync function saveKey(type) {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: type == \"private\" ? privateKeyField.value : publicKeyField.value });\n\t\t}\n\n\t\tpublicKeySave.onclick = () => saveKey(\"public\");\n\t\tprivateKeySave.onclick = () => saveKey(\"private\");\n\n\t\tmodLen.type = \"number\";\n\t\tlengthInput.type = \"number\";\n\n\t\tmodLen.value = 2048;\n\t\tlengthInput.value = 256;\n\t\tpublicExponent.value = \"010001\";\n\n\t\tpublicKeyField.readOnly = true;\n\t\tprivateKeyField.readOnly = true;\n\n\t\tgenerateButton.addEventListener(\"click\", async function() {\n\t\t\tpublicKeyField.value = await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_MSG\");\n\t\t\tprivateKeyField.value = await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_MSG\");\n\t\t\tlet key = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"generateKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\tmodulusLength: parseInt(modLen.value),\n\t\t\t\t\t\tpublicExponent: Uint8Array.from(publicExponent.value.match(/.{1,2}/g).map(a => parseInt(a, 16))),\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthInput.value),\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value\n\t\t\t\t\t},\n\t\t\t\t\textractable: true,\n\t\t\t\t\tkeyUsages: Object.entries(setKeyUsages).filter(a => a[1]).map(a => a[0])\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet exported = {};\n\t\t\ttry {\n\t\t\t\texported = {\n\t\t\t\t\tprivateKey: await availableAPIs.cspOperation({\n\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\toperation: \"exportKey\",\n\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\tformat: exportAsOption.value,\n\t\t\t\t\t\t\tkey: key.type == \"secret\" ? key : key.privateKey\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tpublicKey: key.type == \"secret\" ? undefined : await availableAPIs.cspOperation({\n\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\toperation: \"exportKey\",\n\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\tformat: exportAsOption.value,\n\t\t\t\t\t\t\tkey: key.publicKey\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t} catch {}\n\t\t\tif (key.type == \"secret\") await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: key\n\t\t\t});\n\t\t\telse {\n\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\tcspArgument: key.privateKey\n\t\t\t\t});\n\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\tcspArgument: key.publicKey\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (exportAsOption.value == \"jwk\") {\n\t\t\t\tpublicKeyField.value = JSON.stringify(exported.publicKey || await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_SYMM\"));\n\t\t\t\tprivateKeyField.value = JSON.stringify(exported.privateKey || await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_EXPFAIL\"));\n\t\t\t} else if (exportAsOption.value == \"raw\") {\n\t\t\t\tpublicKeyField.value = u8aToHex(new Uint8Array(exported.publicKey || new ArrayBuffer(0))) || await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_SYMM\");\n\t\t\t\tprivateKeyField.value = u8aToHex(new Uint8Array(exported.privateKey || new ArrayBuffer(0))) || await availableAPIs.lookupLocale(\"CRYPTO_KEYGEN_EXPFAIL\");\n\t\t\t}\n\t\t});\n\t}\n\tasync function encryptPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet plaintextLabel = document.createElement(\"label\");\n\t\tlet plaintextLoadButton = document.createElement(\"button\");\n\t\tlet plaintextField = document.createElement(\"textarea\");\n\t\tlet plaintextFormatLabel = document.createElement(\"label\");\n\t\tlet plaintextFormatOption = document.createElement(\"select\");\n\t\tlet keyLabel = document.createElement(\"label\");\n\t\tlet keyLoadButton = document.createElement(\"button\");\n\t\tlet keyField = document.createElement(\"textarea\");\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet ivLabel = document.createElement(\"label\");\n\t\tlet ivInput = document.createElement(\"input\");\n\t\tlet ivGenerateButton = document.createElement(\"button\");\n\t\tlet counterLabel = document.createElement(\"label\");\n\t\tlet counterInput = document.createElement(\"input\");\n\t\tlet importAsLabel = document.createElement(\"label\");\n\t\tlet importAsOption = document.createElement(\"select\");\n\t\tlet encryptButton = document.createElement(\"button\");\n\t\tlet ciphertextLabel = document.createElement(\"label\");\n\t\tlet ciphertextField = document.createElement(\"textarea\");\n\t\tlet ciphertextSaveButton = document.createElement(\"button\");\n\n\t\tlet algorithms = [ \"RSA-OAEP\", \"AES-CBC\", \"AES-CTR\", \"AES-GCM\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet importAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\t\tlet textAs = {\n\t\t\tunicode: \"UTF-8\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t}\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_ENCRYPT\");\n\t\tplaintextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXT_FIELD\");\n\t\tplaintextLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tplaintextFormatLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXTAS_FIELD\");\n\t\tkeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEY_FIELD\");\n\t\tkeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\tivLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_IV_FIELD\");\n\t\tivGenerateButton.innerText = await availableAPIs.lookupLocale(\"REGENERATE\");\n\t\tcounterLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_CTR_FIELD\");\n\t\timportAsLabel.innerText = await availableAPIs.lookupLocale(\"IMPORT_AS_FIELD\");\n\t\tencryptButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_ENCRYPT_ACTION\");\n\t\tciphertextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_CIPHERTEXT_FIELD\");\n\t\tciphertextSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(plaintextLabel);\n\t\tpage.appendChild(plaintextLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextFormatLabel);\n\t\tpage.appendChild(plaintextFormatOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(keyLabel);\n\t\tpage.appendChild(keyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(keyField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(ivLabel);\n\t\tpage.appendChild(ivInput);\n\t\tpage.appendChild(ivGenerateButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(counterLabel);\n\t\tpage.appendChild(counterInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(importAsLabel);\n\t\tpage.appendChild(importAsOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(encryptButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(ciphertextLabel);\n\t\tpage.appendChild(ciphertextSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(ciphertextField);\n\n\t\tlengthInput.type = \"number\";\n\t\tlengthInput.value = 256;\n\t\tciphertextField.readOnly = true;\n\n\t\tfor (let plaintextFormat in textAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = plaintextFormat;\n\t\t\toption.innerText = textAs[plaintextFormat];\n\t\t\tplaintextFormatOption.appendChild(option);\n\t\t}\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let importType in importAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = importType;\n\t\t\toption.innerText = importAs[importType];\n\t\t\timportAsOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tplaintextLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) plaintextField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tkeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) keyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tciphertextSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: ciphertextField.value });\n\t\t}\n\t\tivGenerateButton.onclick = async function() {\n\t\t\tivInput.value = u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(16)\n\t\t\t}));\n\t\t};\n\t\tencryptButton.onclick = async function() {\n\t\t\tlet keyData, data;\n\t\t\tif (importAsOption.value == \"jwk\") keyData = JSON.parse(keyField.value);\n\t\t\tif (importAsOption.value == \"raw\") keyData = hexToU8A(keyField.value);\n\t\t\tif (plaintextFormatOption.value == \"raw\") data = hexToU8A(plaintextField.value);\n\t\t\tif (plaintextFormatOption.value == \"unicode\") data = new TextEncoder().encode(plaintextField.value);\n\t\t\tlet keyImport = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"importKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\tkeyData: keyData,\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\textractable: false,\n\t\t\t\t\tkeyUsages: [ \"encrypt\" ]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet ciphertext = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"encrypt\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\tiv: hexToU8A(ivInput.value || \"00\".repeat(16)),\n\t\t\t\t\t\tcounter: hexToU8A(counterInput.value || \"00\".repeat(16)),\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\tkey: keyImport,\n\t\t\t\t\tdata\n\t\t\t\t}\n\t\t\t});\n\t\t\tciphertextField.value = u8aToHex(new Uint8Array(ciphertext));\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: keyImport\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tasync function decryptPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet ciphertextLabel = document.createElement(\"label\");\n\t\tlet ciphertextLoadButton = document.createElement(\"button\");\n\t\tlet ciphertextField = document.createElement(\"textarea\");\n\t\tlet keyLabel = document.createElement(\"label\");\n\t\tlet keyLoadButton = document.createElement(\"button\");\n\t\tlet keyField = document.createElement(\"textarea\");\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet ivLabel = document.createElement(\"label\");\n\t\tlet ivInput = document.createElement(\"input\");\n\t\tlet counterLabel = document.createElement(\"label\");\n\t\tlet counterInput = document.createElement(\"input\");\n\t\tlet importAsLabel = document.createElement(\"label\");\n\t\tlet importAsOption = document.createElement(\"select\");\n\t\tlet plaintextFormatLabel = document.createElement(\"label\");\n\t\tlet plaintextFormatOption = document.createElement(\"select\");\n\t\tlet decryptButton = document.createElement(\"button\");\n\t\tlet plaintextLabel = document.createElement(\"label\");\n\t\tlet plaintextField = document.createElement(\"textarea\");\n\t\tlet plaintextSaveButton = document.createElement(\"button\");\n\n\t\tlet algorithms = [ \"RSA-OAEP\", \"AES-CBC\", \"AES-CTR\", \"AES-GCM\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet importAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\t\tlet textAs = {\n\t\t\tunicode: \"UTF-8\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t}\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DECRYPT\");\n\t\tciphertextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_CIPHERTEXT_FIELD\");\n\t\tciphertextLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tkeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEY_FIELD\");\n\t\tkeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\tivLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_IV_FIELD\");\n\t\tcounterLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_CTR_FIELD\");\n\t\timportAsLabel.innerText = await availableAPIs.lookupLocale(\"IMPORT_AS_FIELD\");\n\t\tdecryptButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DECRYPT_ACTION\");\n\t\tplaintextFormatLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXTAS_FIELD\");\n\t\tplaintextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXT_FIELD\");\n\t\tplaintextSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(ciphertextLabel);\n\t\tpage.appendChild(ciphertextLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(ciphertextField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(keyLabel);\n\t\tpage.appendChild(keyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(keyField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(ivLabel);\n\t\tpage.appendChild(ivInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(counterLabel);\n\t\tpage.appendChild(counterInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(importAsLabel);\n\t\tpage.appendChild(importAsOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(decryptButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(plaintextFormatLabel);\n\t\tpage.appendChild(plaintextFormatOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextLabel);\n\t\tpage.appendChild(plaintextSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextField);\n\n\t\tlengthInput.type = \"number\";\n\t\tlengthInput.value = 256;\n\t\tplaintextField.readOnly = true;\n\n\t\tfor (let plaintextFormat in textAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = plaintextFormat;\n\t\t\toption.innerText = textAs[plaintextFormat];\n\t\t\tplaintextFormatOption.appendChild(option);\n\t\t}\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let importType in importAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = importType;\n\t\t\toption.innerText = importAs[importType];\n\t\t\timportAsOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tciphertextLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) ciphertextField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tkeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) keyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tplaintextSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: plaintextField.value });\n\t\t}\n\t\tdecryptButton.onclick = async function() {\n\t\t\tlet keyData;\n\t\t\tif (importAsOption.value == \"jwk\") keyData = JSON.parse(keyField.value);\n\t\t\tif (importAsOption.value == \"raw\") keyData = hexToU8A(keyField.value);\n\t\t\tlet keyImport = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"importKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\tkeyData: keyData,\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\textractable: false,\n\t\t\t\t\tkeyUsages: [ \"decrypt\" ]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet ciphertext = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"decrypt\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\tiv: hexToU8A(ivInput.value || \"00\".repeat(16)),\n\t\t\t\t\t\tcounter: hexToU8A(counterInput.value || \"00\".repeat(16)),\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\tkey: keyImport,\n\t\t\t\t\tdata: hexToU8A(ciphertextField.value)\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (plaintextFormatOption.value == \"raw\") plaintextField.value = u8aToHex(new Uint8Array(ciphertext));\n\t\t\tif (plaintextFormatOption.value == \"unicode\") plaintextField.value = new TextDecoder().decode(ciphertext);\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: keyImport\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tasync function signPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet plaintextLabel = document.createElement(\"label\");\n\t\tlet plaintextLoadButton = document.createElement(\"button\");\n\t\tlet plaintextField = document.createElement(\"textarea\");\n\t\tlet plaintextFormatLabel = document.createElement(\"label\");\n\t\tlet plaintextFormatOption = document.createElement(\"select\");\n\t\tlet keyLabel = document.createElement(\"label\");\n\t\tlet keyLoadButton = document.createElement(\"button\");\n\t\tlet keyField = document.createElement(\"textarea\");\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet importAsLabel = document.createElement(\"label\");\n\t\tlet importAsOption = document.createElement(\"select\");\n\t\tlet signButton = document.createElement(\"button\");\n\t\tlet signatureLabel = document.createElement(\"label\");\n\t\tlet signatureField = document.createElement(\"textarea\");\n\t\tlet signatureSaveButton = document.createElement(\"button\");\n\n\t\tlet algorithms = [ \"RSASSA-PKCS1-v1_5\", \"RSA-PSS\", \"ECDSA\", \"HMAC\", \"Ed25519\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet importAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\t\tlet textAs = {\n\t\t\tunicode: \"UTF-8\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t}\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SIGN\");\n\t\tplaintextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXT_FIELD\");\n\t\tplaintextLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tplaintextFormatLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXTAS_FIELD\");\n\t\tkeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEY_FIELD\");\n\t\tkeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\timportAsLabel.innerText = await availableAPIs.lookupLocale(\"IMPORT_AS_FIELD\");\n\t\tsignButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SIGN_ACTION\");\n\t\tsignatureLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SIGNATURE_FIELD\");\n\t\tsignatureSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(plaintextLabel);\n\t\tpage.appendChild(plaintextLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextFormatLabel);\n\t\tpage.appendChild(plaintextFormatOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(keyLabel);\n\t\tpage.appendChild(keyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(keyField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(importAsLabel);\n\t\tpage.appendChild(importAsOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(signButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(signatureLabel);\n\t\tpage.appendChild(signatureSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(signatureField);\n\n\t\tlengthInput.type = \"number\";\n\t\tlengthInput.value = 256;\n\t\tsignatureField.readOnly = true;\n\n\t\tfor (let plaintextFormat in textAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = plaintextFormat;\n\t\t\toption.innerText = textAs[plaintextFormat];\n\t\t\tplaintextFormatOption.appendChild(option);\n\t\t}\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let importType in importAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = importType;\n\t\t\toption.innerText = importAs[importType];\n\t\t\timportAsOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tplaintextLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) plaintextField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tkeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) keyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tsignatureSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: signatureField.value });\n\t\t}\n\t\tsignButton.onclick = async function() {\n\t\t\tlet keyData, data;\n\t\t\tif (importAsOption.value == \"jwk\") keyData = JSON.parse(keyField.value);\n\t\t\tif (importAsOption.value == \"raw\") keyData = hexToU8A(keyField.value);\n\t\t\tif (plaintextFormatOption.value == \"raw\") data = hexToU8A(plaintextField.value);\n\t\t\tif (plaintextFormatOption.value == \"unicode\") data = new TextEncoder().encode(plaintextField.value);\n\t\t\tlet keyImport = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"importKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\tkeyData: keyData,\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\textractable: false,\n\t\t\t\t\tkeyUsages: [ \"sign\" ]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet signature = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"sign\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tsaltLength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\tkey: keyImport,\n\t\t\t\t\tdata\n\t\t\t\t}\n\t\t\t});\n\t\t\tsignatureField.value = u8aToHex(new Uint8Array(signature));\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: keyImport\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tasync function verifyPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet plaintextLabel = document.createElement(\"label\");\n\t\tlet plaintextLoadButton = document.createElement(\"button\");\n\t\tlet plaintextField = document.createElement(\"textarea\");\n\t\tlet plaintextFormatLabel = document.createElement(\"label\");\n\t\tlet plaintextFormatOption = document.createElement(\"select\");\n\t\tlet signatureLabel = document.createElement(\"label\");\n\t\tlet signatureField = document.createElement(\"textarea\");\n\t\tlet signatureLoadButton = document.createElement(\"button\");\n\t\tlet keyLabel = document.createElement(\"label\");\n\t\tlet keyLoadButton = document.createElement(\"button\");\n\t\tlet keyField = document.createElement(\"textarea\");\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthInput = document.createElement(\"input\");\n\t\tlet importAsLabel = document.createElement(\"label\");\n\t\tlet importAsOption = document.createElement(\"select\");\n\t\tlet verifyButton = document.createElement(\"button\");\n\t\tlet verifiedCheckbox = document.createElement(\"input\");\n\t\tlet verifiedLabel = document.createElement(\"label\");\n\n\t\tlet algorithms = [ \"RSASSA-PKCS1-v1_5\", \"RSA-PSS\", \"ECDSA\", \"HMAC\", \"Ed25519\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet importAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\t\tlet textAs = {\n\t\t\tunicode: \"UTF-8\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t}\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_VERIFY\");\n\t\tplaintextLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXT_FIELD\");\n\t\tplaintextLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tsignatureLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SIGNATURE_FIELD\");\n\t\tsignatureLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\tplaintextFormatLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PLAINTEXTAS_FIELD\");\n\t\tkeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_KEY_FIELD\");\n\t\tkeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\timportAsLabel.innerText = await availableAPIs.lookupLocale(\"IMPORT_AS_FIELD\");\n\t\tverifyButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_VERIFY_ACTION\");\n\t\tverifiedLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_VERIFIED_CHECKBOX\");\n\n\t\tpage.appendChild(plaintextLabel);\n\t\tpage.appendChild(plaintextLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(plaintextFormatLabel);\n\t\tpage.appendChild(plaintextFormatOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(signatureLabel);\n\t\tpage.appendChild(signatureLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(signatureField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(keyLabel);\n\t\tpage.appendChild(keyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(keyField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthInput);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(importAsLabel);\n\t\tpage.appendChild(importAsOption);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(verifyButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(verifiedCheckbox);\n\t\tpage.appendChild(verifiedLabel);\n\n\t\tlengthInput.type = \"number\";\n\t\tverifiedCheckbox.type = \"checkbox\";\n\t\tlengthInput.value = 256;\n\t\tverifiedCheckbox.disabled = true;\n\n\t\tfor (let plaintextFormat in textAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = plaintextFormat;\n\t\t\toption.innerText = textAs[plaintextFormat];\n\t\t\tplaintextFormatOption.appendChild(option);\n\t\t}\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let importType in importAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = importType;\n\t\t\toption.innerText = importAs[importType];\n\t\t\timportAsOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tplaintextLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) plaintextField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tkeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) keyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tsignatureLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) signatureField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tverifyButton.onclick = async function() {\n\t\t\tlet keyData, data;\n\t\t\tif (importAsOption.value == \"jwk\") keyData = JSON.parse(keyField.value);\n\t\t\tif (importAsOption.value == \"raw\") keyData = hexToU8A(keyField.value);\n\t\t\tif (plaintextFormatOption.value == \"raw\") data = hexToU8A(plaintextField.value);\n\t\t\tif (plaintextFormatOption.value == \"unicode\") data = new TextEncoder().encode(plaintextField.value);\n\t\t\tlet keyImport = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"importKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\tkeyData: keyData,\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthInput.value)\n\t\t\t\t\t},\n\t\t\t\t\textractable: false,\n\t\t\t\t\tkeyUsages: [ \"verify\" ]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet solution = false;\n\t\t\ttry {\n\t\t\t\tsolution = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"verify\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\t\tsaltLength: parseInt(lengthInput.value)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tkey: keyImport,\n\t\t\t\t\t\tsignature: hexToU8A(signatureField.value),\n\t\t\t\t\t\tdata\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch {}\n\t\t\tverifiedCheckbox.checked = solution;\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: keyImport\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tasync function deriveBitsPage() {\n\t\tpage.innerText = \"\";\n\t\tpageHeader.innerText = \"\";\n\t\tlet backButton = document.createElement(\"button\");\n\t\tlet pageHeaderText = document.createElement(\"span\");\n\t\tpageHeader.appendChild(backButton);\n\t\tpageHeader.appendChild(pageHeaderText);\n\t\tlet algorithmLabel = document.createElement(\"label\");\n\t\tlet algorithmOption = document.createElement(\"select\");\n\t\tlet publicKeyLabel = document.createElement(\"label\");\n\t\tlet publicKeyLoadButton = document.createElement(\"button\");\n\t\tlet publicKeyField = document.createElement(\"textarea\");\n\t\tlet hashLabel = document.createElement(\"label\");\n\t\tlet hashOption = document.createElement(\"select\");\n\t\tlet saltLabel = document.createElement(\"label\");\n\t\tlet saltGenerateButton = document.createElement(\"button\");\n\t\tlet saltField = document.createElement(\"textarea\");\n\t\tlet iterationsLabel = document.createElement(\"label\");\n\t\tlet iterationsField = document.createElement(\"input\");\n\t\tlet baseKeyLabel = document.createElement(\"label\");\n\t\tlet baseKeyLoadButton = document.createElement(\"button\");\n\t\tlet baseKeyField = document.createElement(\"textarea\");\n\t\tlet importAsLabel = document.createElement(\"label\");\n\t\tlet importAsOption = document.createElement(\"select\");\n\t\tlet namedCurveLabel = document.createElement(\"label\");\n\t\tlet namedCurveOption = document.createElement(\"select\");\n\t\tlet lengthLabel = document.createElement(\"label\");\n\t\tlet lengthField = document.createElement(\"input\");\n\t\tlet deriveButton = document.createElement(\"button\");\n\t\tlet derivedBitsLabel = document.createElement(\"label\");\n\t\tlet derivedBitsSaveButton = document.createElement(\"button\");\n\t\tlet derivedBitsField = document.createElement(\"textarea\");\n\n\t\tlet algorithms = [ \"ECDH\", \"HKDF\", \"PBKDF2\", \"X25519\" ];\n\t\tlet hashes = [ \"SHA-256\", \"SHA-384\", \"SHA-512\", \"SHA-1\" ];\n\t\tlet namedCurves = [ \"P-256\", \"P-384\", \"P-521\" ];\n\t\tlet importAs = {\n\t\t\tjwk: \"JSON Web Key\",\n\t\t\traw: await availableAPIs.lookupLocale(\"RAW_HEX_DATA\")\n\t\t};\n\n\t\tbackButton.innerText = \"<-\";\n\t\tpageHeaderText.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DERIVEBITS\");\n\t\talgorithmLabel.innerText = await availableAPIs.lookupLocale(\"ALGORITHM_FIELD\");\n\t\tpublicKeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_PUBKEY_FIELD\");\n\t\tpublicKeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\thashLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_HASH_FIELD\");\n\t\tsaltLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_SALT_FIELD\");\n\t\tsaltGenerateButton.innerText = await availableAPIs.lookupLocale(\"REGENERATE\");\n\t\titerationsLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_ITERATIONS_FIELD\");\n\t\tbaseKeyLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_BASEKEY_FIELD\");\n\t\tbaseKeyLoadButton.innerText = await availableAPIs.lookupLocale(\"LOAD_BTN\");\n\t\timportAsLabel.innerText = await availableAPIs.lookupLocale(\"IMPORT_AS_FIELD\");\n\t\tnamedCurveLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_NC_FIELD\");\n\t\tlengthLabel.innerText = await availableAPIs.lookupLocale(\"LENGTH_FIELD\");\n\t\tderiveButton.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DERIVEBITS_ACTION\");\n\t\tderivedBitsLabel.innerText = await availableAPIs.lookupLocale(\"CRYPTO_DERIVEOUT_FIELD\");\n\t\tderivedBitsSaveButton.innerText = await availableAPIs.lookupLocale(\"SAVE_BTN\");\n\n\t\tpage.appendChild(algorithmLabel);\n\t\tpage.appendChild(algorithmOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(publicKeyLabel);\n\t\tpage.appendChild(publicKeyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(publicKeyField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(hashLabel);\n\t\tpage.appendChild(hashOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(saltLabel);\n\t\tpage.appendChild(saltGenerateButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(saltField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(iterationsLabel);\n\t\tpage.appendChild(iterationsField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(baseKeyLabel);\n\t\tpage.appendChild(baseKeyLoadButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(baseKeyField);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(importAsLabel);\n\t\tpage.appendChild(importAsOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(namedCurveLabel);\n\t\tpage.appendChild(namedCurveOption);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(lengthLabel);\n\t\tpage.appendChild(lengthField);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(deriveButton);\n\t\tpage.appendChild(document.createElement(\"hr\"));\n\t\tpage.appendChild(derivedBitsLabel);\n\t\tpage.appendChild(derivedBitsSaveButton);\n\t\tpage.appendChild(document.createElement(\"br\"));\n\t\tpage.appendChild(derivedBitsField);\n\n\t\titerationsField.type = \"number\";\n\t\tlengthField.type = \"number\";\n\t\tlengthField.value = 256;\n\t\tderivedBitsField.readOnly = true;\n\n\t\tfor (let algorithm of algorithms) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = algorithm;\n\t\t\toption.innerText = algorithm;\n\t\t\talgorithmOption.appendChild(option);\n\t\t}\n\n\t\tfor (let hash of hashes) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = hash;\n\t\t\toption.innerText = hash;\n\t\t\thashOption.appendChild(option);\n\t\t}\n\n\t\tfor (let curve of namedCurves) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = curve;\n\t\t\toption.innerText = curve;\n\t\t\tnamedCurveOption.appendChild(option);\n\t\t}\n\n\t\tfor (let importType in importAs) {\n\t\t\tlet option = document.createElement(\"option\");\n\t\t\toption.value = importType;\n\t\t\toption.innerText = importAs[importType];\n\t\t\timportAsOption.appendChild(option);\n\t\t}\n\n\t\tbackButton.onclick = mainPage;\n\t\tpublicKeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) publicKeyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tbaseKeyLoadButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"load\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) baseKeyField.value = await availableAPIs.fs_read({ path: result.selected });\n\t\t}\n\t\tsaltGenerateButton.onclick = async function() {\n\t\t\tsaltField.value = u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"random\",\n\t\t\t\tcspArgument: new Uint8Array(32)\n\t\t\t}));\n\t\t}\n\t\tderivedBitsSaveButton.onclick = async function() {\n\t\t\tlet ipcPipe = await availableAPIs.createPipe();\n\t\t\tawait availableAPIs.windowVisibility(false);\n\t\t\tawait availableAPIs.startTask({ file: (await availableAPIs.getSystemMount()) + \"/apps/filePicker.js\", argPassed: [ipcPipe, \"save\"] });\n\t\t\tlet result = await availableAPIs.listenToPipe(ipcPipe);\n\t\t\tawait availableAPIs.closePipe(ipcPipe);\n\t\t\tawait availableAPIs.windowVisibility(true);\n\t\t\tif (result.success) await availableAPIs.fs_write({ path: result.selected, data: derivedBitsField.value });\n\t\t}\n\t\tderiveButton.onclick = async function() {\n\t\t\tlet baseKeyData, publicKeyData;\n\t\t\tif (importAsOption.value == \"jwk\") {\n\t\t\t\tbaseKeyData = JSON.parse(baseKeyField.value);\n\t\t\t\tpublicKeyData = JSON.parse(publicKeyField.value || \"00\");\n\t\t\t}\n\t\t\tif (importAsOption.value == \"raw\") {\n\t\t\t\tbaseKeyData = hexToU8A(baseKeyField.value);\n\t\t\t\tpublicKeyData = hexToU8A(publicKeyField.value || \"00\");\n\t\t\t}\n\t\t\tlet baseKeyImport = await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"importKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\tkeyData: baseKeyData,\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\tlength: parseInt(lengthField.value)\n\t\t\t\t\t},\n\t\t\t\t\textractable: false,\n\t\t\t\t\tkeyUsages: [ \"deriveBits\" ]\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet publicKeyImport;\n\t\t\tif (publicKeyData.value) {\n\t\t\t\tpublicKeyImport = await availableAPIs.cspOperation({\n\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\tformat: importAsOption.value,\n\t\t\t\t\t\tkeyData: publicKeyData,\n\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\t\tnamedCurve: namedCurveOption.value,\n\t\t\t\t\t\t\tlength: parseInt(lengthField.value)\n\t\t\t\t\t\t},\n\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\tkeyUsages: []\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tderivedBitsField.value = u8aToHex(new Uint8Array(await availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"deriveBits\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\talgorithm: {\n\t\t\t\t\t\tname: algorithmOption.value,\n\t\t\t\t\t\tpublic: publicKeyImport,\n\t\t\t\t\t\thash: hashOption.value,\n\t\t\t\t\t\tsalt: hexToU8A(saltField.value),\n\t\t\t\t\t\tinfo: new Uint8Array(),\n\t\t\t\t\t\titerations: parseInt(iterationsField.value),\n\t\t\t\t\t},\n\t\t\t\t\tbaseKey: baseKeyImport,\n\t\t\t\t\tlength: parseInt(lengthField.value)\n\t\t\t\t}\n\t\t\t})));\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: baseKeyImport\n\t\t\t\t}\n\t\t\t});\n\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\tcspProvider: \"basic\",\n\t\t\t\toperation: \"unloadKey\",\n\t\t\t\tcspArgument: {\n\t\t\t\t\tkey: publicKeyImport\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","5de63f5ea654384ecad2cac4c320bd21833606b0ebabf037992fa8a6d748dce94e1526f631f8e8fe331a5db1d62bba1e672647f2a55b3b8a4ba31f72d43776ab":"{\"path\":\"system/apps/crypto.js\",\"localeReferenceName\":\"CRYPTO_TOOLS_TITLE\"}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941357,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"728427591a19a7d899783c04a79a8b69aae5d8aaf9d9e4ce94930237da4ddb7ff6c34b7670228c20ab2f6786112649d546429bb9691e38d660a6dc0770f1dd05"}},"50-multimedia.fs":{"backend":{"files":{"apps":{"associations":{"aud":"6753ef4daaa581f9f45673be99c3cd5264b83cd4c3899eedb8834e2c9b2bd2cc87a85d90f50d53c6e477e20c6d235fa1c2bf16b52760cc5ef19f997ec1295365","pic":"118ae91951676e018506a437d4594a4143d8e9b5affd53e8c4d64edf83285e66b9d192b06e0d6ac72a9b32a801ce464c441e637fb6fcd9e8d82054a69513d00f","vid":"68e9225df8c155dd26f0a62dd504a9ca5e08f25b37b0e761576e81fd2d813aac58dfbaa8f80bdb6c055814698c32504fb4dcdf1c78e859bbc396fe16a89e2759"},"pictureViewer.js":"3af5bb78fcdb445f895323462a26f40269b112e38ed03b8e57dd08623cbc6a3c96397cd84a468934ae831063e3647853fae286f5d97d1a51dbd52e69bfa3e68d","videoPlayer.js":"47f33fb7ed106fd3eedf0fbad2a209ef6ff49b813694be74c065bfaf69187dea4ecaa2e716cbc5f730ffabf79d687049c4087b4b4b196bfe038ab83127d9aeed"}},"permissions":{"apps/associations/aud":{"world":"rx"},"apps/associations/pic":{"world":"rx"},"apps/associations/vid":{"world":"rx"},"apps/associations/":{"world":"rx"},"apps/pictureViewer.js":{"world":"rx"},"apps/videoPlayer.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"6753ef4daaa581f9f45673be99c3cd5264b83cd4c3899eedb8834e2c9b2bd2cc87a85d90f50d53c6e477e20c6d235fa1c2bf16b52760cc5ef19f997ec1295365":"{\"path\":\"system/apps/videoPlayer.js\",\"localeReferenceName\":\"VIDEO_PLAYER\",\"icon\":\"system/etc/icons/vid.pic\"}","118ae91951676e018506a437d4594a4143d8e9b5affd53e8c4d64edf83285e66b9d192b06e0d6ac72a9b32a801ce464c441e637fb6fcd9e8d82054a69513d00f":"{\"path\":\"system/apps/pictureViewer.js\",\"localeReferenceName\":\"PICTURE_VIEWER\",\"icon\":\"system/etc/icons/pic.pic\"}","68e9225df8c155dd26f0a62dd504a9ca5e08f25b37b0e761576e81fd2d813aac58dfbaa8f80bdb6c055814698c32504fb4dcdf1c78e859bbc396fe16a89e2759":"{\"path\":\"system/apps/videoPlayer.js\",\"localeReferenceName\":\"VIDEO_PLAYER\",\"icon\":\"system/etc/icons/vid.pic\"}","3af5bb78fcdb445f895323462a26f40269b112e38ed03b8e57dd08623cbc6a3c96397cd84a468934ae831063e3647853fae286f5d97d1a51dbd52e69bfa3e68d":"// =====BEGIN MANIFEST=====\n// association: pic\n// signer: automaticSigner\n// fnName: pictureInstaller\n// allow: FS_READ, GET_LOCALE, GET_THEME, FS_BYPASS_PERMISSIONS\n// signature: fdb42853d52f0fa68731e91fd73bdc37d389e4bdef17d25f6cb2f603fdc29f10e2e60bb2dc225b4fa93561639fdc621131e3b49c02a9103351106f38a2f6be0e\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait window.availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"PICTURE_VIEWER\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tif (exec_args instanceof Array && typeof exec_args[0] == \"string\") {\n\t\tlet path = exec_args[0];\n\t\ttry {\n\t\t\tlet div = document.createElement(\"div\");\n\t\t\tdiv.style = \"background: url(\" + JSON.stringify(await window.availableAPIs.fs_read({ path })) + \")\";\n\t\t\tdiv.style.backgroundSize = \"contain\";\n\t\t\tdiv.style.backgroundRepeat = \"no-repeat\";\n\t\t\tdiv.style.backgroundPosition = \"center\";\n\t\t\tdiv.style.position = \"absolute\";\n\t\t\tdiv.style.top = \"0\";\n\t\t\tdiv.style.left = \"0\";\n\t\t\tdiv.style.width = \"100%\";\n\t\t\tdiv.style.height = \"100%\";\n\t\t\tdiv.style.margin = \"0\";\n\t\t\tdocument.body.appendChild(div);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tdocument.body.innerText = (await availableAPIs.lookupLocale(\"INACCESSIBLE_FILE\")).replace(\"%s\", path);\n\t\t}\n\t} else {\n\t\tdocument.body.innerHTML = await availableAPIs.lookupLocale(\"FILE_NOT_SPECIFIED\");\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});","47f33fb7ed106fd3eedf0fbad2a209ef6ff49b813694be74c065bfaf69187dea4ecaa2e716cbc5f730ffabf79d687049c4087b4b4b196bfe038ab83127d9aeed":"// =====BEGIN MANIFEST=====\n// association: vid, aud\n// signer: automaticSigner\n// allow: FS_READ, GET_LOCALE, GET_THEME, FS_BYPASS_PERMISSIONS\n// signature: a968474fa243258b6fa56856c2c180196fc5723496527f09854fb16644523396d27ab8c1ff9f5ed402a727dfca05f7c5a7120106f7b49fc4595a1ceb1e3a2e02\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait window.availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"VIDEO_PLAYER\"));\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tif (await availableAPIs.isDarkThemed()) document.body.style.color = \"white\";\n\tdocument.body.innerHTML = \"<video controls id='video' style='width: 100%; height: 100%; position: absolute; top: 0; left: 0'></video>\";\n\tlet video = document.getElementById(\"video\");\n\tif (exec_args instanceof Array && typeof exec_args[0] == \"string\") {\n\t\tlet path = exec_args[0];\n\t\tlet url;\n\t\ttry {\n\t\t\turl = await window.availableAPIs.fs_read({ path });\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\tdocument.body.innerText = (await availableAPIs.lookupLocale(\"INACCESSIBLE_FILE\")).replace(\"%s\", path);\n\t\t}\n\t\tvideo.src = url;\n\t} else {\n\t\tdocument.body.innerHTML = await availableAPIs.lookupLocale(\"FILE_NOT_SPECIFIED\");\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});"},"buildInfo":{"for":"1390","version":1390,"when":1755547941368,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"6d1ce7cea8bc75005ca5c756541de46d3acac1a97e9296118713b39251ea89969d3f0e1733d201c1a63be90eec5d586e41dca481da73c5a8fa33287f9812e104"}},"50-installer-modules.fs":{"backend":{"files":{"boot":{"01-fsmodule-pre.js":"286c5b88e067fd073c66d23eceae04a5b07de40f7c94edc319e7365b9f22779832089c9ef2400bcf2dd12676bded31c961a2a2291a3203b37a48a92dcf77e5c4","02-postmodule.js":"7632be2702744c027ddc1ff693e780f924c5e52cbe0c95f7253c3698ffe0c6d202d0c81b16e1add7b5d33daa834c390a1ba71baac37a311d71b9c5e06909c632"}},"permissions":{"boot/01-fsmodule-pre.js":{"world":"rx"},"boot/02-postmodule.js":{"world":"rx"},"boot/":{"world":"rx"},"":{"world":"rx"}}},"files":{"286c5b88e067fd073c66d23eceae04a5b07de40f7c94edc319e7365b9f22779832089c9ef2400bcf2dd12676bded31c961a2a2291a3203b37a48a92dcf77e5c4":"// @pcos-app-mode native\nmodules.fs.mounts[\".installer\"] = modules.mounts.ramMount({});\nmodules.defaultSystem = \".installer\";\n// Directory structure\nmodules.fs.mkdir(\".installer/modules\");\nmodules.fs.mkdir(\".installer/root\");\nmodules.fs.mkdir(\".installer/root/.autorunNecessity\");\nmodules.fs.mkdir(\".installer/root/desktop\");\nmodules.fs.mkdir(\".installer/apps\");\nmodules.fs.mkdir(\".installer/apps/associations\");\nmodules.fs.mkdir(\".installer/apps/links\");\nmodules.fs.mkdir(\".installer/etc\");\nmodules.fs.mkdir(\".installer/etc/wallpapers\");\nmodules.fs.mkdir(\".installer/etc/security\");\nmodules.fs.write(\".installer/etc/appHarden\", JSON.stringify({\n\trequireSignature: true,\n\trequireAllowlist: true\n}));\nmodules.fs.write(\".installer/etc/security/users\", JSON.stringify({\n\troot: {\n\t\tsecurityChecks: [ { type: \"timeout\", timeout: 0 } ],\n\t\tgroups: [\"root\"],\n\t\thomeDirectory: \"system/root\"\n\t},\n\tauthui: {\n\t\tsecurityChecks: [],\n\t\tgroups: [\"authui\"],\n\t\thomeDirectory: \"system\",\n\t\tblankPrivileges: true,\n\t\tadditionalPrivilegeSet:  [ \"IPC_SEND_PIPE\", \"GET_LOCALE\", \"GET_THEME\", \"ELEVATE_PRIVILEGES\", \"FS_READ\", \"FS_LIST_PARTITIONS\", \"CSP_OPERATIONS\" ]\n\t}\n}));\nmodules.fs.write(\".installer/etc/security/automaticLogon\", \"root\");\nmodules.fs.write(\".installer/root/.darkmode\", \"false\");\nlet autorunEntry = JSON.stringify({\n\tlocaleReferenceName: \"INSTALLER_TITLE\",\n\tpath: \"system/apps/installer.js\"\n});\nmodules.fs.write(\".installer/root/.autorunNecessity/installer.lnk\", autorunEntry);\nmodules.fs.write(\".installer/root/desktop/installer.lnk\", autorunEntry);\nlet networkDefaultURL = new URL(location.origin);\nnetworkDefaultURL.protocol = \"ws\" + (networkDefaultURL.protocol == \"https:\" ? \"s\" : \"\") + \":\";\nnetworkDefaultURL.pathname = \"\";\nmodules.fs.write(\".installer/etc/network.json\", JSON.stringify({\n\turl: networkDefaultURL.toString(),\n\tucBits: 1,\n\tupdates: \"pcosserver.pc\"\n}));","7632be2702744c027ddc1ff693e780f924c5e52cbe0c95f7253c3698ffe0c6d202d0c81b16e1add7b5d33daa834c390a1ba71baac37a311d71b9c5e06909c632":"// Insert wallpapers\ntry { modules.fs.write(\"system/etc/wallpapers/lockscreen.pic\", await modules.fs.read(\"system/etc/wallpapers/pcos-lock-beta.pic\")); } catch {}\ntry { modules.fs.write(\"system/root/.wallpaper\", await modules.fs.read(\"system/etc/wallpapers/pcos-beta.pic\")); } catch {}"},"buildInfo":{"for":"1390","version":1390,"when":1755547941360,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"7e652e292f2827188814e0645739b4454d4686a92ef627d316734a867d5a3dfc2e6b153fe5afd9b45cbe36358d3feefbbe8dfe35eb8a9bac057c9bde3325930a"}}};
coreExports.tty_bios_api.println("Booting from module bundle");
let entireBoot = [];
const AsyncFunction = (async () => {}).constructor;
for (let installerModule in installerModuleBundle) {
	let reviewingModule = installerModuleBundle[installerModule];
	if (reviewingModule.backend.files.boot) {
		for (let bootFile in reviewingModule.backend.files.boot) {
			entireBoot.push([ bootFile, reviewingModule.files[reviewingModule.backend.files.boot[bootFile]] ]);
		}
	}
}
entireBoot.push(["01-fsmodule-start.js", 'let installerModuleBundle = ' + JSON.stringify(installerModuleBundle) + '; for (let installerModule in installerModuleBundle) { await modules.fs.write(".installer/modules/" + installerModule, JSON.stringify(installerModuleBundle[installerModule])); }; modules.fs.write(".installer/etc/moduleConfig.json", JSON.stringify({ local: Object.fromEntries(Object.entries(installerModuleBundle).map(a => [a[0].split("-").slice(1).join("-").split(".").slice(0, -1).join("."), a[1].buildInfo])) }));']);
entireBoot = entireBoot.sort((a, b) => a[0].localeCompare(b[0])).map(a => a[1]).join("\n");
return new AsyncFunction(entireBoot)();