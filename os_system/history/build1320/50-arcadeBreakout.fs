{"backend":{"files":{"apps":{"arcadeBreakout.js":"4ee05925e96f83ebc6a599157c044519199d6a35f423654e18cdf84f8bee5a3d893e6d43f27f69347722dfbb025ac34afc8d44274bf13b8b884fc4da14bd828a","links":{"arcadeBreakout.lnk":"d9318175d990895c6fac666537dd94b5cc15e9754c6227fd23431713d410655ebc34d9d66b35ae213a2970bac6102b9310c823825ec2e0ef115329cdf160ef5e"}}},"permissions":{"apps/arcadeBreakout.js":{"world":"rx"},"apps/links/arcadeBreakout.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"4ee05925e96f83ebc6a599157c044519199d6a35f423654e18cdf84f8bee5a3d893e6d43f27f69347722dfbb025ac34afc8d44274bf13b8b884fc4da14bd828a":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GRAB_ATTENTION\n// signature: ec5e2ab0c4a9633f6a6100de92f2251a8bf0ebdd505532b6cd6c986da100db739a697379184fa373b754c5688bffbf80c3e8708292e4d09c8fafb8887cad492a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\t// Gamedev-Canvas-workshop by Andrzej Mazur and Mozilla Contributors (https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses) is licensed under CC-BY-SA 2.5 (http://creativecommons.org/licenses/by-sa/2.5/).\n\t// Any copyright to code samples and snippets is dedicated to the Public Domain (http://creativecommons.org/publicdomain/zero/1.0/).\n\t// Adapted to PCOS v3 by PC\n\tawait availableAPIs.windowTitleSet(\"Breakout\");\n\tawait availableAPIs.windowResize([480, 357]);\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tdocument.body.style.background = \"white\";\n\tlet startButton = document.createElement(\"button\");\n\tstartButton.innerText = \"Start\";\n\tlet canvas = document.createElement(\"canvas\");\n\tcanvas.width = 480;\n\tcanvas.height = 320;\n\tcanvas.style = \"width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;\";\n\tdocument.body.appendChild(canvas);\n\tdocument.body.appendChild(startButton);\n\tlet ctx = canvas.getContext(\"2d\");\n\tlet ballRadius = 10;\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height - 30;\n\tlet dx = 2;\n\tlet dy = -2;\n\tlet paddleHeight = 10;\n\tlet paddleWidth = 75;\n\tlet paddleX = (canvas.width - paddleWidth) / 2;\n\tlet rightPressed = false;\n\tlet leftPressed = false;\n\tlet brickRowCount = 5;\n\tlet brickColumnCount = 3;\n\tlet brickWidth = 75;\n\tlet brickHeight = 20;\n\tlet brickPadding = 10;\n\tlet brickOffsetTop = 30;\n\tlet brickOffsetLeft = 30;\n\tlet score = 0;\n\tlet lives = 3;\n\n\tlet bricks = [];\n\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\tbricks[c] = [];\n\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\tbricks[c][r] = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstatus: 1\n\t\t\t};\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"keydown\", keyDownHandler, false);\n\tdocument.addEventListener(\"keyup\", keyUpHandler, false);\n\tdocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\n\n\tfunction keyDownHandler(e) {\n\t\tif (e.code == \"ArrowRight\") {\n\t\t\trightPressed = true;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = true;\n\t\t}\n\t}\n\n\tfunction keyUpHandler(e) {\n\t\tif (e.code == 'ArrowRight') {\n\t\t\trightPressed = false;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = false;\n\t\t}\n\t}\n\n\tfunction mouseMoveHandler(e) {\n\t\tlet relativeX = e.clientX - canvas.offsetLeft;\n\t\tif (relativeX > 0 && relativeX < canvas.width) {\n\t\t\tpaddleX = relativeX - paddleWidth / 2;\n\t\t}\n\t}\n\n\tfunction collisionDetection() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tlet b = bricks[c][r];\n\t\t\t\tif (b.status == 1) {\n\t\t\t\t\tif (x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {\n\t\t\t\t\t\tdy = -dy;\n\t\t\t\t\t\tb.status = 0;\n\t\t\t\t\t\tscore++;\n\t\t\t\t\t\tif (score == brickRowCount * brickColumnCount) {\n\t\t\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawBall() {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, ballRadius, 0, Math.PI * 2);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawPaddle() {\n\t\tctx.beginPath();\n\t\tctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawBricks() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tif (bricks[c][r].status == 1) {\n\t\t\t\t\tlet brickX = (r * (brickWidth + brickPadding)) + brickOffsetLeft;\n\t\t\t\t\tlet brickY = (c * (brickHeight + brickPadding)) + brickOffsetTop;\n\t\t\t\t\tbricks[c][r].x = brickX;\n\t\t\t\t\tbricks[c][r].y = brickY;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.rect(brickX, brickY, brickWidth, brickHeight);\n\t\t\t\t\tctx.fillStyle = \"#0095DD\";\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawScore() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Score: \" + score, 8, 20);\n\t}\n\n\tfunction drawLives() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Lives: \" + lives, canvas.width - 65, 20);\n\t}\n\n\tfunction draw() {\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tdrawBricks();\n\t\tdrawBall();\n\t\tdrawPaddle();\n\t\tdrawScore();\n\t\tdrawLives();\n\t\tcollisionDetection();\n\n\t\tif (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {\n\t\t\tdx = -dx;\n\t\t}\n\t\tif (y + dy < ballRadius) {\n\t\t\tdy = -dy;\n\t\t} else if (y + dy > canvas.height - ballRadius) {\n\t\t\tif (x > paddleX && x < paddleX + paddleWidth) {\n\t\t\t\tdy = -dy;\n\t\t\t} else {\n\t\t\t\tlives--;\n\t\t\t\tif (!lives) {\n\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t} else {\n\t\t\t\t\tx = canvas.width / 2;\n\t\t\t\t\ty = canvas.height - 30;\n\t\t\t\t\tdx = 2;\n\t\t\t\t\tdy = -2;\n\t\t\t\t\tpaddleX = (canvas.width - paddleWidth) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (rightPressed && paddleX < canvas.width - paddleWidth) {\n\t\t\tpaddleX += 7;\n\t\t} else if (leftPressed && paddleX > 0) {\n\t\t\tpaddleX -= 7;\n\t\t}\n\n\t\tx += dx;\n\t\ty += dy;\n\t\trequestAnimationFrame(draw);\n\t}\n\tstartButton.onclick = function() {\n\t\tstartButton.remove();\n\t\tdraw();\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});\nnull;","d9318175d990895c6fac666537dd94b5cc15e9754c6227fd23431713d410655ebc34d9d66b35ae213a2970bac6102b9310c823825ec2e0ef115329cdf160ef5e":"{\"path\":\"system/apps/arcadeBreakout.js\",\"name\":\"Breakout\"}"},"buildInfo":{"for":"1320","when":1750530620185,"signer":"moduleSigner","critical":false,"signature":"5883f47e6aa53412092e8eb9231bae8f6c7a32d1ae60bcd2cdd8f781af118cf4942c9a0325f106b1fa7e78ca1dd7f09a565221b98dee9f8143ec13ea2d466d81"}}