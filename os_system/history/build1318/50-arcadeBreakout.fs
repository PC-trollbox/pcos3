{"backend":{"files":{"apps":{"arcadeBreakout.js":"1d89d2e9b6f2ad7035a4038dfc4a7f3c17ba4e5a2ccc42aef8f98d0b0c088b195a466aa6a3a7b73fdfffc50fb2836820ed08a992d9eb08fad043f527d4cddb9c","links":{"arcadeBreakout.lnk":"fdecfcf2ee40be36b6f9a333657eabe7e4d2459182ce4c5ec595850b7a20eaf0ad9a60305080f5b8c2a39b95e416a9bbd80ddca8db9afb5ca44e78e9a4b9c29a"}}},"permissions":{"apps/arcadeBreakout.js":{"world":"rx"},"apps/links/arcadeBreakout.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"1d89d2e9b6f2ad7035a4038dfc4a7f3c17ba4e5a2ccc42aef8f98d0b0c088b195a466aa6a3a7b73fdfffc50fb2836820ed08a992d9eb08fad043f527d4cddb9c":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GRAB_ATTENTION\n// signature: eb11d1e428ed959380478cb2bb83daaaf32ad3480b1f52965dba79874a91d8c64d110e770291ac09fc29d13fbbd10b4844b3b3c8fffbf3d97357dbbf73c3ccd8\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\t// Gamedev-Canvas-workshop by Andrzej Mazur and Mozilla Contributors (https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses) is licensed under CC-BY-SA 2.5 (http://creativecommons.org/licenses/by-sa/2.5/).\n\t// Any copyright to code samples and snippets is dedicated to the Public Domain (http://creativecommons.org/publicdomain/zero/1.0/).\n\t// Adapted to PCOS v3 by PC\n\tawait availableAPIs.windowTitleSet(\"Breakout\");\n\tawait availableAPIs.windowResize([480, 357]);\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tdocument.body.style.background = \"white\";\n\tlet startButton = document.createElement(\"button\");\n\tstartButton.innerText = \"Start\";\n\tlet canvas = document.createElement(\"canvas\");\n\tcanvas.width = 480;\n\tcanvas.height = 320;\n\tcanvas.style = \"width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;\";\n\tdocument.body.appendChild(canvas);\n\tdocument.body.appendChild(startButton);\n\tlet ctx = canvas.getContext(\"2d\");\n\tlet ballRadius = 10;\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height - 30;\n\tlet dx = 2;\n\tlet dy = -2;\n\tlet paddleHeight = 10;\n\tlet paddleWidth = 75;\n\tlet paddleX = (canvas.width - paddleWidth) / 2;\n\tlet rightPressed = false;\n\tlet leftPressed = false;\n\tlet brickRowCount = 5;\n\tlet brickColumnCount = 3;\n\tlet brickWidth = 75;\n\tlet brickHeight = 20;\n\tlet brickPadding = 10;\n\tlet brickOffsetTop = 30;\n\tlet brickOffsetLeft = 30;\n\tlet score = 0;\n\tlet lives = 3;\n\n\tlet bricks = [];\n\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\tbricks[c] = [];\n\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\tbricks[c][r] = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstatus: 1\n\t\t\t};\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"keydown\", keyDownHandler, false);\n\tdocument.addEventListener(\"keyup\", keyUpHandler, false);\n\tdocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\n\n\tfunction keyDownHandler(e) {\n\t\tif (e.code == \"ArrowRight\") {\n\t\t\trightPressed = true;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = true;\n\t\t}\n\t}\n\n\tfunction keyUpHandler(e) {\n\t\tif (e.code == 'ArrowRight') {\n\t\t\trightPressed = false;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = false;\n\t\t}\n\t}\n\n\tfunction mouseMoveHandler(e) {\n\t\tlet relativeX = e.clientX - canvas.offsetLeft;\n\t\tif (relativeX > 0 && relativeX < canvas.width) {\n\t\t\tpaddleX = relativeX - paddleWidth / 2;\n\t\t}\n\t}\n\n\tfunction collisionDetection() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tlet b = bricks[c][r];\n\t\t\t\tif (b.status == 1) {\n\t\t\t\t\tif (x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {\n\t\t\t\t\t\tdy = -dy;\n\t\t\t\t\t\tb.status = 0;\n\t\t\t\t\t\tscore++;\n\t\t\t\t\t\tif (score == brickRowCount * brickColumnCount) {\n\t\t\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawBall() {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, ballRadius, 0, Math.PI * 2);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawPaddle() {\n\t\tctx.beginPath();\n\t\tctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawBricks() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tif (bricks[c][r].status == 1) {\n\t\t\t\t\tlet brickX = (r * (brickWidth + brickPadding)) + brickOffsetLeft;\n\t\t\t\t\tlet brickY = (c * (brickHeight + brickPadding)) + brickOffsetTop;\n\t\t\t\t\tbricks[c][r].x = brickX;\n\t\t\t\t\tbricks[c][r].y = brickY;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.rect(brickX, brickY, brickWidth, brickHeight);\n\t\t\t\t\tctx.fillStyle = \"#0095DD\";\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawScore() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Score: \" + score, 8, 20);\n\t}\n\n\tfunction drawLives() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Lives: \" + lives, canvas.width - 65, 20);\n\t}\n\n\tfunction draw() {\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tdrawBricks();\n\t\tdrawBall();\n\t\tdrawPaddle();\n\t\tdrawScore();\n\t\tdrawLives();\n\t\tcollisionDetection();\n\n\t\tif (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {\n\t\t\tdx = -dx;\n\t\t}\n\t\tif (y + dy < ballRadius) {\n\t\t\tdy = -dy;\n\t\t} else if (y + dy > canvas.height - ballRadius) {\n\t\t\tif (x > paddleX && x < paddleX + paddleWidth) {\n\t\t\t\tdy = -dy;\n\t\t\t} else {\n\t\t\t\tlives--;\n\t\t\t\tif (!lives) {\n\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t} else {\n\t\t\t\t\tx = canvas.width / 2;\n\t\t\t\t\ty = canvas.height - 30;\n\t\t\t\t\tdx = 2;\n\t\t\t\t\tdy = -2;\n\t\t\t\t\tpaddleX = (canvas.width - paddleWidth) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (rightPressed && paddleX < canvas.width - paddleWidth) {\n\t\t\tpaddleX += 7;\n\t\t} else if (leftPressed && paddleX > 0) {\n\t\t\tpaddleX -= 7;\n\t\t}\n\n\t\tx += dx;\n\t\ty += dy;\n\t\trequestAnimationFrame(draw);\n\t}\n\tstartButton.onclick = function() {\n\t\tstartButton.remove();\n\t\tdraw();\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});\nnull;","fdecfcf2ee40be36b6f9a333657eabe7e4d2459182ce4c5ec595850b7a20eaf0ad9a60305080f5b8c2a39b95e416a9bbd80ddca8db9afb5ca44e78e9a4b9c29a":"{\"path\":\"system/apps/arcadeBreakout.js\",\"name\":\"Breakout\"}"},"buildInfo":{"for":"1318","when":1750516408904,"signer":"moduleSigner","critical":false,"signature":"3c03de6a5498b5b27915cbfbb8ec6cfb5e6160da6e2d8c5fdcd9625b5906c7e4f90be45551b50f8fe5e4c891b504e58f56a2d2da8135e35b338efef8751802a1"}}