{"backend":{"files":{"apps":{"arcadeBreakout.js":"c1e1d8c5667d9ae1f31c1779044ac3477211ae7b1327c516420868e90d55f0a9162742285697d4c758194d9fc663f23aa6805f6c06396de46b8435959e8e9cdc","links":{"arcadeBreakout.lnk":"4861379c733acb77802fa4d7584d514d1eb2222a06be39489864ebaafde64a362a0d551c25044c23b1b9b3a3e3729f6c3e5653b3b4aed2e279b82f03408813dc"}}},"permissions":{"apps/arcadeBreakout.js":{"world":"rx"},"apps/links/arcadeBreakout.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"c1e1d8c5667d9ae1f31c1779044ac3477211ae7b1327c516420868e90d55f0a9162742285697d4c758194d9fc663f23aa6805f6c06396de46b8435959e8e9cdc":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GRAB_ATTENTION\n// signature: 5ca1affe7c03a80770c4bfbcaaa12dac4b234689362e815fc580229ab59a085c13ddb71473f0576d43b22401ad6824f9f272ef6290c9a8e6c7dc5ae70feda30d\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\t// Gamedev-Canvas-workshop by Andrzej Mazur and Mozilla Contributors (https://developer.mozilla.org/en-US/docs/MDN/About#Copyrights_and_licenses) is licensed under CC-BY-SA 2.5 (http://creativecommons.org/licenses/by-sa/2.5/).\n\t// Any copyright to code samples and snippets is dedicated to the Public Domain (http://creativecommons.org/publicdomain/zero/1.0/).\n\t// Adapted to PCOS v3 by PC\n\tawait availableAPIs.windowTitleSet(\"Breakout\");\n\tawait availableAPIs.windowResize([480, 357]);\n\tdocument.body.style.fontFamily = \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\";\n\tdocument.body.style.background = \"white\";\n\tlet startButton = document.createElement(\"button\");\n\tstartButton.innerText = \"Start\";\n\tlet canvas = document.createElement(\"canvas\");\n\tcanvas.width = 480;\n\tcanvas.height = 320;\n\tcanvas.style = \"width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: -1;\";\n\tdocument.body.appendChild(canvas);\n\tdocument.body.appendChild(startButton);\n\tlet ctx = canvas.getContext(\"2d\");\n\tlet ballRadius = 10;\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height - 30;\n\tlet dx = 2;\n\tlet dy = -2;\n\tlet paddleHeight = 10;\n\tlet paddleWidth = 75;\n\tlet paddleX = (canvas.width - paddleWidth) / 2;\n\tlet rightPressed = false;\n\tlet leftPressed = false;\n\tlet brickRowCount = 5;\n\tlet brickColumnCount = 3;\n\tlet brickWidth = 75;\n\tlet brickHeight = 20;\n\tlet brickPadding = 10;\n\tlet brickOffsetTop = 30;\n\tlet brickOffsetLeft = 30;\n\tlet score = 0;\n\tlet lives = 3;\n\n\tlet bricks = [];\n\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\tbricks[c] = [];\n\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\tbricks[c][r] = {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstatus: 1\n\t\t\t};\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"keydown\", keyDownHandler, false);\n\tdocument.addEventListener(\"keyup\", keyUpHandler, false);\n\tdocument.addEventListener(\"mousemove\", mouseMoveHandler, false);\n\n\tfunction keyDownHandler(e) {\n\t\tif (e.code == \"ArrowRight\") {\n\t\t\trightPressed = true;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = true;\n\t\t}\n\t}\n\n\tfunction keyUpHandler(e) {\n\t\tif (e.code == 'ArrowRight') {\n\t\t\trightPressed = false;\n\t\t} else if (e.code == 'ArrowLeft') {\n\t\t\tleftPressed = false;\n\t\t}\n\t}\n\n\tfunction mouseMoveHandler(e) {\n\t\tlet relativeX = e.clientX - canvas.offsetLeft;\n\t\tif (relativeX > 0 && relativeX < canvas.width) {\n\t\t\tpaddleX = relativeX - paddleWidth / 2;\n\t\t}\n\t}\n\n\tfunction collisionDetection() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tlet b = bricks[c][r];\n\t\t\t\tif (b.status == 1) {\n\t\t\t\t\tif (x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {\n\t\t\t\t\t\tdy = -dy;\n\t\t\t\t\t\tb.status = 0;\n\t\t\t\t\t\tscore++;\n\t\t\t\t\t\tif (score == brickRowCount * brickColumnCount) {\n\t\t\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawBall() {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, ballRadius, 0, Math.PI * 2);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawPaddle() {\n\t\tctx.beginPath();\n\t\tctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fill();\n\t\tctx.closePath();\n\t}\n\n\tfunction drawBricks() {\n\t\tfor (let c = 0; c < brickColumnCount; c++) {\n\t\t\tfor (let r = 0; r < brickRowCount; r++) {\n\t\t\t\tif (bricks[c][r].status == 1) {\n\t\t\t\t\tlet brickX = (r * (brickWidth + brickPadding)) + brickOffsetLeft;\n\t\t\t\t\tlet brickY = (c * (brickHeight + brickPadding)) + brickOffsetTop;\n\t\t\t\t\tbricks[c][r].x = brickX;\n\t\t\t\t\tbricks[c][r].y = brickY;\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.rect(brickX, brickY, brickWidth, brickHeight);\n\t\t\t\t\tctx.fillStyle = \"#0095DD\";\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction drawScore() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Score: \" + score, 8, 20);\n\t}\n\n\tfunction drawLives() {\n\t\tctx.font = \"16px Arial\";\n\t\tctx.fillStyle = \"#0095DD\";\n\t\tctx.fillText(\"Lives: \" + lives, canvas.width - 65, 20);\n\t}\n\n\tfunction draw() {\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tdrawBricks();\n\t\tdrawBall();\n\t\tdrawPaddle();\n\t\tdrawScore();\n\t\tdrawLives();\n\t\tcollisionDetection();\n\n\t\tif (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {\n\t\t\tdx = -dx;\n\t\t}\n\t\tif (y + dy < ballRadius) {\n\t\t\tdy = -dy;\n\t\t} else if (y + dy > canvas.height - ballRadius) {\n\t\t\tif (x > paddleX && x < paddleX + paddleWidth) {\n\t\t\t\tdy = -dy;\n\t\t\t} else {\n\t\t\t\tlives--;\n\t\t\t\tif (!lives) {\n\t\t\t\t\tthrow new Error(\"stop game\");\n\t\t\t\t} else {\n\t\t\t\t\tx = canvas.width / 2;\n\t\t\t\t\ty = canvas.height - 30;\n\t\t\t\t\tdx = 2;\n\t\t\t\t\tdy = -2;\n\t\t\t\t\tpaddleX = (canvas.width - paddleWidth) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (rightPressed && paddleX < canvas.width - paddleWidth) {\n\t\t\tpaddleX += 7;\n\t\t} else if (leftPressed && paddleX > 0) {\n\t\t\tpaddleX -= 7;\n\t\t}\n\n\t\tx += dx;\n\t\ty += dy;\n\t\trequestAnimationFrame(draw);\n\t}\n\tstartButton.onclick = function() {\n\t\tstartButton.remove();\n\t\tdraw();\n\t}\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n});\nnull;","4861379c733acb77802fa4d7584d514d1eb2222a06be39489864ebaafde64a362a0d551c25044c23b1b9b3a3e3729f6c3e5653b3b4aed2e279b82f03408813dc":"{\"path\":\"system/apps/arcadeBreakout.js\",\"name\":\"Breakout\"}"},"buildInfo":{"for":"1365","version":1365,"when":1755284642978,"signer":"moduleSigner","critical":false,"bootOrder":"50","signature":"3ea87941c6ebc93a3f527198fa9d516c98f5713afb99c54b2159a61df5064a3218a5d98faa9e8fbb3dfd7000a3d9a4a2b5fd7590b848e79a8c74eeccd5043b02"}}