{"backend":{"files":{"apps":{"batteryinfo.js":"50f60ad5efe0e7b0e2ff675404526bc94ee4ccade289b2debe5ee564db3236a3627e0b78339ae469464caf48cfb6cf013a8f3bd914736df84d3c6346902762c7","cat.js":"4582613ce49252d527a286d7f60da1b186695ec32047f71f826848e2cb8caa966df8d66f3a7d1f6b3635529a61619272e5448a477f91c49ee590b75983294684","chgrp.js":"563a1821a5f0f2b991a6e76d7eeda3999299ba6690d664c058bcc3ca2b9bff7f668f0e8f29fb37ed9afd97d7a051e88cb9d3d39d547b48a737fa4700cc79de2c","chmod.js":"ffec427a94ad16406002db0c00e82aef9d01520f589d246fc84f0e0544f72416a55c2ca30a3013f2fd2f9e3a4856416dd4fe1a7f660b3a405827841fe3b8a9cf","chown.js":"c85dc86516296a0e8ff9dbe0bdc03e9cfd4230e984ce7f36280c098d6d60e5fe27e292ebf298c6598510aaf1e4c15dcc79effac58e97bdd2b75bc79e8dafd21e","cp.js":"eacacdeb5caadef239352e5f00e90c0aa69ec521813168b42e35f420a77d0222078af60df7538eaf2297824f97a11b5c01ff06277a0373e78f0db2af8a19f976","date.js":"776bbe371987e3c6b7d03c96f10a77e999e25010b8e96ca072417f598bf49bf98be032af7051f1947693d6bd089e4cf4802e86bd2078d6135907da1114a7e40a","diff.js":"8b58c56571141b1244a22b1a16c32042d99d20c433ecc45f32f108b48c8ff711f6736072990acdd1c3697de5a6dfda31024eddc1ebe997b732a788f2a9c5c3a0","links":{"terminal.lnk":"1bde09407941d223b626c6fba3d19b1522afa1c4ef45e718a9a192c4da68af705e253927ca05b3ad5dd9a71eff8030147d2402736aacd5bb9961e27bc99f6dcb"},"ls.js":"401269c34fb213b843a86e911e8c87ee1798f517aadf2bc49102241eee3559392a1531f11f4766633807ac93f70ddaca789177384384f74b9eeb405aeb06fd15","mkdir.js":"34334fc12ba572042e9a0fdd2f5ef276b2d3af12658bf9b9064db26ef893531a96951c15901694160afa37dde3c8ca756c43cfe5369e55003e9fca2fe9ca38b4","patch.js":"9a2a3b74b2bd56eb2b0ee20eb6c5fe3ff09219a546530703e1ba8464058ccc40d05c36d16b0fb2d752a076646c1ecc213d6dd11206fdc3c9d832f047046b3b1f","power.js":"71b118ca6843947add31068cc2c14788482d1c9f96aa10800377b3df77a9bd1e11292fe498742fc0b8239510049166bbd871db2c5f01496fee9b33af708aafc5","rm.js":"df14440f961118115668ed1bfff40e9e11e08a318d7984ac1e7983c352e283ce4e90fe651fe72648c7a4ab7dca68203df61572caeb74ceaefb31edd328f5add5","runKlvlCode.js":"528a135c4f3dac27d9dbca32a2d97abe4923408b60fd4815f2e22a96e8a67a39f04856ff36bff6aa3afa92dbcf0c68825ceb56a7e6a16c26aecc8f8ba5b1a9f1","terminal.js":"3f803dcaf807a234e9e0f65332ad70be17942ff6ae4443859dd7dc2e82ec8675d97f908fd080b805d61d23590274694b976b6cb73c97d00918c19753ecda4b50","uptime.js":"cfe36f67fc0d675a6985b42235d813257adc3012a6eefe968c4b198993c4fea24a4619a176a9a0abbc843ea7366d24bfab0cf3348c2cec6af5ceaaf8daf818a7","write.js":"370650e90ee4df51e5c07f551c8fb4741372acb5de73cd6bbe3a35d7a898c74b9cd85185695f9f17da00cf6398bccb94b18777c0b4b2c45b9ea845ecb21c33d8"}},"permissions":{"apps/batteryinfo.js":{"world":"rx"},"apps/cat.js":{"world":"rx"},"apps/chgrp.js":{"world":"rx"},"apps/chmod.js":{"world":"rx"},"apps/chown.js":{"world":"rx"},"apps/cp.js":{"world":"rx"},"apps/date.js":{"world":"rx"},"apps/diff.js":{"world":"rx"},"apps/links/terminal.lnk":{"world":"rx"},"apps/links/":{"world":"rx"},"apps/ls.js":{"world":"rx"},"apps/mkdir.js":{"world":"rx"},"apps/patch.js":{"world":"rx"},"apps/power.js":{"world":"rx"},"apps/rm.js":{"world":"rx"},"apps/runKlvlCode.js":{"world":"rx"},"apps/terminal.js":{"world":"rx"},"apps/uptime.js":{"world":"rx"},"apps/write.js":{"world":"rx"},"apps/":{"world":"rx"},"":{"world":"rx"}}},"files":{"50f60ad5efe0e7b0e2ff675404526bc94ee4ccade289b2debe5ee564db3236a3627e0b78339ae469464caf48cfb6cf013a8f3bd914736df84d3c6346902762c7":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, GET_BATTERY_STATUS\n// signature: 4c6af97c48a5681f37b26fde57bc7830a8d9af4f59c201ea54f058509e85c61dd1fa9245dc53a21c73502014a3120dddf94101638309a59be3a005f4ad245e0a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"batteryinfo: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\t\n\ttry {\n\t\tlet batteryStatus = await availableAPIs.batteryStatus();\n\t\tif (exec_args[0] == \"--robot\") await availableAPIs.toMyCLI(JSON.stringify(batteryStatus, null, \"\\t\").replaceAll(\"\\n\", \"\\r\\n\") + \"\\r\\n\");\n\t\telse await availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"BATTERY_STATUS_\" + (batteryStatus.charging ? \"CHARGING\" : \"DISCHARGING\")))\n\t\t\t.replace(\"%s\", (batteryStatus.level * 100).toFixed(2))\n\t\t\t.replace(\"%s\", await availableAPIs.ufTimeInc([\n\t\t\t\t(batteryStatus.charging ? batteryStatus.chargingTime : batteryStatus.dischargingTime) * 1000\n\t\t\t])) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"batteryinfo: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); ","4582613ce49252d527a286d7f60da1b186695ec32047f71f826848e2cb8caa966df8d66f3a7d1f6b3635529a61619272e5448a477f91c49ee590b75983294684":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS\n// signature: 93a17862825df07b3ed84464836c436afe6e7be720ad1bb6c1ac41203981b872968f7b6ecc3435fd32e23d9af74172b49f0fc19e7614465640d0d8d519da660e\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"cat: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CAT_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CAT_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"cat: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tfor (let file of exec_args) {\n\t\ttry {\n\t\t\tlet data = await availableAPIs.fs_read({ path: file });\n\t\t\tawait availableAPIs.toMyCLI(data);\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"cat: \" + file + \": \" + await availableAPIs.lookupLocale(e.message));\n\t\t}\n\t}\n\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","563a1821a5f0f2b991a6e76d7eeda3999299ba6690d664c058bcc3ca2b9bff7f668f0e8f29fb37ed9afd97d7a051e88cb9d3d39d547b48a737fa4700cc79de2c":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: a90311ed88d999da9706f4b6d5423c3ca2a64b5e737ac2712e9f144b6ecfb29670ea56a5c9ca15cbc989bb66a896762df9ef194db258ae366de4cbfb50d64c00\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chgrp: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHGRP_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHGRP_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chgrp: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chgrp({ path: exec_args[1], newGrp: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chgrp: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message)) + \"\\r\\n\";\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","ffec427a94ad16406002db0c00e82aef9d01520f589d246fc84f0e0544f72416a55c2ca30a3013f2fd2f9e3a4856416dd4fe1a7f660b3a405827841fe3b8a9cf":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: 953e1f9115b56ac0f9b140da44f8a1f7afe5a18618e4de1834cc328953759b5baab4663961ce2cd148a861c6227e3e9f448de3091fa220a760496bb1222d8308\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chmod: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHMOD_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHMOD_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CHMOD_MODE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CHMOD_MODE_CONVERT\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chmod: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chmod({ path: exec_args[1], newPermissions: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chmod: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","c85dc86516296a0e8ff9dbe0bdc03e9cfd4230e984ce7f36280c098d6d60e5fe27e292ebf298c6598510aaf1e4c15dcc79effac58e97bdd2b75bc79e8dafd21e":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_CHANGE_PERMISSION, FS_BYPASS_PERMISSIONS\n// signature: b4b8095596a74ae9bd42c95402ef2e580aa85742e1f583292511e890fba7daad438ef97ef25078a080c02d218979a1c7c0fd8bd42a33f5ea0706dc44597a3303\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"chown: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHOWN_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CHOWN_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"chown: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_chown({ path: exec_args[1], newUser: exec_args[0] });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"chown: \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","eacacdeb5caadef239352e5f00e90c0aa69ec521813168b42e35f420a77d0222078af60df7538eaf2297824f97a11b5c01ff06277a0373e78f0db2af8a19f976":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, FS_CHANGE_PERMISSION\n// signature: 609e271498254f472563a2949ed2804938c89de2475d8d35c9fe1daa9b7d9c5b359aa3af5e1fc65f670c5f6675cb01c0e17bf7dfd332a8fdb87297715710db0f\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"cp: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CP_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"CP_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_RECURSIVE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_FORCE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"CP_PERMISSIONS_OPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet recursive = exec_args.includes(\"--recursive\");\n\tlet force = exec_args.includes(\"--force\");\n\tlet permissions = exec_args.includes(\"--permissions\");\n\tif (recursive) exec_args.splice(exec_args.indexOf(\"--recursive\"), 1);\n\tif (force) exec_args.splice(exec_args.indexOf(\"--force\"), 1);\n\tif (permissions) exec_args.splice(exec_args.indexOf(\"--permissions\"), 1);\n\tif (exec_args.length != 2) {\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\tif (recursive) await recursiveCopy(exec_args[0], exec_args[1], force, permissions);\n\telse {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_write({\n\t\t\t\tpath: exec_args[1],\n\t\t\t\tdata: await availableAPIs.fs_read({ path: exec_args[0] })\n\t\t\t});\n\t\t\tif (permissions) {\n\t\t\t\tlet originalPermissions = await availableAPIs.fs_permissions({ path: exec_args[0] });\n\t\t\t\tawait availableAPIs.fs_chmod({ path: exec_args[1], newPermissions: originalPermissions.world });\n\t\t\t\tawait availableAPIs.fs_chgrp({ path: exec_args[1], newGrp: originalPermissions.group });\n\t\t\t\tawait availableAPIs.fs_chown({ path: exec_args[1], newUser: originalPermissions.user });\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"cp: \" + exec_args[0] + \" -> \" + exec_args[1] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\n\nasync function recursiveCopy(source, destination, force, permissions) {\n\ttry {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_mkdir({ path: destination });\n\t\t} catch {}\n\t\tfor (let sourceFile of await availableAPIs.fs_ls({ path: source })) {\n\t\t\tlet destinationFile = destination + \"/\" + sourceFile;\n\t\t\ttry {\n\t\t\t\tif (await availableAPIs.fs_isDirectory({ path: source + \"/\" + sourceFile }))\n\t\t\t\t\tawait recursiveCopy(source + \"/\" + sourceFile, destinationFile, force, permissions);\n\t\t\t\telse {\n\t\t\t\t\tawait availableAPIs.fs_write({\n\t\t\t\t\t\tpath: destinationFile,\n\t\t\t\t\t\tdata: await availableAPIs.fs_read({ path: source + \"/\" + sourceFile })\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (permissions) {\n\t\t\t\t\tlet originalPermissions = await availableAPIs.fs_permissions({ path: source + \"/\" + sourceFile });\n\t\t\t\t\tawait availableAPIs.fs_chmod({ path: destinationFile, newPermissions: originalPermissions.world });\n\t\t\t\t\tawait availableAPIs.fs_chgrp({ path: destinationFile, newGrp: originalPermissions.group });\n\t\t\t\t\tawait availableAPIs.fs_chown({ path: destinationFile, newUser: originalPermissions.owner });\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tawait availableAPIs.toMyCLI(\"cp: \" + source + \"/\" + sourceFile + \" -> \" + destinationFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\tif (!force) return await availableAPIs.terminate();\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"cp: \" + source + \" -> \" + destination + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\tif (!force) return await availableAPIs.terminate();\n\t}\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","776bbe371987e3c6b7d03c96f10a77e999e25010b8e96ca072417f598bf49bf98be032af7051f1947693d6bd089e4cf4802e86bd2078d6135907da1114a7e40a":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: NONE\n// signature: 470edc624f0fcfe0c7bde59c8b9b98297ee8c8b96f6f4ebbbb1289e3802151baf0aff340b6ce4f18f58ffd91e1b3c12bf20bba854958e374e6cd7a91f2d30707\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tawait availableAPIs.toMyCLI(new Date().toString() + \"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","8b58c56571141b1244a22b1a16c32042d99d20c433ecc45f32f108b48c8ff711f6736072990acdd1c3697de5a6dfda31024eddc1ebe997b732a788f2a9c5c3a0":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, PATCH_DIFF\n// signature: 23438e455fbeae52d2dc52acce4e7f770d9893e306d4aa3023203db69de25f0a06e610ee96c6ce297b95bd39606c79c15b81bc5d176734884a8aa2298b8bc003\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"diff: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DIFF_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"DIFF_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length != 3) {\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[2],\n\t\t\tdata: JSON.stringify(await availableAPIs.patchDiff({\n\t\t\t\toperation: \"calcPatch\",\n\t\t\t\targs: [ await availableAPIs.fs_read({ path: exec_args[0] }), await availableAPIs.fs_read({ path: exec_args[1] }) ]\n\t\t\t}))\n\t\t})\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"diff: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","1bde09407941d223b626c6fba3d19b1522afa1c4ef45e718a9a192c4da68af705e253927ca05b3ad5dd9a71eff8030147d2402736aacd5bb9961e27bc99f6dcb":"{\"path\":\"system/apps/terminal.js\",\"localeReferenceName\":\"REAL_TERMINAL_NAME\"}","401269c34fb213b843a86e911e8c87ee1798f517aadf2bc49102241eee3559392a1531f11f4766633807ac93f70ddaca789177384384f74b9eeb405aeb06fd15":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, FS_LIST_PARTITIONS\n// signature: ce09dc69235d03437089c513c08dd692e88299581c78b24acb8d66e19734e5d42f4cb5ecb9c9640345634e4b1e43eac7dfa9b37de43066add9c2b3ae83df420c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"ls: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_DESCRIPTION\") + \"\\r\\n\");\n\t\tlet sysmount = await availableAPIs.getSystemMount();\n\t\tlet systemLocale = await availableAPIs.lookupLocale(\"MOUNTPOINT_SYSTEM\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"LS_MOUNTPOINT_LIST\") + (await availableAPIs.fs_mounts()).map(a => sysmount == a ? (a + \" [\" + systemLocale + \"]\") : a).join(\", \") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"ls: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tfor (let file of exec_args) {\n\t\ttry {\n\t\t\tlet data = await availableAPIs.fs_ls({ path: file });\n\t\t\tawait availableAPIs.toMyCLI(data.map(a => JSON.stringify(a)).join(\"\\r\\n\") + \"\\r\\n\");\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"ls: \" + file + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","34334fc12ba572042e9a0fdd2f5ef276b2d3af12658bf9b9064db26ef893531a96951c15901694160afa37dde3c8ca756c43cfe5369e55003e9fca2fe9ca38b4":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_WRITE, FS_BYPASS_PERMISSIONS\n// signature: 33e930a3594065ecd3c0350017dcf3ace0a9dbe3d477f62f375b21658655fc11d43166ca56898dca14544142938dbd529919c3d7aa5fe002f49bee02d31ec40c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"mkdir: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MKDIR_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"MKDIR_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"mkdir: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_mkdir({\n\t\t\tpath: exec_args[0]\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"mkdir: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","9a2a3b74b2bd56eb2b0ee20eb6c5fe3ff09219a546530703e1ba8464058ccc40d05c36d16b0fb2d752a076646c1ecc213d6dd11206fdc3c9d832f047046b3b1f":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_WRITE, FS_BYPASS_PERMISSIONS, PATCH_DIFF\n// signature: 913e05e38b714879354c5617a328ebc37119a5a33e5f7eb57a4acee67d9b6db210338867d28f41a79ce64370f0f63cc969cb12b70210bc8f8aa3a15ea5b6820a\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"patch: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PATCH_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"PATCH_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tif (exec_args.length != 3) {\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[2],\n\t\t\tdata: (await availableAPIs.patchDiff({\n\t\t\t\toperation: \"applyPatch\",\n\t\t\t\targs: [ await availableAPIs.fs_read({ path: exec_args[0] }), JSON.parse(await availableAPIs.fs_read({ path: exec_args[1] })) ]\n\t\t\t})).join(\"\")\n\t\t})\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"patch: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","71b118ca6843947add31068cc2c14788482d1c9f96aa10800377b3df77a9bd1e11292fe498742fc0b8239510049166bbd871db2c5f01496fee9b33af708aafc5":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SYSTEM_SHUTDOWN\n// signature: 297c6c1f8404374f48179fb5c4a670164dc2f1edf75c889d66ef91c8128a759dde7e0412320441869b1d2c84492011f9a3ebbd0952aadd3645f13a1002247008\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"power: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tawait availableAPIs.attachCLI();\n\tlet pargs = {};\n\tlet ppos = [];\n\tfor (let arg of exec_args) {\n\t\tif (arg.startsWith(\"--\")) {\n\t\t\tlet key = arg.split(\"=\")[0].slice(2);\n\t\t\tlet value = arg.split(\"=\").slice(1).join(\"=\");\n\t\t\tif (arg.split(\"=\")[1] == null) value = true;\n\t\t\tif (pargs.hasOwnProperty(key)) {\n\t\t\t\tlet ogValues = pargs[key];\n\t\t\t\tif (ogValues instanceof Array) pargs[key] = [ ...ogValues, value ];\n\t\t\t\telse pargs[key] = [ ogValues, value ];\n\t\t\t} else pargs[key] = value;\n\t\t} else ppos.push(arg);\n\t}\n\n\tif (pargs.help) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"POWER_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"POWER_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"POWER_FORCE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"POWER_KEXEC\") + \"\\r\\n\");\n\t\tawait availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.shutdown({\n\t\t\tisReboot: ppos[0] == \"reboot\" || ppos[0] == \"r\" || ppos[0] == \"restart\" || ppos[0] == \"kexec\" || ppos[0] == \"k\" || pargs.kexec,\n\t\t\tisKexec: pargs.kexec || ppos[0] == \"kexec\" || ppos[0] == \"k\",\n\t\t\tforce: pargs.force\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"power: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","df14440f961118115668ed1bfff40e9e11e08a318d7984ac1e7983c352e283ce4e90fe651fe72648c7a4ab7dca68203df61572caeb74ceaefb31edd328f5add5":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, FS_CHANGE_PERMISSION, FS_REMOVE\n// signature: 4085a7bdc7b878f01ae705f2cdd19cb7f47d138074c04d5332fd8252b3cb7e1ec14bd2e190cf5a03c8cc7a317796615c6245d436869cc57e591b5084a42b6e0c\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"rm: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RM_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RM_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_RECURSIVE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"\\t\" + await availableAPIs.lookupLocale(\"OPT_FORCE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\tlet recursive = exec_args.includes(\"--recursive\");\n\tlet force = exec_args.includes(\"--force\");\n\tif (recursive) exec_args.splice(exec_args.indexOf(\"--recursive\"), 1);\n\tif (force) exec_args.splice(exec_args.indexOf(\"--force\"), 1);\n\tif (exec_args.length != 1) {\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + await availableAPIs.lookupLocale(\"ARGUMENT_COUNT_MISMATCH\") + \"\\r\\n\");\n\t\treturn await availableAPIs.terminate();\n\t}\n\tif (recursive) await recursiveRemove(exec_args[0], force);\n\telse {\n\t\ttry {\n\t\t\tawait availableAPIs.fs_rm({ path: exec_args[0] });\n\t\t} catch (e) {\n\t\t\tawait availableAPIs.toMyCLI(\"rm: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t}\n\t}\n\tawait availableAPIs.terminate();\n})();\n\nasync function recursiveRemove(target, force) {\n\ttry {\n\t\tfor (let targetFile of await availableAPIs.fs_ls({ path: target })) {\n\t\t\ttargetFile = target + \"/\" + targetFile;\n\t\t\ttry {\n\t\t\t\tif (await availableAPIs.fs_isDirectory({ path: targetFile })) await recursiveRemove(targetFile, force);\n\t\t\t\telse await availableAPIs.fs_rm({ path: targetFile });\n\t\t\t} catch (e) {\n\t\t\t\tawait availableAPIs.toMyCLI(\"rm: \" + targetFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\tif (!force) return await availableAPIs.terminate();\n\t\t\t}\n\t\t}\n\t\tawait availableAPIs.fs_rm({ path: target });\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"rm: \" + target + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\tif (!force) return await availableAPIs.terminate();\n\t}\n}\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","528a135c4f3dac27d9dbca32a2d97abe4923408b60fd4815f2e22a96e8a67a39f04856ff36bff6aa3afa92dbcf0c68825ceb56a7e6a16c26aecc8f8ba5b1a9f1":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_READ, FS_BYPASS_PERMISSIONS, RUN_KLVL_CODE\n// signature: 6eb40b3a93f29c95e9c15dfee6039503cf757bddeea7e7ff2cd1298530ce47ccc807d2f385c14b57ac2d769524d9a35bce03a9f2b11bcec2c2e7de9993703c00\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"runKlvlCode: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RKL_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"RKL_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"runKlvlCode: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.toMyCLI(JSON.stringify(await availableAPIs.runKlvlCode(await availableAPIs.fs_read({ path: exec_args[0] }))) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"runKlvlCode: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","3f803dcaf807a234e9e0f65332ad70be17942ff6ae4443859dd7dc2e82ec8675d97f908fd080b805d61d23590274694b976b6cb73c97d00918c19753ecda4b50":"// =====BEGIN MANIFEST=====\n// allow: GET_LOCALE, FS_LIST_PARTITIONS, FS_READ, MANAGE_TOKENS, ELEVATE_PRIVILEGES, FS_BYPASS_PERMISSIONS, START_TASK, START_BACKGROUND_TASK, CLI_MODIFICATIONS, GET_BUILD, LIST_TASKS, TASK_BYPASS_PERMISSIONS, CSP_OPERATIONS\n// link: lrn:REAL_TERMINAL_NAME\n// signer: automaticSigner\n// signature: d74820316fa55a1737745c077071bf4e085f6832ab2b09333612fc52f80bddb3ac56b13d3378028a9b95ca03c2d460bdba86439f527b45689ee87b22200bc700\n// =====END MANIFEST=====\nlet user_spawn_token = null;\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.attachCLI();\n\tlet privileges = await availableAPIs.getPrivileges();\n\tlet checklist = [ \"GET_LOCALE\", \"FS_LIST_PARTITIONS\", \"FS_READ\", \"MANAGE_TOKENS\", \"ELEVATE_PRIVILEGES\", \"START_TASK\", \"CLI_MODIFICATIONS\", \"GET_BUILD\", \"LIST_TASKS\", \"CSP_OPERATIONS\" ];\n\tprivileges = await availableAPIs.getPrivileges();\n\tif (!checklist.every(p => privileges.includes(p))) {\n\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\tawait availableAPIs.fromMyCLI();\n\t\treturn await availableAPIs.terminate();\n\t}\n\tawait window.availableAPIs.windowTitleSet(await availableAPIs.lookupLocale(\"REAL_TERMINAL_NAME\"));\n\t\n\tfunction parse_cmdline(cmdline) {\n\t\tvar re_next_arg = /^\\s*((?:(?:\"(?:\\\\.|[^\"])*\")|(?:'[^']*')|\\\\.|\\S)+)\\s*(.*)$/;\n\t\tvar next_arg = ['', '', cmdline];\n\t\tvar args = [];\n\t\twhile (next_arg = re_next_arg.exec(next_arg[2])) {\n\t\t\tvar quoted_arg = next_arg[1];\n\t\t\tvar unquoted_arg = \"\";\n\t\t\twhile (quoted_arg.length > 0) {\n\t\t\t\tif (/^\"/.test(quoted_arg)) {\n\t\t\t\t\tvar quoted_part = /^\"((?:\\\\.|[^\"])*)\"(.*)$/.exec(quoted_arg);\n\t\t\t\t\tunquoted_arg += quoted_part[1].replace(/\\\\(.)/g, \"$1\");\n\t\t\t\t\tquoted_arg = quoted_part[2];\n\t\t\t\t} else if (/^'/.test(quoted_arg)) {\n\t\t\t\t\tvar quoted_part = /^'([^']*)'(.*)$/.exec(quoted_arg);\n\t\t\t\t\tunquoted_arg += quoted_part[1];\n\t\t\t\t\tquoted_arg = quoted_part[2];\n\t\t\t\t} else if (/^\\\\/.test(quoted_arg)) {\n\t\t\t\t\tunquoted_arg += quoted_arg[1];\n\t\t\t\t\tquoted_arg = quoted_arg.substring(2);\n\t\t\t\t} else {\n\t\t\t\t\tunquoted_arg += quoted_arg[0];\n\t\t\t\t\tquoted_arg = quoted_arg.substring(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\targs[args.length] = unquoted_arg;\n\t\t}\n\t\treturn args;\n\t}\n\n\tlet str = \"\";\n\tlet default_user = await window.availableAPIs.getUser();\n\tlet defaultPath = await availableAPIs.getSystemMount() + \"/apps\";\n\tlet pathsForBinaries = [ defaultPath ];\n\tlet otherProcessAttached = false;\n\tlet graphic = false;\n\tlet su_stage = -1;\n\tlet suSession = null;\n\tlet hideInputMask = \"\";\n\tlet hideInput = false;\n\t\n\tasync function systemVersion() {\n\t\tawait availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"TERMINAL_INVITATION\")).replace(\"%s\", (await window.availableAPIs.getVersion())) + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"SYSTEM_BUILT_AT\")).replace(\"%s\", (new Date(await window.availableAPIs.getBuildTime())).toISOString()) + \"\\r\\n\");\t\n\t}\n\n\tawait systemVersion();\n\tawait availableAPIs.toMyCLI(\"\\r\\n\" + default_user + (privileges.includes(\"FS_BYPASS_PERMISSIONS\") ? \"#\" : \"$\") + \" \");\n\t\n\tonTermData(async function self(e, why) {\n\t\tif (otherProcessAttached) return await availableAPIs.typeIntoOtherCLI({\n\t\t\ttaskId: otherProcessAttached,\n\t\t\ttext: e,\n\t\t\thuman: true\n\t\t});\n\t\tif (e == \"\\r\") {\n\t\t\tif (why != \"su\") await availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\tif (su_stage > -1) {\n\t\t\t\tif (su_stage == 0) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsuSession = await availableAPIs.automatedLogonCreate({ desiredUser: str });\n\t\t\t\t\t\tsu_stage = 1;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tsu_stage = -1;\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\t\t}\n\t\t\t\t\tstr = \"\";\n\t\t\t\t}\n\t\t\t\twhile (su_stage >= 1) {\n\t\t\t\t\totherProcessAttached = true;\n\t\t\t\t\tif (su_stage == 2) {\n\t\t\t\t\t\tlet prompt = await availableAPIs.automatedLogonGet(suSession);\n\t\t\t\t\t\tif (prompt.type == \"zkpp_password\") {\n\t\t\t\t\t\t\tlet passwordAsKey = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"importKey\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\tformat: \"raw\",\n\t\t\t\t\t\t\t\t\tkeyData: new TextEncoder().encode(str),\n\t\t\t\t\t\t\t\t\talgorithm: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\textractable: false,\n\t\t\t\t\t\t\t\t\tkeyUsages: [\"deriveBits\"]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlet rngSeed = await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"deriveBits\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\talgorithm: {\n\t\t\t\t\t\t\t\t\t\tname: \"PBKDF2\",\n\t\t\t\t\t\t\t\t\t\tsalt: new Uint8Array(32),\n\t\t\t\t\t\t\t\t\t\titerations: 100000,\n\t\t\t\t\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbaseKey: passwordAsKey,\n\t\t\t\t\t\t\t\t\tlength: 256\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"basic\",\n\t\t\t\t\t\t\t\toperation: \"unloadKey\",\n\t\t\t\t\t\t\t\tcspArgument: passwordAsKey\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet u8aToHex = (u8a) => Array.from(u8a).map(a => a.toString(16).padStart(2, \"0\")).join(\"\");\n\t\t\t\t\t\t\tlet hexToU8A = (hex) => Uint8Array.from(hex.match(/.{1,2}/g).map(a => parseInt(a, 16)));\n\t\t\t\t\t\t\tawait availableAPIs.automatedLogonInput({ session: suSession, input: u8aToHex(await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\toperation: \"sign\",\n\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\tsecretKey: (await availableAPIs.cspOperation({\n\t\t\t\t\t\t\t\t\t\tcspProvider: \"tweetnacl\",\n\t\t\t\t\t\t\t\t\t\toperation: \"deriveKey\",\n\t\t\t\t\t\t\t\t\t\tcspArgument: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"sign\",\n\t\t\t\t\t\t\t\t\t\t\tseed: new Uint8Array(rngSeed)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})).secretKey,\n\t\t\t\t\t\t\t\t\tmessage: hexToU8A(prompt.challenge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}))});\n\t\t\t\t\t\t} else await availableAPIs.automatedLogonInput({ session: suSession, input: str });\n\t\t\t\t\t}\n\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\tstr = \"\";\n\t\t\t\t\thideInput = false;\n\t\t\t\t\thideInputMask = \"\";\n\t\t\t\t\tlet prompt = await availableAPIs.automatedLogonGet(suSession);\n\t\t\t\t\tawait availableAPIs.toMyCLI(prompt.message);\n\t\t\t\t\tsu_stage = 2;\n\t\t\t\t\tif (prompt.success != \"intermediate\") {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\t\t\t\tsu_stage = -1;\n\t\t\t\t\t\tif (prompt.success) {\n\t\t\t\t\t\t\tuser_spawn_token = prompt.token;\n\t\t\t\t\t\t\tlet processToken = await availableAPIs.getProcessToken();\n\t\t\t\t\t\t\tawait availableAPIs.setProcessToken(await availableAPIs.forkToken(user_spawn_token));\n\t\t\t\t\t\t\tprivileges = await availableAPIs.getPrivileges();\n\t\t\t\t\t\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\t\t\t\t\t\t\tawait availableAPIs.fromMyCLI();\n\t\t\t\t\t\t\t\treturn await availableAPIs.terminate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tawait availableAPIs.revokeToken(processToken);\n\t\t\t\t\t\t\tawait availableAPIs.automatedLogonDelete(suSession);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (prompt.wantsUserInput || prompt.type == \"informative\") {\n\t\t\t\t\t\tif (prompt.wantsUserInput) await availableAPIs.toMyCLI(\": \");\n\t\t\t\t\t\thideInput = prompt.type == \"password\" || prompt.type == \"informative\" || prompt.type == \"zkpp_password\";\n\t\t\t\t\t\thideInputMask = (prompt.type == \"password\" || prompt.type == \"zkpp_password\") ? \"*\" : \"\";\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (su_stage != -1) await availableAPIs.toMyCLI(\"\\r\\n\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet cmdline = [];\n\t\t\ttry {\n\t\t\t\tcmdline = parse_cmdline(str);\n\t\t\t} catch {\n\t\t\t\tawait availableAPIs.toMyCLI(\"> \");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstr = \"\";\n\t\t\tif (cmdline[0] == \"sugraph\") {\n\t\t\t\totherProcessAttached = true;\n\t\t\t\tlet authui = await availableAPIs.consentGetToken({\n\t\t\t\t\tintent: await availableAPIs.lookupLocale(\"REAL_TERMINAL_INTENT\"),\n\t\t\t\t\tname: await availableAPIs.lookupLocale(\"REAL_TERMINAL_NAME\"),\n\t\t\t\t\tdesiredUser: cmdline[1]\n\t\t\t\t});\n\t\t\t\tif (authui) {\n\t\t\t\t\tuser_spawn_token = authui;\n\t\t\t\t\tlet processToken = await availableAPIs.getProcessToken();\n\t\t\t\t\tawait availableAPIs.setProcessToken(await availableAPIs.forkToken(user_spawn_token));\n\t\t\t\t\tprivileges = await availableAPIs.getPrivileges();\n\t\t\t\t\tif (!checklist.every(p => privileges.includes(p))) {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(\"terminal: Critical permissions were denied. Press any key to exit.\\r\\n\");\n\t\t\t\t\t\tawait availableAPIs.fromMyCLI();\n\t\t\t\t\t\treturn await availableAPIs.terminate();\n\t\t\t\t\t}\n\t\t\t\t\tawait availableAPIs.revokeToken(processToken);\n\t\t\t\t} else await availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\totherProcessAttached = false;\n\t\t\t} else if (cmdline[0] == \"su\") {\n\t\t\t\tif (!cmdline[1]) {\n\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"USERNAME\") + \": \");\n\t\t\t\t\treturn su_stage = 0;\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsuSession = await availableAPIs.automatedLogonCreate({ desiredUser: cmdline[1] });\n\t\t\t\t\t\tsu_stage = 1;\n\t\t\t\t\t\treturn self(\"\\r\", \"su\");\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"AUTH_FAILED\") + \"\\r\\n\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (cmdline[0] == \"graphic\") {\n\t\t\t\tif (!cmdline[1]) await availableAPIs.toMyCLI(\"graphic: \" + graphic + \"\\r\\n\");\n\t\t\t\telse {\n\t\t\t\t\tgraphic = cmdline[1] == \"true\" || cmdline[1] == \"on\" || cmdline[1] == \"1\" || cmdline[1] == \"yes\" || cmdline[1] == \"enable\";\n\t\t\t\t}\n\t\t\t} else if (cmdline[0] == \"pushpath\") {\n\t\t\t\tif (cmdline[1]) pathsForBinaries.push(cmdline[1]);\n\t\t\t} else if (cmdline[0] == \"resetpath\") {\n\t\t\t\tpathsForBinaries = [ defaultPath ];\n\t\t\t} else if (cmdline[0] == \"lspath\") {\n\t\t\t\tawait availableAPIs.toMyCLI(pathsForBinaries.map(a => JSON.stringify(a)).join(\", \") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"REAL_TERMINAL_DEFAULT_PATH_FIELD\")).replace(\"%s\", JSON.stringify(defaultPath)) + \"\\r\\n\");\n\t\t\t} else if (cmdline[0] == \"clear\") await availableAPIs.clearMyCLI();\n\t\t\telse if (cmdline[0] == \"exit\") await availableAPIs.terminate();\n\t\t\telse if (cmdline[0] == \"ver\") await systemVersion();\n\t\t\telse if (cmdline[0] == \"help\") {\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_BUILTIN_LIST\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_VER_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_HELP_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_CLEAR_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_SUGRAPH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_SU_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_GRAPHIC_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_PUSHPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_RESETPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_LSPATH_USEDESC\") + \"\\r\\n\");\n\t\t\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"REAL_TERMINAL_EXIT_USEDESC\") + \"\\r\\n\");\n\t\t\t} else if (!cmdline.length) {} else {\n\t\t\t\tlet runFile;\n\t\t\t\ttry {\n\t\t\t\t\tif (!await availableAPIs.fs_isDirectory({ path: cmdline[0] })) runFile = cmdline[0];\n\t\t\t\t} catch {}\n\t\t\t\tfor (let path of pathsForBinaries) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet ls = await availableAPIs.fs_ls({ path });\n\t\t\t\t\t\tif (ls.includes(cmdline[0]) || ls.includes(cmdline[0] + \".js\")) {\n\t\t\t\t\t\t\tlet extensioned = ls.includes(cmdline[0] + \".js\")\n\t\t\t\t\t\t\trunFile = path + \"/\" + cmdline[0] + (extensioned ? \".js\" : \"\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch {}\n\t\t\t\t}\n\t\t\t\tif (runFile) {\n\t\t\t\t\tif (user_spawn_token) {\n\t\t\t\t\t\tlet forkedToken = await availableAPIs.forkToken(user_spawn_token);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\totherProcessAttached = true;\n\t\t\t\t\t\t\tlet spawnedTask = await availableAPIs.startTask({\n\t\t\t\t\t\t\t\tfile: runFile,\n\t\t\t\t\t\t\t\targPassed: cmdline.slice(1),\n\t\t\t\t\t\t\t\trunInBackground: !graphic,\n\t\t\t\t\t\t\t\tsilent: true,\n\t\t\t\t\t\t\t\ttoken: forkedToken\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait availableAPIs.waitForOtherCLI({ taskId: spawnedTask, bypass: forkedToken });\n\t\t\t\t\t\t\totherProcessAttached = spawnedTask;\n\t\t\t\t\t\t\t(async function() {\n\t\t\t\t\t\t\t\twhile (otherProcessAttached) {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet otherData = await availableAPIs.getOtherCLIData({ taskId: spawnedTask, bypass: forkedToken });\n\t\t\t\t\t\t\t\t\t\tif (otherData.type == \"write\") availableAPIs.toMyCLI(otherData.data);\n\t\t\t\t\t\t\t\t\t\telse if (otherData.type == \"consoleClear\") availableAPIs.clearMyCLI();\n\t\t\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t\tawait availableAPIs.waitTermination(spawnedTask);\n\t\t\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\totherProcessAttached = false;\n\t\t\t\t\t\t\tawait availableAPIs.toMyCLI(runFile + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else await availableAPIs.toMyCLI((await availableAPIs.lookupLocale(\"REAL_TERMINAL_LOGON_REQUIRED\")).replace(\"%s\", default_user) + \"\\r\\n\");\n\t\t\t\t} else await availableAPIs.toMyCLI((await window.availableAPIs.lookupLocale(\"TERM_COMMAND_NOT_FOUND\")).replace(\"%s\", cmdline[0]) + \"\\r\\n\");\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdefault_user = await window.availableAPIs.getUser();\n\t\t\t} catch {}\n\t\t\tawait availableAPIs.toMyCLI(default_user + (privileges.includes(\"FS_BYPASS_PERMISSIONS\") ? \"#\" : \"$\") + \" \");\n\t\t\treturn;\n\t\t} else if (e == '\\u007F') {\n\t\t\tif (str.length > 0) {\n\t\t\t\tstr = str.substr(0, str.length - 1);\n\t\t\t\tawait availableAPIs.toMyCLI('\\b \\b');\n\t\t\t}\n\t\t} else {\n\t\t\tif (e >= String.fromCharCode(0x20) && e <= String.fromCharCode(0x7E) || e >= '\\u00a0') {\n\t\t\t\tstr += e;\n\t\t\t\tawait availableAPIs.toMyCLI(hideInput ? hideInputMask : e);\n\t\t\t}\n\t\t}\n\t});\n})(); \n\nasync function onTermData(listener) {\n\twhile (true) {\n\t\tlistener(await availableAPIs.fromMyCLI());\n\t}\n}\naddEventListener(\"signal\", async function(e) {\n\ttry { await availableAPIs.revokeToken(user_spawn_token); } catch {}\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","cfe36f67fc0d675a6985b42235d813257adc3012a6eefe968c4b198993c4fea24a4619a176a9a0abbc843ea7366d24bfab0cf3348c2cec6af5ceaaf8daf818a7":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, SYSTEM_UPTIME\n// signature: 0290445e322eb1043a0c8981fec2f840ef68a4d5f20320453a44240dd9558396185eb4bf153ffe207adc5ef27dd8e255132e1af45165d69e496d5ed164a64203\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"uptime: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\ttry {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.ufTimeInc([ await availableAPIs.systemUptime() ]) + \"\\r\\n\");\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"uptime: \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;","370650e90ee4df51e5c07f551c8fb4741372acb5de73cd6bbe3a35d7a898c74b9cd85185695f9f17da00cf6398bccb94b18777c0b4b2c45b9ea845ecb21c33d8":"// =====BEGIN MANIFEST=====\n// signer: automaticSigner\n// allow: GET_LOCALE, FS_WRITE, FS_BYPASS_PERMISSIONS\n// signature: 68af7118360bdca4b946456cc31cd93a6ddbba842bba5faf2d4e99d5a0a638a42846fba926804349afce6fc374b96198c0619e7a9cbd8ed202a206d82f8bda07\n// =====END MANIFEST=====\n(async function() {\n\t// @pcos-app-mode isolatable\n\tawait availableAPIs.windowVisibility(false);\n\tawait availableAPIs.attachCLI();\n\tif (!(await availableAPIs.getPrivileges()).includes(\"GET_LOCALE\")) { await availableAPIs.toMyCLI(\"write: Locale permission denied\\r\\n\");\n\t\treturn await availableAPIs.terminate();\t}\n\tif (!exec_args.length) {\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"WRITE_USAGE\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(await availableAPIs.lookupLocale(\"WRITE_DESCRIPTION\") + \"\\r\\n\");\n\t\tawait availableAPIs.toMyCLI(\"write: \" + await availableAPIs.lookupLocale(\"NO_ARGUMENTS\") + \"\\r\\n\");\n\t\treturn availableAPIs.terminate();\n\t}\n\ttry {\n\t\tawait availableAPIs.fs_write({\n\t\t\tpath: exec_args[0],\n\t\t\tdata: exec_args[1]\n\t\t});\n\t} catch (e) {\n\t\tawait availableAPIs.toMyCLI(\"write: \" + exec_args[0] + \": \" + await availableAPIs.lookupLocale(e.message) + \"\\r\\n\");\n\t}\n\tawait availableAPIs.terminate();\n})();\n\naddEventListener(\"signal\", async function(e) {\n\tif (e.detail == 15) await window.availableAPIs.terminate();\n}); null;"},"buildInfo":{"for":"1331","version":"1331","when":1751655715481,"signer":"moduleSigner","critical":true,"bootOrder":"50","signature":"90a012134ff461f74be65ee367537d1c0d0d910a5d7a280471bf2b98dde832413619d12fd41fec24e6b2dbdf074e0cfa7aec8e2ecf441c2f99baada08dde620b"}}